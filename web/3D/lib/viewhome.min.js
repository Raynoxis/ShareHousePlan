/*
 * viewhome.min.js  version 7.2a
 *
 * Sweet Home 3D, Copyright (c) 2016 Emmanuel PUYBARET / eTeks <info@eteks.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
var __extends=(this&&this.__extends)||(function(){var a=function(e,c){a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(g,f){g.__proto__=f})||function(h,f){for(var g in f){if(f.hasOwnProperty(g)){h[g]=f[g]}}};return a(e,c)};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())}})();var HomeXMLHandler=(function(b){__extends(a,b);function a(c){var g=this;if(((c!=null&&c instanceof UserPreferences)||c===null)){var f=arguments;g=b.call(this)||this;if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.lightSourceMaterialNames=([]);g.shelfBoxes=([]);g.shelfElevations=([]);g.points=([]);g.furnitureVisiblePropertyNames=([]);g.printedLevelIds=([]);g.preferences=c!=null?c:new DefaultUserPreferences(false,null)}else{if(c===undefined){var f=arguments;var d=arguments;var e=null;g=b.call(this)||this;if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.lightSourceMaterialNames=([]);g.shelfBoxes=([]);g.shelfElevations=([]);g.points=([]);g.furnitureVisiblePropertyNames=([]);g.printedLevelIds=([]);g.preferences=e!=null?e:new DefaultUserPreferences(false,null);if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.lightSourceMaterialNames=([]);g.shelfBoxes=([]);g.shelfElevations=([]);g.points=([]);g.furnitureVisiblePropertyNames=([]);g.printedLevelIds=([])}else{throw new Error("invalid overload")}}return g}a.prototype.startDocument=function(){this.home=null;(this.elements.length=0);(this.attributes.length=0);(this.groupsFurniture.length=0);(function(c){for(var d in c){delete c[d]}})(this.levels);(function(c){for(var d in c){delete c[d]}})(this.joinedWalls)};a.prototype.startElement=function(h,d,f,c){var j=this;(function(k,i){return k.str=k.str.substring(0,i)})(this.buffer,0);(this.elements.push(f)>0);var e=({});for(var g=0;g<c.getLength();g++){(e[c.getQName(g)]=c.getValue(g).replace("&quot;",'"').replace("&lt;","<").replace("&gt;",">").replace("&amp;","&"))}(this.attributes.push(e)>0);if(!("property"===f)&&!("furnitureVisibleProperty"===f)&&!("textStyle"===f)){(this.properties.push({})>0);(this.textStyles.push({})>0)}if("home"===f){this.setHome(this.createHome(f,e));(this.furnitureVisiblePropertyNames.length=0);this.homeBackgroundImage=null}else{if("environment"===f){(function(i){for(var k in i){delete i[k]}})(this.textures)}else{if("level"===f){this.backgroundImage=null}else{if(("pieceOfFurniture"===f)||("doorOrWindow"===f)||("light"===f)||("shelfUnit"===f)||("furnitureGroup"===f)){(function(i){for(var k in i){delete i[k]}})(this.textures);(this.materials.length=0);(this.transformations.length=0);(this.sashes.length=0);(this.lightSources.length=0);(this.lightSourceMaterialNames.length=0);(this.shelfBoxes.length=0);(this.shelfElevations.length=0);if("furnitureGroup"===f){(this.groupsFurniture.push([])>0)}}else{if("room"===f){(function(i){for(var k in i){delete i[k]}})(this.textures);(this.points.length=0)}else{if("polyline"===f){(this.points.length=0)}else{if("label"===f){this.labelText=null}else{if("wall"===f){(function(i){for(var k in i){delete i[k]}})(this.textures);this.leftSideBaseboard=null;this.rightSideBaseboard=null}else{if("baseboard"===f){(function(k){var i=j.textures[a.UNIQUE_ATTRIBUTE];delete j.textures[a.UNIQUE_ATTRIBUTE];return i})(this.textures)}else{if("material"===f){this.materialTexture=null}}}}}}}}}}};a.prototype.characters=function(c,e,d){(function(f){f.str+=c.substr(e,d);return f})(this.buffer)};a.prototype.endElement=function(m,i,D){this.elements.pop();var p=(this.elements.length==0)?null:(function(E){return E.length==0?null:E[E.length-1]})(this.elements);var x=this.attributes.pop();if(this.homeElementName!=null&&(this.homeElementName===D)){this.setHomeAttributes(this.home,D,x)}else{if("furnitureVisibleProperty"===D){if((function(E,F){return E[F]===undefined?null:E[F]})(x,"name")==null){throw new SAXException("Missing name attribute")}(this.furnitureVisiblePropertyNames.push((function(E,F){return E[F]===undefined?null:E[F]})(x,"name"))>0)}else{if("environment"===D){this.setEnvironmentAttributes(this.home.getEnvironment(),D,x)}else{if("compass"===D){this.setCompassAttributes(this.home.getCompass(),D,x)}else{if("print"===D){this.home.setPrint(this.createPrint(x))}else{if(("printedLevel"===D)&&("print"===p)){if((function(E,F){return E[F]===undefined?null:E[F]})(x,"level")==null){throw new SAXException("Missing level attribute")}(this.printedLevelIds.push((function(E,F){return E[F]===undefined?null:E[F]})(x,"level"))>0)}else{if("level"===D){var c=this.createLevel(D,x);this.setLevelAttributes(c,D,x);(this.levels[(function(E,F){return E[F]===undefined?null:E[F]})(x,"id")]=c);this.home.addLevel(c)}else{if(("camera"===D)||("observerCamera"===D)){var y=this.createCamera(D,x);this.setCameraAttributes(y,D,x);var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");if("cameraPath"===r){var w=(this.home.getEnvironment().getVideoCameraPath().slice(0));(w.push(y)>0);this.home.getEnvironment().setVideoCameraPath(w)}else{if("topCamera"===r){var j=this.home.getTopCamera();j.setCamera(y);j.setTime(y.getTime());j.setLens(y.getLens())}else{if("observerCamera"===r){var C=this.home.getObserverCamera();C.setCamera(y);C.setTime(y.getTime());C.setLens(y.getLens());C.setFixedSize(y.isFixedSize())}else{if("storedCamera"===r){var t=(this.home.getStoredCameras().slice(0));(t.push(y)>0);this.home.setStoredCameras(t)}}}}}else{if(("pieceOfFurniture"===D)||("doorOrWindow"===D)||("light"===D)||("shelfUnit"===D)||("furnitureGroup"===D)){var g="furnitureGroup"===D?this.createFurnitureGroup(D,x,this.groupsFurniture.pop()):this.createPieceOfFurniture(D,x);this.setPieceOfFurnitureAttributes(g,D,x);if(this.homeElementName!=null&&(this.homeElementName===p)){this.home.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(g);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){g.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("furnitureGroup"===p){((function(E){return E.length==0?null:E[E.length-1]})(this.groupsFurniture).push(g)>0)}}}else{if("wall"===D){var A=this.createWall(D,x);(this.joinedWalls[(function(E,F){return E[F]===undefined?null:E[F]})(x,"id")]=new a.JoinedWall(A,(function(E,F){return E[F]===undefined?null:E[F]})(x,"wallAtStart"),(function(E,F){return E[F]===undefined?null:E[F]})(x,"wallAtEnd")));this.setWallAttributes(A,D,x);this.home.addWall(A);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){A.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("baseboard"===D){var n=this.createBaseboard(D,x);if("leftSideBaseboard"===(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute")){this.leftSideBaseboard=n}else{this.rightSideBaseboard=n}}else{if("room"===D){var B=this.createRoom(D,x,this.points.slice(0));this.setRoomAttributes(B,D,x);this.home.addRoom$com_eteks_sweethome3d_model_Room(B);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){B.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("polyline"===D){var s=this.createPolyline(D,x,this.points.slice(0));this.setPolylineAttributes(s,D,x);this.home.addPolyline$com_eteks_sweethome3d_model_Polyline(s);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){s.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("dimensionLine"===D){var l=this.createDimensionLine(D,x);this.setDimensionLineAttributes(l,D,x);this.home.addDimensionLine(l);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){l.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("label"===D){var o=this.createLabel(D,x,this.labelText);this.setLabelAttributes(o,D,x);this.home.addLabel(o);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){o.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("text"===D){this.labelText=this.getCharacters()}else{if("textStyle"===D){var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");((function(E){return E.length==0?null:E[E.length-1]})(this.textStyles)[r!=null?r:a.UNIQUE_ATTRIBUTE]=this.createTextStyle(D,x))}else{if("texture"===D){if("material"===p){this.materialTexture=this.createTexture(D,x)}else{var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");(this.textures[r!=null?r:a.UNIQUE_ATTRIBUTE]=this.createTexture(D,x))}}else{if("material"===D){(this.materials.push(this.createMaterial(D,x))>0)}else{if("transformation"===D){var f=(function(E,F){return E[F]===undefined?null:E[F]})(x,"matrix");if(f==null){throw new SAXException("Missing attribute matrix")}else{var e=f.split(/ /);if(e.length<12){throw new SAXException("Missing values for attribute matrix")}try{var v=[[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])],[parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]),parseFloat(e[7])],[parseFloat(e[8]),parseFloat(e[9]),parseFloat(e[10]),parseFloat(e[11])]];var q=new Transformation((function(E,F){return E[F]===undefined?null:E[F]})(x,"name"),v);(this.transformations.push(this.resolveObject(q,D,x))>0)}catch(z){throw new SAXException("Invalid value for attribute matrix",z)}}}else{if("point"===D){(this.points.push([this.parseFloat(x,"x"),this.parseFloat(x,"y")])>0)}else{if("sash"===D){var u=new Sash(this.parseFloat(x,"xAxis"),this.parseFloat(x,"yAxis"),this.parseFloat(x,"width"),this.parseFloat(x,"startAngle"),this.parseFloat(x,"endAngle"));(this.sashes.push(this.resolveObject(u,D,x))>0)}else{if("lightSource"===D){var k=new LightSource(this.parseFloat(x,"x"),this.parseFloat(x,"y"),this.parseFloat(x,"z"),this.parseOptionalColor(x,"color"),this.parseOptionalFloat(x,"diameter"));(this.lightSources.push(this.resolveObject(k,D,x))>0)}else{if("lightSourceMaterial"===D){(this.lightSourceMaterialNames.push((function(E,F){return E[F]===undefined?null:E[F]})(x,"name"))>0)}else{if("shelf"===D){if((function(E,F){return E[F]===undefined?null:E[F]})(x,"xLower")!=null){(this.shelfBoxes.push(new BoxBounds(this.parseFloat(x,"xLower"),this.parseFloat(x,"yLower"),this.parseFloat(x,"zLower"),this.parseFloat(x,"xUpper"),this.parseFloat(x,"yUpper"),this.parseFloat(x,"zUpper")))>0)}else{(this.shelfElevations.push(this.parseFloat(x,"elevation"))>0)}}else{if("backgroundImage"===D){var d=new BackgroundImage(this.parseContent(D,x,"image"),this.parseFloat(x,"scaleDistance"),this.parseFloat(x,"scaleDistanceXStart"),this.parseFloat(x,"scaleDistanceYStart"),this.parseFloat(x,"scaleDistanceXEnd"),this.parseFloat(x,"scaleDistanceYEnd"),(function(E,F){return E[F]===undefined?null:E[F]})(x,"xOrigin")!=null?this.parseFloat(x,"xOrigin"):0,(function(E,F){return E[F]===undefined?null:E[F]})(x,"yOrigin")!=null?this.parseFloat(x,"yOrigin"):0,!("false"===(function(E,F){return E[F]===undefined?null:E[F]})(x,"visible")));d=this.resolveObject(d,D,x);if(this.homeElementName!=null&&(this.homeElementName===p)){this.homeBackgroundImage=d}else{this.backgroundImage=d}}else{if("property"===D){if(this.homeElementName!=null){if(ObjectProperty.Type[ObjectProperty.Type.CONTENT]===(function(E,F){return E[F]===undefined?null:E[F]})(x,"type")){((function(E){return E.length==0?null:E[E.length-1]})(this.properties)[(function(E,F){return E[F]===undefined?null:E[F]})(x,"name")]=this.parseContent(D,x,"value"))}else{((function(E){return E.length==0?null:E[E.length-1]})(this.properties)[(function(E,F){return E[F]===undefined?null:E[F]})(x,"name")]=(function(E,F){return E[F]===undefined?null:E[F]})(x,"value"))}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(!("property"===D)&&!("furnitureVisibleProperty"===D)&&!("textStyle"===D)){this.properties.pop();this.textStyles.pop()}};a.prototype.getCharacters=function(){return this.buffer.str.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};a.prototype.endDocument=function(){var i=([]);for(var f=0;f<this.printedLevelIds.length;f++){var m=this.printedLevelIds[f];var g=this.home.getLevels();for(var h=0;h<g.length;h++){var d=g[h];if(m===d.getId()){(i.push(d)>0);break}}}var c=this.home.getPrint();if(c!=null&&!(i.length==0)&&c.constructor===HomePrint){this.home.setPrint(new HomePrint(c.getPaperOrientation(),c.getPaperWidth(),c.getPaperHeight(),c.getPaperTopMargin(),c.getPaperLeftMargin(),c.getPaperBottomMargin(),c.getPaperRightMargin(),c.isFurniturePrinted(),c.isPlanPrinted(),i,c.isView3DPrinted(),c.getPlanScale(),c.getHeaderFormat(),c.getFooterFormat()))}var g=(function(n){return Object.keys(n).map(function(o){return n[o]})})(this.joinedWalls);for(var f=0;f<g.length;f++){var j=g[f];var k=j.getWall();if(j.getWallAtStartId()!=null&&!(j.getWallAtStartId()===k.getId())){var e=(function(n,o){return n[o]===undefined?null:n[o]})(this.joinedWalls,j.getWallAtStartId());if(e!=null){k.setWallAtStart(e.getWall())}}if(j.getWallAtEndId()!=null&&!(j.getWallAtEndId()===k.getId())){var l=(function(n,o){return n[o]===undefined?null:n[o]})(this.joinedWalls,j.getWallAtEndId());if(l!=null){k.setWallAtEnd(l.getWall())}}}};a.prototype.resolveObject=function(e,c,d){return e};a.prototype.createHome=function(c,e){var g;if((function(h,i){return h[i]===undefined?null:h[i]})(e,"wallHeight")!=null){g=new Home(this.parseFloat(e,"wallHeight"))}else{g=new Home()}var d=(function(h,i){return h[i]===undefined?null:h[i]})(e,"version");if(d!=null){try{g.setVersion(parseInt(d))}catch(f){throw new SAXException("Invalid value for integer attribute version",f)}}return this.resolveObject(g,c,e)};a.prototype.setHomeAttributes=function(g,k,c){var e=(function(n){var l=[];for(var m in n){l.push({k:m,v:n[m],getKey:function(){return this.k},getValue:function(){return this.v}})}return l})((function(l){return l.length==0?null:l[l.length-1]})(this.properties));for(var d=0;d<e.length;d++){var i=e[d];if(typeof i.getValue()==="string"){g.setProperty(i.getKey(),i.getValue())}}if(this.furnitureVisiblePropertyNames.length>0){this.home.setFurnitureVisiblePropertyNames(this.furnitureVisiblePropertyNames)}this.home.setBackgroundImage(this.homeBackgroundImage);g.setName((function(l,n){return l[n]===undefined?null:l[n]})(c,"name"));var h=(function(l,n){return l[n]===undefined?null:l[n]})(c,"selectedLevel");if(h!=null){this.home.setSelectedLevel((function(l,n){return l[n]===undefined?null:l[n]})(this.levels,h))}if("observerCamera"===(function(l,n){return l[n]===undefined?null:l[n]})(c,"camera")){this.home.setCamera(this.home.getObserverCamera())}g.setBasePlanLocked("true"===(function(l,n){return l[n]===undefined?null:l[n]})(c,"basePlanLocked"));var j=(function(l,n){return l[n]===undefined?null:l[n]})(c,"furnitureSortedProperty");if(j!=null){try{g.setFurnitureSortedPropertyName(j)}catch(f){}}g.setFurnitureDescendingSorted("true"===(function(l,n){return l[n]===undefined?null:l[n]})(c,"furnitureDescendingSorted"));if(c.structure){g.structure=this.parseContent(this.homeElementName,c,"structure")}};a.prototype.setEnvironmentAttributes=function(t,k,i){this.setProperties(t,k,i);var u=this.parseOptionalColor(i,"groundColor");if(u!=null){t.setGroundColor(u)}t.setGroundTexture((function(w,x){return w[x]===undefined?null:w[x]})(this.textures,"groundTexture"));t.setBackgroundImageVisibleOnGround3D("true"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"backgroundImageVisibleOnGround3D"));var r=this.parseOptionalColor(i,"skyColor");if(r!=null){t.setSkyColor(r)}t.setSkyTexture((function(w,x){return w[x]===undefined?null:w[x]})(this.textures,"skyTexture"));var m=this.parseOptionalColor(i,"lightColor");if(m!=null){t.setLightColor(m)}var j=this.parseOptionalFloat(i,"wallsAlpha");if(j!=null){t.setWallsAlpha(j)}t.setAllLevelsVisible("true"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"allLevelsVisible"));t.setObserverCameraElevationAdjusted(!("false"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"observerCameraElevationAdjusted")));var d=this.parseOptionalColor(i,"ceillingLightColor");if(d!=null){t.setCeillingLightColor(d)}var c=(function(w,x){return w[x]===undefined?null:w[x]})(i,"drawingMode");if(c!=null){try{t.setDrawingMode(HomeEnvironment.DrawingMode[c])}catch(p){}}var h=this.parseOptionalFloat(i,"subpartSizeUnderLight");if(h!=null){t.setSubpartSizeUnderLight(h)}var o=this.parseOptionalInteger(i,"photoWidth");if(o!=null){t.setPhotoWidth(o)}var n=this.parseOptionalInteger(i,"photoHeight");if(n!=null){t.setPhotoHeight(n)}var q=(function(w,x){return w[x]===undefined?null:w[x]})(i,"photoAspectRatio");if(q!=null){try{t.setPhotoAspectRatio(AspectRatio[q])}catch(p){}}var v=this.parseOptionalInteger(i,"photoQuality");if(v!=null){t.setPhotoQuality(v)}var f=this.parseOptionalInteger(i,"videoWidth");if(f!=null){t.setVideoWidth(f)}var e=(function(w,x){return w[x]===undefined?null:w[x]})(i,"videoAspectRatio");if(e!=null){try{t.setVideoAspectRatio(AspectRatio[e])}catch(p){}}var s=this.parseOptionalInteger(i,"videoQuality");if(s!=null){t.setVideoQuality(s)}var g=this.parseOptionalFloat(i,"videoSpeed");if(g!=null){t.setVideoSpeed(g)}var l=this.parseOptionalInteger(i,"videoFrameRate");if(l!=null){t.setVideoFrameRate(l)}};a.prototype.createPrint=function(c){var f=HomePrint.PaperOrientation.PORTRAIT;try{if((function(g,h){return g[h]===undefined?null:g[h]})(c,"paperOrientation")==null){throw new SAXException("Missing paperOrientation attribute")}f=HomePrint.PaperOrientation[(function(g,h){return g[h]===undefined?null:g[h]})(c,"paperOrientation")]}catch(e){}var d=new HomePrint(f,this.parseFloat(c,"paperWidth"),this.parseFloat(c,"paperHeight"),this.parseFloat(c,"paperTopMargin"),this.parseFloat(c,"paperLeftMargin"),this.parseFloat(c,"paperBottomMargin"),this.parseFloat(c,"paperRightMargin"),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"furniturePrinted")),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"planPrinted")),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"view3DPrinted")),this.parseOptionalFloat(c,"planScale"),(function(g,h){return g[h]===undefined?null:g[h]})(c,"headerFormat"),(function(g,h){return g[h]===undefined?null:g[h]})(c,"footerFormat"));return this.resolveObject(d,"print",c)};a.prototype.setCompassAttributes=function(g,c,d){this.setProperties(g,c,d);g.setX(this.parseOptionalFloat(d,"x"));g.setY(this.parseOptionalFloat(d,"y"));g.setDiameter(this.parseOptionalFloat(d,"diameter"));var f=this.parseOptionalFloat(d,"northDirection");if(f!=null){g.setNorthDirection(f)}var h=this.parseOptionalFloat(d,"longitude");if(h!=null){g.setLongitude(h)}var i=this.parseOptionalFloat(d,"latitude");if(i!=null){g.setLatitude(i)}var e=(function(j,l){return j[l]===undefined?null:j[l]})(d,"timeZone");if(e!=null){g.setTimeZone(e)}g.setVisible(!("false"===(function(j,l){return j[l]===undefined?null:j[l]})(d,"visible")))};a.prototype.createCamera=function(l,f){var c=(function(n,o){return n[o]===undefined?null:n[o]})(f,"id");var k=this.parseFloat(f,"x");var j=this.parseFloat(f,"y");var i=this.parseFloat(f,"z");var e=this.parseFloat(f,"yaw");var d=this.parseFloat(f,"pitch");var g=this.parseFloat(f,"fieldOfView");var h;if("observerCamera"===l){h=c!=null?new ObserverCamera(c,k,j,i,e,d,g):new ObserverCamera(k,j,i,e,d,g)}else{h=c!=null?new Camera(c,k,j,i,e,d,g):new Camera(k,j,i,e,d,g)}return this.resolveObject(h,l,f)};a.prototype.setCameraAttributes=function(g,c,d){this.setProperties(g,c,d);if(g!=null&&g instanceof ObserverCamera){g.setFixedSize("true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"fixedSize"))}var e=(function(i,j){return i[j]===undefined?null:i[j]})(d,"lens");if(e!=null){try{g.setLens(Camera.Lens[e])}catch(f){}}var h=(function(i,j){return i[j]===undefined?null:i[j]})(d,"time");if(h!=null){try{g.setTime(parseInt(h))}catch(f){throw new SAXException("Invalid value for long attribute time",f)}}g.setName((function(i,j){return i[j]===undefined?null:i[j]})(d,"name"));g.setRenderer((function(i,j){return i[j]===undefined?null:i[j]})(d,"renderer"))};a.prototype.createLevel=function(d,e){var j=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var f=(function(l,n){return l[n]===undefined?null:l[n]})(e,"name");var g=this.parseFloat(e,"elevation");var h=this.parseFloat(e,"floorThickness");var c=this.parseFloat(e,"height");var i=j!=null?new Level(j,f,g,h,c):new Level(f,g,h,c);return this.resolveObject(i,d,e)};a.prototype.setLevelAttributes=function(f,c,e){this.setProperties(f,c,e);f.setBackgroundImage(this.backgroundImage);var d=this.parseOptionalInteger(e,"elevationIndex");if(d!=null){f.setElevationIndex(d)}f.setVisible(!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(e,"visible")));f.setViewable(!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(e,"viewable")))};a.prototype.createPieceOfFurniture=function(B,K){var E=(function(i,X){return i[X]===undefined?null:i[X]})(K,"id");var t=(function(i,X){return i[X]===undefined?null:i[X]})(K,"catalogId");var C=(function(i,X){return i[X]===undefined?null:i[X]})(K,"tags")!=null?(function(i,X){return i[X]===undefined?null:i[X]})(K,"tags").split(/ /):null;var l=(function(i,X){return i[X]===undefined?null:i[X]})(K,"elevation")!=null?this.parseFloat(K,"elevation"):0;var f=(function(i,X){return i[X]===undefined?null:i[X]})(K,"dropOnTopElevation")!=null?this.parseFloat(K,"dropOnTopElevation"):1;var S=null;if((function(i,X){return i[X]===undefined?null:i[X]})(K,"modelRotation")!=null){var U=(function(i,X){return i[X]===undefined?null:i[X]})(K,"modelRotation").split(/ /);if(U.length<9){throw new SAXException("Missing values for attribute modelRotation")}try{S=[[parseFloat(U[0]),parseFloat(U[1]),parseFloat(U[2])],[parseFloat(U[3]),parseFloat(U[4]),parseFloat(U[5])],[parseFloat(U[6]),parseFloat(U[7]),parseFloat(U[8])]]}catch(L){throw new SAXException("Invalid value for attribute modelRotation",L)}}var r=(function(i,X){return i[X]===undefined?null:i[X]})(K,"name");var s=(function(i,X){return i[X]===undefined?null:i[X]})(K,"description");var R=(function(i,X){return i[X]===undefined?null:i[X]})(K,"information");var A=(function(i,X){return i[X]===undefined?null:i[X]})(K,"license");var G=this.parseOptionalLong(K,"creationDate");var F=this.parseOptionalFloat(K,"grade");var p=this.parseContent(B,K,"icon");var h=this.parseContent(B,K,"planIcon");var e=this.parseContent(B,K,"model");var c=this.parseFloat(K,"width");var m=this.parseFloat(K,"depth");var d=this.parseFloat(K,"height");var z=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"movable"));var P=this.parseOptionalInteger(K,"modelFlags");if(P==null){P="true"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"backFaceShown")?PieceOfFurniture.SHOW_BACK_FACE:0}var W=this.parseOptionalLong(K,"modelSize");var x=(function(i,X){return i[X]===undefined?null:i[X]})(K,"creator");var H=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"resizable"));var o=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"deformable"));var k=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"texturable"));var D=this.parseOptionalDecimal(K,"price");var g=this.parseOptionalDecimal(K,"valueAddedTaxPercentage");var O=(function(i,X){return i[X]===undefined?null:i[X]})(K,"currency");var v;if(("doorOrWindow"===B)||("true"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"doorOrWindow"))){var V=(function(i,X){return i[X]===undefined?null:i[X]})(K,"wallThickness")!=null?this.parseFloat(K,"wallThickness"):1;var N=(function(i,X){return i[X]===undefined?null:i[X]})(K,"wallDistance")!=null?this.parseFloat(K,"wallDistance"):0;var y=(function(i,X){return i[X]===undefined?null:i[X]})(K,"cutOutShape");if(y==null&&!("doorOrWindow"===B)){y=PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE}var w="true"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"wallCutOutOnBothSides");var M=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"widthDepthDeformable"));var T=new CatalogDoorOrWindow(t,r,s,R,A,C,G,F,p,h,e,c,m,d,l,f,z,y,V,N,w,M,this.sashes.slice(0),S,P,W,x,H,o,k,D,g,O,null,null);v=E!=null?new HomeDoorOrWindow(E,T):new HomeDoorOrWindow(T)}else{var J=(function(i,X){return i[X]===undefined?null:i[X]})(K,"staircaseCutOutShape");var q=!("false"===(function(i,X){return i[X]===undefined?null:i[X]})(K,"horizontallyRotatable"));if("light"===B){var n=new CatalogLight(t,r,s,R,A,C,G,F,p,h,e,c,m,d,l,f,z,this.lightSources.slice(0),this.lightSourceMaterialNames.slice(0),J,S,P,W,x,H,o,k,q,D,g,O,null,null);v=E!=null?new HomeLight(E,n):new HomeLight(n)}else{if("shelfUnit"===B){var I=(function(X){var i=[];while(X-->0){i.push(0)}return i})(this.shelfElevations.length);for(var Q=0;Q<I.length;Q++){I[Q]=this.shelfElevations[Q]}var u=new CatalogShelfUnit(t,r,s,R,A,C,G,F,p,h,e,c,m,d,l,f,I,this.shelfBoxes.slice(0),z,J,S,P,W,x,H,o,k,q,D,g,O,null,null);v=E!=null?new HomeShelfUnit(E,u):new HomeShelfUnit(u)}else{var j=new CatalogPieceOfFurniture(t,r,s,R,A,C,G,F,p,h,e,c,m,d,l,f,z,J,S,P,W,x,H,o,k,q,D,g,O,null,null);v=E!=null?new HomePieceOfFurniture(E,j):new HomePieceOfFurniture(j)}}}return this.resolveObject(v,B,K)};a.prototype.createFurnitureGroup=function(c,e,h){var j=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var i=(function(l,n){return l[n]===undefined?null:l[n]})(e,"angle")!=null?this.parseFloat(e,"angle"):0;var d="true"===(function(l,n){return l[n]===undefined?null:l[n]})(e,"modelMirrored");var f=(function(l,n){return l[n]===undefined?null:l[n]})(e,"name");var g=j!=null?new HomeFurnitureGroup(j,h,i,d,f):new HomeFurnitureGroup(h,i,d,f);return this.resolveObject(g,c,e)};a.prototype.setPieceOfFurnitureAttributes=function(e,l,j){this.setProperties(e,l,j);e.setNameStyle((function(x,y){return x[y]===undefined?null:x[y]})((function(x){return x.length==0?null:x[x.length-1]})(this.textStyles),"nameStyle"));e.setNameVisible("true"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"nameVisible"));var u=this.parseOptionalFloat(j,"nameAngle");if(u!=null){e.setNameAngle(u)}var s=this.parseOptionalFloat(j,"nameXOffset");if(s!=null){e.setNameXOffset(s)}var d=this.parseOptionalFloat(j,"nameYOffset");if(d!=null){e.setNameYOffset(d)}e.setVisible(!("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"visible")));if(!(e!=null&&e instanceof HomeFurnitureGroup)){var n=this.parseOptionalFloat(j,"x");if(n!=null){e.setX(n)}var m=this.parseOptionalFloat(j,"y");if(m!=null){e.setY(m)}var v=this.parseOptionalFloat(j,"angle");if(v!=null){e.setAngle(v)}if(e.isHorizontallyRotatable()){var k=this.parseOptionalFloat(j,"pitch");if(k!=null){e.setPitch(k)}var z=this.parseOptionalFloat(j,"roll");if(z!=null){e.setRoll(z)}}var c=this.parseOptionalFloat(j,"widthInPlan");if(c!=null){e.setWidthInPlan(c)}var f=this.parseOptionalFloat(j,"depthInPlan");if(f!=null){e.setDepthInPlan(f)}var h=this.parseOptionalFloat(j,"heightInPlan");if(h!=null){e.setHeightInPlan(h)}if(this.home.getVersion()<5500||("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"modelCenteredAtOrigin"))){e.setModelCenteredAtOrigin((function(x,y){return x[y]===undefined?null:x[y]})(j,"modelRotation")==null)}if(e.isResizable()){e.setModelMirrored("true"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"modelMirrored"))}if(e.isTexturable()){if(this.materials.length>0){e.setModelMaterials(this.materials.slice(0))}var t=this.parseOptionalColor(j,"color");if(t!=null){e.setColor(t)}var p=(function(x,y){return x[y]===undefined?null:x[y]})(this.textures,a.UNIQUE_ATTRIBUTE);if(p!=null){e.setTexture(p)}var r=this.parseOptionalFloat(j,"shininess");if(r!=null){e.setShininess(r)}}if(e.isDeformable()){if(this.transformations.length>0){e.setModelTransformations(this.transformations.slice(0))}}if((e!=null&&e instanceof HomeLight)&&(function(x,y){return x[y]===undefined?null:x[y]})(j,"power")!=null){e.setPower(this.parseFloat(j,"power"))}else{if((e!=null&&e instanceof HomeDoorOrWindow)&&("doorOrWindow"===l)){var q=e;q.setBoundToWall(!("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"boundToWall")));var i=this.parseOptionalFloat(j,"wallWidth");if(i!=null){q.setWallWidth(i)}var o=this.parseOptionalFloat(j,"wallLeft");if(o!=null){q.setWallLeft(o)}var w=this.parseOptionalFloat(j,"wallHeight");if(w!=null){q.setWallHeight(w)}var g=this.parseOptionalFloat(j,"wallTop");if(g!=null){q.setWallTop(g)}}}}else{e.setCatalogId((function(x,y){return x[y]===undefined?null:x[y]})(j,"catalogId"));e.setDescription((function(x,y){return x[y]===undefined?null:x[y]})(j,"description"));e.setInformation((function(x,y){return x[y]===undefined?null:x[y]})(j,"information"));e.setLicense((function(x,y){return x[y]===undefined?null:x[y]})(j,"license"));e.setCreator((function(x,y){return x[y]===undefined?null:x[y]})(j,"creator"))}};a.prototype.createWall=function(k,e){var d=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var f=this.parseFloat(e,"xStart");var j=this.parseFloat(e,"yStart");var c=this.parseFloat(e,"xEnd");var i=this.parseFloat(e,"yEnd");var h=this.parseFloat(e,"thickness");var g=d!=null?new Wall(d,f,j,c,i,h,0):new Wall(f,j,c,i,h,0);return this.resolveObject(g,k,e)};a.prototype.setWallAttributes=function(d,c,f){this.setProperties(d,c,f);d.setLeftSideBaseboard(this.leftSideBaseboard);d.setRightSideBaseboard(this.rightSideBaseboard);d.setHeight(this.parseOptionalFloat(f,"height"));d.setHeightAtEnd(this.parseOptionalFloat(f,"heightAtEnd"));d.setArcExtent(this.parseOptionalFloat(f,"arcExtent"));d.setTopColor(this.parseOptionalColor(f,"topColor"));d.setLeftSideColor(this.parseOptionalColor(f,"leftSideColor"));d.setLeftSideTexture((function(j,l){return j[l]===undefined?null:j[l]})(this.textures,"leftSideTexture"));var e=this.parseOptionalFloat(f,"leftSideShininess");if(e!=null){d.setLeftSideShininess(e)}d.setRightSideColor(this.parseOptionalColor(f,"rightSideColor"));d.setRightSideTexture((function(j,l){return j[l]===undefined?null:j[l]})(this.textures,"rightSideTexture"));var i=this.parseOptionalFloat(f,"rightSideShininess");if(i!=null){d.setRightSideShininess(i)}var h=(function(j,l){return j[l]===undefined?null:j[l]})(f,"pattern");if(h!=null){try{d.setPattern(this.preferences.getPatternsCatalog().getPattern$java_lang_String(h))}catch(g){}}};a.prototype.createRoom=function(c,d,e){var g=(function(h,i){return h[i]===undefined?null:h[i]})(d,"id");var f=g!=null?new Room(g,e):new Room(e);return this.resolveObject(f,c,d)};a.prototype.setRoomAttributes=function(c,m,f){this.setProperties(c,m,f);c.setNameStyle((function(n,o){return n[o]===undefined?null:n[o]})((function(n){return n.length==0?null:n[n.length-1]})(this.textStyles),"nameStyle"));c.setAreaStyle((function(n,o){return n[o]===undefined?null:n[o]})((function(n){return n.length==0?null:n[n.length-1]})(this.textStyles),"areaStyle"));c.setName((function(n,o){return n[o]===undefined?null:n[o]})(f,"name"));var e=this.parseOptionalFloat(f,"nameAngle");if(e!=null){c.setNameAngle(e)}var d=this.parseOptionalFloat(f,"nameXOffset");if(d!=null){c.setNameXOffset(d)}var j=this.parseOptionalFloat(f,"nameYOffset");if(j!=null){c.setNameYOffset(j)}c.setAreaVisible("true"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"areaVisible"));var k=this.parseOptionalFloat(f,"areaAngle");if(k!=null){c.setAreaAngle(k)}var l=this.parseOptionalFloat(f,"areaXOffset");if(l!=null){c.setAreaXOffset(l)}var g=this.parseOptionalFloat(f,"areaYOffset");if(g!=null){c.setAreaYOffset(g)}c.setFloorVisible(!("false"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"floorVisible")));c.setFloorColor(this.parseOptionalColor(f,"floorColor"));c.setFloorTexture((function(n,o){return n[o]===undefined?null:n[o]})(this.textures,"floorTexture"));var h=this.parseOptionalFloat(f,"floorShininess");if(h!=null){c.setFloorShininess(h)}c.setCeilingVisible(!("false"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"ceilingVisible")));c.setCeilingColor(this.parseOptionalColor(f,"ceilingColor"));c.setCeilingTexture((function(n,o){return n[o]===undefined?null:n[o]})(this.textures,"ceilingTexture"));var i=this.parseOptionalFloat(f,"ceilingShininess");if(i!=null){c.setCeilingShininess(i)}c.setCeilingFlat("true"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"ceilingFlat"))};a.prototype.createPolyline=function(c,e,f){var g=(function(h,i){return h[i]===undefined?null:h[i]})(e,"id");var d=g!=null?new Polyline(g,f):new Polyline(f);return this.resolveObject(d,c,e)};a.prototype.setPolylineAttributes=function(o,t,g){this.setProperties(o,t,g);var n=this.parseOptionalFloat(g,"thickness");if(n!=null){o.setThickness(n)}var r=(function(i,u){return i[u]===undefined?null:i[u]})(g,"capStyle");if(r!=null){try{o.setCapStyle(Polyline.CapStyle[r])}catch(m){}}var j=(function(i,u){return i[u]===undefined?null:i[u]})(g,"joinStyle");if(j!=null){try{o.setJoinStyle(Polyline.JoinStyle[j])}catch(m){}}var s=(function(i,u){return i[u]===undefined?null:i[u]})(g,"dashStyle");if(s!=null){try{o.setDashStyle(Polyline.DashStyle[s])}catch(m){}}var c=(function(i,u){return i[u]===undefined?null:i[u]})(g,"dashPattern");if(c!=null){try{var p=c.split(/ /);var l=(function(u){var i=[];while(u-->0){i.push(0)}return i})(p.length);for(var h=0;h<p.length;h++){l[h]=parseFloat(p[h])}o.setDashPattern(l)}catch(m){throw new SAXException("Invalid value for dash pattern",m)}}var f=this.parseOptionalFloat(g,"dashOffset");if(f!=null){o.setDashOffset(f)}var k=(function(i,u){return i[u]===undefined?null:i[u]})(g,"startArrowStyle");if(k!=null){try{o.setStartArrowStyle(Polyline.ArrowStyle[k])}catch(m){}}var d=(function(i,u){return i[u]===undefined?null:i[u]})(g,"endArrowStyle");if(d!=null){try{o.setEndArrowStyle(Polyline.ArrowStyle[d])}catch(m){}}var q=this.parseOptionalFloat(g,"elevation");if(q!=null){o.setVisibleIn3D(true);o.setElevation(q)}var e=this.parseOptionalColor(g,"color");if(e!=null){o.setColor(e)}o.setClosedPath("true"===(function(i,u){return i[u]===undefined?null:i[u]})(g,"closedPath"))};a.prototype.createDimensionLine=function(o,h){var d=(function(p,q){return p[q]===undefined?null:p[q]})(h,"id");var j=this.parseFloat(h,"xStart");var n=this.parseFloat(h,"yStart");var k=this.parseOptionalFloat(h,"elevationStart");var e=k!=null?k:0;var c=this.parseFloat(h,"xEnd");var m=this.parseFloat(h,"yEnd");k=this.parseOptionalFloat(h,"elevationEnd");var i=k!=null?k:0;var g=this.parseFloat(h,"offset");var l=d!=null?new DimensionLine(d,j,n,e,c,m,i,g):new DimensionLine(j,n,e,c,m,i,g);k=this.parseOptionalFloat(h,"endMarkSize");if(k!=null){l.setEndMarkSize(k)}k=this.parseOptionalFloat(h,"pitch");if(k!=null){l.setPitch(k)}var f=this.parseOptionalColor(h,"color");if(f!=null){l.setColor(f)}l.setVisibleIn3D("true"===(function(p,q){return p[q]===undefined?null:p[q]})(h,"visibleIn3D"));return this.resolveObject(l,o,h)};a.prototype.setDimensionLineAttributes=function(d,c,e){this.setProperties(d,c,e);d.setLengthStyle((function(f,g){return f[g]===undefined?null:f[g]})((function(f){return f.length==0?null:f[f.length-1]})(this.textStyles),"lengthStyle"))};a.prototype.createLabel=function(d,e,g){var i=(function(j,l){return j[l]===undefined?null:j[l]})(e,"id");var c=this.parseFloat(e,"x");var h=this.parseFloat(e,"y");var f=i!=null?new Label(i,g,c,h):new Label(g,c,h);return this.resolveObject(f,d,e)};a.prototype.setLabelAttributes=function(e,c,d){this.setProperties(e,c,d);e.setStyle((function(i,j){return i[j]===undefined?null:i[j]})((function(i){return i.length==0?null:i[i.length-1]})(this.textStyles),a.UNIQUE_ATTRIBUTE));var h=this.parseOptionalFloat(d,"angle");if(h!=null){e.setAngle(h)}var f=this.parseOptionalFloat(d,"elevation");if(f!=null){e.setElevation(f)}var g=this.parseOptionalFloat(d,"pitch");if(g!=null){e.setPitch(g)}e.setColor(this.parseOptionalColor(d,"color"));e.setOutlineColor(this.parseOptionalColor(d,"outlineColor"))};a.prototype.createBaseboard=function(c,d){var e=Baseboard.getInstance(this.parseFloat(d,"thickness"),this.parseFloat(d,"height"),this.parseOptionalColor(d,"color"),(function(f,g){return f[g]===undefined?null:f[g]})(this.textures,a.UNIQUE_ATTRIBUTE));return this.resolveObject(e,c,d)};a.prototype.createTextStyle=function(c,d){var h=TextStyle.Alignment.CENTER;var f=(function(i,j){return i[j]===undefined?null:i[j]})(d,"alignment");if(f!=null){try{h=TextStyle.Alignment[f]}catch(e){}}var g=new TextStyle((function(i,j){return i[j]===undefined?null:i[j]})(d,"fontName"),this.parseFloat(d,"fontSize"),"true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"bold"),"true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"italic"),h);return this.resolveObject(g,c,d)};a.prototype.createTexture=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(d,"catalogId");var e=new HomeTexture(new CatalogTexture(f,(function(g,h){return g[h]===undefined?null:g[h]})(d,"name"),this.parseContent(c,d,"image"),this.parseFloat(d,"width"),this.parseFloat(d,"height"),(function(g,h){return g[h]===undefined?null:g[h]})(d,"creator")),(function(g,h){return g[h]===undefined?null:g[h]})(d,"xOffset")!=null?this.parseFloat(d,"xOffset"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"yOffset")!=null?this.parseFloat(d,"yOffset"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"angle")!=null?this.parseFloat(d,"angle"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"scale")!=null?this.parseFloat(d,"scale"):1,"true"===(function(g,h){return g[h]===undefined?null:g[h]})(d,"fittingArea"),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(d,"leftToRightOriented")));return this.resolveObject(e,c,d)};a.prototype.createMaterial=function(c,d){var e=new HomeMaterial((function(f,g){return f[g]===undefined?null:f[g]})(d,"name"),(function(f,g){return f[g]===undefined?null:f[g]})(d,"key"),this.parseOptionalColor(d,"color"),this.materialTexture,this.parseOptionalFloat(d,"shininess"));return this.resolveObject(e,c,d)};a.prototype.setProperties=function(f,c,d){var h=(function(k){var i=[];for(var j in k){i.push({k:j,v:k[j],getKey:function(){return this.k},getValue:function(){return this.v}})}return i})((function(i){return i.length==0?null:i[i.length-1]})(this.properties));for(var e=0;e<h.length;e++){var g=h[e];f.setProperty$java_lang_String$java_lang_Object(g.getKey(),g.getValue())}};a.prototype.parseOptionalColor=function(d,e){var c=(function(g,h){return g[h]===undefined?null:g[h]})(d,e);if(c!=null){try{return(parseInt(c,16)|0)}catch(f){throw new SAXException("Invalid value for color attribute "+e,f)}}else{return null}};a.prototype.parseOptionalInteger=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for integer attribute "+d,e)}}else{return null}};a.prototype.parseOptionalLong=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for long attribute "+d,e)}}else{return null}};a.prototype.parseOptionalDecimal=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return new Big(f)}catch(e){throw new SAXException("Invalid value for decimal attribute "+d,e)}}else{return null}};a.prototype.parseOptionalFloat=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{return null}};a.prototype.parseFloat=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{throw new SAXException("Missing float attribute "+d)}};a.prototype.parseContent=function(c,d,e){var f=d[e];if(f===undefined){return null}else{if(f.indexOf("://")>=0){return URLContent.fromURL(f)}else{return new HomeURLContent("jar:"+this["homeUrl"]+"!/"+f)}}};a.prototype.setHome=function(c){this.home=c;this.homeElementName=(function(d){return d.length==0?null:d[d.length-1]})(this.elements)};a.prototype.getHome=function(){return this.home};a.UNIQUE_ATTRIBUTE="@&unique&@";return a}(DefaultHandler));HomeXMLHandler.__class="com.eteks.sweethome3d.io.HomeXMLHandler";HomeXMLHandler.__interfaces=["org.xml.sax.ErrorHandler","org.xml.sax.DTDHandler","org.xml.sax.ContentHandler","org.xml.sax.EntityResolver"];(function(b){var a=(function(){function c(d,f,e){if(this.wall===undefined){this.wall=null}if(this.wallAtStartId===undefined){this.wallAtStartId=null}if(this.wallAtEndId===undefined){this.wallAtEndId=null}this.wall=d;this.wallAtStartId=f;this.wallAtEndId=e}c.prototype.getWall=function(){return this.wall};c.prototype.getWallAtStartId=function(){return this.wallAtStartId};c.prototype.getWallAtEndId=function(){return this.wallAtEndId};return c}());b.JoinedWall=a;a.__class="com.eteks.sweethome3d.io.HomeXMLHandler.JoinedWall"})(HomeXMLHandler||(HomeXMLHandler={}));var BoxBounds=(function(){function a(d,b,g,f,e,c){if(this.xLower===undefined){this.xLower=0}if(this.yLower===undefined){this.yLower=0}if(this.zLower===undefined){this.zLower=0}if(this.xUpper===undefined){this.xUpper=0}if(this.yUpper===undefined){this.yUpper=0}if(this.zUpper===undefined){this.zUpper=0}this.xLower=d;this.yLower=b;this.zLower=g;this.xUpper=f;this.yUpper=e;this.zUpper=c}a.prototype.getXLower=function(){return this.xLower};a.prototype.getYLower=function(){return this.yLower};a.prototype.getZLower=function(){return this.zLower};a.prototype.getXUpper=function(){return this.xUpper};a.prototype.getYUpper=function(){return this.yUpper};a.prototype.getZUpper=function(){return this.zUpper};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return c.xLower===this.xLower&&c.yLower===this.yLower&&c.zLower===this.zLower&&c.xUpper===this.xUpper&&c.yUpper===this.yUpper&&c.zUpper===this.zUpper}return false};a.prototype.hashCode=function(){var b=(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.xLower)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.yLower)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.zLower);b+=31*((function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.xUpper)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.yUpper)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.zUpper));return b};return a}());BoxBounds.__class="com.eteks.sweethome3d.model.BoxBounds";var PatternsCatalog=(function(){function a(b){if(this.patterns===undefined){this.patterns=null}this.patterns=(b.slice(0))}a.prototype.getPatterns=function(){return this.patterns.slice(0)};a.prototype.getPatternsCount=function(){return this.patterns.length};a.prototype.getPattern$int=function(b){return this.patterns[b]};a.prototype.getPattern$java_lang_String=function(c){for(var b=0;b<this.patterns.length;b++){var d=this.patterns[b];if(c===d.getName()){return d}}throw new IllegalArgumentException("No pattern with name "+c)};a.prototype.getPattern=function(b){if(((typeof b==="string")||b===null)){return this.getPattern$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.getPattern$int(b)}else{throw new Error("invalid overload")}}};return a}());PatternsCatalog.__class="com.eteks.sweethome3d.model.PatternsCatalog";var HomePrint=(function(){function a(v,q,b,s,i,d,l,j,o,n,k,r,u,h){if(((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof b==="number")||b===null)&&((typeof s==="number")||s===null)&&((typeof i==="number")||i===null)&&((typeof d==="number")||d===null)&&((typeof l==="number")||l===null)&&((typeof j==="boolean")||j===null)&&((typeof o==="boolean")||o===null)&&((n!=null&&(n instanceof Array))||n===null)&&((typeof k==="boolean")||k===null)&&((typeof r==="number")||r===null)&&((typeof u==="string")||u===null)&&((typeof h==="string")||h===null)){var g=arguments;if(this.paperOrientation===undefined){this.paperOrientation=null}if(this.paperWidth===undefined){this.paperWidth=0}if(this.paperHeight===undefined){this.paperHeight=0}if(this.paperTopMargin===undefined){this.paperTopMargin=0}if(this.paperLeftMargin===undefined){this.paperLeftMargin=0}if(this.paperBottomMargin===undefined){this.paperBottomMargin=0}if(this.paperRightMargin===undefined){this.paperRightMargin=0}if(this.furniturePrinted===undefined){this.furniturePrinted=false}if(this.planPrinted===undefined){this.planPrinted=false}if(this.printedLevels===undefined){this.printedLevels=null}if(this.view3DPrinted===undefined){this.view3DPrinted=false}if(this.planScale===undefined){this.planScale=null}if(this.headerFormat===undefined){this.headerFormat=null}if(this.footerFormat===undefined){this.footerFormat=null}this.paperOrientation=v;this.paperWidth=q;this.paperHeight=b;this.paperTopMargin=s;this.paperLeftMargin=i;this.paperBottomMargin=d;this.paperRightMargin=l;this.furniturePrinted=j;this.planPrinted=o;this.printedLevels=n!=null?n.slice(0):null;this.view3DPrinted=k;this.planScale=r;this.headerFormat=u;this.footerFormat=h}else{if(((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof b==="number")||b===null)&&((typeof s==="number")||s===null)&&((typeof i==="number")||i===null)&&((typeof d==="number")||d===null)&&((typeof l==="number")||l===null)&&((typeof j==="boolean")||j===null)&&((typeof o==="boolean")||o===null)&&((typeof n==="boolean")||n===null)&&((typeof k==="number")||k===null)&&((typeof r==="string")||r===null)&&((typeof u==="string")||u===null)&&h===undefined){var g=arguments;var t=g[9];var m=g[10];var f=g[11];var p=g[12];var e=arguments;var c=null;if(this.paperOrientation===undefined){this.paperOrientation=null}if(this.paperWidth===undefined){this.paperWidth=0}if(this.paperHeight===undefined){this.paperHeight=0}if(this.paperTopMargin===undefined){this.paperTopMargin=0}if(this.paperLeftMargin===undefined){this.paperLeftMargin=0}if(this.paperBottomMargin===undefined){this.paperBottomMargin=0}if(this.paperRightMargin===undefined){this.paperRightMargin=0}if(this.furniturePrinted===undefined){this.furniturePrinted=false}if(this.planPrinted===undefined){this.planPrinted=false}if(this.printedLevels===undefined){this.printedLevels=null}if(this.view3DPrinted===undefined){this.view3DPrinted=false}if(this.planScale===undefined){this.planScale=null}if(this.headerFormat===undefined){this.headerFormat=null}if(this.footerFormat===undefined){this.footerFormat=null}this.paperOrientation=v;this.paperWidth=q;this.paperHeight=b;this.paperTopMargin=s;this.paperLeftMargin=i;this.paperBottomMargin=d;this.paperRightMargin=l;this.furniturePrinted=j;this.planPrinted=o;this.printedLevels=c!=null?c.slice(0):null;this.view3DPrinted=t;this.planScale=m;this.headerFormat=f;this.footerFormat=p;if(this.paperOrientation===undefined){this.paperOrientation=null}if(this.paperWidth===undefined){this.paperWidth=0}if(this.paperHeight===undefined){this.paperHeight=0}if(this.paperTopMargin===undefined){this.paperTopMargin=0}if(this.paperLeftMargin===undefined){this.paperLeftMargin=0}if(this.paperBottomMargin===undefined){this.paperBottomMargin=0}if(this.paperRightMargin===undefined){this.paperRightMargin=0}if(this.furniturePrinted===undefined){this.furniturePrinted=false}if(this.planPrinted===undefined){this.planPrinted=false}if(this.printedLevels===undefined){this.printedLevels=null}if(this.view3DPrinted===undefined){this.view3DPrinted=false}if(this.planScale===undefined){this.planScale=null}if(this.headerFormat===undefined){this.headerFormat=null}if(this.footerFormat===undefined){this.footerFormat=null}}else{throw new Error("invalid overload")}}}a.prototype.getPaperOrientation=function(){return this.paperOrientation};a.prototype.getPaperBottomMargin=function(){return this.paperBottomMargin};a.prototype.getPaperHeight=function(){return this.paperHeight};a.prototype.getPaperLeftMargin=function(){return this.paperLeftMargin};a.prototype.getPaperRightMargin=function(){return this.paperRightMargin};a.prototype.getPaperTopMargin=function(){return this.paperTopMargin};a.prototype.getPaperWidth=function(){return this.paperWidth};a.prototype.isFurniturePrinted=function(){return this.furniturePrinted};a.prototype.isPlanPrinted=function(){return this.planPrinted};a.prototype.getPrintedLevels=function(){return this.printedLevels};a.prototype.isView3DPrinted=function(){return this.view3DPrinted};a.prototype.getPlanScale=function(){return this.planScale};a.prototype.getHeaderFormat=function(){return this.headerFormat};a.prototype.getFooterFormat=function(){return this.footerFormat};return a}());HomePrint.__class="com.eteks.sweethome3d.model.HomePrint";(function(a){var b;(function(c){c[c.PORTRAIT=0]="PORTRAIT";c[c.LANDSCAPE=1]="LANDSCAPE";c[c.REVERSE_LANDSCAPE=2]="REVERSE_LANDSCAPE"})(b=a.PaperOrientation||(a.PaperOrientation={}))})(HomePrint||(HomePrint={}));var TexturesCategory=(function(){function a(b){if(this.name===undefined){this.name=null}if(this.textures===undefined){this.textures=null}this.name=b;this.textures=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}}}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getTextures=function(){return this.textures.slice(0)};a.prototype.getTexturesCount=function(){return this.textures.length};a.prototype.getTexture=function(b){return this.textures[b]};a.prototype.getIndexOfTexture=function(b){return this.textures.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){if(m.compareTo){return m.compareTo(l)}else{return m.localeCompare(l)}};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.textures,c);if(b<0){b=-b-1}this.textures.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.textures.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain texture "+b.getName())}this.textures=(this.textures.slice(0));this.textures.splice(c,1)[0]};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());TexturesCategory.__class="com.eteks.sweethome3d.model.TexturesCategory";var CatalogTexture=(function(){function a(t,B,r,v,q,k,w){if(((typeof t==="string")||t===null)&&((typeof B==="string")||B===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof k==="string")||k===null)&&((typeof w==="boolean")||w===null)){var j=arguments;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=t;this.name=B;this.image=r;this.width=v;this.height=q;this.creator=k;this.modifiable=w}else{if(((typeof t==="string")||t===null)&&((typeof B==="string")||B===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof k==="string")||k===null)&&w===undefined){var j=arguments;var e=arguments;var u=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=t;this.name=B;this.image=r;this.width=v;this.height=q;this.creator=k;this.modifiable=u;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof t==="string")||t===null)&&((B!=null&&(B.constructor!=null&&B.constructor.__interfaces!=null&&B.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||B===null)&&((typeof r==="number")||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="boolean")||q===null)&&k===undefined&&w===undefined){var j=arguments;var y=j[0];var n=j[1];var o=j[2];var A=j[3];var s=j[4];var d=arguments;var g=null;var i=null;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=g;this.name=y;this.image=n;this.width=o;this.height=A;this.creator=i;this.modifiable=s;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof t==="string")||t===null)&&((B!=null&&(B.constructor!=null&&B.constructor.__interfaces!=null&&B.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||B===null)&&((typeof r==="number")||r===null)&&((typeof v==="number")||v===null)&&q===undefined&&k===undefined&&w===undefined){var j=arguments;var x=j[0];var l=j[1];var m=j[2];var z=j[3];var c=arguments;var f=null;var h=null;var b=arguments;var p=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=f;this.name=x;this.image=l;this.width=m;this.height=z;this.creator=h;this.modifiable=p;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{throw new Error("invalid overload")}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=[]}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}};a.COMPARATOR_$LI$();a.recentFilters={}};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getImage=function(){return this.image};a.prototype.getIcon=function(){return this.getImage()};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getCreator=function(){return this.creator};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){return d&&d.equals?d.equals(c):d===c})(this,b)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getTextureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var c=(function(h,i){return h[i]===undefined?null:h[i]})(a.recentFilters_$LI$(),d);if(c==null){var g=d.split(/\s|\p{Punct}|\\|/);var f=([]);for(var b=0;b<g.length;b++){var e=g[b];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){c=a.EMPTY_CRITERIA_$LI$()}else{c=f.slice(0)}(a.recentFilters_$LI$()[d]=c)}return c};a.prototype.getTextureCollationKey=function(){var c=this;if(this.filterCollationKey==null){var b={str:"",toString:function(){return this.str}};(function(d){d.str+=c.getName();return d})(b);(function(d){d.str+="|";return d})(b);if(this.getCategory()!=null){(function(d){d.str+=c.getCategory().getName();return d})(b);(function(d){d.str+="|";return d})(b)}if(this.getCreator()!=null){(function(d){d.str+=c.getCreator();return d})(b);(function(d){d.str+="|";return d})(b)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(b.str).toByteArray()}return this.filterCollationKey};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};a.__static_initialized=false;return a}());CatalogTexture.__class="com.eteks.sweethome3d.model.CatalogTexture";CatalogTexture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.TextureImage"];var Transformation=(function(){function a(c,b){if(this.name===undefined){this.name=null}if(this.matrix===undefined){this.matrix=null}this.name=c;this.matrix=b}a.prototype.getName=function(){return this.name};a.prototype.getMatrix=function(){return[[this.matrix[0][0],this.matrix[0][1],this.matrix[0][2],this.matrix[0][3]],[this.matrix[1][0],this.matrix[1][1],this.matrix[1][2],this.matrix[1][3]],[this.matrix[2][0],this.matrix[2][1],this.matrix[2][2],this.matrix[2][3]]]};a.prototype.equals=function(c){if(c!=null&&c instanceof a){var e=c;if(e.name===this.name){for(var d=0;d<this.matrix.length;d++){for(var b=0;b<this.matrix[d].length;b++){if(e.matrix[d][b]!==this.matrix[d][b]){return false}}}return true}}return false};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)+(function(c){function b(g){if(g==null){return 0}var d=1;for(var e=0;e<g.length;e++){var f=1;if(Array.isArray(g[e])){f=b(g[e])}else{if(typeof g[e]=="number"){f=(g[e]*1000)|0}}d=31*d+f}return d}return b})(this.matrix)};return a}());Transformation.__class="com.eteks.sweethome3d.model.Transformation";var LightSource=(function(){function a(b,i,g,c,d){if(((typeof b==="number")||b===null)&&((typeof i==="number")||i===null)&&((typeof g==="number")||g===null)&&((typeof c==="number")||c===null)&&((typeof d==="number")||d===null)){var f=arguments;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}this.x=b;this.y=i;this.z=g;this.color=c;this.diameter=d}else{if(((typeof b==="number")||b===null)&&((typeof i==="number")||i===null)&&((typeof g==="number")||g===null)&&((typeof c==="number")||c===null)&&d===undefined){var f=arguments;var h=arguments;var e=null;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}this.x=b;this.y=i;this.z=g;this.color=c;this.diameter=e;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}}else{throw new Error("invalid overload")}}}a.prototype.getX=function(){return this.x};a.prototype.getY=function(){return this.y};a.prototype.getZ=function(){return this.z};a.prototype.getColor=function(){return this.color};a.prototype.getDiameter=function(){return this.diameter};return a}());LightSource.__class="com.eteks.sweethome3d.model.LightSource";var TextStyle=(function(){function a(x,i,B,p,u,v){if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof p==="boolean")||p===null)&&((typeof u==="number")||u===null)&&((typeof v==="boolean")||v===null)){var t=arguments;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=p;this.alignment=u;if(v){(a.textStylesCache_$LI$().push(this)>0)}}else{if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof p==="boolean")||p===null)&&((typeof u==="number")||u===null)&&v===undefined){var t=arguments;var d=arguments;var A=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=p;this.alignment=u;if(A){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof p==="boolean")||p===null)&&u===undefined&&v===undefined){var t=arguments;var b=arguments;var G=a.Alignment.CENTER;var s=arguments;var z=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=p;this.alignment=G;if(z){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="number")||x===null)&&((typeof i==="boolean")||i===null)&&((typeof B==="boolean")||B===null)&&p===undefined&&u===undefined&&v===undefined){var t=arguments;var q=t[0];var j=t[1];var g=t[2];var r=arguments;var F=null;var o=arguments;var E=a.Alignment.CENTER;var m=arguments;var y=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=F;this.fontSize=q;this.bold=j;this.italic=g;this.alignment=E;if(y){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="number")||x===null)&&i===undefined&&B===undefined&&p===undefined&&u===undefined&&v===undefined){var t=arguments;var n=t[0];var l=arguments;var f=false;var c=false;var k=arguments;var D=null;var h=arguments;var C=a.Alignment.CENTER;var e=arguments;var w=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=D;this.fontSize=n;this.bold=f;this.italic=c;this.alignment=C;if(w){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{throw new Error("invalid overload")}}}}}}a.textStylesCache_$LI$=function(){if(a.textStylesCache==null){a.textStylesCache=[]}return a.textStylesCache};a.prototype.getInstance=function(e,f,d,b,j){var h=new a(e,f,d,b,j,false);for(var c=a.textStylesCache_$LI$().length-1;c>=0;c--){var g=a.textStylesCache_$LI$()[c];if(g==null){a.textStylesCache_$LI$().splice(c,1)[0]}else{if(g.equals(h)){return h}}}(a.textStylesCache_$LI$().push(h)>0);return h};a.prototype.getFontName=function(){return this.fontName};a.prototype.getFontSize=function(){return this.fontSize};a.prototype.isBold=function(){return this.bold};a.prototype.isItalic=function(){return this.italic};a.prototype.getAlignment=function(){return this.alignment};a.prototype.deriveStyle$java_lang_String=function(b){if(this.getFontName()===b||(b!=null&&(b===this.getFontName()))){return this}else{return this.getInstance(b,this.getFontSize(),this.isBold(),this.isItalic(),this.getAlignment())}};a.prototype.deriveStyle=function(b){if(((typeof b==="string")||b===null)){return this.deriveStyle$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment(b)}else{if(((typeof b==="number")||b===null)){return this.deriveStyle$float(b)}else{throw new Error("invalid overload")}}}};a.prototype.deriveStyle$float=function(b){if(this.getFontSize()===b){return this}else{return this.getInstance(this.getFontName(),b,this.isBold(),this.isItalic(),this.getAlignment())}};a.prototype.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment=function(b){if(this.getAlignment()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),this.isItalic(),b)}};a.prototype.deriveBoldStyle=function(b){if(this.isBold()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),b,this.isItalic(),this.getAlignment())}};a.prototype.deriveItalicStyle=function(b){if(this.isItalic()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),b,this.getAlignment())}};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return(c.fontName===this.fontName||(c.fontName!=null&&(c.fontName===this.fontName)))&&c.fontSize===this.fontSize&&c.bold===this.bold&&c.italic===this.italic&&c.alignment===this.alignment}return false};a.prototype.hashCode=function(){var b=(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.fontSize);if(this.fontName!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.fontName)}if(this.bold){b++}if(this.italic){b++}b+=0;return b};return a}());TextStyle.__class="com.eteks.sweethome3d.model.TextStyle";(function(a){var b;(function(c){c[c.LEFT=0]="LEFT";c[c.CENTER=1]="CENTER";c[c.RIGHT=2]="RIGHT"})(b=a.Alignment||(a.Alignment={}))})(TextStyle||(TextStyle={}));var HomeTexture=(function(){function a(w,E,G,v,I,n,F){if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&((typeof E==="number")||E===null)&&((typeof G==="number")||G===null)&&((typeof v==="number")||v===null)&&((typeof I==="number")||I===null)&&((typeof n==="boolean")||n===null)&&((typeof F==="boolean")||F===null)){var N=arguments;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=E;this.yOffset=G;this.angle=v;this.scale=I;this.fittingArea=n;this.leftToRightOriented=F;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}}else{if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&((typeof E==="number")||E===null)&&((typeof G==="number")||G===null)&&((typeof v==="number")||v===null)&&((typeof I==="number")||I===null)&&((typeof n==="boolean")||n===null)&&F===undefined){var N=arguments;var s=N[5];var y=arguments;var D=false;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=E;this.yOffset=G;this.angle=v;this.scale=I;this.fittingArea=D;this.leftToRightOriented=s;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&((typeof E==="number")||E===null)&&((typeof G==="number")||G===null)&&((typeof v==="boolean")||v===null)&&I===undefined&&n===undefined&&F===undefined){var N=arguments;var X=N[1];var W=N[2];var q=N[3];var x=arguments;var u=0;var L=0;var k=arguments;var C=false;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=u;this.yOffset=L;this.angle=X;this.scale=W;this.fittingArea=C;this.leftToRightOriented=q;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&((typeof E==="number")||E===null)&&((typeof G==="boolean")||G===null)&&v===undefined&&I===undefined&&n===undefined&&F===undefined){var N=arguments;var V=N[1];var p=N[2];var j=arguments;var U=1;var i=arguments;var t=0;var K=0;var h=arguments;var B=false;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=t;this.yOffset=K;this.angle=V;this.scale=U;this.fittingArea=B;this.leftToRightOriented=p;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&((typeof E==="number")||E===null)&&G===undefined&&v===undefined&&I===undefined&&n===undefined&&F===undefined){var N=arguments;var S=N[1];var g=arguments;var m=true;var f=arguments;var T=1;var e=arguments;var r=0;var J=0;var d=arguments;var A=false;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=r;this.yOffset=J;this.angle=S;this.scale=T;this.fittingArea=A;this.leftToRightOriented=m;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||w===null)&&E===undefined&&G===undefined&&v===undefined&&I===undefined&&n===undefined&&F===undefined){var N=arguments;var c=arguments;var R=0;var b=arguments;var l=true;var P=arguments;var Q=1;var O=arguments;var o=0;var H=0;var M=arguments;var z=false;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=w.getName();this.creator=w.getCreator();this.image=w.getImage();this.width=w.getWidth();this.height=w.getHeight();this.xOffset=o;this.yOffset=H;this.angle=R;this.scale=Q;this.fittingArea=z;this.leftToRightOriented=l;if(w!=null&&w instanceof a){this.catalogId=w.getCatalogId()}else{if(w!=null&&w instanceof CatalogTexture){this.catalogId=w.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.fittingArea===undefined){this.fittingArea=false}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{throw new Error("invalid overload")}}}}}}}a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.getName=function(){return this.name};a.prototype.getCreator=function(){return this.creator};a.prototype.getImage=function(){return this.image};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getXOffset=function(){return this.xOffset};a.prototype.getYOffset=function(){return this.yOffset};a.prototype.getAngle=function(){return this.angle};a.prototype.getScale=function(){return this.scale};a.prototype.isFittingArea=function(){return this.fittingArea};a.prototype.setFittingArea=function(b){this.fittingArea=b};a.prototype.isLeftToRightOriented=function(){return this.leftToRightOriented};a.prototype.equals=function(c){if(c===this){return true}else{if(c!=null&&c instanceof a){var b=c;return(b.name===this.name||b.name!=null&&(b.name===this.name))&&(b.image===this.image||b.image!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(b.image,this.image))&&b.width===this.width&&b.height===this.height&&b.xOffset===this.xOffset&&b.yOffset===this.yOffset&&b.fittingArea===this.fittingArea&&b.leftToRightOriented===this.leftToRightOriented&&b.angle===this.angle&&b.scale===this.scale}else{return false}}};a.prototype.hashCode=function(){return(this.name!=null?(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name):0)+(this.image!=null?(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.image):0)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.width)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.height)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.xOffset)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.yOffset)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.angle)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.scale)};return a}());HomeTexture.__class="com.eteks.sweethome3d.model.HomeTexture";HomeTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage"];var AspectRatio;(function(a){a[a.FREE_RATIO=0]="FREE_RATIO";a[a.VIEW_3D_RATIO=1]="VIEW_3D_RATIO";a[a.RATIO_4_3=2]="RATIO_4_3";a[a.RATIO_3_2=3]="RATIO_3_2";a[a.RATIO_16_9=4]="RATIO_16_9";a[a.RATIO_2_1=5]="RATIO_2_1";a[a.RATIO_24_10=6]="RATIO_24_10";a[a.SQUARE_RATIO=7]="SQUARE_RATIO"})(AspectRatio||(AspectRatio={}));var AspectRatio_$WRAPPER=(function(){function a(d,b,c){this._$ordinal=d;this._$name=b;if(this.value===undefined){this.value=null}this.value=c}a.prototype.getValue=function(){return this.value};a.prototype.name=function(){return this._$name};a.prototype.ordinal=function(){return this._$ordinal};a.prototype.compareTo=function(b){return this._$ordinal-(isNaN(b)?b._$ordinal:b)};return a}());AspectRatio.__class="com.eteks.sweethome3d.model.AspectRatio";AspectRatio["_$wrappers"]={0:new AspectRatio_$WRAPPER(0,"FREE_RATIO",null),1:new AspectRatio_$WRAPPER(1,"VIEW_3D_RATIO",null),2:new AspectRatio_$WRAPPER(2,"RATIO_4_3",4/3),3:new AspectRatio_$WRAPPER(3,"RATIO_3_2",1.5),4:new AspectRatio_$WRAPPER(4,"RATIO_16_9",16/9),5:new AspectRatio_$WRAPPER(5,"RATIO_2_1",2/1),6:new AspectRatio_$WRAPPER(6,"RATIO_24_10",2.4),7:new AspectRatio_$WRAPPER(7,"SQUARE_RATIO",1)};var Baseboard=(function(){function a(i,j,f,h,d){if(((typeof i==="number")||i===null)&&((typeof j==="number")||j===null)&&((typeof f==="number")||f===null)&&((h!=null&&h instanceof HomeTexture)||h===null)&&((typeof d==="boolean")||d===null)){var g=arguments;if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}this.height=j;this.thickness=i;this.color=f;this.texture=h;if(d){(a.baseboardsCache_$LI$().push(this)>0)}}else{if(((typeof i==="number")||i===null)&&((typeof j==="number")||j===null)&&((typeof f==="number")||f===null)&&((h!=null&&h instanceof HomeTexture)||h===null)&&d===undefined){var g=arguments;var e=arguments;var k=e[1];var c=e[0];var b=true;if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}this.height=c;this.thickness=k;this.color=f;this.texture=h;if(b){(a.baseboardsCache_$LI$().push(this)>0)}if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}}else{throw new Error("invalid overload")}}}a.baseboardsCache_$LI$=function(){if(a.baseboardsCache==null){a.baseboardsCache=[]}return a.baseboardsCache};a.getInstance=function(e,b,c,g){var h=new a(e,b,c,g,false);for(var d=a.baseboardsCache_$LI$().length-1;d>=0;d--){var f=a.baseboardsCache_$LI$()[d];if(f==null){a.baseboardsCache_$LI$().splice(d,1)[0]}else{if(f.equals(h)){return h}}}(a.baseboardsCache_$LI$().push(h)>0);return h};a.prototype.getThickness=function(){return this.thickness};a.prototype.getHeight=function(){return this.height};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return c.thickness===this.thickness&&c.height===this.height&&(c.color===this.color||c.color!=null&&(c.color===this.color))&&(c.texture===this.texture||c.texture!=null&&c.texture.equals(this.texture))}return false};a.prototype.hashCode=function(){var b=(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.thickness)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.height);if(this.color!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.color)}if(this.texture!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.texture)}return b};return a}());Baseboard.__class="com.eteks.sweethome3d.model.Baseboard";var FurnitureCatalog=(function(){function a(){this.categories=([]);this.furnitureChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){if(n.compareTo){return n.compareTo(l)}else{return n.localeCompare(l)}};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new FurnitureCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.furnitureChangeSupport.fireCollectionChanged(c,d.getIndexOfPieceOfFurniture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(b){var d=b.getCategory();if(d!=null){var c=d.getIndexOfPieceOfFurniture(b);if(c>=0){d["delete"](b);if(d.getFurnitureCount()===0){this.categories=(this.categories.slice(0));(function(e){var f=e.indexOf(d);if(f>=0){e.splice(f,1);return true}else{return false}})(this.categories)}this.furnitureChangeSupport.fireCollectionChanged(b,c,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain piece "+b.getName())};a.prototype.getPieceOfFurnitureWithId=function(g){for(var b=0;b<this.categories.length;b++){var d=this.categories[b];var f=d.getFurniture();for(var e=0;e<f.length;e++){var c=f[e];if(g===c.getId()){return c}}}return null};return a}());FurnitureCatalog.__class="com.eteks.sweethome3d.model.FurnitureCatalog";var HomeDescriptor=(function(){function a(b,d,c){if(this.name===undefined){this.name=null}if(this.content===undefined){this.content=null}if(this.icon===undefined){this.icon=null}this.name=b;this.content=d;this.icon=c}a.prototype.getName=function(){return this.name};a.prototype.getContent=function(){return this.content};a.prototype.getIcon=function(){return this.icon};return a}());HomeDescriptor.__class="com.eteks.sweethome3d.model.HomeDescriptor";var BackgroundImage=(function(){function a(g,m,l,c,h,d,b,j,f){if(((g!=null&&(g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof j==="number")||j===null)&&((typeof f==="boolean")||f===null)){var i=arguments;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}this.image=g;this.scaleDistance=m;this.scaleDistanceXStart=l;this.scaleDistanceYStart=c;this.scaleDistanceXEnd=h;this.scaleDistanceYEnd=d;this.xOrigin=b;this.yOrigin=j;this.invisible=!f}else{if(((g!=null&&(g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof j==="number")||j===null)&&f===undefined){var i=arguments;var e=arguments;var k=true;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}this.image=g;this.scaleDistance=m;this.scaleDistanceXStart=l;this.scaleDistanceYStart=c;this.scaleDistanceXEnd=h;this.scaleDistanceYEnd=d;this.xOrigin=b;this.yOrigin=j;this.invisible=!k;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}}else{throw new Error("invalid overload")}}}a.prototype.getImage=function(){return this.image};a.prototype.getScaleDistance=function(){return this.scaleDistance};a.prototype.getScaleDistanceXStart=function(){return this.scaleDistanceXStart};a.prototype.getScaleDistanceYStart=function(){return this.scaleDistanceYStart};a.prototype.getScaleDistanceXEnd=function(){return this.scaleDistanceXEnd};a.prototype.getScaleDistanceYEnd=function(){return this.scaleDistanceYEnd};a.prototype.getScale=function(){return a.getScale(this.scaleDistance,this.scaleDistanceXStart,this.scaleDistanceYStart,this.scaleDistanceXEnd,this.scaleDistanceYEnd)};a.getScale=function(e,b,f,d,c){return(e/java.awt.geom.Point2D.distance(b,f,d,c))};a.prototype.getXOrigin=function(){return this.xOrigin};a.prototype.getYOrigin=function(){return this.yOrigin};a.prototype.isVisible=function(){return !this.invisible};return a}());BackgroundImage.__class="com.eteks.sweethome3d.model.BackgroundImage";var HomeObject=(function(){function a(e){if(((typeof e==="string")||e===null)){var d=arguments;if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(e==null){throw new IllegalArgumentException("ID must exist")}this.id=e}else{if(e===undefined){var d=arguments;var b=arguments;var c=a.createId(a.ID_DEFAULT_PREFIX);if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(c==null){throw new IllegalArgumentException("ID must exist")}this.id=c;if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}}else{throw new Error("invalid overload")}}}a.createId=function(b){return b+"-"+UUID.randomUUID()};a.prototype.addPropertyChangeListener=function(b,c){if(this.propertyChangeSupport==null){this.propertyChangeSupport=new PropertyChangeSupport(this)}if(c===undefined){this.propertyChangeSupport.addPropertyChangeListener(b)}else{this.propertyChangeSupport.addPropertyChangeListener(b,c)}};a.prototype.removePropertyChangeListener=function(b,c){if(this.propertyChangeSupport!=null){if(c===undefined){this.propertyChangeSupport.removePropertyChangeListener(b)}else{this.propertyChangeSupport.removePropertyChangeListener(b,c)}if(this.propertyChangeSupport.getPropertyChangeListeners().length===0){this.propertyChangeSupport=null}}};a.prototype.firePropertyChange=function(b,c,d){if(this.propertyChangeSupport!=null){this.propertyChangeSupport.firePropertyChange(b,c,d)}};a.prototype.getId=function(){return this.id};a.prototype.getProperty=function(c){if(this.properties!=null){var b=(function(d,e){return d[e]===undefined?null:d[e]})(this.properties,c);if(typeof b==="string"){return b}}return null};a.prototype.getContentProperty=function(c){if(this.properties!=null){var b=(function(d,e){return d[e]===undefined?null:d[e]})(this.properties,c);if(b!=null&&(b.constructor!=null&&b.constructor.__interfaces!=null&&b.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0)){return b}}return null};a.prototype.isContentProperty=function(b){return this.properties!=null&&((function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)!=null&&((function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor!=null&&(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor.__interfaces!=null&&(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))};a.prototype.setProperty$java_lang_String$java_lang_String=function(b,c){this.setProperty$java_lang_String$java_lang_Object(b,c)};a.prototype.setProperty=function(b,c){if(((typeof b==="string")||b===null)&&((typeof c==="string")||c===null)){return this.setProperty$java_lang_String$java_lang_String(b,c)}else{if(((typeof b==="string")||b===null)&&((c!=null)||c===null)){return this.setProperty$java_lang_String$java_lang_Object(b,c)}else{throw new Error("invalid overload")}}};a.prototype.setProperty$java_lang_String$java_lang_Object=function(c,e){var f=this;if(e!=null&&!((typeof e==="string")||(e!=null&&(e.constructor!=null&&e.constructor.__interfaces!=null&&e.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0)))){throw new IllegalArgumentException("Property value can be only a string or a content, not an instance of "+e.constructor)}var b=this.properties!=null?(function(g,h){return g[h]===undefined?null:g[h]})(this.properties,c):null;if(e==null){if(this.properties!=null&&b!=null){try{(function(h){var g=f.properties[c];delete f.properties[c];return g})(this.properties);if(Object.keys(this.properties).length===0){this.properties=null}}catch(d){this.properties=null}this.firePropertyChange(c,b,null)}}else{if(this.properties==null||(Object.keys(this.properties).length===1&&b!=null)){this.properties=(function(g){var h={};h[g]=e;return h})(c)}else{if(Object.keys(this.properties).length===1){this.properties=((function(i){var g={};for(var h in i){g[h]=i[h]}return g})(this.properties))}(this.properties[c]=e)}this.firePropertyChange(c,b,e)}};a.prototype.getPropertyNames=function(){if(this.properties!=null){return Object.keys(this.properties)}else{return[]}};a.prototype.duplicate=function(){var f=(function(g){if(g.clone!=undefined){return g.clone()}else{var h=Object.create(g);for(var c in g){if(g.hasOwnProperty(c)){h[c]=g[c]}}return h}})(this);var b=0;var e;while((b<this.id.length&&(function(g){return g.charCodeAt==null?g:g.charCodeAt(0)})((e=this.id.charAt(b).toLowerCase()))>="a".charCodeAt(0)&&(function(g){return g.charCodeAt==null?g:g.charCodeAt(0)})(e)<="z".charCodeAt(0))){b++}var d=b>=0?this.id.substring(0,b):a.ID_DEFAULT_PREFIX;f.id=a.createId(d);return f};a.prototype.clone=function(){var d=this;try{var c=(function(f){var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g})(this);if(this.properties!=null){c.properties=Object.keys(c.properties).length===1?(function(e){var f={};f[e]=(function(g){var h=0;return{next:function(){return h<g.length?g[h++]:null},hasNext:function(){return h<g.length}}})((function(g){return Object.keys(g).map(function(h){return g[h]})})(d.properties)).next();return f})((function(e){var f=0;return{next:function(){return f<e.length?e[f++]:null},hasNext:function(){return f<e.length}}})(Object.keys(this.properties)).next()):((function(g){var e={};for(var f in g){e[f]=g[f]}return e})(this.properties))}c.propertyChangeSupport=null;return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.ID_DEFAULT_PREFIX="object";return a}());HomeObject.__class="com.eteks.sweethome3d.model.HomeObject";HomeObject.__transients=["propertyChangeSupport"];var ObjectProperty=(function(){function a(D,C,d,h,r,b){if(((typeof D==="string")||D===null)&&((typeof C==="string")||C===null)&&((typeof d==="number")||d===null)&&((typeof h==="boolean")||h===null)&&((typeof r==="boolean")||r===null)&&((typeof b==="boolean")||b===null)){var i=arguments;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}this.name=D;this.displayedName=C;this.type=d;this.typeName=d!=null?a.Type[d]:null;this.displayable=h;this.modifiable=r;this.exportable=b}else{if(((typeof D==="string")||D===null)&&((typeof C==="number")||C===null)&&((typeof d==="boolean")||d===null)&&((typeof h==="boolean")||h===null)&&((typeof r==="boolean")||r===null)&&b===undefined){var i=arguments;var v=i[1];var g=i[2];var q=i[3];var o=i[4];var y=arguments;var B=null;var f=true;var p=true;var m=true;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}this.name=D;this.displayedName=B;this.type=v;this.typeName=v!=null?a.Type[v]:null;this.displayable=f;this.modifiable=p;this.exportable=m;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}}else{if(((typeof D==="string")||D===null)&&((typeof C==="number")||C===null)&&d===undefined&&h===undefined&&r===undefined&&b===undefined){var i=arguments;var t=i[1];var x=arguments;var A=null;var e=true;var n=true;var k=true;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}this.name=D;this.displayedName=A;this.type=t;this.typeName=t!=null?a.Type[t]:null;this.displayable=e;this.modifiable=n;this.exportable=k;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}}else{if(((typeof D==="string")||D===null)&&C===undefined&&d===undefined&&h===undefined&&r===undefined&&b===undefined){var i=arguments;var w=arguments;var s=null;var u=arguments;var z=null;var c=true;var l=true;var j=true;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}this.name=D;this.displayedName=z;this.type=s;this.typeName=s!=null?a.Type[s]:null;this.displayable=c;this.modifiable=l;this.exportable=j;if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}if(this.name===undefined){this.name=null}if(this.displayedName===undefined){this.displayedName=null}if(this.type===undefined){this.type=null}if(this.typeName===undefined){this.typeName=null}if(this.displayable===undefined){this.displayable=false}if(this.modifiable===undefined){this.modifiable=false}if(this.exportable===undefined){this.exportable=false}}else{throw new Error("invalid overload")}}}}}a.fromDescription=function(k){if(k.length===0){throw new IllegalArgumentException("Description empty")}var g=k.indexOf(":");var e=k.substring(0,g>0?g:k.length).trim();var h=null;var c=true;var l=true;var f=true;var j=null;if(g>0){var b=k.substring(g+1).trim().split(/ /);if(b.length>0){h=a.Type[b[0]];for(var d=1;d<b.length;d++){if((function(n,m,i){if(i===void 0){i=0}return n.substr(i,m.length)===m})(b[d],"displayable=")){c=(function(m,i){return m.toUpperCase()===(i===null?i:i.toUpperCase())})("true",b[d].substring("displayable=".length+1))}else{if((function(n,m,i){if(i===void 0){i=0}return n.substr(i,m.length)===m})(b[d],"modifiable=")){l=(function(m,i){return m.toUpperCase()===(i===null?i:i.toUpperCase())})("true",b[d].substring("modifiable=".length+1))}else{if((function(n,m,i){if(i===void 0){i=0}return n.substr(i,m.length)===m})(b[d],"exportable=")){f=(function(m,i){return m.toUpperCase()===(i===null?i:i.toUpperCase())})("true",b[d].substring("exportable=".length+1))}else{if((function(n,m,i){if(i===void 0){i=0}return n.substr(i,m.length)===m})(b[d],"displayedName=")){j=k.substring(k.indexOf("displayedName=")+"displayedName=".length)}}}}}}}return new a(e,j,h,c,l,f)};a.prototype.getName=function(){return this.name};a.prototype.getType=function(){return this.type};a.prototype.isDisplayable=function(){return this.displayable};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.isExportable=function(){return this.exportable};a.prototype.getDisplayedName=function(){if(this.displayedName!=null){return this.displayedName}else{var b=this.name.split("_").join(" ").toLowerCase();return b.charAt(0).toUpperCase()+(b.length>1?b.substring(1):"")}};a.prototype.hashCode=function(){return this.name==null?0:(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)};a.prototype.equals=function(b){if(this===b){return true}else{if(b!=null&&b instanceof a){return this.name===b.name}}return false};return a}());ObjectProperty.__class="com.eteks.sweethome3d.model.ObjectProperty";(function(b){var a;(function(c){c[c.ANY=0]="ANY";c[c.STRING=1]="STRING";c[c.BOOLEAN=2]="BOOLEAN";c[c.INTEGER=3]="INTEGER";c[c.NUMBER=4]="NUMBER";c[c.PRICE=5]="PRICE";c[c.LENGTH=6]="LENGTH";c[c.PERCENTAGE=7]="PERCENTAGE";c[c.DATE=8]="DATE";c[c.CONTENT=9]="CONTENT"})(a=b.Type||(b.Type={}))})(ObjectProperty||(ObjectProperty={}));ObjectProperty.__transients=["type"];var TexturesCatalog=(function(){function a(){this.categories=([]);this.texturesChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addTexturesListener=function(b){this.texturesChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeTexturesListener=function(b){this.texturesChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){if(n.compareTo){return n.compareTo(l)}else{return n.localeCompare(l)}};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new TexturesCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.texturesChangeSupport.fireCollectionChanged(c,d.getIndexOfTexture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(c){var b=c.getCategory();if(b!=null){var d=b.getIndexOfTexture(c);if(d>=0){b["delete"](c);if(b.getTexturesCount()===0){this.categories=(this.categories.slice(0));(function(e){var f=e.indexOf(b);if(f>=0){e.splice(f,1);return true}else{return false}})(this.categories)}this.texturesChangeSupport.fireCollectionChanged(c,d,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain texture "+c.getName())};return a}());TexturesCatalog.__class="com.eteks.sweethome3d.model.TexturesCatalog";var CatalogPieceOfFurniture=(function(){function a(cW,b8,d,a1,dt,cS,ey,a0,f,cV,cT,bn,b,dw,c,b9,ec,cR,eK,dP,a2,bJ,W,dv,eJ,aw,G,bU,dd,dZ,du,p,F,d0,dq,m,dK,cU){if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((typeof dt==="string")||dt===null)&&((cS!=null&&cS instanceof Array&&(cS.length==0||cS[0]==null||(typeof cS[0]==="string")))||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="number")||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((cT!=null&&(cT.constructor!=null&&cT.constructor.__interfaces!=null&&cT.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="number")||b9===null)&&((typeof ec==="boolean")||ec===null)&&((typeof cR==="boolean")||cR===null)&&((typeof eK==="string")||eK===null)&&((typeof dP==="number")||dP===null)&&((a2!=null&&a2 instanceof Array&&(a2.length==0||a2[0]==null||a2[0] instanceof Array))||a2===null)&&((typeof bJ==="number")||bJ===null)&&((typeof W==="number")||W===null)&&((typeof dv==="string")||dv===null)&&((typeof eJ==="boolean")||eJ===null)&&((typeof aw==="boolean")||aw===null)&&((typeof G==="boolean")||G===null)&&((typeof bU==="boolean")||bU===null)&&((dd!=null&&dd instanceof Big)||dd===null)&&((dZ!=null&&dZ instanceof Big)||dZ===null)&&((typeof du==="string")||du===null)&&((p!=null&&(p instanceof Object))||p===null)&&((F!=null&&(F instanceof Object))||F===null)&&((typeof d0==="number")||d0===null)&&((typeof dq==="number")||dq===null)&&((typeof m==="number")||m===null)&&((typeof dK==="boolean")||dK===null)&&((typeof cU==="boolean")||cU===null)){var cA=arguments;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=dt;this.tags=cS;this.creationDate=ey;this.grade=a0;this.icon=f;this.planIcon=cV;this.model=cT;this.width=bn;this.depth=b;this.height=dw;this.elevation=c;this.dropOnTopElevation=b9;this.movable=ec;this.doorOrWindow=cR;this.color=dP;this.staircaseCutOutShape=eK;this.creator=dv;this.horizontallyRotatable=bU;this.price=dd;this.valueAddedTaxPercentage=dZ;this.currency=du;if(p==null||Object.keys(p).length===0){if(F==null||Object.keys(F).length===0){this.properties={}}else{if(Object.keys(F).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(F)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(F)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(F))}}}else{if(Object.keys(p).length===1&&(F==null||Object.keys(F).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(p)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(p)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(p));if(F!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,F)}}}if(a2==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(a2)}this.modelFlags=bJ;this.modelSize=W;this.resizable=eJ;this.deformable=aw;this.texturable=G;this.iconYaw=d0;this.iconPitch=dq;this.iconScale=m;this.proportional=dK;this.modifiable=cU}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((typeof dt==="string")||dt===null)&&((cS!=null&&cS instanceof Array&&(cS.length==0||cS[0]==null||(typeof cS[0]==="string")))||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="number")||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((cT!=null&&(cT.constructor!=null&&cT.constructor.__interfaces!=null&&cT.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="number")||b9===null)&&((typeof ec==="boolean")||ec===null)&&((typeof cR==="string")||cR===null)&&((eK!=null&&eK instanceof Array&&(eK.length==0||eK[0]==null||eK[0] instanceof Array))||eK===null)&&((typeof dP==="number")||dP===null)&&((typeof a2==="number")||a2===null)&&((typeof bJ==="string")||bJ===null)&&((typeof W==="boolean")||W===null)&&((typeof dv==="boolean")||dv===null)&&((typeof eJ==="boolean")||eJ===null)&&((typeof aw==="boolean")||aw===null)&&((G!=null&&G instanceof Big)||G===null)&&((bU!=null&&bU instanceof Big)||bU===null)&&((typeof dd==="string")||dd===null)&&((dZ!=null&&(dZ instanceof Object))||dZ===null)&&((du!=null&&(du instanceof Object))||du===null)&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var eo=cA[17];var cQ=cA[18];var o=cA[19];var bO=cA[20];var bq=cA[21];var af=cA[22];var b0=cA[23];var d9=cA[24];var cM=cA[25];var c5=cA[26];var eF=cA[27];var dc=cA[28];var V=cA[29];var b7=cA[30];var bQ=arguments;var T=false;var aD=null;var bh=Math.PI/8;var cr=0;var ej=1;var dD=true;var g=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=dt;this.tags=cS;this.creationDate=ey;this.grade=a0;this.icon=f;this.planIcon=cV;this.model=cT;this.width=bn;this.depth=b;this.height=dw;this.elevation=c;this.dropOnTopElevation=b9;this.movable=ec;this.doorOrWindow=T;this.color=aD;this.staircaseCutOutShape=eo;this.creator=bq;this.horizontallyRotatable=cM;this.price=c5;this.valueAddedTaxPercentage=eF;this.currency=dc;if(V==null||Object.keys(V).length===0){if(b7==null||Object.keys(b7).length===0){this.properties={}}else{if(Object.keys(b7).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b7)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b7)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b7))}}}else{if(Object.keys(V).length===1&&(b7==null||Object.keys(b7).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(V)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(V)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(V));if(b7!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b7)}}}if(cQ==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cQ)}this.modelFlags=o;this.modelSize=bO;this.resizable=af;this.deformable=b0;this.texturable=d9;this.iconYaw=bh;this.iconPitch=cr;this.iconScale=ej;this.proportional=dD;this.modifiable=g;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((dt!=null&&dt instanceof Array&&(dt.length==0||dt[0]==null||(typeof dt[0]==="string")))||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((a0!=null&&(a0.constructor!=null&&a0.constructor.__interfaces!=null&&a0.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((typeof cT==="number")||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="boolean")||b9===null)&&((typeof ec==="string")||ec===null)&&((cR!=null&&cR instanceof Array&&(cR.length==0||cR[0]==null||cR[0] instanceof Array))||cR===null)&&((typeof eK==="boolean")||eK===null)&&((typeof dP==="number")||dP===null)&&((typeof a2==="string")||a2===null)&&((typeof bJ==="boolean")||bJ===null)&&((typeof W==="boolean")||W===null)&&((typeof dv==="boolean")||dv===null)&&((typeof eJ==="boolean")||eJ===null)&&((aw!=null&&aw instanceof Big)||aw===null)&&((G!=null&&G instanceof Big)||G===null)&&((typeof bU==="string")||bU===null)&&((dd!=null&&(dd instanceof Object))||dd===null)&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cz=cA[4];var dk=cA[5];var E=cA[6];var ck=cA[7];var dO=cA[8];var dY=cA[9];var aP=cA[10];var aZ=cA[11];var ev=cA[12];var av=cA[13];var al=cA[14];var bC=cA[15];var en=cA[16];var cP=cA[17];var ep=cA[18];var bM=cA[19];var bo=cA[20];var ae=cA[21];var bZ=cA[22];var d8=cA[23];var cK=cA[24];var c4=cA[25];var eE=cA[26];var db=cA[27];var U=cA[28];var bP=arguments;var n=ep?PieceOfFurniture.SHOW_BACK_FACE:0;var bN=arguments;var v=null;var b6=null;var bL=arguments;var R=false;var aC=null;var bg=Math.PI/8;var cq=0;var eh=1;var dC=true;var e=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=v;this.tags=cz;this.creationDate=dk;this.grade=E;this.icon=ck;this.planIcon=dO;this.model=dY;this.width=aP;this.depth=aZ;this.height=ev;this.elevation=av;this.dropOnTopElevation=al;this.movable=bC;this.doorOrWindow=R;this.color=aC;this.staircaseCutOutShape=en;this.creator=bo;this.horizontallyRotatable=cK;this.price=c4;this.valueAddedTaxPercentage=eE;this.currency=db;if(U==null||Object.keys(U).length===0){if(b6==null||Object.keys(b6).length===0){this.properties={}}else{if(Object.keys(b6).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b6)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b6)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b6))}}}else{if(Object.keys(U).length===1&&(b6==null||Object.keys(b6).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(U)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(U)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(U));if(b6!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b6)}}}if(cP==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cP)}this.modelFlags=n;this.modelSize=bM;this.resizable=ae;this.deformable=bZ;this.texturable=d8;this.iconYaw=bg;this.iconPitch=cq;this.iconScale=eh;this.proportional=dC;this.modifiable=e;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((dt!=null&&dt instanceof Array&&(dt.length==0||dt[0]==null||(typeof dt[0]==="string")))||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((a0!=null&&(a0.constructor!=null&&a0.constructor.__interfaces!=null&&a0.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((typeof cT==="number")||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="boolean")||b9===null)&&((typeof ec==="string")||ec===null)&&((cR!=null&&cR instanceof Array&&(cR.length==0||cR[0]==null||cR[0] instanceof Array))||cR===null)&&((typeof eK==="number")||eK===null)&&((typeof dP==="number")||dP===null)&&((typeof a2==="string")||a2===null)&&((typeof bJ==="boolean")||bJ===null)&&((typeof W==="boolean")||W===null)&&((typeof dv==="boolean")||dv===null)&&((typeof eJ==="boolean")||eJ===null)&&((aw!=null&&aw instanceof Big)||aw===null)&&((G!=null&&G instanceof Big)||G===null)&&((typeof bU==="string")||bU===null)&&((dd!=null&&(dd instanceof Object))||dd===null)&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cy=cA[4];var di=cA[5];var D=cA[6];var cj=cA[7];var dN=cA[8];var dX=cA[9];var aN=cA[10];var aY=cA[11];var eu=cA[12];var au=cA[13];var ak=cA[14];var bz=cA[15];var em=cA[16];var cO=cA[17];var l=cA[18];var bK=cA[19];var bm=cA[20];var ad=cA[21];var bY=cA[22];var d7=cA[23];var cI=cA[24];var c3=cA[25];var eD=cA[26];var da=cA[27];var S=cA[28];var bI=arguments;var u=null;var b5=null;var bG=arguments;var P=false;var aB=null;var bf=Math.PI/8;var cp=0;var ef=1;var dB=true;var aQ=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=u;this.tags=cy;this.creationDate=di;this.grade=D;this.icon=cj;this.planIcon=dN;this.model=dX;this.width=aN;this.depth=aY;this.height=eu;this.elevation=au;this.dropOnTopElevation=ak;this.movable=bz;this.doorOrWindow=P;this.color=aB;this.staircaseCutOutShape=em;this.creator=bm;this.horizontallyRotatable=cI;this.price=c3;this.valueAddedTaxPercentage=eD;this.currency=da;if(S==null||Object.keys(S).length===0){if(b5==null||Object.keys(b5).length===0){this.properties={}}else{if(Object.keys(b5).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b5)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b5)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b5))}}}else{if(Object.keys(S).length===1&&(b5==null||Object.keys(b5).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(S)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(S)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(S));if(b5!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b5)}}}if(cO==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cO)}this.modelFlags=l;this.modelSize=bK;this.resizable=ad;this.deformable=bY;this.texturable=d7;this.iconYaw=bf;this.iconPitch=cp;this.iconScale=ef;this.proportional=dB;this.modifiable=aQ;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((dt!=null&&dt instanceof Array&&(dt.length==0||dt[0]==null||(typeof dt[0]==="string")))||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((a0!=null&&(a0.constructor!=null&&a0.constructor.__interfaces!=null&&a0.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((typeof cT==="number")||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="boolean")||b9===null)&&((typeof ec==="string")||ec===null)&&((cR!=null&&cR instanceof Array&&(cR.length==0||cR[0]==null||cR[0] instanceof Array))||cR===null)&&((typeof eK==="boolean")||eK===null)&&((typeof dP==="number")||dP===null)&&((typeof a2==="string")||a2===null)&&((typeof bJ==="boolean")||bJ===null)&&((typeof W==="boolean")||W===null)&&((typeof dv==="boolean")||dv===null)&&((typeof eJ==="boolean")||eJ===null)&&((aw!=null&&aw instanceof Big)||aw===null)&&((G!=null&&G instanceof Big)||G===null)&&((typeof bU==="string")||bU===null)&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cx=cA[4];var dh=cA[5];var C=cA[6];var ci=cA[7];var dM=cA[8];var dW=cA[9];var aL=cA[10];var aX=cA[11];var et=cA[12];var at=cA[13];var aj=cA[14];var bx=cA[15];var el=cA[16];var cN=cA[17];var ep=cA[18];var bH=cA[19];var bl=cA[20];var ac=cA[21];var bX=cA[22];var d6=cA[23];var cG=cA[24];var c2=cA[25];var eC=cA[26];var c9=cA[27];var bE=arguments;var Q=null;var bB=arguments;var k=ep?PieceOfFurniture.SHOW_BACK_FACE:0;var by=arguments;var t=null;var b4=null;var bw=arguments;var N=false;var aA=null;var be=Math.PI/8;var co=0;var ee=1;var dA=true;var aO=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=t;this.tags=cx;this.creationDate=dh;this.grade=C;this.icon=ci;this.planIcon=dM;this.model=dW;this.width=aL;this.depth=aX;this.height=et;this.elevation=at;this.dropOnTopElevation=aj;this.movable=bx;this.doorOrWindow=N;this.color=aA;this.staircaseCutOutShape=el;this.creator=bl;this.horizontallyRotatable=cG;this.price=c2;this.valueAddedTaxPercentage=eC;this.currency=c9;if(Q==null||Object.keys(Q).length===0){if(b4==null||Object.keys(b4).length===0){this.properties={}}else{if(Object.keys(b4).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b4)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b4)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b4))}}}else{if(Object.keys(Q).length===1&&(b4==null||Object.keys(b4).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(Q)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(Q)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(Q));if(b4!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b4)}}}if(cN==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cN)}this.modelFlags=k;this.modelSize=bH;this.resizable=ac;this.deformable=bX;this.texturable=d6;this.iconYaw=be;this.iconPitch=co;this.iconScale=ee;this.proportional=dA;this.modifiable=aO;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((typeof a1==="string")||a1===null)&&((dt!=null&&dt instanceof Array&&(dt.length==0||dt[0]==null||(typeof dt[0]==="string")))||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((a0!=null&&(a0.constructor!=null&&a0.constructor.__interfaces!=null&&a0.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a0===null)&&((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((cV!=null&&(cV.constructor!=null&&cV.constructor.__interfaces!=null&&cV.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cV===null)&&((typeof cT==="number")||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="number")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="boolean")||b9===null)&&((typeof ec==="string")||ec===null)&&((cR!=null&&cR instanceof Array&&(cR.length==0||cR[0]==null||cR[0] instanceof Array))||cR===null)&&((typeof eK==="boolean")||eK===null)&&((typeof dP==="string")||dP===null)&&((typeof a2==="boolean")||a2===null)&&((typeof bJ==="boolean")||bJ===null)&&((typeof W==="boolean")||W===null)&&((dv!=null&&dv instanceof Big)||dv===null)&&((eJ!=null&&eJ instanceof Big)||eJ===null)&&((typeof aw==="string")||aw===null)&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cw=cA[4];var dg=cA[5];var B=cA[6];var ch=cA[7];var dL=cA[8];var dV=cA[9];var aJ=cA[10];var aW=cA[11];var es=cA[12];var ar=cA[13];var ai=cA[14];var bv=cA[15];var ek=cA[16];var cL=cA[17];var ep=cA[18];var bk=cA[19];var ab=cA[20];var bW=cA[21];var d5=cA[22];var c1=cA[23];var eB=cA[24];var c8=cA[25];var bc=arguments;var bF=null;var cE=true;var ba=arguments;var O=null;var a8=arguments;var j=ep?PieceOfFurniture.SHOW_BACK_FACE:0;var a7=arguments;var s=null;var b3=null;var a6=arguments;var L=false;var az=null;var bd=Math.PI/8;var cn=0;var ed=1;var dz=true;var aM=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cW;this.name=b8;this.description=d;this.information=a1;this.license=s;this.tags=cw;this.creationDate=dg;this.grade=B;this.icon=ch;this.planIcon=dL;this.model=dV;this.width=aJ;this.depth=aW;this.height=es;this.elevation=ar;this.dropOnTopElevation=ai;this.movable=bv;this.doorOrWindow=L;this.color=az;this.staircaseCutOutShape=ek;this.creator=bk;this.horizontallyRotatable=cE;this.price=c1;this.valueAddedTaxPercentage=eB;this.currency=c8;if(O==null||Object.keys(O).length===0){if(b3==null||Object.keys(b3).length===0){this.properties={}}else{if(Object.keys(b3).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b3)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b3)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b3))}}}else{if(Object.keys(O).length===1&&(b3==null||Object.keys(b3).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(O)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(O)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(O));if(b3!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b3)}}}if(cL==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cL)}this.modelFlags=j;this.modelSize=bF;this.resizable=ab;this.deformable=bW;this.texturable=d5;this.iconYaw=bd;this.iconPitch=cn;this.iconScale=ed;this.proportional=dz;this.modifiable=aM;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((b8!=null&&(b8.constructor!=null&&b8.constructor.__interfaces!=null&&b8.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||b8===null)&&((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||d===null)&&((typeof a1==="number")||a1===null)&&((typeof dt==="number")||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="boolean")||a0===null)&&((typeof f==="string")||f===null)&&((typeof cV==="number")||cV===null)&&((cT!=null&&cT instanceof Array&&(cT.length==0||cT[0]==null||cT[0] instanceof Array))||cT===null)&&((typeof bn==="number")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="string")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="number")||b9===null)&&((typeof ec==="number")||ec===null)&&((typeof cR==="boolean")||cR===null)&&eK===undefined&&dP===undefined&&a2===undefined&&bJ===undefined&&W===undefined&&dv===undefined&&eJ===undefined&&aw===undefined&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var dI=cA[0];var cg=cA[1];var dU=cA[2];var aI=cA[3];var aV=cA[4];var er=cA[5];var aq=cA[6];var bu=cA[7];var ei=cA[8];var ay=cA[9];var cJ=cA[10];var i=cA[11];var bD=cA[12];var bj=cA[13];var bb=cA[14];var cm=cA[15];var eb=cA[16];var dy=cA[17];var a5=arguments;var cu=null;var ds=null;var eI=null;var r=null;var cv=[];var df=Date.now();var A=null;var dJ=null;var ah=1;var J=false;var aa=true;var bV=true;var d4=true;var cD=true;var c0=null;var eA=null;var c7=null;var M=null;var b2=null;var aK=true;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cu;this.name=dI;this.description=ds;this.information=eI;this.license=r;this.tags=cv;this.creationDate=df;this.grade=A;this.icon=cg;this.planIcon=dJ;this.model=dU;this.width=aI;this.depth=aV;this.height=er;this.elevation=aq;this.dropOnTopElevation=ah;this.movable=bu;this.doorOrWindow=J;this.color=ay;this.staircaseCutOutShape=ei;this.creator=bj;this.horizontallyRotatable=cD;this.price=c0;this.valueAddedTaxPercentage=eA;this.currency=c7;if(M==null||Object.keys(M).length===0){if(b2==null||Object.keys(b2).length===0){this.properties={}}else{if(Object.keys(b2).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b2)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b2)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b2))}}}else{if(Object.keys(M).length===1&&(b2==null||Object.keys(b2).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(M)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(M)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(M));if(b2!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b2)}}}if(cJ==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cJ)}this.modelFlags=i;this.modelSize=bD;this.resizable=aa;this.deformable=bV;this.texturable=d4;this.iconYaw=bb;this.iconPitch=cm;this.iconScale=eb;this.proportional=dy;this.modifiable=aK;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((a1!=null&&(a1.constructor!=null&&a1.constructor.__interfaces!=null&&a1.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a1===null)&&((dt!=null&&(dt.constructor!=null&&dt.constructor.__interfaces!=null&&dt.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||dt===null)&&((cS!=null&&(cS.constructor!=null&&cS.constructor.__interfaces!=null&&cS.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="number")||a0===null)&&((typeof f==="number")||f===null)&&((typeof cV==="number")||cV===null)&&((typeof cT==="boolean")||cT===null)&&((bn!=null&&bn instanceof Array&&(bn.length==0||bn[0]==null||bn[0] instanceof Array))||bn===null)&&((typeof b==="string")||b===null)&&((typeof dw==="boolean")||dw===null)&&((typeof c==="boolean")||c===null)&&((typeof b9==="boolean")||b9===null)&&((ec!=null&&ec instanceof Big)||ec===null)&&((cR!=null&&cR instanceof Big)||cR===null)&&eK===undefined&&dP===undefined&&a2===undefined&&bJ===undefined&&W===undefined&&dv===undefined&&eJ===undefined&&aw===undefined&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cf=cA[3];var dH=cA[4];var dT=cA[5];var aG=cA[6];var aU=cA[7];var eq=cA[8];var ap=cA[9];var bt=cA[10];var cH=cA[11];var bi=cA[12];var Z=cA[13];var bT=cA[14];var d3=cA[15];var cZ=cA[16];var ez=cA[17];if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((b8!=null&&(b8.constructor!=null&&b8.constructor.__interfaces!=null&&b8.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||b8===null)&&((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||d===null)&&((typeof a1==="number")||a1===null)&&((typeof dt==="number")||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="boolean")||a0===null)&&((typeof f==="string")||f===null)&&((typeof cV==="number")||cV===null)&&((cT!=null&&cT instanceof Array&&(cT.length==0||cT[0]==null||cT[0] instanceof Array))||cT===null)&&((typeof bn==="boolean")||bn===null)&&((typeof b==="number")||b===null)&&((typeof dw==="string")||dw===null)&&((typeof c==="number")||c===null)&&((typeof b9==="boolean")||b9===null)&&ec===undefined&&cR===undefined&&eK===undefined&&dP===undefined&&a2===undefined&&bJ===undefined&&W===undefined&&dv===undefined&&eJ===undefined&&aw===undefined&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var dG=cA[0];var ce=cA[1];var dS=cA[2];var aF=cA[3];var aT=cA[4];var y=cA[5];var ao=cA[6];var bs=cA[7];var eg=cA[8];var ax=cA[9];var cF=cA[10];var ep=cA[11];var bA=cA[12];var dm=cA[13];var a9=cA[14];var dx=cA[15];var a4=arguments;var cs=null;var dr=null;var eH=null;var q=null;var ct=[];var de=Date.now();var z=null;var dF=null;var ag=1;var I=false;var h=ep?PieceOfFurniture.SHOW_BACK_FACE:0;var Y=true;var bS=true;var d2=true;var cB=true;var cY=null;var ex=null;var c6=null;var K=null;var b1=null;var cl=(-Math.PI/16);var ea=1;var aH=true;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=cs;this.name=dG;this.description=dr;this.information=eH;this.license=q;this.tags=ct;this.creationDate=de;this.grade=z;this.icon=ce;this.planIcon=dF;this.model=dS;this.width=aF;this.depth=aT;this.height=y;this.elevation=ao;this.dropOnTopElevation=ag;this.movable=bs;this.doorOrWindow=I;this.color=ax;this.staircaseCutOutShape=eg;this.creator=dm;this.horizontallyRotatable=cB;this.price=cY;this.valueAddedTaxPercentage=ex;this.currency=c6;if(K==null||Object.keys(K).length===0){if(b1==null||Object.keys(b1).length===0){this.properties={}}else{if(Object.keys(b1).length===1){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(b1)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(b1)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(b1))}}}else{if(Object.keys(K).length===1&&(b1==null||Object.keys(b1).length===0)){this.properties=(function(eL){var eM={};eM[eL]=(function(eN){var eO=0;return{next:function(){return eO<eN.length?eN[eO++]:null},hasNext:function(){return eO<eN.length}}})((function(eN){return Object.keys(eN).map(function(eO){return eN[eO]})})(K)).next();return eM})((function(eL){var eM=0;return{next:function(){return eM<eL.length?eL[eM++]:null},hasNext:function(){return eM<eL.length}}})(Object.keys(K)).next())}else{this.properties=((function(eN){var eL={};for(var eM in eN){eL[eM]=eN[eM]}return eL})(K));if(b1!=null){(function(eL,eN){for(var eM in eN){eL[eM]=eN[eM]}})(this.properties,b1)}}}if(cF==null){this.modelRotation=PieceOfFurniture.IDENTITY_ROTATION_$LI$()}else{this.modelRotation=a.deepClone(cF)}this.modelFlags=h;this.modelSize=bA;this.resizable=Y;this.deformable=bS;this.texturable=d2;this.iconYaw=a9;this.iconPitch=cl;this.iconScale=ea;this.proportional=dx;this.modifiable=aH;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((a1!=null&&(a1.constructor!=null&&a1.constructor.__interfaces!=null&&a1.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a1===null)&&((dt!=null&&(dt.constructor!=null&&dt.constructor.__interfaces!=null&&dt.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||dt===null)&&((cS!=null&&(cS.constructor!=null&&cS.constructor.__interfaces!=null&&cS.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="number")||a0===null)&&((typeof f==="number")||f===null)&&((typeof cV==="number")||cV===null)&&((typeof cT==="boolean")||cT===null)&&((bn!=null&&bn instanceof Array&&(bn.length==0||bn[0]==null||bn[0] instanceof Array))||bn===null)&&((typeof b==="string")||b===null)&&((typeof dw==="boolean")||dw===null)&&((c!=null&&c instanceof Big)||c===null)&&((b9!=null&&b9 instanceof Big)||b9===null)&&ec===undefined&&cR===undefined&&eK===undefined&&dP===undefined&&a2===undefined&&bJ===undefined&&W===undefined&&dv===undefined&&eJ===undefined&&aw===undefined&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cd=cA[3];var dE=cA[4];var dR=cA[5];var cb=cA[6];var aS=cA[7];var x=cA[8];var an=cA[9];var br=cA[10];var cC=cA[11];var dl=cA[12];var X=cA[13];var cX=cA[14];var ew=cA[15];var a3=arguments;var bR=true;var d1=true;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof cW==="string")||cW===null)&&((typeof b8==="string")||b8===null)&&((typeof d==="string")||d===null)&&((a1!=null&&(a1.constructor!=null&&a1.constructor.__interfaces!=null&&a1.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||a1===null)&&((dt!=null&&(dt.constructor!=null&&dt.constructor.__interfaces!=null&&dt.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||dt===null)&&((typeof cS==="number")||cS===null)&&((typeof ey==="number")||ey===null)&&((typeof a0==="number")||a0===null)&&((typeof f==="number")||f===null)&&((typeof cV==="boolean")||cV===null)&&((typeof cT==="boolean")||cT===null)&&((bn!=null&&bn instanceof Array&&(bn.length==0||bn[0]==null||bn[0] instanceof Array))||bn===null)&&((typeof b==="string")||b===null)&&((typeof dw==="boolean")||dw===null)&&((c!=null&&c instanceof Big)||c===null)&&((b9!=null&&b9 instanceof Big)||b9===null)&&ec===undefined&&cR===undefined&&eK===undefined&&dP===undefined&&a2===undefined&&bJ===undefined&&W===undefined&&dv===undefined&&eJ===undefined&&aw===undefined&&G===undefined&&bU===undefined&&dd===undefined&&dZ===undefined&&du===undefined&&p===undefined&&F===undefined&&d0===undefined&&dq===undefined&&m===undefined&&dK===undefined&&cU===undefined){var cA=arguments;var cc=cA[3];var dQ=cA[4];var ca=cA[5];var aR=cA[6];var w=cA[7];var am=cA[8];var bp=cA[9];var H=cA[10];var eG=cA[11];var dj=cA[12];var dn=cA[13];var dp=cA[14];var aE=cA[15];if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.license===undefined){this.license=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelFlags===undefined){this.modelFlags=0}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.iconPitch===undefined){this.iconPitch=0}if(this.iconScale===undefined){this.iconScale=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{throw new Error("invalid overload")}}}}}}}}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=[]}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}};a.COMPARATOR_$LI$();a.recentFilters={}};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getDescription=function(){return this.description};a.prototype.getInformation=function(){return this.information};a.prototype.getLicense=function(){return this.license};a.prototype.getTags=function(){return this.tags};a.prototype.getCreationDate=function(){return this.creationDate};a.prototype.getGrade=function(){return this.grade};a.prototype.getDepth=function(){return this.depth};a.prototype.getHeight=function(){return this.height};a.prototype.getWidth=function(){return this.width};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.isMovable=function(){return this.movable};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.getModel=function(){return this.model};a.prototype.getModelFlags=function(){return this.modelFlags};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.getModelRotation=function(){return a.deepClone(this.modelRotation)};a.deepClone=function(d){var c=(function(f){var e=[];while(f-->0){e.push(null)}return e})(d.length);for(var b=0;b<d.length;b++){c[b]=d[b].slice(0)}return c};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.getCreator=function(){return this.creator};a.prototype.isBackFaceShown=function(){return(this.modelFlags&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE};a.prototype.getColor=function(){return this.color};a.prototype.getIconYaw=function(){return this.iconYaw};a.prototype.getIconPitch=function(){return this.iconPitch};a.prototype.getIconScale=function(){return this.iconScale};a.prototype.isProportional=function(){return this.proportional};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.getCurrency=function(){return this.currency};a.prototype.getProperty=function(c){var b=(function(d,e){return d[e]===undefined?null:d[e]})(this.properties,c);if(typeof b==="string"){return b}else{return null}};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.getContentProperty=function(c){var b=(function(d,e){return d[e]===undefined?null:d[e]})(this.properties,c);if(b!=null&&(b.constructor!=null&&b.constructor.__interfaces!=null&&b.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0)){return b}else{return null}};a.prototype.isContentProperty=function(b){return((function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)!=null&&((function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor!=null&&(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor.__interfaces!=null&&(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b).constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){return d&&d.equals?d.equals(c):d===c})(this,b)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getPieceOfFurnitureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var c=(function(h,i){return h[i]===undefined?null:h[i]})(a.recentFilters_$LI$(),d);if(c==null){var g=d.split(/\s|\p{Punct}|\\|/);var f=([]);for(var b=0;b<g.length;b++){var e=g[b];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){c=a.EMPTY_CRITERIA_$LI$()}else{c=f.slice(0)}(a.recentFilters_$LI$()[d]=c)}return c};a.prototype.getPieceOfFurnitureCollationKey=function(){if(this.filterCollationKey==null){var d={str:"",toString:function(){return this.str}};var e=this.getFilterCriteria();var b=function(f){var g=e[f];if(d.str.length!==0){(function(h){h.str+="|";return h})(d)}(function(h){h.str+=g;return h})(d)};for(var c=0;c<e.length;c++){b(c)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(d.str).toByteArray()}return this.filterCollationKey};a.prototype.getFilterCriteria=function(){var e=([]);(e.push(this.getName())>0);if(this.getCategory()!=null){(e.push(this.getCategory().getName())>0)}if(this.getCreator()!=null){(e.push(this.getCreator())>0)}if(this.getDescription()!=null){(e.push(this.getDescription())>0)}if(this.getLicense()!=null){(e.push(this.getLicense())>0)}var d=this.getTags();for(var c=0;c<d.length;c++){var b=d[c];(e.push(b)>0)}return e.slice(0)};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};a.prototype.clone=function(){try{var c=(function(e){var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f})(this);c.category=null;return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.__static_initialized=false;return a}());CatalogPieceOfFurniture.__class="com.eteks.sweethome3d.model.CatalogPieceOfFurniture";CatalogPieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture"];var CollectionChangeSupport=(function(){function a(b){if(this.source===undefined){this.source=null}if(this.collectionListeners===undefined){this.collectionListeners=null}this.source=b;this.collectionListeners=([])}a.prototype.addCollectionListener=function(b){(this.collectionListeners.push(b)>0)};a.prototype.removeCollectionListener=function(b){(function(c){var d=c.indexOf(b);if(d>=0){c.splice(d,1);return true}else{return false}})(this.collectionListeners)};a.prototype.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type=function(c,b){this.fireCollectionChanged(c,-1,b)};a.prototype.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type=function(f,c,d){if(!(this.collectionListeners.length==0)){var b=(new CollectionEvent(this.source,f,c,d));var e=this.collectionListeners.slice(0);for(var h=0;h<e.length;h++){var g=e[h];g(b)}}};a.prototype.fireCollectionChanged=function(d,b,c){if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&((typeof c==="number")||c===null)){return this.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b,c)}else{if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&c===undefined){return this.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b)}else{throw new Error("invalid overload")}}};return a}());CollectionChangeSupport.__class="com.eteks.sweethome3d.model.CollectionChangeSupport";var CollectionEvent=(function(a){__extends(b,a);function b(c,k,i,j){var g=this;if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof i==="number")||i===null)&&((typeof j==="number")||j===null)){var h=arguments;g=a.call(this,c)||this;if(g.item===undefined){g.item=null}if(g.index===undefined){g.index=0}if(g.type===undefined){g.type=null}g.item=k;g.index=i;g.type=j}else{if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof i==="number")||i===null)&&j===undefined){var h=arguments;var f=h[2];var d=arguments;var e=-1;g=a.call(this,c)||this;if(g.item===undefined){g.item=null}if(g.index===undefined){g.index=0}if(g.type===undefined){g.type=null}g.item=k;g.index=e;g.type=f;if(g.item===undefined){g.item=null}if(g.index===undefined){g.index=0}if(g.type===undefined){g.type=null}}else{throw new Error("invalid overload")}}return g}b.prototype.getItem=function(){return this.item};b.prototype.getIndex=function(){return this.index};b.prototype.getType=function(){return this.type};return b}(EventObject));CollectionEvent.__class="com.eteks.sweethome3d.model.CollectionEvent";(function(b){var a;(function(c){c[c.ADD=0]="ADD";c[c.DELETE=1]="DELETE"})(a=b.Type||(b.Type={}))})(CollectionEvent||(CollectionEvent={}));CollectionEvent.__transients=["source"];var SelectionEvent=(function(b){__extends(a,b);function a(g,h,j){var i=this;if(((g!=null)||g===null)&&((h!=null&&(h instanceof Array))||h===null)&&((j!=null&&(j instanceof Array))||j===null)){var f=arguments;i=b.call(this,g)||this;if(i.oldSelectedItems===undefined){i.oldSelectedItems=null}if(i.selectedItems===undefined){i.selectedItems=null}i.oldSelectedItems=h;i.selectedItems=j}else{if(((g!=null)||g===null)&&((h!=null&&(h instanceof Array))||h===null)&&j===undefined){var f=arguments;var e=f[1];var c=arguments;var d=null;i=b.call(this,g)||this;if(i.oldSelectedItems===undefined){i.oldSelectedItems=null}if(i.selectedItems===undefined){i.selectedItems=null}i.oldSelectedItems=d;i.selectedItems=e;if(i.oldSelectedItems===undefined){i.oldSelectedItems=null}if(i.selectedItems===undefined){i.selectedItems=null}}else{throw new Error("invalid overload")}}return i}a.prototype.getOldSelectedItems=function(){return this.oldSelectedItems};a.prototype.getSelectedItems=function(){return this.selectedItems};return a}(EventObject));SelectionEvent.__class="com.eteks.sweethome3d.model.SelectionEvent";SelectionEvent.__transients=["source"];var FurnitureCategory=(function(){function a(b){if(this.name===undefined){this.name=null}if(this.furniture===undefined){this.furniture=null}this.name=b;this.furniture=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}}}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.getFurnitureCount=function(){return this.furniture.length};a.prototype.getPieceOfFurniture=function(b){return this.furniture[b]};a.prototype.getIndexOfPieceOfFurniture=function(b){return this.furniture.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){if(m.compareTo){return m.compareTo(l)}else{return m.localeCompare(l)}};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.furniture,c);if(b<0){b=-b-1}this.furniture.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.furniture.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain piece "+b.getName())}this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1)[0]};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());FurnitureCategory.__class="com.eteks.sweethome3d.model.FurnitureCategory";var HomeMaterial=(function(){function a(b,k,d,i,l){if(((typeof b==="string")||b===null)&&((typeof k==="string")||k===null)&&((typeof d==="number")||d===null)&&((i!=null&&i instanceof HomeTexture)||i===null)&&((typeof l==="number")||l===null)){var g=arguments;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}this.name=b;this.key=k;this.color=d;this.texture=i;this.shininess=l}else{if(((typeof b==="string")||b===null)&&((typeof k==="number")||k===null)&&((d!=null&&d instanceof HomeTexture)||d===null)&&((typeof i==="number")||i===null)&&l===undefined){var g=arguments;var j=g[1];var h=g[2];var c=g[3];var e=arguments;var f=null;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}this.name=b;this.key=f;this.color=j;this.texture=h;this.shininess=c;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}}else{throw new Error("invalid overload")}}}a.prototype.getName=function(){return this.name};a.prototype.getKey=function(){return this.key};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.getShininess=function(){return this.shininess};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return(c.name===this.name||(c.name!=null&&(c.name===this.name)))&&(c.key===this.key||(c.key!=null&&(c.key===this.name)))&&(c.color===this.color||(c.color!=null&&(c.color===this.color)))&&(c.texture===this.texture||(c.texture!=null&&c.texture.equals(this.texture)))&&(c.shininess===this.shininess||(c.shininess!=null&&(c.shininess===this.shininess)))}return false};a.prototype.hashCode=function(){var b=0;if(this.name!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.name)}if(this.key!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.key)}if(this.color!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.color)}if(this.texture!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.texture)}if(this.shininess!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.shininess)}return b};return a}());HomeMaterial.__class="com.eteks.sweethome3d.model.HomeMaterial";var Sash=(function(){function a(f,c,e,d,b){if(this.xAxis===undefined){this.xAxis=0}if(this.yAxis===undefined){this.yAxis=0}if(this.width===undefined){this.width=0}if(this.startAngle===undefined){this.startAngle=0}if(this.endAngle===undefined){this.endAngle=0}this.xAxis=f;this.yAxis=c;this.width=e;this.startAngle=d;this.endAngle=b}a.prototype.getXAxis=function(){return this.xAxis};a.prototype.getYAxis=function(){return this.yAxis};a.prototype.getWidth=function(){return this.width};a.prototype.getStartAngle=function(){return this.startAngle};a.prototype.getEndAngle=function(){return this.endAngle};return a}());Sash.__class="com.eteks.sweethome3d.model.Sash";var PieceOfFurniture;(function(a){a.DEFAULT_CUT_OUT_SHAPE="M0,0 v1 h1 v-1 z";function b(){if(a.IDENTITY_ROTATION==null){a.IDENTITY_ROTATION=[[1,0,0],[0,1,0],[0,0,1]]}return a.IDENTITY_ROTATION}a.IDENTITY_ROTATION_$LI$=b;a.SHOW_BACK_FACE=1;a.HIDE_EDGE_COLOR_MATERIAL=2})(PieceOfFurniture||(PieceOfFurniture={}));var HomeController3D=(function(){function a(f,c,b,e,d){if(this.home===undefined){this.home=null}if(this.preferences===undefined){this.preferences=null}if(this.viewFactory===undefined){this.viewFactory=null}if(this.contentManager===undefined){this.contentManager=null}if(this.undoSupport===undefined){this.undoSupport=null}if(this.planController===undefined){this.planController=null}if(this.home3DView===undefined){this.home3DView=null}if(this.topCameraState===undefined){this.topCameraState=null}if(this.observerCameraState===undefined){this.observerCameraState=null}if(this.cameraState===undefined){this.cameraState=null}this.home=f;this.preferences=c;this.viewFactory=b;this.contentManager=e;this.undoSupport=d;this.topCameraState=new a.TopCameraState(this,c);this.observerCameraState=new a.ObserverCameraState(this);this.setCameraState(f.getCamera()===f.getTopCamera()?this.topCameraState:this.observerCameraState);this.addModelListeners(f)}a.prototype.addModelListeners=function(e){e.addPropertyChangeListener("CAMERA",new a.HomeController3D$0(this,e));var c=new a.HomeController3D$1(this,e);var d=e.getSelectedLevel();if(d!=null){d.addPropertyChangeListener(c)}e.addPropertyChangeListener("SELECTED_LEVEL",new a.HomeController3D$2(this,e,c));var b=new a.HomeController3D$3(this,e);e.addPropertyChangeListener("SELECTED_LEVEL",b);e.getEnvironment().addPropertyChangeListener("ALL_LEVELS_VISIBLE",b)};a.prototype.getObserverCameraMinimumElevation=function(d){var c=d.getLevels();var b=c.length===0?10:10+c[0].getElevation();return b};a.prototype.getView=function(){if(this.home3DView==null){this.home3DView=this.viewFactory.createView3D(this.home,this.preferences,this)}return this.home3DView};a.prototype.viewFromTop=function(){this.home.setCamera(this.home.getTopCamera())};a.prototype.viewFromObserver=function(){this.home.setCamera(this.home.getObserverCamera())};a.prototype.storeCamera=function(c){var f=this.home.getCamera().duplicate();f.setName(c);var e=this.home.getStoredCameras();var b=([]);(function(i,h){return i.push.apply(i,h)})(b,e);for(var d=b.length-1;d>=0;d--){var g=b[d];if((c===g.getName())||(f.getX()===g.getX()&&f.getY()===g.getY()&&f.getZ()===g.getZ()&&f.getPitch()===g.getPitch()&&f.getYaw()===g.getYaw()&&f.getFieldOfView()===g.getFieldOfView()&&f.getTime()===g.getTime()&&f.getLens()===g.getLens()&&(f.getRenderer()===g.getRenderer()||f.getRenderer()!=null&&(f.getRenderer()===g.getRenderer())))){b.splice(d,1)[0]}}b.splice(0,0,f);while((b.length>this.preferences.getStoredCamerasMaxCount())){b.splice(b.length-1,1)[0]}this.home.setStoredCameras(b)};a.prototype.goToCamera=function(c){if(c!=null&&c instanceof ObserverCamera){this.viewFromObserver()}else{this.viewFromTop()}this.cameraState.goToCamera(c);var b=(this.home.getStoredCameras().slice(0));(function(d){var e=d.indexOf(c);if(e>=0){d.splice(e,1);return true}else{return false}})(b);b.splice(0,0,c);this.home.setStoredCameras(b)};a.prototype.deleteCameras=function(e){var d=this.home.getStoredCameras();var c=([]);for(var b=0;b<d.length;b++){var f=d[b];if(!(e.indexOf((f))>=0)){(c.push(f)>0)}}this.home.setStoredCameras(c)};a.prototype.displayAllLevels=function(){this.home.getEnvironment().setAllLevelsVisible(true)};a.prototype.displaySelectedLevel=function(){this.home.getEnvironment().setAllLevelsVisible(false)};a.prototype.setCameraState=function(b){if(this.cameraState!=null){this.cameraState.exit()}this.cameraState=b;this.cameraState.enter()};a.prototype.moveCamera=function(b){this.cameraState.moveCamera(b)};a.prototype.moveCameraSideways=function(b){this.cameraState.moveCameraSideways(b)};a.prototype.elevateCamera=function(b){this.cameraState.elevateCamera(b)};a.prototype.rotateCameraYaw=function(b){this.cameraState.rotateCameraYaw(b)};a.prototype.rotateCameraPitch=function(b){this.cameraState.rotateCameraPitch(b)};a.prototype.modifyFieldOfView=function(b){this.cameraState.modifyFieldOfView(b)};a.prototype.pressMouse=function(d,i,c,f,g,h,e,b){this.cameraState.pressMouse(d,i,c,f,g,h,e,b)};a.prototype.releaseMouse=function(b,c){this.cameraState.releaseMouse(b,c)};a.prototype.moveMouse=function(b,c){this.cameraState.moveMouse(b,c)};a.prototype.isEditingState=function(){return this.cameraState.isEditingState()};a.prototype.escape=function(){this.cameraState.escape()};a.prototype.toggleMagnetism=function(b){this.cameraState.toggleMagnetism(b)};a.prototype.setAlignmentActivated=function(b){this.cameraState.setAlignmentActivated(b)};a.prototype.setDuplicationActivated=function(b){this.cameraState.setDuplicationActivated(b)};a.prototype.getObserverCameraState=function(){return this.observerCameraState};a.prototype.getTopCameraState=function(){return this.topCameraState};return a}());HomeController3D.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D";HomeController3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.Controller"];(function(g){var j=(function(){function k(){}k.prototype.enter=function(){};k.prototype.exit=function(){};k.prototype.moveCamera=function(l){};k.prototype.moveCameraSideways=function(l){};k.prototype.elevateCamera=function(l){};k.prototype.rotateCameraYaw=function(l){};k.prototype.rotateCameraPitch=function(l){};k.prototype.modifyFieldOfView=function(l){};k.prototype.goToCamera=function(l){};k.prototype.isEditingState=function(){return false};k.prototype.pressMouse=function(n,s,m,p,q,r,o,l){};k.prototype.releaseMouse=function(l,m){};k.prototype.moveMouse=function(l,m){};k.prototype.escape=function(){};k.prototype.toggleMagnetism=function(l){};k.prototype.setAlignmentActivated=function(l){};k.prototype.setDuplicationActivated=function(l){};k.prototype.setEditionActivated=function(l){};return k}());g.CameraControllerState=j;j.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.CameraControllerState";var i=(function(){function k(l){if(this.topCameraState===undefined){this.topCameraState=null}this.topCameraState=(l)}k.prototype.propertyChange=function(m){var n=this.topCameraState;var l=m.getSource();if(n==null){l.removePropertyChangeListener(m.getPropertyName(),this)}else{n.setAerialViewCenteredOnSelectionEnabled(l.isAerialViewCenteredOnSelectionEnabled())}};return k}());g.UserPreferencesChangeListener=i;i.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.UserPreferencesChangeListener";var h=(function(l){__extends(k,l);function k(m){var n=l.call(this)||this;n.__parent=m;if(n.cameraMoved===undefined){n.cameraMoved=false}if(n.mouseMoved===undefined){n.mouseMoved=false}if(n.elevationActivated===undefined){n.elevationActivated=false}if(n.rotationActivated===undefined){n.rotationActivated=false}if(n.lastMousePressedPoint3D===undefined){n.lastMousePressedPoint3D=null}if(n.distancesRatio===undefined){n.distancesRatio=0}if(n.yLastMousePress===undefined){n.yLastMousePress=0}if(n.angleMousePress===undefined){n.angleMousePress=null}if(n.alignmentActivated===undefined){n.alignmentActivated=false}if(n.duplicationActivated===undefined){n.duplicationActivated=false}if(n.magnetismToggled===undefined){n.magnetismToggled=false}if(n.pointerType===undefined){n.pointerType=null}if(n.movedItems===undefined){n.movedItems=null}if(n.closestMovedPiece===undefined){n.closestMovedPiece=null}if(n.movedItemsStartPoint===undefined){n.movedItemsStartPoint=null}if(n.movedItemsDeltaX===undefined){n.movedItemsDeltaX=null}if(n.movedItemsDeltaY===undefined){n.movedItemsDeltaY=null}return n}k.prototype.moveCamera=function(m){this.cameraMoved=true};k.prototype.moveCameraSideways=function(m){this.cameraMoved=true};k.prototype.elevateCamera=function(m){this.cameraMoved=true};k.prototype.rotateCameraYaw=function(m){this.cameraMoved=true};k.prototype.rotateCameraPitch=function(m){this.cameraMoved=true};k.prototype.modifyFieldOfView=function(m){this.cameraMoved=true};k.prototype.goToCamera=function(m){this.cameraMoved=true};return k}(g.CameraControllerState));g.EditingCameraState=h;h.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.EditingCameraState";var f=(function(l){__extends(k,l);function k(n,m){var o=l.call(this,n)||this;o.__parent=n;o.MIN_WIDTH=100;o.MIN_DEPTH=o.MIN_WIDTH;o.MIN_HEIGHT=20;if(o.topCamera===undefined){o.topCamera=null}if(o.aerialViewBoundsLowerPoint===undefined){o.aerialViewBoundsLowerPoint=null}if(o.aerialViewBoundsUpperPoint===undefined){o.aerialViewBoundsUpperPoint=null}if(o.minDistanceToAerialViewCenter===undefined){o.minDistanceToAerialViewCenter=0}if(o.maxDistanceToAerialViewCenter===undefined){o.maxDistanceToAerialViewCenter=0}if(o.aerialViewCenteredOnSelectionEnabled===undefined){o.aerialViewCenteredOnSelectionEnabled=false}if(o.previousSelectionEmpty===undefined){o.previousSelectionEmpty=false}o.distanceToCenterWithSelection=-1;o.objectChangeListener=new k.TopCameraState$0(o);o.levelsListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.wallsListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.furnitureListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){o.addPropertyChangeListener(p.getItem(),o.objectChangeListener);o.updateCameraFromHomeBounds(n.home.getFurniture().length===1&&(n.home.getWalls().length==0)&&(n.home.getRooms().length==0),false)}else{if(p.getType()===CollectionEvent.Type.DELETE){o.removePropertyChangeListener(p.getItem(),o.objectChangeListener);o.updateCameraFromHomeBounds(false,false)}}};o.roomsListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.polylinesListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.dimensionLinesListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.labelsListener=function(p){if(p.getType()===CollectionEvent.Type.ADD){p.getItem().addPropertyChangeListener(o.objectChangeListener)}else{if(p.getType()===CollectionEvent.Type.DELETE){p.getItem().removePropertyChangeListener(o.objectChangeListener)}}o.updateCameraFromHomeBounds(false,false)};o.selectionListener=new k.TopCameraState$1(o);if(o.userPreferencesChangeListener===undefined){o.userPreferencesChangeListener=null}o.userPreferencesChangeListener=new g.UserPreferencesChangeListener(o);return o}k.prototype.addPropertyChangeListener=function(n,o){if(n!=null&&n instanceof HomeFurnitureGroup){var q=n.getFurniture();for(var m=0;m<q.length;m++){var p=q[m];this.addPropertyChangeListener(p,o)}}else{n.addPropertyChangeListener(o)}};k.prototype.removePropertyChangeListener=function(n,o){if(n!=null&&n instanceof HomeFurnitureGroup){var q=n.getFurniture();for(var m=0;m<q.length;m++){var p=q[m];this.removePropertyChangeListener(p,o)}}else{n.removePropertyChangeListener(o)}};k.prototype.enter=function(){this.topCamera=this.__parent.home.getCamera();this.previousSelectionEmpty=(this.__parent.home.getSelectedItems().length==0);this.aerialViewCenteredOnSelectionEnabled=this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled();this.updateCameraFromHomeBounds(false,false);var p=this.__parent.home.getLevels();for(var o=0;o<p.length;o++){var n=p[o];n.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLevelsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.levelsListener)));var p=this.__parent.home.getWalls();for(var o=0;o<p.length;o++){var s=p[o];s.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addWallsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.wallsListener)));var p=this.__parent.home.getFurniture();for(var o=0;o<p.length;o++){var u=p[o];this.addPropertyChangeListener(u,this.objectChangeListener)}this.__parent.home.addFurnitureListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.furnitureListener)));var p=this.__parent.home.getRooms();for(var o=0;o<p.length;o++){var m=p[o];m.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addRoomsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.roomsListener)));var p=this.__parent.home.getPolylines();for(var o=0;o<p.length;o++){var r=p[o];r.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addPolylinesListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.polylinesListener)));var p=this.__parent.home.getDimensionLines();for(var o=0;o<p.length;o++){var t=p[o];t.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addDimensionLinesListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.dimensionLinesListener)));var p=this.__parent.home.getLabels();for(var o=0;o<p.length;o++){var q=p[o];q.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLabelsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.labelsListener)));this.__parent.home.addSelectionListener(this.selectionListener);this.__parent.preferences.addPropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};k.prototype.setAerialViewCenteredOnSelectionEnabled=function(m){this.aerialViewCenteredOnSelectionEnabled=m;this.updateCameraFromHomeBounds(false,false)};k.prototype.updateCameraFromHomeBounds=function(o,m){if(!null){if(this.aerialViewBoundsLowerPoint==null){this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled)}var n=void 0;if(m&&this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled()&&this.distanceToCenterWithSelection!==-1){n=this.distanceToCenterWithSelection}else{n=this.getCameraToAerialViewCenterDistance()}if(!(this.__parent.home.getSelectedItems().length==0)){this.distanceToCenterWithSelection=n}this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled);this.updateCameraIntervalToAerialViewCenter();this.placeCameraAt(n,o)}};k.prototype.getCameraToAerialViewCenterDistance=function(){return Math.sqrt(Math.pow((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.topCamera.getX(),2)+Math.pow((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.topCamera.getY(),2)+Math.pow((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.topCamera.getZ(),2))};k.prototype.updateAerialViewBoundsFromHomeBounds=function(v){this.aerialViewBoundsLowerPoint=this.aerialViewBoundsUpperPoint=null;var u=[];if(v){u=([]);var r=this.__parent.home.getSelectedItems();for(var q=0;q<r.length;q++){var G=r[q];if((G!=null&&(G.constructor!=null&&G.constructor.__interfaces!=null&&G.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0))&&this.isItemAtVisibleLevel(G)&&(!(G!=null&&G instanceof HomePieceOfFurniture)||G.isVisible())&&(!(G!=null&&G instanceof Polyline)||G.isVisibleIn3D())&&(!(G!=null&&G instanceof DimensionLine)||G.isVisibleIn3D())&&(!(G!=null&&G instanceof Label)||G.getPitch()!=null)){(u.push(G)>0)}}}var t=u.length===0||!v;var x=false;var r=t?this.__parent.home.getWalls():Home.getWallsSubList(u);for(var q=0;q<r.length;q++){var E=r[q];if(this.isItemAtVisibleLevel(E)){x=true;var I=E.getLevel()!=null?E.getLevel().getElevation():0;var F=t?0:I;var w=E.getHeight();var C=void 0;if(w!=null){C=I+w}else{C=I+this.__parent.home.getWallHeight()}var z=E.getHeightAtEnd();if(z!=null){C=Math.max(C,I+z)}var H=E.getPoints$();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}var r=t?this.__parent.home.getFurniture():Home.getFurnitureSubList(u);for(var q=0;q<r.length;q++){var m=r[q];if(m.isVisible()&&this.isItemAtVisibleLevel(m)){var F=void 0;var C=void 0;if(t){F=Math.max(0,m.getGroundElevation());C=Math.max(0,m.getGroundElevation()+m.getHeightInPlan())}else{F=m.getGroundElevation();C=m.getGroundElevation()+m.getHeightInPlan()}var H=m.getPoints();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}var r=t?this.__parent.home.getRooms():Home.getRoomsSubList(u);for(var q=0;q<r.length;q++){var D=r[q];if(this.isItemAtVisibleLevel(D)){var F=0;var C=this.MIN_HEIGHT;var n=D.getLevel();if(n!=null){F=n.getElevation()-n.getFloorThickness();C=n.getElevation();if(t){F=Math.max(0,F);C=Math.max(this.MIN_HEIGHT,n.getElevation())}}var H=D.getPoints();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}var r=t?this.__parent.home.getPolylines():Home.getPolylinesSubList(u);for(var q=0;q<r.length;q++){var y=r[q];if(y.isVisibleIn3D()&&this.isItemAtVisibleLevel(y)){var F=void 0;var C=void 0;if(t){F=Math.max(0,y.getGroundElevation());C=Math.max(this.MIN_HEIGHT,y.getGroundElevation())}else{F=C=y.getGroundElevation()}var H=y.getPoints();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}var r=t?this.__parent.home.getDimensionLines():Home.getDimensionLinesSubList(u);for(var q=0;q<r.length;q++){var o=r[q];if(o.isVisibleIn3D()&&this.isItemAtVisibleLevel(o)){var B=o.getLevel()!=null?o.getLevel().getElevation():0;var F=void 0;var C=void 0;if(t){F=Math.max(0,B+o.getElevationStart());C=Math.max(this.MIN_HEIGHT,B+o.getElevationEnd())}else{F=B+o.getElevationStart();C=B+o.getElevationEnd()}var H=o.getPoints();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}var r=t?this.__parent.home.getLabels():Home.getLabelsSubList(u);for(var q=0;q<r.length;q++){var s=r[q];if(s.getPitch()!=null&&this.isItemAtVisibleLevel(s)){var F=void 0;var C=void 0;if(t){F=Math.max(0,s.getGroundElevation());C=Math.max(this.MIN_HEIGHT,s.getGroundElevation())}else{F=C=s.getGroundElevation()}var H=s.getPoints();for(var p=0;p<H.length;p++){var A=H[p];this.updateAerialViewBounds(A[0],A[1],F,C)}}}if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[0,0,0];this.aerialViewBoundsUpperPoint=[this.MIN_WIDTH,this.MIN_DEPTH,this.MIN_HEIGHT]}else{if(x&&t){if(this.MIN_WIDTH>this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0]){this.aerialViewBoundsLowerPoint[0]=(this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.MIN_WIDTH/2;this.aerialViewBoundsUpperPoint[0]=this.aerialViewBoundsLowerPoint[0]+this.MIN_WIDTH}if(this.MIN_DEPTH>this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1]){this.aerialViewBoundsLowerPoint[1]=(this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.MIN_DEPTH/2;this.aerialViewBoundsUpperPoint[1]=this.aerialViewBoundsLowerPoint[1]+this.MIN_DEPTH}if(this.MIN_HEIGHT>this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2]){this.aerialViewBoundsLowerPoint[2]=(this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.MIN_HEIGHT/2;this.aerialViewBoundsUpperPoint[2]=this.aerialViewBoundsLowerPoint[2]+this.MIN_HEIGHT}}}};k.prototype.updateAerialViewBounds=function(m,p,o,n){if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[m,p,o];this.aerialViewBoundsUpperPoint=[m,p,n]}else{this.aerialViewBoundsLowerPoint[0]=Math.min(this.aerialViewBoundsLowerPoint[0],m);this.aerialViewBoundsUpperPoint[0]=Math.max(this.aerialViewBoundsUpperPoint[0],m);this.aerialViewBoundsLowerPoint[1]=Math.min(this.aerialViewBoundsLowerPoint[1],p);this.aerialViewBoundsUpperPoint[1]=Math.max(this.aerialViewBoundsUpperPoint[1],p);this.aerialViewBoundsLowerPoint[2]=Math.min(this.aerialViewBoundsLowerPoint[2],o);this.aerialViewBoundsUpperPoint[2]=Math.max(this.aerialViewBoundsUpperPoint[2],n)}};k.prototype.isItemAtVisibleLevel=function(m){return m.getLevel()==null||m.getLevel().isViewableAndVisible()};k.prototype.updateCameraIntervalToAerialViewCenter=function(){var n=this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0];var p=this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1];var m=this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2];var o=Math.sqrt(n*n+p*p+m*m)/2;this.minDistanceToAerialViewCenter=o*1.05;this.maxDistanceToAerialViewCenter=Math.max(5*this.minDistanceToAerialViewCenter,5000)};k.prototype.moveCamera=function(n){l.prototype.moveCamera.call(this,n);n*=5;var m=this.getCameraToAerialViewCenterDistance()-n;this.placeCameraAt(m,false)};k.prototype.placeCameraAt=function(m,o){m=Math.max(m,this.minDistanceToAerialViewCenter);m=Math.min(m,this.maxDistanceToAerialViewCenter);if(o){m=Math.min(m,3*this.minDistanceToAerialViewCenter)}var n=m*Math.cos(this.topCamera.getPitch());this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*n));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*n));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+Math.sin(this.topCamera.getPitch())*m)};k.prototype.rotateCameraYaw=function(o){l.prototype.rotateCameraYaw.call(this,o);var m=this.topCamera.getYaw()+o;var n=this.getCameraToAerialViewCenterDistance()*Math.cos(this.topCamera.getPitch());this.topCamera.setYaw(m);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(m)*n));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(m)*n))};k.prototype.rotateCameraPitch=function(p){l.prototype.rotateCameraPitch.call(this,p);var o=this.topCamera.getPitch()+p;o=Math.max(o,0);o=Math.min(o,Math.PI/2);var m=this.getCameraToAerialViewCenterDistance();var n=m*Math.cos(o);this.topCamera.setPitch(o);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*n));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*n));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+(m*Math.sin(o)))};k.prototype.goToCamera=function(m){l.prototype.goToCamera.call(this,m);this.topCamera.setCamera(m);this.topCamera.setTime(m.getTime());this.topCamera.setLens(m.getLens());this.topCamera.setRenderer(m.getRenderer());this.updateCameraFromHomeBounds(false,false)};k.prototype.releaseMouse=function(m,n){null;this.updateCameraFromHomeBounds(false,false)};k.prototype.exit=function(){this.topCamera=null;var p=this.__parent.home.getWalls();for(var o=0;o<p.length;o++){var s=p[o];s.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeWallsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.wallsListener)));var p=this.__parent.home.getFurniture();for(var o=0;o<p.length;o++){var u=p[o];this.removePropertyChangeListener(u,this.objectChangeListener)}this.__parent.home.removeFurnitureListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.furnitureListener)));var p=this.__parent.home.getRooms();for(var o=0;o<p.length;o++){var m=p[o];m.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeRoomsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.roomsListener)));var p=this.__parent.home.getPolylines();for(var o=0;o<p.length;o++){var r=p[o];r.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removePolylinesListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.polylinesListener)));var p=this.__parent.home.getDimensionLines();for(var o=0;o<p.length;o++){var t=p[o];t.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeDimensionLinesListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.dimensionLinesListener)));var p=this.__parent.home.getLabels();for(var o=0;o<p.length;o++){var q=p[o];q.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLabelsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.labelsListener)));var p=this.__parent.home.getLevels();for(var o=0;o<p.length;o++){var n=p[o];n.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLevelsListener(((function(v){if(v==null||typeof v=="function"){return v}return function(w){return(v.collectionChanged?v.collectionChanged:v).call(v,w)}})(this.levelsListener)));this.__parent.home.removeSelectionListener(this.selectionListener);this.__parent.preferences.removePropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};return k}(g.EditingCameraState));g.TopCameraState=f;f.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.TopCameraState";(function(k){var m=(function(){function n(o){this.__parent=o}n.prototype.propertyChange=function(o){this.__parent.updateCameraFromHomeBounds(false,false)};return n}());k.TopCameraState$0=m;var l=(function(){function n(o){this.__parent=o}n.prototype.selectionChanged=function(p){var o=(p.getSelectedItems().length==0);this.__parent.updateCameraFromHomeBounds(false,this.__parent.previousSelectionEmpty&&!o);this.__parent.previousSelectionEmpty=o};return n}());k.TopCameraState$1=l;l.__interfaces=["com.eteks.sweethome3d.model.SelectionListener"]})(f=g.TopCameraState||(g.TopCameraState={}));var e=(function(l){__extends(k,l);function k(m){var n=l.call(this,m)||this;n.__parent=m;if(n.observerCamera===undefined){n.observerCamera=null}n.levelElevationChangeListener=new k.ObserverCameraState$0(n);n.levelsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.levelElevationChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.levelElevationChangeListener)}}n.updateCameraMinimumElevation()};return n}k.prototype.enter=function(){this.observerCamera=this.__parent.home.getCamera();var o=this.__parent.home.getLevels();for(var m=0;m<o.length;m++){var n=o[m];n.addPropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.addLevelsListener(((function(p){if(p==null||typeof p=="function"){return p}return function(q){return(p.collectionChanged?p.collectionChanged:p).call(p,q)}})(this.levelsListener)));this.selectCamera()};k.prototype.selectCamera=function(){if(this.__parent.preferences.isObserverCameraSelectedAtChange()){var m=this.__parent.home.getSelectedItems();if(!this.__parent.preferences.isEditingIn3DViewEnabled()||(m.length==0)||m.length===1&&m[0]===this.observerCamera){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}}};k.prototype.moveCamera=function(m){l.prototype.moveCamera.call(this,m);this.observerCamera.setX(this.observerCamera.getX()-Math.sin(this.observerCamera.getYaw())*m);this.observerCamera.setY(this.observerCamera.getY()+Math.cos(this.observerCamera.getYaw())*m);this.selectCamera()};k.prototype.moveCameraSideways=function(m){l.prototype.moveCameraSideways.call(this,m);this.observerCamera.setX(this.observerCamera.getX()-Math.cos(this.observerCamera.getYaw())*m);this.observerCamera.setY(this.observerCamera.getY()-Math.sin(this.observerCamera.getYaw())*m);this.selectCamera()};k.prototype.elevateCamera=function(n){l.prototype.elevateCamera.call(this,n);var m=this.observerCamera.getZ()+n;m=Math.min(Math.max(m,this.getMinimumElevation()),this.__parent.preferences.getLengthUnit().getMaximumElevation());this.observerCamera.setZ(m);this.selectCamera()};k.prototype.updateCameraMinimumElevation=function(){this.observerCamera.setZ(Math.max(this.observerCamera.getZ(),this.getMinimumElevation()))};k.prototype.getMinimumElevation=function(){var m=this.__parent.home.getLevels();if(m.length>0){return 10+m[0].getElevation()}else{return 10}};k.prototype.rotateCameraYaw=function(m){l.prototype.rotateCameraYaw.call(this,m);this.observerCamera.setYaw(this.observerCamera.getYaw()+m);this.selectCamera()};k.prototype.rotateCameraPitch=function(n){l.prototype.rotateCameraPitch.call(this,n);var m=this.observerCamera.getPitch()+n;m=Math.min(Math.max(-Math.PI/2,m),Math.PI/2);this.observerCamera.setPitch(m);this.selectCamera()};k.prototype.modifyFieldOfView=function(n){l.prototype.modifyFieldOfView.call(this,n);var m=this.observerCamera.getFieldOfView()+n;m=Math.min(Math.max((function(o){return o*Math.PI/180})(2),m),(function(o){return o*Math.PI/180})(120));this.observerCamera.setFieldOfView(m);this.selectCamera()};k.prototype.goToCamera=function(m){l.prototype.goToCamera.call(this,m);this.observerCamera.setCamera(m);this.observerCamera.setTime(m.getTime());this.observerCamera.setLens(m.getLens());this.observerCamera.setRenderer(m.getRenderer())};k.prototype.exit=function(){var q=this;var p=this.__parent.home.getSelectedItems();if((p.indexOf((this.observerCamera))>=0)){p=(p.slice(0));(function(r){var s=r.indexOf(q.observerCamera);if(s>=0){r.splice(s,1);return true}else{return false}})(p);this.__parent.home.setSelectedItems(p)}var o=this.__parent.home.getLevels();for(var m=0;m<o.length;m++){var n=o[m];n.removePropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.removeLevelsListener(((function(r){if(r==null||typeof r=="function"){return r}return function(s){return(r.collectionChanged?r.collectionChanged:r).call(r,s)}})(this.levelsListener)));this.observerCamera=null};return k}(g.EditingCameraState));g.ObserverCameraState=e;e.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.ObserverCameraState";(function(k){var l=(function(){function m(n){this.__parent=n}m.prototype.propertyChange=function(n){if("ELEVATION"===n.getPropertyName()){this.__parent.updateCameraMinimumElevation()}};return m}());k.ObserverCameraState$0=l})(e=g.ObserverCameraState||(g.ObserverCameraState={}));var d=(function(){function k(l,m){this.home=m;this.__parent=l}k.prototype.propertyChange=function(l){this.__parent.setCameraState(this.home.getCamera()===this.home.getTopCamera()?this.__parent.topCameraState:this.__parent.observerCameraState)};return k}());g.HomeController3D$0=d;var c=(function(){function k(l,m){this.home=m;this.__parent=l}k.prototype.propertyChange=function(l){if(("ELEVATION"===l.getPropertyName())&&this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+l.getNewValue()-l.getOldValue()))}};return k}());g.HomeController3D$1=c;var b=(function(){function k(m,n,l){this.home=n;this.levelElevationChangeListener=l;this.__parent=m}k.prototype.propertyChange=function(m){var l=m.getOldValue();var n=this.home.getSelectedLevel();if(this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+(n==null?0:n.getElevation())-(l==null?0:l.getElevation())))}if(l!=null){l.removePropertyChangeListener(this.levelElevationChangeListener)}if(n!=null){n.addPropertyChangeListener(this.levelElevationChangeListener)}};return k}());g.HomeController3D$2=b;var a=(function(){function k(l,m){this.home=m;this.__parent=l}k.prototype.propertyChange=function(m){var o=this.home.getLevels();var n=this.home.getSelectedLevel();var p=true;for(var l=0;l<o.length;l++){o[l].setVisible(p);if(o[l]===n&&!this.home.getEnvironment().isAllLevelsVisible()){p=false}}};return k}());g.HomeController3D$3=a})(HomeController3D||(HomeController3D={}));var View;(function(b){var a;(function(c){c[c.MOUSE=0]="MOUSE";c[c.TOUCH=1]="TOUCH"})(a=b.PointerType||(b.PointerType={}))})(View||(View={}));var Room=(function(b){__extends(a,b);function a(i,e){var h=this;if(((typeof i==="string")||i===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)){var g=arguments;h=b.call(this,i)||this;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.ceilingFlat===undefined){h.ceilingFlat=false}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.boundsCache===undefined){h.boundsCache=null}if(h.areaCache===undefined){h.areaCache=null}if(e.length<=1){throw new IllegalStateException("Room points must containt at least two points")}h.points=h.deepCopy(e);h.areaVisible=true;h.nameYOffset=-40;h.floorVisible=true;h.ceilingVisible=true;h.ceilingFlat=true}else{if(((i!=null&&i instanceof Array&&(i.length==0||i[0]==null||i[0] instanceof Array))||i===null)&&e===undefined){var g=arguments;var f=g[0];var c=arguments;var d=HomeObject.createId("room");h=b.call(this,d)||this;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.ceilingFlat===undefined){h.ceilingFlat=false}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.boundsCache===undefined){h.boundsCache=null}if(h.areaCache===undefined){h.areaCache=null}if(f.length<=1){throw new IllegalStateException("Room points must containt at least two points")}h.points=h.deepCopy(f);h.areaVisible=true;h.nameYOffset=-40;h.floorVisible=true;h.ceilingVisible=true;h.ceilingFlat=true;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.ceilingFlat===undefined){h.ceilingFlat=false}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.boundsCache===undefined){h.boundsCache=null}if(h.areaCache===undefined){h.areaCache=null}}else{throw new Error("invalid overload")}}return h}a.TWICE_PI_$LI$=function(){if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=(function(g){var f=[];while(g-->0){f.push(null)}return f})(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.shapeCache=null;this.boundsCache=null;this.areaCache=null;this.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=(function(i){var h=[];while(i-->0){h.push(null)}return h})(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.shapeCache=null;this.boundsCache=null;this.areaCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.shapeCache=null;this.boundsCache=null;this.areaCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}else{if(this.points.length<=1){throw new IllegalStateException("Room points must containt at least one point")}}var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.shapeCache=null;this.boundsCache=null;this.areaCache=null;this.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.getBoundsMinimumCoordinates=function(){if(this.boundsCache==null){this.boundsCache=this.getShape().getBounds2D()}return[this.boundsCache.getMinX(),this.boundsCache.getMinY()]};a.prototype.getBoundsMaximumCoordinates=function(){if(this.boundsCache==null){this.boundsCache=this.getShape().getBounds2D()}return[this.boundsCache.getMaxX(),this.boundsCache.getMaxY()]};a.prototype.isAreaVisible=function(){return this.areaVisible};a.prototype.setAreaVisible=function(c){if(c!==this.areaVisible){this.areaVisible=c;this.firePropertyChange("AREA_VISIBLE",!c,c)}};a.prototype.getAreaXOffset=function(){return this.areaXOffset};a.prototype.setAreaXOffset=function(c){if(c!==this.areaXOffset){var d=this.areaXOffset;this.areaXOffset=c;this.firePropertyChange("AREA_X_OFFSET",d,c)}};a.prototype.getAreaYOffset=function(){return this.areaYOffset};a.prototype.setAreaYOffset=function(c){if(c!==this.areaYOffset){var d=this.areaYOffset;this.areaYOffset=c;this.firePropertyChange("AREA_Y_OFFSET",d,c)}};a.prototype.getAreaStyle=function(){return this.areaStyle};a.prototype.setAreaStyle=function(d){if(d!==this.areaStyle){var c=this.areaStyle;this.areaStyle=d;this.firePropertyChange("AREA_STYLE",c,d)}};a.prototype.getAreaAngle=function(){return this.areaAngle};a.prototype.setAreaAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.areaAngle){var c=this.areaAngle;this.areaAngle=d;this.firePropertyChange("AREA_ANGLE",c,d)}};a.prototype.getXCenter=function(){var c=this.points[0][0];var e=this.points[0][0];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][0]);e=Math.max(e,this.points[d][0])}return(c+e)/2};a.prototype.getYCenter=function(){var c=this.points[0][1];var e=this.points[0][1];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][1]);e=Math.max(e,this.points[d][1])}return(c+e)/2};a.prototype.getFloorColor=function(){return this.floorColor};a.prototype.setFloorColor=function(c){if(c!==this.floorColor&&(c==null||!(c===this.floorColor))){var d=this.floorColor;this.floorColor=c;this.firePropertyChange("FLOOR_COLOR",d,c)}};a.prototype.getFloorTexture=function(){return this.floorTexture};a.prototype.setFloorTexture=function(c){if(c!==this.floorTexture&&(c==null||!c.equals(this.floorTexture))){var d=this.floorTexture;this.floorTexture=c;this.firePropertyChange("FLOOR_TEXTURE",d,c)}};a.prototype.isFloorVisible=function(){return this.floorVisible};a.prototype.setFloorVisible=function(c){if(c!==this.floorVisible){this.floorVisible=c;this.firePropertyChange("FLOOR_VISIBLE",!c,c)}};a.prototype.getFloorShininess=function(){return this.floorShininess};a.prototype.setFloorShininess=function(d){if(d!==this.floorShininess){var c=this.floorShininess;this.floorShininess=d;this.firePropertyChange("FLOOR_SHININESS",c,d)}};a.prototype.getCeilingColor=function(){return this.ceilingColor};a.prototype.setCeilingColor=function(c){if(c!==this.ceilingColor&&(c==null||!(c===this.ceilingColor))){var d=this.ceilingColor;this.ceilingColor=c;this.firePropertyChange("CEILING_COLOR",d,c)}};a.prototype.getCeilingTexture=function(){return this.ceilingTexture};a.prototype.setCeilingTexture=function(c){if(c!==this.ceilingTexture&&(c==null||!c.equals(this.ceilingTexture))){var d=this.ceilingTexture;this.ceilingTexture=c;this.firePropertyChange("CEILING_TEXTURE",d,c)}};a.prototype.isCeilingVisible=function(){return this.ceilingVisible};a.prototype.setCeilingVisible=function(c){if(c!==this.ceilingVisible){this.ceilingVisible=c;this.firePropertyChange("CEILING_VISIBLE",!c,c)}};a.prototype.getCeilingShininess=function(){return this.ceilingShininess};a.prototype.setCeilingShininess=function(d){if(d!==this.ceilingShininess){var c=this.ceilingShininess;this.ceilingShininess=d;this.firePropertyChange("CEILING_SHININESS",c,d)}};a.prototype.isCeilingFlat=function(){return this.ceilingFlat};a.prototype.setCeilingFlat=function(c){if(c!==this.ceilingFlat){this.ceilingFlat=c;this.firePropertyChange("CEILING_FLAT",!c,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getArea=function(){if(this.areaCache==null){var d=new java.awt.geom.Area(this.getShape());if(d.isSingular()){this.areaCache=Math.abs(this.getSignedArea(this.getPoints()))}else{var h=0;var g=([]);for(var f=d.getPathIterator(null);!f.isDone();){var e=[0,0];switch((f.currentSegment(e))){case java.awt.geom.PathIterator.SEG_MOVETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_LINETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_CLOSE:var c=g.slice(0);h+=this.getSignedArea(c);(g.length=0);break}f.next()}this.areaCache=h}}return this.areaCache};a.prototype.getSignedArea=function(e){var d=0;for(var c=1;c<e.length;c++){d+=e[c][0]*e[c-1][1];d-=e[c][1]*e[c-1][0]}d+=e[0][0]*e[e.length-1][1];d-=e[0][1]*e[e.length-1][0];return d/2};a.prototype.isClockwise=function(){return this.getSignedArea(this.getPoints())<0};a.prototype.isSingular=function(){return new java.awt.geom.Area(this.getShape()).isSingular()};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getNameXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getNameYOffset())<=d};a.prototype.isAreaCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getAreaXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getAreaYOffset())<=d};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var d=new java.awt.geom.GeneralPath();d.moveTo(this.points[0][0],this.points[0][1]);for(var c=1;c<this.points.length;c++){d.lineTo(this.points[c][0],this.points[c][1])}d.closePath();this.shapeCache=d}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};return a}(HomeObject));Room.__class="com.eteks.sweethome3d.model.Room";Room.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"];Room.__transients=["shapeCache","boundsCache","areaCache","propertyChangeSupport"];var Label=(function(a){__extends(b,a);function b(d,l,j,i){var g=this;if(((typeof d==="string")||d===null)&&((typeof l==="string")||l===null)&&((typeof j==="number")||j===null)&&((typeof i==="number")||i===null)){var h=arguments;g=a.call(this,d)||this;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}g.text=l;g.x=j;g.y=i}else{if(((typeof d==="string")||d===null)&&((typeof l==="number")||l===null)&&((typeof j==="number")||j===null)&&i===undefined){var h=arguments;var f=h[0];var m=h[1];var c=h[2];var e=arguments;var k=HomeObject.createId("label");g=a.call(this,k)||this;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}g.text=f;g.x=m;g.y=c;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}}else{throw new Error("invalid overload")}}return g}b.TWICE_PI_$LI$=function(){if(b.TWICE_PI==null){b.TWICE_PI=2*Math.PI}return b.TWICE_PI};b.prototype.getText=function(){return this.text};b.prototype.setText=function(d){if(d!==this.text&&(d==null||!(d===this.text))){var c=this.text;this.text=d;this.firePropertyChange("TEXT",c,d)}};b.prototype.getX=function(){return this.x};b.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.firePropertyChange("X",d,c)}};b.prototype.getY=function(){return this.y};b.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.firePropertyChange("Y",c,d)}};b.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};b.prototype.getElevation=function(){return this.elevation};b.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};b.prototype.getStyle=function(){return this.style};b.prototype.setStyle=function(d){if(d!==this.style){var c=this.style;this.style=d;this.firePropertyChange("STYLE",c,d)}};b.prototype.getColor=function(){return this.color};b.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}};b.prototype.getOutlineColor=function(){return this.outlineColor};b.prototype.setOutlineColor=function(c){if(c!==this.outlineColor){var d=this.outlineColor;this.outlineColor=c;this.firePropertyChange("OUTLINE_COLOR",d,c)}};b.prototype.getAngle=function(){return this.angle};b.prototype.setAngle=function(d){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.firePropertyChange("ANGLE",c,d)}};b.prototype.getPitch=function(){return this.pitch};b.prototype.setPitch=function(d){if(d!=null){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$())}if(d!==this.pitch&&(d==null||!(d===this.pitch))){var c=this.pitch;this.pitch=d;this.firePropertyChange("PITCH",c,d)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&c+this.elevation>d}else{return false}}};b.prototype.getPoints=function(){return[[this.x,this.y]]};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return d.contains(this.x,this.y)};b.prototype.containsPoint=function(c,e,d){return Math.abs(c-this.x)<=d&&Math.abs(e-this.y)<=d};b.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};b.prototype.clone=function(){var d=this;var c=(function(g){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};return b}(HomeObject));Label.__class="com.eteks.sweethome3d.model.Label";Label.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"];Label.__transients=["propertyChangeSupport"];var HomeEnvironment=(function(a){__extends(b,a);function b(C,r,s,c,p,y,D){var h=this;if(((typeof C==="string")||C===null)&&((typeof r==="number")||r===null)&&((s!=null&&s instanceof HomeTexture)||s===null)&&((typeof c==="number")||c===null)&&((p!=null&&p instanceof HomeTexture)||p===null)&&((typeof y==="number")||y===null)&&((typeof D==="number")||D===null)){var O=arguments;h=a.call(this,C)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=r;h.groundTexture=s;h.skyColor=c;h.skyTexture=p;h.lightColor=y;h.ceilingLightColor=13684944;h.wallsAlpha=D;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[]}else{if(((typeof C==="number")||C===null)&&((r!=null&&r instanceof HomeTexture)||r===null)&&((typeof s==="number")||s===null)&&((c!=null&&c instanceof HomeTexture)||c===null)&&((typeof p==="number")||p===null)&&((typeof y==="number")||y===null)&&D===undefined){var O=arguments;var K=O[0];var n=O[1];var B=O[2];var q=O[3];var w=O[4];var g=O[5];var P=arguments;var R=HomeObject.createId("environment");h=a.call(this,R)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=K;h.groundTexture=n;h.skyColor=B;h.skyTexture=q;h.lightColor=w;h.ceilingLightColor=13684944;h.wallsAlpha=g;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(((typeof C==="number")||C===null)&&((r!=null&&r instanceof HomeTexture)||r===null)&&((typeof s==="number")||s===null)&&((typeof c==="number")||c===null)&&((typeof p==="number")||p===null)&&y===undefined&&D===undefined){var O=arguments;var I=O[0];var l=O[1];var A=O[2];var v=O[3];var f=O[4];var N=arguments;var o=null;var M=arguments;var Q=HomeObject.createId("environment");h=a.call(this,Q)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=I;h.groundTexture=l;h.skyColor=A;h.skyTexture=o;h.lightColor=v;h.ceilingLightColor=13684944;h.wallsAlpha=f;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(((typeof C==="string")||C===null)&&r===undefined&&s===undefined&&c===undefined&&p===undefined&&y===undefined&&D===undefined){var O=arguments;var J=arguments;var G=11053224;var k=null;var z=13427964;var m=null;var u=13684944;var e=0;h=a.call(this,C)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=G;h.groundTexture=k;h.skyColor=z;h.skyTexture=m;h.lightColor=u;h.ceilingLightColor=13684944;h.wallsAlpha=e;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(C===undefined&&r===undefined&&s===undefined&&c===undefined&&p===undefined&&y===undefined&&D===undefined){var O=arguments;var H=arguments;var L=HomeObject.createId("environment");var F=arguments;var E=11053224;var i=null;var x=13427964;var j=null;var t=13684944;var d=0;h=a.call(this,L)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=E;h.groundTexture=i;h.skyColor=x;h.skyTexture=j;h.lightColor=t;h.ceilingLightColor=13684944;h.wallsAlpha=d;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{throw new Error("invalid overload")}}}}}return h}b.prototype.isObserverCameraElevationAdjusted=function(){return this.observerCameraElevationAdjusted};b.prototype.setObserverCameraElevationAdjusted=function(c){if(this.observerCameraElevationAdjusted!==c){this.observerCameraElevationAdjusted=c;this.firePropertyChange("OBSERVER_CAMERA_ELEVATION_ADJUSTED",!c,c)}};b.prototype.getGroundColor=function(){return this.groundColor};b.prototype.setGroundColor=function(c){if(c!==this.groundColor){var d=this.groundColor;this.groundColor=c;this.firePropertyChange("GROUND_COLOR",d,c)}};b.prototype.getGroundTexture=function(){return this.groundTexture};b.prototype.setGroundTexture=function(d){if(d!==this.groundTexture){var c=this.groundTexture;this.groundTexture=d;this.firePropertyChange("GROUND_TEXTURE",c,d)}};b.prototype.isBackgroundImageVisibleOnGround3D=function(){return this.backgroundImageVisibleOnGround3D};b.prototype.setBackgroundImageVisibleOnGround3D=function(c){if(this.backgroundImageVisibleOnGround3D!==c){this.backgroundImageVisibleOnGround3D=c;this.firePropertyChange("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",!c,c)}};b.prototype.getSkyColor=function(){return this.skyColor};b.prototype.setSkyColor=function(d){if(d!==this.skyColor){var c=this.skyColor;this.skyColor=d;this.firePropertyChange("SKY_COLOR",c,d)}};b.prototype.getSkyTexture=function(){return this.skyTexture};b.prototype.setSkyTexture=function(c){if(c!==this.skyTexture){var d=this.skyTexture;this.skyTexture=c;this.firePropertyChange("SKY_TEXTURE",d,c)}};b.prototype.getLightColor=function(){return this.lightColor};b.prototype.setLightColor=function(c){if(c!==this.lightColor){var d=this.lightColor;this.lightColor=c;this.firePropertyChange("LIGHT_COLOR",d,c)}};b.prototype.getCeillingLightColor=function(){return this.ceilingLightColor};b.prototype.setCeillingLightColor=function(c){if(c!==this.ceilingLightColor){var d=this.ceilingLightColor;this.ceilingLightColor=c;this.firePropertyChange("CEILING_LIGHT_COLOR",d,c)}};b.prototype.getWallsAlpha=function(){return this.wallsAlpha};b.prototype.setWallsAlpha=function(d){if(d!==this.wallsAlpha){var c=this.wallsAlpha;this.wallsAlpha=d;this.firePropertyChange("WALLS_ALPHA",c,d)}};b.prototype.getDrawingMode=function(){return this.drawingMode};b.prototype.setDrawingMode=function(c){if(c!==this.drawingMode){var d=this.drawingMode;this.drawingMode=c;this.firePropertyChange("DRAWING_MODE",d,c)}};b.prototype.getSubpartSizeUnderLight=function(){return this.subpartSizeUnderLight};b.prototype.setSubpartSizeUnderLight=function(c){if(c!==this.subpartSizeUnderLight){var d=this.subpartSizeUnderLight;this.subpartSizeUnderLight=c;this.firePropertyChange("SUBPART_SIZE_UNDER_LIGHT",d,c)}};b.prototype.isAllLevelsVisible=function(){return this.allLevelsVisible};b.prototype.setAllLevelsVisible=function(c){if(c!==this.allLevelsVisible){this.allLevelsVisible=c;this.firePropertyChange("ALL_LEVELS_VISIBLE",!c,c)}};b.prototype.getPhotoWidth=function(){return this.photoWidth};b.prototype.setPhotoWidth=function(d){if(this.photoWidth!==d){var c=this.photoWidth;this.photoWidth=d;this.firePropertyChange("PHOTO_WIDTH",c,d)}};b.prototype.getPhotoHeight=function(){return this.photoHeight};b.prototype.setPhotoHeight=function(c){if(this.photoHeight!==c){var d=this.photoHeight;this.photoHeight=c;this.firePropertyChange("PHOTO_HEIGHT",d,c)}};b.prototype.getPhotoAspectRatio=function(){return this.photoAspectRatio};b.prototype.setPhotoAspectRatio=function(c){if(this.photoAspectRatio!==c){var d=this.photoAspectRatio;this.photoAspectRatio=c;this.photoAspectRatioName=AspectRatio[this.photoAspectRatio];this.firePropertyChange("PHOTO_ASPECT_RATIO",d,c)}};b.prototype.getPhotoQuality=function(){return this.photoQuality};b.prototype.setPhotoQuality=function(c){if(this.photoQuality!==c){var d=this.photoQuality;this.photoQuality=c;this.firePropertyChange("PHOTO_QUALITY",d,c)}};b.prototype.getVideoWidth=function(){return this.videoWidth};b.prototype.setVideoWidth=function(d){if(this.videoWidth!==d){var c=this.videoWidth;this.videoWidth=d;this.firePropertyChange("VIDEO_WIDTH",c,d)}};b.prototype.getVideoHeight=function(){return Math.round(this.getVideoWidth()/{FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[this.getVideoAspectRatio()])};b.prototype.getVideoAspectRatio=function(){return this.videoAspectRatio};b.prototype.setVideoAspectRatio=function(d){if(this.videoAspectRatio!==d){if({FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[d]==null){throw new IllegalArgumentException("Unsupported aspect ratio "+d)}var c=this.videoAspectRatio;this.videoAspectRatio=d;this.videoAspectRatioName=AspectRatio[this.videoAspectRatio];this.firePropertyChange("VIDEO_ASPECT_RATIO",c,d)}};b.prototype.getVideoQuality=function(){return this.videoQuality};b.prototype.setVideoQuality=function(c){if(this.videoQuality!==c){var d=this.videoQuality;this.videoQuality=c;this.firePropertyChange("VIDEO_QUALITY",d,c)}};b.prototype.getVideoSpeed=function(){return this.videoSpeed};b.prototype.setVideoSpeed=function(c){if(this.videoSpeed!==c){var d=this.videoSpeed;this.videoSpeed=c;this.firePropertyChange("VIDEO_SPEED",d,c)}};b.prototype.getVideoFrameRate=function(){return this.videoFrameRate};b.prototype.setVideoFrameRate=function(d){if(this.videoFrameRate!==d){var c=this.videoFrameRate;this.videoFrameRate=d;this.firePropertyChange("VIDEO_FRAME_RATE",c,d)}};b.prototype.getVideoCameraPath=function(){return this.cameraPath.slice(0)};b.prototype.setVideoCameraPath=function(c){if(this.cameraPath!==c){var d=this.cameraPath;if(c!=null){this.cameraPath=(c.slice(0))}else{this.cameraPath=[]}this.firePropertyChange("VIDEO_CAMERA_PATH",d,c)}};b.prototype.clone=function(){var f=this;var e=(function(i){if(a.prototype.clone!=undefined){return a.prototype.clone.call(f)}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(this);e.cameraPath=([]);for(var c=0;c<this.cameraPath.length;c++){var d=this.cameraPath[c];(e.cameraPath.push((function(i){if(i.clone!=undefined){return i.clone()}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(d))>0)}return e};return b}(HomeObject));HomeEnvironment.__class="com.eteks.sweethome3d.model.HomeEnvironment";(function(a){var b;(function(c){c[c.FILL=0]="FILL";c[c.OUTLINE=1]="OUTLINE";c[c.FILL_AND_OUTLINE=2]="FILL_AND_OUTLINE"})(b=a.DrawingMode||(a.DrawingMode={}))})(HomeEnvironment||(HomeEnvironment={}));HomeEnvironment.__transients=["photoAspectRatio","videoAspectRatio","propertyChangeSupport"];var HomePieceOfFurniture=(function(b){__extends(a,b);function a(n,c,m){var q=this;if(((typeof n==="string")||n===null)&&((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||c===null)&&((m!=null&&m instanceof Array&&(m.length==0||m[0]==null||(typeof m[0]==="string")))||m===null)){var j=arguments;q=b.call(this,n)||this;if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}q.name=c.getName();q.description=c.getDescription();q.information=c.getInformation();q.creator=c.getCreator();q.license=c.getLicense();q.icon=c.getIcon();q.planIcon=c.getPlanIcon();q.model=c.getModel();q.modelSize=c.getModelSize();q.width=c.getWidth();q.depth=c.getDepth();q.height=c.getHeight();q.elevation=c.getElevation();q.dropOnTopElevation=c.getDropOnTopElevation();q.movable=c.isMovable();q.doorOrWindow=c.isDoorOrWindow();q.color=c.getColor();q.modelRotation=c.getModelRotation();q.staircaseCutOutShape=c.getStaircaseCutOutShape();q.modelFlags=c.getModelFlags();q.resizable=c.isResizable();q.deformable=c.isDeformable();q.texturable=c.isTexturable();q.horizontallyRotatable=c.isHorizontallyRotatable();q.price=c.getPrice();q.valueAddedTaxPercentage=c.getValueAddedTaxPercentage();q.currency=c.getCurrency();if(c!=null&&c instanceof a){var e=c;q.catalogId=e.getCatalogId();q.nameVisible=e.isNameVisible();q.nameXOffset=e.getNameXOffset();q.nameYOffset=e.getNameYOffset();q.nameAngle=e.getNameAngle();q.nameStyle=e.getNameStyle();q.visible=e.isVisible();q.widthInPlan=e.getWidthInPlan();q.depthInPlan=e.getDepthInPlan();q.heightInPlan=e.getHeightInPlan();q.modelCenteredAtOrigin=e.isModelCenteredAtOrigin();q.modelTransformations=e.getModelTransformations();q.angle=e.getAngle();q.pitch=e.getPitch();q.roll=e.getRoll();q.x=e.getX();q.y=e.getY();q.modelMirrored=e.isModelMirrored();q.texture=e.getTexture();q.shininess=e.getShininess();q.modelMaterials=e.getModelMaterials();var l=m!=null?m.slice(0):e.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=e.isContentProperty(h)?e.getContentProperty(h):e.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}else{if(c!=null&&c instanceof CatalogPieceOfFurniture){var d=c;q.catalogId=d.getId();var l=m!=null?m.slice(0):d.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=d.isContentProperty(h)?d.getContentProperty(h):d.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}q.visible=true;q.widthInPlan=q.width;q.depthInPlan=q.depth;q.heightInPlan=q.height;q.modelCenteredAtOrigin=true;q.x=q.width/2;q.y=q.depth/2}}else{if(((n!=null&&(n.constructor!=null&&n.constructor.__interfaces!=null&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||n===null)&&((c!=null&&c instanceof Array&&(c.length==0||c[0]==null||(typeof c[0]==="string")))||c===null)&&m===undefined){var j=arguments;var x=j[0];var s=j[1];var t=arguments;var w=HomeObject.createId("pieceOfFurniture");q=b.call(this,w)||this;if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}q.name=x.getName();q.description=x.getDescription();q.information=x.getInformation();q.creator=x.getCreator();q.license=x.getLicense();q.icon=x.getIcon();q.planIcon=x.getPlanIcon();q.model=x.getModel();q.modelSize=x.getModelSize();q.width=x.getWidth();q.depth=x.getDepth();q.height=x.getHeight();q.elevation=x.getElevation();q.dropOnTopElevation=x.getDropOnTopElevation();q.movable=x.isMovable();q.doorOrWindow=x.isDoorOrWindow();q.color=x.getColor();q.modelRotation=x.getModelRotation();q.staircaseCutOutShape=x.getStaircaseCutOutShape();q.modelFlags=x.getModelFlags();q.resizable=x.isResizable();q.deformable=x.isDeformable();q.texturable=x.isTexturable();q.horizontallyRotatable=x.isHorizontallyRotatable();q.price=x.getPrice();q.valueAddedTaxPercentage=x.getValueAddedTaxPercentage();q.currency=x.getCurrency();if(x!=null&&x instanceof a){var e=x;q.catalogId=e.getCatalogId();q.nameVisible=e.isNameVisible();q.nameXOffset=e.getNameXOffset();q.nameYOffset=e.getNameYOffset();q.nameAngle=e.getNameAngle();q.nameStyle=e.getNameStyle();q.visible=e.isVisible();q.widthInPlan=e.getWidthInPlan();q.depthInPlan=e.getDepthInPlan();q.heightInPlan=e.getHeightInPlan();q.modelCenteredAtOrigin=e.isModelCenteredAtOrigin();q.modelTransformations=e.getModelTransformations();q.angle=e.getAngle();q.pitch=e.getPitch();q.roll=e.getRoll();q.x=e.getX();q.y=e.getY();q.modelMirrored=e.isModelMirrored();q.texture=e.getTexture();q.shininess=e.getShininess();q.modelMaterials=e.getModelMaterials();var l=s!=null?s.slice(0):e.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=e.isContentProperty(h)?e.getContentProperty(h):e.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}else{if(x!=null&&x instanceof CatalogPieceOfFurniture){var d=x;q.catalogId=d.getId();var l=s!=null?s.slice(0):d.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=d.isContentProperty(h)?d.getContentProperty(h):d.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}q.visible=true;q.widthInPlan=q.width;q.depthInPlan=q.depth;q.heightInPlan=q.height;q.modelCenteredAtOrigin=true;q.x=q.width/2;q.y=q.depth/2}if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}}else{if(((typeof n==="string")||n===null)&&((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||c===null)&&m===undefined){var j=arguments;var k=arguments;var r=a.EMPTY_PROPERTY_ARRAY_$LI$();q=b.call(this,n)||this;if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}q.name=c.getName();q.description=c.getDescription();q.information=c.getInformation();q.creator=c.getCreator();q.license=c.getLicense();q.icon=c.getIcon();q.planIcon=c.getPlanIcon();q.model=c.getModel();q.modelSize=c.getModelSize();q.width=c.getWidth();q.depth=c.getDepth();q.height=c.getHeight();q.elevation=c.getElevation();q.dropOnTopElevation=c.getDropOnTopElevation();q.movable=c.isMovable();q.doorOrWindow=c.isDoorOrWindow();q.color=c.getColor();q.modelRotation=c.getModelRotation();q.staircaseCutOutShape=c.getStaircaseCutOutShape();q.modelFlags=c.getModelFlags();q.resizable=c.isResizable();q.deformable=c.isDeformable();q.texturable=c.isTexturable();q.horizontallyRotatable=c.isHorizontallyRotatable();q.price=c.getPrice();q.valueAddedTaxPercentage=c.getValueAddedTaxPercentage();q.currency=c.getCurrency();if(c!=null&&c instanceof a){var e=c;q.catalogId=e.getCatalogId();q.nameVisible=e.isNameVisible();q.nameXOffset=e.getNameXOffset();q.nameYOffset=e.getNameYOffset();q.nameAngle=e.getNameAngle();q.nameStyle=e.getNameStyle();q.visible=e.isVisible();q.widthInPlan=e.getWidthInPlan();q.depthInPlan=e.getDepthInPlan();q.heightInPlan=e.getHeightInPlan();q.modelCenteredAtOrigin=e.isModelCenteredAtOrigin();q.modelTransformations=e.getModelTransformations();q.angle=e.getAngle();q.pitch=e.getPitch();q.roll=e.getRoll();q.x=e.getX();q.y=e.getY();q.modelMirrored=e.isModelMirrored();q.texture=e.getTexture();q.shininess=e.getShininess();q.modelMaterials=e.getModelMaterials();var l=r!=null?r.slice(0):e.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=e.isContentProperty(h)?e.getContentProperty(h):e.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}else{if(c!=null&&c instanceof CatalogPieceOfFurniture){var d=c;q.catalogId=d.getId();var l=r!=null?r.slice(0):d.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=d.isContentProperty(h)?d.getContentProperty(h):d.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}q.visible=true;q.widthInPlan=q.width;q.depthInPlan=q.depth;q.heightInPlan=q.height;q.modelCenteredAtOrigin=true;q.x=q.width/2;q.y=q.depth/2}if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}}else{if(((n!=null&&(n.constructor!=null&&n.constructor.__interfaces!=null&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||n===null)&&c===undefined&&m===undefined){var j=arguments;var v=j[0];var g=arguments;var p=a.EMPTY_PROPERTY_ARRAY_$LI$();var f=arguments;var u=HomeObject.createId("pieceOfFurniture");q=b.call(this,u)||this;if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}q.name=v.getName();q.description=v.getDescription();q.information=v.getInformation();q.creator=v.getCreator();q.license=v.getLicense();q.icon=v.getIcon();q.planIcon=v.getPlanIcon();q.model=v.getModel();q.modelSize=v.getModelSize();q.width=v.getWidth();q.depth=v.getDepth();q.height=v.getHeight();q.elevation=v.getElevation();q.dropOnTopElevation=v.getDropOnTopElevation();q.movable=v.isMovable();q.doorOrWindow=v.isDoorOrWindow();q.color=v.getColor();q.modelRotation=v.getModelRotation();q.staircaseCutOutShape=v.getStaircaseCutOutShape();q.modelFlags=v.getModelFlags();q.resizable=v.isResizable();q.deformable=v.isDeformable();q.texturable=v.isTexturable();q.horizontallyRotatable=v.isHorizontallyRotatable();q.price=v.getPrice();q.valueAddedTaxPercentage=v.getValueAddedTaxPercentage();q.currency=v.getCurrency();if(v!=null&&v instanceof a){var e=v;q.catalogId=e.getCatalogId();q.nameVisible=e.isNameVisible();q.nameXOffset=e.getNameXOffset();q.nameYOffset=e.getNameYOffset();q.nameAngle=e.getNameAngle();q.nameStyle=e.getNameStyle();q.visible=e.isVisible();q.widthInPlan=e.getWidthInPlan();q.depthInPlan=e.getDepthInPlan();q.heightInPlan=e.getHeightInPlan();q.modelCenteredAtOrigin=e.isModelCenteredAtOrigin();q.modelTransformations=e.getModelTransformations();q.angle=e.getAngle();q.pitch=e.getPitch();q.roll=e.getRoll();q.x=e.getX();q.y=e.getY();q.modelMirrored=e.isModelMirrored();q.texture=e.getTexture();q.shininess=e.getShininess();q.modelMaterials=e.getModelMaterials();var l=p!=null?p.slice(0):e.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=e.isContentProperty(h)?e.getContentProperty(h):e.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}else{if(v!=null&&v instanceof CatalogPieceOfFurniture){var d=v;q.catalogId=d.getId();var l=p!=null?p.slice(0):d.getPropertyNames();for(var i=0;i<l.length;i++){var h=l[i];var o=d.isContentProperty(h)?d.getContentProperty(h):d.getProperty(h);if(o!=null){q.setProperty$java_lang_String$java_lang_Object(h,o)}}}q.visible=true;q.widthInPlan=q.width;q.depthInPlan=q.depth;q.heightInPlan=q.height;q.modelCenteredAtOrigin=true;q.x=q.width/2;q.y=q.depth/2}if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}if(q.catalogId===undefined){q.catalogId=null}if(q.name===undefined){q.name=null}if(q.nameVisible===undefined){q.nameVisible=false}if(q.nameXOffset===undefined){q.nameXOffset=0}if(q.nameYOffset===undefined){q.nameYOffset=0}if(q.nameStyle===undefined){q.nameStyle=null}if(q.nameAngle===undefined){q.nameAngle=0}if(q.description===undefined){q.description=null}if(q.information===undefined){q.information=null}if(q.creator===undefined){q.creator=null}if(q.license===undefined){q.license=null}if(q.icon===undefined){q.icon=null}if(q.planIcon===undefined){q.planIcon=null}if(q.model===undefined){q.model=null}if(q.modelSize===undefined){q.modelSize=null}if(q.width===undefined){q.width=0}if(q.widthInPlan===undefined){q.widthInPlan=0}if(q.depth===undefined){q.depth=0}if(q.depthInPlan===undefined){q.depthInPlan=0}if(q.height===undefined){q.height=0}if(q.heightInPlan===undefined){q.heightInPlan=0}if(q.elevation===undefined){q.elevation=0}if(q.dropOnTopElevation===undefined){q.dropOnTopElevation=0}if(q.movable===undefined){q.movable=false}if(q.doorOrWindow===undefined){q.doorOrWindow=false}if(q.modelMaterials===undefined){q.modelMaterials=null}if(q.color===undefined){q.color=null}if(q.texture===undefined){q.texture=null}if(q.shininess===undefined){q.shininess=null}if(q.modelRotation===undefined){q.modelRotation=null}if(q.modelFlags===undefined){q.modelFlags=0}if(q.modelCenteredAtOrigin===undefined){q.modelCenteredAtOrigin=false}if(q.modelTransformations===undefined){q.modelTransformations=null}if(q.staircaseCutOutShape===undefined){q.staircaseCutOutShape=null}if(q.backFaceShown===undefined){q.backFaceShown=false}if(q.resizable===undefined){q.resizable=false}if(q.deformable===undefined){q.deformable=false}if(q.texturable===undefined){q.texturable=false}if(q.horizontallyRotatable===undefined){q.horizontallyRotatable=false}if(q.price===undefined){q.price=null}if(q.valueAddedTaxPercentage===undefined){q.valueAddedTaxPercentage=null}if(q.currency===undefined){q.currency=null}if(q.visible===undefined){q.visible=false}if(q.x===undefined){q.x=0}if(q.y===undefined){q.y=0}if(q.angle===undefined){q.angle=0}if(q.pitch===undefined){q.pitch=0}if(q.roll===undefined){q.roll=0}if(q.modelMirrored===undefined){q.modelMirrored=false}if(q.level===undefined){q.level=null}if(q.shapeCache===undefined){q.shapeCache=null}}else{throw new Error("invalid overload")}}}}return q}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.TWICE_PI_$LI$=function(){a.__static_initialize();if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.STRAIGHT_WALL_ANGLE_MARGIN==null){a.STRAIGHT_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(1)}return a.STRAIGHT_WALL_ANGLE_MARGIN};a.ROUND_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.ROUND_WALL_ANGLE_MARGIN==null){a.ROUND_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(10)}return a.ROUND_WALL_ANGLE_MARGIN};a.EMPTY_PROPERTY_ARRAY_$LI$=function(){a.__static_initialize();if(a.EMPTY_PROPERTY_ARRAY==null){a.EMPTY_PROPERTY_ARRAY=[]}return a.EMPTY_PROPERTY_ARRAY};a.SORTABLE_PROPERTY_COMPARATORS_$LI$=function(){a.__static_initialize();return a.SORTABLE_PROPERTY_COMPARATORS};a.__static_initializer_0=function(){var c={compare:function(e,d){return e.toString().localeCompare(d.toString())},equals:function(e,d){return e.toString().localeCompare(d.toString())===0}};a.SORTABLE_PROPERTY_COMPARATORS=({});(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CATALOG_ID",new a.HomePieceOfFurniture$0(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"NAME",new a.HomePieceOfFurniture$1(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DESCRIPTION",new a.HomePieceOfFurniture$2(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CREATOR",new a.HomePieceOfFurniture$3(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LICENSE",new a.HomePieceOfFurniture$4(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"WIDTH",new a.HomePieceOfFurniture$5());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"HEIGHT",new a.HomePieceOfFurniture$6());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DEPTH",new a.HomePieceOfFurniture$7());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MOVABLE",new a.HomePieceOfFurniture$8());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DOOR_OR_WINDOW",new a.HomePieceOfFurniture$9());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"COLOR",new a.HomePieceOfFurniture$10());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"TEXTURE",new a.HomePieceOfFurniture$11(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VISIBLE",new a.HomePieceOfFurniture$12());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"X",new a.HomePieceOfFurniture$13());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"Y",new a.HomePieceOfFurniture$14());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ELEVATION",new a.HomePieceOfFurniture$15());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ANGLE",new a.HomePieceOfFurniture$16());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MODEL_SIZE",new a.HomePieceOfFurniture$17());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LEVEL",new a.HomePieceOfFurniture$18());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE",new a.HomePieceOfFurniture$19());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX_PERCENTAGE",new a.HomePieceOfFurniture$20());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX",new a.HomePieceOfFurniture$21());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE_VALUE_ADDED_TAX_INCLUDED",new a.HomePieceOfFurniture$22())};a.compare$float$float=function(d,c){return(d-c)};a.compare$boolean$boolean=function(d,c){return d===c?0:(d?-1:1)};a.compare$java_math_BigDecimal$java_math_BigDecimal=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return d.cmp(c)}}}};a.compare=function(d,c){if(((d!=null&&d instanceof Big)||d===null)&&((c!=null&&c instanceof Big)||c===null)){return a.compare$java_math_BigDecimal$java_math_BigDecimal(d,c)}else{if(((d!=null&&d instanceof Level)||d===null)&&((c!=null&&c instanceof Level)||c===null)){return a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(d,c)}else{if(((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)){return a.compare$float$float(d,c)}else{if(((typeof d==="boolean")||d===null)&&((typeof c==="boolean")||c===null)){return a.compare$boolean$boolean(d,c)}else{throw new Error("invalid overload")}}}}};a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return(d.getElevation()-c.getElevation())}}}};a.getComparableModelSize=function(g){if(g!=null&&g instanceof HomeFurnitureGroup){var f=null;var h=g.getFurniture();for(var e=0;e<h.length;e++){var c=h[e];var d=a.getComparableModelSize(c);if(d!=null&&(f==null||f<d)){f=d}}return f}else{return g.modelSize}};a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.setCatalogId=function(d){if(d!==this.catalogId&&(d==null||!(d===this.catalogId))){var c=this.catalogId;this.catalogId=d;this.firePropertyChange("CATALOG_ID",c,d)}};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.isNameVisible=function(){return this.nameVisible};a.prototype.setNameVisible=function(c){if(c!==this.nameVisible){this.nameVisible=c;this.firePropertyChange("NAME_VISIBLE",!c,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getDescription=function(){return this.description};a.prototype.setDescription=function(c){if(c!==this.description&&(c==null||!(c===this.description))){var d=this.description;this.description=c;this.firePropertyChange("DESCRIPTION",d,c)}};a.prototype.getInformation=function(){return this.information};a.prototype.setInformation=function(c){if(c!==this.information&&(c==null||!(c===this.information))){var d=this.information;this.information=c;this.firePropertyChange("INFORMATION",d,c)}};a.prototype.getCreator=function(){return this.creator};a.prototype.setCreator=function(d){if(d!==this.creator&&(d==null||!(d===this.creator))){var c=this.creator;this.creator=d;this.firePropertyChange("CREATOR",c,d)}};a.prototype.getLicense=function(){return this.license};a.prototype.setLicense=function(d){if(d!==this.license&&(d==null||!(d===this.license))){var c=this.license;this.license=d;this.firePropertyChange("LICENSE",c,d)}};a.prototype.getDepth=function(){return this.depth};a.prototype.setDepth=function(d){if(this.isResizable()){if(d!==this.depth){var c=this.depth;this.depth=d;this.shapeCache=null;this.firePropertyChange("DEPTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getDepthInPlan=function(){return this.depthInPlan};a.prototype.setDepthInPlan=function(c){if(c!==this.depthInPlan){var d=this.depthInPlan;this.depthInPlan=c;this.shapeCache=null;this.firePropertyChange("DEPTH_IN_PLAN",d,c)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(this.isResizable()){if(c!==this.height){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getHeightInPlan=function(){return this.heightInPlan};a.prototype.setHeightInPlan=function(c){if(c!==this.heightInPlan){var d=this.heightInPlan;this.heightInPlan=c;this.firePropertyChange("HEIGHT_IN_PLAN",d,c)}};a.prototype.getWidth=function(){return this.width};a.prototype.setWidth=function(d){if(this.isResizable()){if(d!==this.width){var c=this.width;this.width=d;this.shapeCache=null;this.firePropertyChange("WIDTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getWidthInPlan=function(){return this.widthInPlan};a.prototype.setWidthInPlan=function(d){if(d!==this.widthInPlan){var c=this.widthInPlan;this.widthInPlan=d;this.shapeCache=null;this.firePropertyChange("WIDTH_IN_PLAN",c,d)}};a.prototype.scale=function(c){this.setWidth(this.getWidth()*c);this.setDepth(this.getDepth()*c);this.setHeight(this.getHeight()*c)};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.isMovable=function(){return this.movable};a.prototype.setMovable=function(c){if(c!==this.movable){this.movable=c;this.firePropertyChange("MOVABLE",!c,c)}};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.setIcon=function(c){if(c!==this.icon&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.icon))){var d=this.icon;this.icon=c;this.firePropertyChange("ICON",d,c)}};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.setPlanIcon=function(c){if(c!==this.planIcon&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.planIcon))){var d=this.planIcon;this.planIcon=c;this.firePropertyChange("PLAN_ICON",d,c)}};a.prototype.getModel=function(){return this.model};a.prototype.setModel=function(c){if(c!==this.model&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.model))){var d=this.model;this.model=c;this.firePropertyChange("MODEL",d,c)}};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.setModelSize=function(c){this.modelSize=c};a.prototype.getModelMaterials=function(){if(this.modelMaterials!=null){return this.modelMaterials.slice(0)}else{return null}};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.modelMaterials)){var c=this.modelMaterials;this.modelMaterials=d!=null?d.slice(0):null;this.firePropertyChange("MODEL_MATERIALS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(this.isTexturable()){if(c!==this.color&&(c==null||!(c===this.color))){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getTexture=function(){return this.texture};a.prototype.setTexture=function(d){if(this.isTexturable()){if(d!==this.texture&&(d==null||!d.equals(this.texture))){var c=this.texture;this.texture=d;this.firePropertyChange("TEXTURE",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getShininess=function(){return this.shininess};a.prototype.setShininess=function(d){if(this.isTexturable()){if(d!==this.shininess&&(d==null||!(d===this.shininess))){var c=this.shininess;this.shininess=d;this.firePropertyChange("SHININESS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.setPrice=function(d){if(d!==this.price&&(d==null||!((this.price)!=null?d.eq(this.price):(d===(this.price))))){var c=this.price;this.price=d;this.firePropertyChange("PRICE",c,d)}};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.setValueAddedTaxPercentage=function(d){if(d!==this.valueAddedTaxPercentage&&(d==null||!((this.valueAddedTaxPercentage)!=null?d.eq(this.valueAddedTaxPercentage):(d===(this.valueAddedTaxPercentage))))){var c=this.valueAddedTaxPercentage;this.valueAddedTaxPercentage=d;this.firePropertyChange("VALUE_ADDED_TAX_PERCENTAGE",c,d)}};a.prototype.getValueAddedTax=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.times(this.valueAddedTaxPercentage).round(2)}else{return null}};a.prototype.getPriceValueAddedTaxIncluded=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.plus(this.getValueAddedTax())}else{return this.price}};a.prototype.getCurrency=function(){return this.currency};a.prototype.setCurrency=function(c){if(c!==this.currency&&(c==null||!(c===this.currency))){var d=this.currency;this.currency=c;this.firePropertyChange("CURRENCY",d,c)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.shapeCache=null;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.shapeCache=null;this.firePropertyChange("Y",c,d)}};a.prototype.getAngle=function(){return this.angle};a.prototype.setAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.shapeCache=null;this.firePropertyChange("ANGLE",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(this.isHorizontallyRotatable()){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.shapeCache=null;this.firePropertyChange("PITCH",c,d)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.getRoll=function(){return this.roll};a.prototype.setRoll=function(c){if(this.isHorizontallyRotatable()){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.roll){var d=this.roll;this.roll=c;this.shapeCache=null;this.firePropertyChange("ROLL",d,c)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.isHorizontallyRotated=function(){return this.roll!==0||this.pitch!==0};a.prototype.getModelRotation=function(){return CatalogPieceOfFurniture.deepClone(this.modelRotation)};a.prototype.setModelRotation=function(c){if(!(JSON.stringify(c)===JSON.stringify(this.modelRotation))){var d=CatalogPieceOfFurniture.deepClone(this.modelRotation);this.modelRotation=CatalogPieceOfFurniture.deepClone(c);this.firePropertyChange("MODEL_ROTATION",d,c)}};a.prototype.isModelMirrored=function(){return this.modelMirrored};a.prototype.setModelMirrored=function(c){if(this.isResizable()){if(c!==this.modelMirrored){this.modelMirrored=c;this.firePropertyChange("MODEL_MIRRORED",!c,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.isModelCenteredAtOrigin=function(){return this.modelCenteredAtOrigin};a.prototype.setModelCenteredAtOrigin=function(c){this.modelCenteredAtOrigin=c};a.prototype.isBackFaceShown=function(){return(this.modelFlags&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE};a.prototype.setBackFaceShown=function(c){this.setModelFlags((this.getModelFlags()&~PieceOfFurniture.SHOW_BACK_FACE)|(c?PieceOfFurniture.SHOW_BACK_FACE:0))};a.prototype.getModelFlags=function(){return this.modelFlags};a.prototype.setModelFlags=function(c){if(c!==this.modelFlags){var d=this.modelFlags;this.modelFlags=c;this.backFaceShown=(c&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE;this.firePropertyChange("MODEL_FLAGS",d,c)}};a.prototype.getModelTransformations=function(){if(this.modelTransformations!=null){return this.modelTransformations.slice(0)}else{return null}};a.prototype.setModelTransformations=function(d){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.modelTransformations)){var c=this.modelTransformations;this.modelTransformations=d!=null&&d.length>0?d.slice(0):null;this.firePropertyChange("MODEL_MATERIALS",c,d)}};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.setStaircaseCutOutShape=function(d){if(d!==this.staircaseCutOutShape&&(d==null||!(d===this.staircaseCutOutShape))){var c=this.staircaseCutOutShape;this.staircaseCutOutShape=d;this.firePropertyChange("STAIRCASE_CUT_OUT_SHAPE",c,d)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&this.isTopAtLevel(e)}else{return false}}};a.prototype.isTopAtLevel=function(d){var c=this.level.getElevation()+this.elevation+this.heightInPlan;if(this.staircaseCutOutShape!=null){return c>=d.getElevation()}else{return c>d.getElevation()}};a.prototype.getPoints=function(){var c=(function(g){var f=function(j){if(j.length===0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var e=this.getShape().getPathIterator(null);for(var d=0;d<c.length;d++){e.currentSegment(c[d]);e.next()}return c};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.isPointAt=function(d,h,f){var g=this.getPoints();for(var e=0;e<g.length;e++){var c=g[e];if(Math.abs(d-c[0])<=f&&Math.abs(h-c[1])<=f){return true}}return false};a.prototype.isTopLeftPointAt=function(d,g,f){var e=this.getPoints();var c=java.awt.geom.Point2D.distanceSq(d,g,e[0][0],e[0][1]);return c<=f*f&&c<java.awt.geom.Point2D.distanceSq(d,g,e[1][0],e[1][1])&&c<java.awt.geom.Point2D.distanceSq(d,g,e[3][0],e[3][1])};a.prototype.isTopRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[0][0],d[0][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1])};a.prototype.isBottomLeftPointAt=function(c,g,f){var e=this.getPoints();var d=java.awt.geom.Point2D.distanceSq(c,g,e[3][0],e[3][1]);return d<=f*f&&d<java.awt.geom.Point2D.distanceSq(c,g,e[0][0],e[0][1])&&d<java.awt.geom.Point2D.distanceSq(c,g,e[2][0],e[2][1])};a.prototype.isBottomRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[3][0],d[3][1])};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getX()-this.getNameXOffset())<=d&&Math.abs(e-this.getY()-this.getNameYOffset())<=d};a.prototype.isParallelToWall=function(d){if(d.getArcExtent()==null){var c=d.getYEnd()-d.getYStart();var e=d.getXEnd()-d.getXStart();if(e===0&&c===0){return false}else{var h=Math.atan2(c,e);var f=Math.abs(h-this.getAngle())%Math.PI;return f<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()}}else{var g=Math.PI/2+Math.atan2(d.getYArcCircleCenter()-this.getY(),d.getXArcCircleCenter()-this.getX());var f=Math.abs(g-this.getAngle())%Math.PI;return f<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()}};a.prototype.getShape=function(){if(this.shapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidthInPlan()/2,this.getY()-this.getDepthInPlan()/2,this.getWidthInPlan(),this.getDepthInPlan());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getAngle(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}return this.shapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};a.getFurnitureComparator=function(c){return((function(d){if(d==null||typeof d=="function"){return d}return function(f,e){return(d.compare?d.compare:d).call(d,f,e)}})((function(d,e){if(d.entries==null){d.entries=[]}for(var f=0;f<d.entries.length;f++){if(d.entries[f].key==null&&e==null||d.entries[f].key.equals!=null&&d.entries[f].key.equals(e)||d.entries[f].key===e){return d.entries[f].value}}return null})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),c)))};a.__static_initialized=false;return a}(HomeObject));HomePieceOfFurniture.__class="com.eteks.sweethome3d.model.HomePieceOfFurniture";HomePieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"];(function(m){var l=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.catalogId===z.catalogId){return 0}else{if(A.catalogId==null){return -1}else{if(z.catalogId==null){return 1}else{return this.collator.compare(A.catalogId,z.catalogId)}}}};return y}());m.HomePieceOfFurniture$0=l;var k=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.name===z.name){return 0}else{if(A.name==null){return -1}else{if(z.name==null){return 1}else{return this.collator.compare(A.name,z.name)}}}};return y}());m.HomePieceOfFurniture$1=k;var j=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.description===z.description){return 0}else{if(A.description==null){return -1}else{if(z.description==null){return 1}else{return this.collator.compare(A.description,z.description)}}}};return y}());m.HomePieceOfFurniture$2=j;var i=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.creator===z.creator){return 0}else{if(A.creator==null){return -1}else{if(z.creator==null){return 1}else{return this.collator.compare(A.creator,z.creator)}}}};return y}());m.HomePieceOfFurniture$3=i;var h=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.license===z.license){return 0}else{if(A.license==null){return -1}else{if(z.license==null){return 1}else{return this.collator.compare(A.license,z.license)}}}};return y}());m.HomePieceOfFurniture$4=h;var g=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.width,z.width)};return y}());m.HomePieceOfFurniture$5=g;var f=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.height,z.height)};return y}());m.HomePieceOfFurniture$6=f;var e=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.depth,z.depth)};return y}());m.HomePieceOfFurniture$7=e;var c=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$boolean$boolean(A.movable,z.movable)};return y}());m.HomePieceOfFurniture$8=c;var a=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$boolean$boolean(A.doorOrWindow,z.doorOrWindow)};return y}());m.HomePieceOfFurniture$9=a;var d=(function(){function y(){}y.prototype.compare=function(A,z){if(A.color===z.color){return 0}else{if(A.color==null){return -1}else{if(z.color==null){return 1}else{return A.color-z.color}}}};return y}());m.HomePieceOfFurniture$10=d;var b=(function(){function y(z){this.collator=z}y.prototype.compare=function(A,z){if(A.texture===z.texture){return 0}else{if(A.texture==null){return -1}else{if(z.texture==null){return 1}else{return this.collator.compare(A.texture.getName(),z.texture.getName())}}}};return y}());m.HomePieceOfFurniture$11=b;var x=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$boolean$boolean(A.visible,z.visible)};return y}());m.HomePieceOfFurniture$12=x;var w=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.x,z.x)};return y}());m.HomePieceOfFurniture$13=w;var v=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.y,z.y)};return y}());m.HomePieceOfFurniture$14=v;var u=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.elevation,z.elevation)};return y}());m.HomePieceOfFurniture$15=u;var t=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$float$float(A.angle,z.angle)};return y}());m.HomePieceOfFurniture$16=t;var s=(function(){function y(){}y.prototype.compare=function(C,B){var A=m.getComparableModelSize(C);var z=m.getComparableModelSize(B);if(A===z){return 0}else{if(A==null){return -1}else{if(z==null){return 1}else{return A<z?-1:(A===z?0:1)}}}};return y}());m.HomePieceOfFurniture$17=s;var r=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(A.getLevel(),z.getLevel())};return y}());m.HomePieceOfFurniture$18=r;var q=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$java_math_BigDecimal$java_math_BigDecimal(A.price,z.price)};return y}());m.HomePieceOfFurniture$19=q;var p=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$java_math_BigDecimal$java_math_BigDecimal(A.valueAddedTaxPercentage,z.valueAddedTaxPercentage)};return y}());m.HomePieceOfFurniture$20=p;var o=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$java_math_BigDecimal$java_math_BigDecimal(A.getValueAddedTax(),z.getValueAddedTax())};return y}());m.HomePieceOfFurniture$21=o;var n=(function(){function y(){}y.prototype.compare=function(A,z){return m.compare$java_math_BigDecimal$java_math_BigDecimal(A.getPriceValueAddedTaxIncluded(),z.getPriceValueAddedTaxIncluded())};return y}());m.HomePieceOfFurniture$22=n})(HomePieceOfFurniture||(HomePieceOfFurniture={}));HomePieceOfFurniture.__transients=["shapeCache","propertyChangeSupport"];var Compass=(function(b){__extends(a,b);function a(d,j,i,m){var g=this;if(((typeof d==="string")||d===null)&&((typeof j==="number")||j===null)&&((typeof i==="number")||i===null)&&((typeof m==="number")||m===null)){var h=arguments;g=b.call(this,d)||this;if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}g.x=j;g.y=i;g.diameter=m;g.visible=true;g.timeZone="UTC";g.initGeographicPoint()}else{if(((typeof d==="number")||d===null)&&((typeof j==="number")||j===null)&&((typeof i==="number")||i===null)&&m===undefined){var h=arguments;var k=h[0];var c=h[1];var f=h[2];var l=arguments;var e=HomeObject.createId("compass");g=b.call(this,e)||this;if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}g.x=k;g.y=c;g.diameter=f;g.visible=true;g.timeZone="UTC";g.initGeographicPoint();if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}}else{throw new Error("invalid overload")}}return g}a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.pointsCache=null;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.pointsCache=null;this.firePropertyChange("Y",c,d)}};a.prototype.getDiameter=function(){return this.diameter};a.prototype.setDiameter=function(c){if(c!==this.diameter){var d=this.diameter;this.diameter=c;this.pointsCache=null;this.firePropertyChange("DIAMETER",d,c)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getNorthDirection=function(){return this.northDirection};a.prototype.setNorthDirection=function(d){if(d!==this.northDirection){var c=this.northDirection;this.northDirection=d;this.pointsCache=null;this.firePropertyChange("NORTH_DIRECTION",c,d)}};a.prototype.getLatitude=function(){return this.latitude};a.prototype.setLatitude=function(d){if(d!==this.latitude){var c=this.latitude;this.latitude=d;this.dateCache=null;this.firePropertyChange("LATITUDE",c,d)}};a.prototype.getLongitude=function(){return this.longitude};a.prototype.setLongitude=function(d){if(d!==this.longitude){var c=this.longitude;this.longitude=d;this.dateCache=null;this.firePropertyChange("LONGITUDE",c,d)}};a.prototype.getTimeZone=function(){return this.timeZone};a.prototype.setTimeZone=function(c){if(!(this.timeZone===c)){if(c==null){throw new IllegalArgumentException("Time zone ID can't be null")}var d=this.timeZone;this.timeZone=c;this.dateCache=null;this.firePropertyChange("TIME_ZONE",d,c)}};a.prototype.getPoints=function(){if(this.pointsCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());var e=java.awt.geom.AffineTransform.getRotateInstance(this.getNorthDirection(),this.getX(),this.getY());this.pointsCache=(function(h){var g=function(k){if(k.length===0){return 0}else{var l=[];for(var j=0;j<k[0];j++){l.push(g(k.slice(1)))}return l}};return g(h)})([4,2]);var f=c.getPathIterator(e);for(var d=0;d<this.pointsCache.length;d++){f.currentSegment(this.pointsCache[d]);f.next()}}return[this.pointsCache[0].slice(0),this.pointsCache[1].slice(0),this.pointsCache[2].slice(0),this.pointsCache[3].slice(0)]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter()).intersects(d)};a.prototype.containsPoint=function(c,f,e){var d=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};a.prototype.computeJulianDay=function(i,h,k,f,e,c,m,g){var n=k+f/24+e/1440+c/86400;if(h===1||h===2){i-=1;h+=12}var l=(i/100|0);var j=2-l+(l/4|0);var d=((365.25*(i+4716))|0)+(((30.6001*(h+1)))|0)+n+j-1524.5;d-=(m+g)/24;d-=2451545;return d};a.prototype.toSiderealTime=function(c){var d=c/36525;var e=(24110.54841+(8640184.812866*d)+(0.093104*Math.pow(d,2))-(0.0000062*Math.pow(d,3)))/3600;return((e/24)-((e/24)|0))*24};a.prototype.initGeographicPoint=function(){var y;if(a.timeZoneGeographicPointsReference!=null){y=a.timeZoneGeographicPointsReference}else{y=null}if(y==null){y=({});var g=new a.GeographicPoint(-13.833333,-171.73334);(y["Etc/GMT+11"]=g);(y["Pacific/Apia"]=g);(y["Pacific/Midway"]=new a.GeographicPoint(28.2,-177.35));(y["Pacific/Niue"]=new a.GeographicPoint(-19.055,-169.92));(y["Pacific/Pago_Pago"]=new a.GeographicPoint(-14.278055,-170.7025));(y["Pacific/Samoa"]=g);(y["US/Samoa"]=g);(y["America/Adak"]=new a.GeographicPoint(51.88,-176.65805));(y["America/Atka"]=new a.GeographicPoint(52.19611,-174.20056));var A=new a.GeographicPoint(21.306944,-157.85834);(y["Etc/GMT+10"]=A);(y["Pacific/Fakaofo"]=new a.GeographicPoint(-9.3653,-171.215));(y["Pacific/Honolulu"]=A);(y["Pacific/Johnston"]=new a.GeographicPoint(16.75,-169.517));(y["Pacific/Rarotonga"]=new a.GeographicPoint(-21.233,-159.783));(y["Pacific/Tahiti"]=new a.GeographicPoint(-17.533333,-149.56667));(y["SystemV/HST10"]=A);(y["US/Aleutian"]=new a.GeographicPoint(54.817,164.033));(y["US/Hawaii"]=A);(y["Pacific/Marquesas"]=new a.GeographicPoint(-9.45,-139.38));var r=new a.GeographicPoint(61.218056,-149.90028);(y["America/Anchorage"]=r);(y["America/Juneau"]=new a.GeographicPoint(58.301945,-134.41972));(y["America/Nome"]=new a.GeographicPoint(64.501114,-165.40639));(y["America/Yakutat"]=new a.GeographicPoint(59.546944,-139.72722));(y["Etc/GMT+9"]=r);(y["Pacific/Gambier"]=new a.GeographicPoint(-23.1178,-134.97));(y["SystemV/YST9"]=r);(y["SystemV/YST9YDT"]=r);(y["US/Alaska"]=r);(y["America/Dawson"]=new a.GeographicPoint(64.066666,-139.41667));(y["America/Ensenada"]=new a.GeographicPoint(31.866667,-116.61667));var f=new a.GeographicPoint(34.052223,-118.242775);(y["America/Los_Angeles"]=f);(y["America/Santa_Isabel"]=new a.GeographicPoint(28.383333,-113.35));(y["America/Tijuana"]=new a.GeographicPoint(32.533333,-117.01667));(y["America/Vancouver"]=new a.GeographicPoint(49.25,-123.13333));(y["America/Whitehorse"]=new a.GeographicPoint(60.716667,-135.05));(y["Canada/Pacific"]=new a.GeographicPoint(49.25,-123.13333));(y["Canada/Yukon"]=new a.GeographicPoint(60.716667,-135.05));(y["Etc/GMT+8"]=f);(y["Mexico/BajaNorte"]=new a.GeographicPoint(32.533333,-117.01667));(y["Pacific/Pitcairn"]=new a.GeographicPoint(-25.0667,-130.1));(y["SystemV/PST8"]=f);(y["SystemV/PST8PDT"]=f);(y["US/Pacific"]=f);(y["US/Pacific-New"]=f);(y["America/Boise"]=new a.GeographicPoint(43.61361,-116.2025));(y["America/Cambridge_Bay"]=new a.GeographicPoint(69.11667,-105.03333));(y["America/Chihuahua"]=new a.GeographicPoint(28.633333,-106.083336));(y["America/Dawson_Creek"]=new a.GeographicPoint(55.766666,-120.23333));var k=new a.GeographicPoint(39.739166,-104.98417);(y["America/Denver"]=k);(y["America/Edmonton"]=new a.GeographicPoint(53.55,-113.5));(y["America/Hermosillo"]=new a.GeographicPoint(29.066668,-110.96667));(y["America/Inuvik"]=new a.GeographicPoint(68.35,-133.7));(y["America/Mazatlan"]=new a.GeographicPoint(23.216667,-106.416664));(y["America/Ojinaga"]=new a.GeographicPoint(29.566668,-104.416664));(y["America/Phoenix"]=new a.GeographicPoint(33.448334,-112.07333));(y["America/Shiprock"]=new a.GeographicPoint(36.785557,-108.686386));(y["America/Yellowknife"]=new a.GeographicPoint(62.45,-114.35));(y["Canada/Mountain"]=new a.GeographicPoint(53.55,-113.5));(y["Etc/GMT+7"]=k);(y["Mexico/BajaSur"]=new a.GeographicPoint(32.567,-116.633));(y["SystemV/MST7"]=k);(y["SystemV/MST7MDT"]=k);(y["US/Arizona"]=new a.GeographicPoint(33.448334,-112.07333));(y["US/Mountain"]=k);(y["America/Belize"]=new a.GeographicPoint(17.483334,-88.183334));(y["America/Cancun"]=new a.GeographicPoint(21.166668,-86.833336));var w=new a.GeographicPoint(41.85,-87.65);(y["America/Chicago"]=w);(y["America/Costa_Rica"]=new a.GeographicPoint(9.933333,-84.083336));(y["America/El_Salvador"]=new a.GeographicPoint(13.7086115,-89.20306));(y["America/Guatemala"]=new a.GeographicPoint(14.621111,-90.52695));(y["America/Knox_IN"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Managua"]=new a.GeographicPoint(12.150833,-86.26833));(y["America/Matamoros"]=new a.GeographicPoint(25.883333,-97.5));(y["America/Menominee"]=new a.GeographicPoint(45.107777,-87.61417));(y["America/Merida"]=new a.GeographicPoint(20.966667,-89.61667));(y["America/Mexico_City"]=new a.GeographicPoint(19.434168,-99.13861));(y["America/Monterrey"]=new a.GeographicPoint(25.666668,-100.316666));(y["America/Rainy_River"]=new a.GeographicPoint(48.716667,-94.566666));(y["America/Rankin_Inlet"]=new a.GeographicPoint(62.816666,-92.083336));(y["America/Regina"]=new a.GeographicPoint(50.45,-104.61667));(y["America/Swift_Current"]=new a.GeographicPoint(50.283333,-107.76667));(y["America/Tegucigalpa"]=new a.GeographicPoint(14.1,-87.21667));(y["America/Winnipeg"]=new a.GeographicPoint(49.88333,-97.166664));(y["Canada/Central"]=new a.GeographicPoint(50.45,-104.61667));(y["Canada/East-Saskatchewan"]=new a.GeographicPoint(51.216667,-102.46667));(y["Canada/Saskatchewan"]=new a.GeographicPoint(50.45,-104.61667));(y["Chile/EasterIsland"]=new a.GeographicPoint(-27.15,-109.425));(y["Etc/GMT+6"]=w);(y["Mexico/General"]=new a.GeographicPoint(19.434168,-99.13861));(y["Pacific/Easter"]=new a.GeographicPoint(-27.15,-109.425));(y["Pacific/Galapagos"]=new a.GeographicPoint(-0.667,-90.55));(y["SystemV/CST6"]=w);(y["SystemV/CST6CDT"]=w);(y["US/Central"]=w);(y["US/Indiana-Starke"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Atikokan"]=new a.GeographicPoint(48.75,-91.61667));(y["America/Bogota"]=new a.GeographicPoint(4.6,-74.083336));(y["America/Cayman"]=new a.GeographicPoint(19.3,-81.38333));(y["America/Coral_Harbour"]=new a.GeographicPoint(64.13333,-83.166664));(y["America/Detroit"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Fort_Wayne"]=new a.GeographicPoint(41.130554,-85.12889));(y["America/Grand_Turk"]=new a.GeographicPoint(21.466667,-71.13333));(y["America/Guayaquil"]=new a.GeographicPoint(-2.1666667,-79.9));(y["America/Havana"]=new a.GeographicPoint(23.131945,-82.36417));(y["America/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Iqaluit"]=new a.GeographicPoint(63.733334,-68.5));(y["America/Jamaica"]=new a.GeographicPoint(18,-76.8));(y["America/Lima"]=new a.GeographicPoint(-12.05,-77.05));(y["America/Louisville"]=new a.GeographicPoint(38.254166,-85.759445));(y["America/Montreal"]=new a.GeographicPoint(45.5,-73.583336));(y["America/Nassau"]=new a.GeographicPoint(25.083334,-77.35));var o=new a.GeographicPoint(40.71417,-74.006386);(y["America/New_York"]=o);(y["America/Nipigon"]=new a.GeographicPoint(49.016666,-88.25));(y["America/Panama"]=new a.GeographicPoint(8.966667,-79.53333));(y["America/Pangnirtung"]=new a.GeographicPoint(66.13333,-65.75));(y["America/Port-au-Prince"]=new a.GeographicPoint(18.539167,-72.335));(y["America/Resolute"]=new a.GeographicPoint(74.683334,-94.9));(y["America/Thunder_Bay"]=new a.GeographicPoint(48.4,-89.23333));(y["America/Toronto"]=new a.GeographicPoint(43.666668,-79.416664));(y["Canada/Eastern"]=new a.GeographicPoint(43.666668,-79.416664));(y["Etc/GMT+5"]=o);(y["SystemV/EST5"]=o);(y["SystemV/EST5EDT"]=o);(y["US/East-Indiana"]=new a.GeographicPoint(36.8381,-84.85));(y["US/Eastern"]=o);(y["US/Michigan"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Caracas"]=new a.GeographicPoint(10.5,-66.916664));(y["America/Anguilla"]=new a.GeographicPoint(18.216667,-63.05));(y["America/Antigua"]=new a.GeographicPoint(17.116667,-61.85));(y["America/Aruba"]=new a.GeographicPoint(10.541111,-72.9175));(y["America/Asuncion"]=new a.GeographicPoint(-25.266666,-57.666668));(y["America/Barbados"]=new a.GeographicPoint(13.1,-59.616665));(y["America/Blanc-Sablon"]=new a.GeographicPoint(51.433334,-57.11667));(y["America/Boa_Vista"]=new a.GeographicPoint(2.8166666,-60.666668));(y["America/Campo_Grande"]=new a.GeographicPoint(-20.45,-54.616665));(y["America/Cuiaba"]=new a.GeographicPoint(-15.583333,-56.083332));(y["America/Curacao"]=new a.GeographicPoint(12.1167,-68.933));(y["America/Dominica"]=new a.GeographicPoint(15.3,-61.4));(y["America/Eirunepe"]=new a.GeographicPoint(-6.6666665,-69.86667));(y["America/Glace_Bay"]=new a.GeographicPoint(46.2,-59.966667));(y["America/Goose_Bay"]=new a.GeographicPoint(53.333332,-60.416668));(y["America/Grenada"]=new a.GeographicPoint(12.05,-61.75));(y["America/Guadeloupe"]=new a.GeographicPoint(16.233334,-61.516666));(y["America/Guyana"]=new a.GeographicPoint(6.8,-58.166668));(y["America/Halifax"]=new a.GeographicPoint(44.65,-63.6));(y["America/La_Paz"]=new a.GeographicPoint(-16.5,-68.15));(y["America/Manaus"]=new a.GeographicPoint(-3.1133332,-60.025276));(y["America/Marigot"]=new a.GeographicPoint(18.073,63.0844));(y["America/Martinique"]=new a.GeographicPoint(14.6,-61.083332));(y["America/Moncton"]=new a.GeographicPoint(46.083332,-64.76667));(y["America/Montserrat"]=new a.GeographicPoint(16.7,-62.216667));(y["America/Port_of_Spain"]=new a.GeographicPoint(10.65,-61.516666));(y["America/Porto_Acre"]=new a.GeographicPoint(-9.587778,-67.53555));(y["America/Porto_Velho"]=new a.GeographicPoint(-8.766666,-63.9));(y["America/Puerto_Rico"]=new a.GeographicPoint(18.467,66.117));(y["America/Rio_Branco"]=new a.GeographicPoint(-9.966667,-67.8));var l=new a.GeographicPoint(-33.45,-70.666664);(y["America/Santiago"]=l);(y["America/Santo_Domingo"]=new a.GeographicPoint(18.466667,-69.9));(y["America/St_Barthelemy"]=new a.GeographicPoint(17.8978,-62.851));(y["America/St_Kitts"]=new a.GeographicPoint(17.3,-62.733));(y["America/St_Lucia"]=new a.GeographicPoint(14.0167,-60.9833));(y["America/St_Thomas"]=new a.GeographicPoint(18.3333,-64.9167));(y["America/St_Vincent"]=new a.GeographicPoint(13.1667,-61.2333));(y["America/Thule"]=new a.GeographicPoint(-54.27667,-36.511665));(y["America/Tortola"]=new a.GeographicPoint(18.416666,-64.61667));(y["America/Virgin"]=new a.GeographicPoint(18.34389,-64.931114));(y["Antarctica/Palmer"]=new a.GeographicPoint(-64.25,-62.833));(y["Atlantic/Bermuda"]=new a.GeographicPoint(32.294167,-64.78389));(y["Atlantic/Stanley"]=new a.GeographicPoint(-51.7,-57.85));(y["Brazil/Acre"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Brazil/West"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Canada/Atlantic"]=new a.GeographicPoint(44.65,-63.6));(y["Chile/Continental"]=l);(y["Etc/GMT+4"]=l);(y["SystemV/AST4"]=new a.GeographicPoint(44.65,-63.6));(y["SystemV/AST4ADT"]=new a.GeographicPoint(44.65,-63.6));(y["America/St_Johns"]=new a.GeographicPoint(47.5675,-52.7072));(y["Canada/Newfoundland"]=new a.GeographicPoint(47.5675,-52.7072));(y["America/Araguaina"]=new a.GeographicPoint(-7.16,-48.0575));(y["America/Bahia"]=new a.GeographicPoint(-12.983334,-38.516666));(y["America/Belem"]=new a.GeographicPoint(-1.45,-48.483334));(y["America/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Cayenne"]=new a.GeographicPoint(4.9333334,-52.333332));(y["America/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Fortaleza"]=new a.GeographicPoint(-3.7166667,-38.5));(y["America/Godthab"]=new a.GeographicPoint(64.183334,-51.75));(y["America/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Maceio"]=new a.GeographicPoint(-9.666667,-35.716667));(y["America/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Miquelon"]=new a.GeographicPoint(47.0975,-56.38139));(y["America/Montevideo"]=new a.GeographicPoint(-34.858055,-56.170834));(y["America/Paramaribo"]=new a.GeographicPoint(5.8333335,-55.166668));(y["America/Recife"]=new a.GeographicPoint(-8.05,-34.9));(y["America/Rosario"]=new a.GeographicPoint(-32.95111,-60.66639));(y["America/Santarem"]=new a.GeographicPoint(-2.4333334,-54.7));var x=new a.GeographicPoint(-23.533333,-46.616665);(y["America/Sao_Paulo"]=x);(y["Antarctica/Rothera"]=new a.GeographicPoint(67.567,68.133));(y["Brazil/East"]=x);(y["Etc/GMT+3"]=x);(y["America/Noronha"]=new a.GeographicPoint(3.85,25.417));var C=new a.GeographicPoint(54.25,36.75);(y["Atlantic/South_Georgia"]=C);(y["Brazil/DeNoronha"]=new a.GeographicPoint(3.85,25.417));(y["Etc/GMT+2"]=C);(y["America/Scoresbysund"]=new a.GeographicPoint(70.48333,-21.966667));var u=new a.GeographicPoint(37.483334,-2.5666666);(y["Atlantic/Azores"]=u);(y["Atlantic/Cape_Verde"]=new a.GeographicPoint(14.916667,-23.516666));(y["Etc/GMT+1"]=u);(y["Africa/Abidjan"]=new a.GeographicPoint(5.341111,-4.028056));(y["Africa/Accra"]=new a.GeographicPoint(5.55,-0.2166667));(y["Africa/Bamako"]=new a.GeographicPoint(12.65,-8));(y["Africa/Banjul"]=new a.GeographicPoint(13.453055,-16.5775));(y["Africa/Bissau"]=new a.GeographicPoint(11.85,-15.583333));(y["Africa/Casablanca"]=new a.GeographicPoint(33.593056,-7.616389));(y["Africa/Conakry"]=new a.GeographicPoint(9.509167,-13.712222));(y["Africa/Dakar"]=new a.GeographicPoint(14.670834,-17.438055));(y["Africa/El_Aaiun"]=new a.GeographicPoint(27.15361,-13.203333));(y["Africa/Freetown"]=new a.GeographicPoint(8.49,-13.234167));(y["Africa/Lome"]=new a.GeographicPoint(6.131944,1.2227778));(y["Africa/Monrovia"]=new a.GeographicPoint(6.3105555,-10.804722));(y["Africa/Nouakchott"]=new a.GeographicPoint(18.08639,-15.975278));(y["Africa/Ouagadougou"]=new a.GeographicPoint(12.370277,-1.5247222));(y["Africa/Sao_Tome"]=new a.GeographicPoint(0.3333333,6.733333));(y["Africa/Timbuktu"]=new a.GeographicPoint(16.766666,-3.0166667));(y["America/Danmarkshavn"]=new a.GeographicPoint(76.767,18.667));(y["Atlantic/Canary"]=new a.GeographicPoint(28.45,-16.233334));(y["Atlantic/Faeroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Faroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Madeira"]=new a.GeographicPoint(32.633335,-16.9));(y["Atlantic/Reykjavik"]=new a.GeographicPoint(64.15,-21.95));(y["Atlantic/St_Helena"]=new a.GeographicPoint(-15.933333,-5.7166667));var q=new a.GeographicPoint(51.466667,0);(y["Etc/GMT"]=q);(y["Etc/GMT+0"]=q);(y["Etc/GMT-0"]=q);(y["Etc/GMT0"]=q);(y["Etc/Greenwich"]=q);(y["Etc/UCT"]=q);(y["Etc/UTC"]=q);(y["Etc/Universal"]=q);(y["Etc/Zulu"]=q);(y["Europe/Belfast"]=new a.GeographicPoint(54.583332,-5.933333));(y["Europe/Dublin"]=new a.GeographicPoint(53.333057,-6.248889));(y["Europe/Guernsey"]=new a.GeographicPoint(49.45,-2.533));(y["Europe/Isle_of_Man"]=new a.GeographicPoint(54.14521,-4.48172));(y["Europe/Jersey"]=new a.GeographicPoint(49.2,-2.117));(y["Europe/Lisbon"]=new a.GeographicPoint(38.716667,-9.133333));(y["Europe/London"]=new a.GeographicPoint(51.5,-0.116667));(y["Africa/Algiers"]=new a.GeographicPoint(36.763054,3.0505557));(y["Africa/Bangui"]=new a.GeographicPoint(4.366667,18.583334));(y["Africa/Brazzaville"]=new a.GeographicPoint(-4.2591667,15.284722));(y["Africa/Ceuta"]=new a.GeographicPoint(35.890278,-5.3075));(y["Africa/Douala"]=new a.GeographicPoint(4.0502777,9.7));(y["Africa/Kinshasa"]=new a.GeographicPoint(-4.3,15.3));(y["Africa/Lagos"]=new a.GeographicPoint(6.4530554,3.3958333));(y["Africa/Libreville"]=new a.GeographicPoint(0.3833333,9.45));(y["Africa/Luanda"]=new a.GeographicPoint(-8.838333,13.234445));(y["Africa/Malabo"]=new a.GeographicPoint(3.75,8.783333));(y["Africa/Ndjamena"]=new a.GeographicPoint(12.113055,15.049167));(y["Africa/Niamey"]=new a.GeographicPoint(13.516666,2.1166668));(y["Africa/Porto-Novo"]=new a.GeographicPoint(6.483333,2.6166668));(y["Africa/Tunis"]=new a.GeographicPoint(36.802776,10.179722));(y["Africa/Windhoek"]=new a.GeographicPoint(-22.57,17.08361));(y["Arctic/Longyearbyen"]=new a.GeographicPoint(78.21667,15.633333));(y["Atlantic/Jan_Mayen"]=new a.GeographicPoint(71,-8.333));var B=new a.GeographicPoint(48.86667,2.333333);(y["Etc/GMT-1"]=B);(y["Europe/Amsterdam"]=new a.GeographicPoint(52.35,4.9166665));(y["Europe/Andorra"]=new a.GeographicPoint(42.5,1.5166667));(y["Europe/Belgrade"]=new a.GeographicPoint(44.81861,20.468056));(y["Europe/Berlin"]=new a.GeographicPoint(52.516666,13.4));(y["Europe/Bratislava"]=new a.GeographicPoint(48.15,17.116667));(y["Europe/Brussels"]=new a.GeographicPoint(50.833332,4.333333));(y["Europe/Budapest"]=new a.GeographicPoint(47.5,19.083334));(y["Europe/Copenhagen"]=new a.GeographicPoint(55.666668,12.583333));(y["Europe/Gibraltar"]=new a.GeographicPoint(36.133335,-5.35));(y["Europe/Ljubljana"]=new a.GeographicPoint(46.05528,14.514444));(y["Europe/Luxembourg"]=new a.GeographicPoint(49.611668,6.13));(y["Europe/Madrid"]=new a.GeographicPoint(40.4,-3.6833334));(y["Europe/Malta"]=new a.GeographicPoint(35.899723,14.514722));(y["Europe/Monaco"]=new a.GeographicPoint(43.733334,7.4166665));(y["Europe/Oslo"]=new a.GeographicPoint(59.916668,10.75));(y["Europe/Paris"]=B);(y["Europe/Podgorica"]=new a.GeographicPoint(42.441113,19.26361));(y["Europe/Prague"]=new a.GeographicPoint(50.083332,14.466667));(y["Europe/Rome"]=new a.GeographicPoint(41.9,12.483334));(y["Europe/San_Marino"]=new a.GeographicPoint(43.933334,12.45));(y["Europe/Sarajevo"]=new a.GeographicPoint(43.85,18.383333));(y["Europe/Skopje"]=new a.GeographicPoint(42,21.433332));(y["Europe/Stockholm"]=new a.GeographicPoint(59.333332,18.05));(y["Europe/Tirane"]=new a.GeographicPoint(41.3275,19.81889));(y["Europe/Vaduz"]=new a.GeographicPoint(47.133335,9.516666));(y["Europe/Vatican"]=new a.GeographicPoint(41.9,12.45));(y["Europe/Vienna"]=new a.GeographicPoint(48.2,16.366667));(y["Europe/Warsaw"]=new a.GeographicPoint(52.25,21));(y["Europe/Zagreb"]=new a.GeographicPoint(45.8,16));(y["Europe/Zurich"]=new a.GeographicPoint(47.366665,8.55));(y["Africa/Blantyre"]=new a.GeographicPoint(-15.783333,35));(y["Africa/Bujumbura"]=new a.GeographicPoint(-3.376111,29.36));(y["Africa/Cairo"]=new a.GeographicPoint(30.05,31.25));(y["Africa/Gaborone"]=new a.GeographicPoint(-24.646389,25.911945));(y["Africa/Harare"]=new a.GeographicPoint(-17.817778,31.044722));(y["Africa/Johannesburg"]=new a.GeographicPoint(-26.2,28.083334));(y["Africa/Kigali"]=new a.GeographicPoint(-1.9536111,30.060556));(y["Africa/Lubumbashi"]=new a.GeographicPoint(-11.666667,27.466667));(y["Africa/Lusaka"]=new a.GeographicPoint(-15.416667,28.283333));(y["Africa/Maputo"]=new a.GeographicPoint(-25.965279,32.58917));(y["Africa/Maseru"]=new a.GeographicPoint(-29.316668,27.483334));(y["Africa/Mbabane"]=new a.GeographicPoint(-26.316668,31.133333));(y["Africa/Tripoli"]=new a.GeographicPoint(32.8925,13.18));(y["Asia/Amman"]=new a.GeographicPoint(31.95,35.933334));(y["Asia/Beirut"]=new a.GeographicPoint(33.871944,35.509724));(y["Asia/Damascus"]=new a.GeographicPoint(33.5,36.3));(y["Asia/Gaza"]=new a.GeographicPoint(31.5,34.466667));(y["Asia/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Asia/Jerusalem"]=new a.GeographicPoint(31.78,35.23));(y["Asia/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Asia/Tel_Aviv"]=new a.GeographicPoint(32.066666,34.766666));var z=new a.GeographicPoint(37.983334,23.733334);(y["Etc/GMT-2"]=z);(y["Europe/Athens"]=new a.GeographicPoint(37.983334,23.733334));(y["Europe/Bucharest"]=new a.GeographicPoint(44.433334,26.1));(y["Europe/Chisinau"]=new a.GeographicPoint(47.005554,28.8575));(y["Europe/Helsinki"]=new a.GeographicPoint(60.175556,24.934166));(y["Europe/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Europe/Kaliningrad"]=new a.GeographicPoint(54.71,20.5));(y["Europe/Kiev"]=new a.GeographicPoint(50.433334,30.516666));(y["Europe/Mariehamn"]=new a.GeographicPoint(60.1,19.95));(y["Europe/Minsk"]=new a.GeographicPoint(53.9,27.566668));(y["Europe/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Europe/Riga"]=new a.GeographicPoint(56.95,24.1));(y["Europe/Simferopol"]=new a.GeographicPoint(44.95,34.1));(y["Europe/Sofia"]=new a.GeographicPoint(42.683334,23.316668));(y["Europe/Tallinn"]=new a.GeographicPoint(59.433887,24.728056));(y["Europe/Tiraspol"]=new a.GeographicPoint(46.84028,29.643333));(y["Europe/Uzhgorod"]=new a.GeographicPoint(48.616665,22.3));(y["Europe/Vilnius"]=new a.GeographicPoint(54.683334,25.316668));(y["Europe/Zaporozhye"]=new a.GeographicPoint(47.833,35.1667));(y["Africa/Addis_Ababa"]=new a.GeographicPoint(9.033333,38.7));(y["Africa/Asmara"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Asmera"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Dar_es_Salaam"]=new a.GeographicPoint(-6.8,39.283333));(y["Africa/Djibouti"]=new a.GeographicPoint(11.595,43.148056));(y["Africa/Kampala"]=new a.GeographicPoint(0.3155556,32.565556));(y["Africa/Khartoum"]=new a.GeographicPoint(15.588056,32.53417));(y["Africa/Mogadishu"]=new a.GeographicPoint(2.0666666,45.366665));(y["Africa/Nairobi"]=new a.GeographicPoint(-1.2833333,36.816666));(y["Antarctica/Syowa"]=new a.GeographicPoint(-69,39.5833));(y["Asia/Aden"]=new a.GeographicPoint(12.779445,45.036667));(y["Asia/Baghdad"]=new a.GeographicPoint(33.33861,44.39389));(y["Asia/Bahrain"]=new a.GeographicPoint(26.23611,50.583057));(y["Asia/Kuwait"]=new a.GeographicPoint(29.369722,47.978333));(y["Asia/Qatar"]=new a.GeographicPoint(25.286667,51.533333));(y["Asia/Riyadh"]=new a.GeographicPoint(24.640833,46.772778));var D=new a.GeographicPoint(55.752224,37.615555);(y["Etc/GMT-3"]=D);(y["Europe/Moscow"]=D);(y["Europe/Volgograd"]=new a.GeographicPoint(48.80472,44.585835));(y["Indian/Antananarivo"]=new a.GeographicPoint(-18.916666,47.516666));(y["Indian/Comoro"]=new a.GeographicPoint(-11.704166,43.240276));(y["Indian/Mayotte"]=new a.GeographicPoint(-12.779445,45.227222));(y["Asia/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Tehran"]=new a.GeographicPoint(35.671944,51.424446));(y["Asia/Baku"]=new a.GeographicPoint(40.39528,49.88222));var j=new a.GeographicPoint(25.252222,55.28);(y["Asia/Dubai"]=j);(y["Asia/Muscat"]=new a.GeographicPoint(23.613333,58.593334));(y["Asia/Tbilisi"]=new a.GeographicPoint(41.725,44.790833));(y["Asia/Yerevan"]=new a.GeographicPoint(40.18111,44.51361));(y["Etc/GMT-4"]=j);(y["Europe/Samara"]=new a.GeographicPoint(53.2,50.15));(y["Indian/Mahe"]=new a.GeographicPoint(-4.616667,55.45));(y["Indian/Mauritius"]=new a.GeographicPoint(-20.161945,57.49889));(y["Indian/Reunion"]=new a.GeographicPoint(-20.866667,55.466667));(y["Asia/Kabul"]=new a.GeographicPoint(34.516666,69.183334));(y["Antarctica/Davis"]=new a.GeographicPoint(-68.5764,77.9689));(y["Antarctica/Mawson"]=new a.GeographicPoint(-53.104,73.514));(y["Asia/Aqtau"]=new a.GeographicPoint(43.65,51.2));(y["Asia/Aqtobe"]=new a.GeographicPoint(50.298054,57.18139));(y["Asia/Ashgabat"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Ashkhabad"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Dushanbe"]=new a.GeographicPoint(38.56,68.77389));(y["Asia/Karachi"]=new a.GeographicPoint(24.866667,67.05));(y["Asia/Oral"]=new a.GeographicPoint(51.233334,51.366665));(y["Asia/Samarkand"]=new a.GeographicPoint(39.654167,66.959724));(y["Asia/Tashkent"]=new a.GeographicPoint(41.316666,69.25));(y["Asia/Yekaterinburg"]=new a.GeographicPoint(56.85,60.6));var d=new a.GeographicPoint(22.569721,88.36972);(y["Etc/GMT-5"]=d);(y["Indian/Kerguelen"]=new a.GeographicPoint(-49.25,69.583));(y["Indian/Maldives"]=new a.GeographicPoint(4.1666665,73.5));(y["Asia/Calcutta"]=d);(y["Asia/Colombo"]=new a.GeographicPoint(6.9319444,79.84778));(y["Asia/Kolkata"]=d);(y["Asia/Kathmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Asia/Katmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Antarctica/Vostok"]=new a.GeographicPoint(-78.4644,106.8372));(y["Asia/Almaty"]=new a.GeographicPoint(43.25,76.95));(y["Asia/Bishkek"]=new a.GeographicPoint(42.873055,74.60028));var s=new a.GeographicPoint(23.723055,90.40861);(y["Asia/Dacca"]=s);(y["Asia/Dhaka"]=s);(y["Asia/Novokuznetsk"]=new a.GeographicPoint(53.75,87.1));(y["Asia/Novosibirsk"]=new a.GeographicPoint(55.04111,82.93444));(y["Asia/Omsk"]=new a.GeographicPoint(55,73.4));(y["Asia/Qyzylorda"]=new a.GeographicPoint(44.85278,65.50916));(y["Asia/Thimbu"]=new a.GeographicPoint(27.483334,89.6));(y["Asia/Thimphu"]=new a.GeographicPoint(27.483334,89.6));(y["Etc/GMT-6"]=s);(y["Indian/Chagos"]=new a.GeographicPoint(-6,71.5));(y["Asia/Rangoon"]=new a.GeographicPoint(16.783333,96.166664));(y["Indian/Cocos"]=new a.GeographicPoint(-12.1167,96.9));var p=new a.GeographicPoint(13.75,100.51667);(y["Asia/Bangkok"]=p);(y["Asia/Ho_Chi_Minh"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Hovd"]=new a.GeographicPoint(48.016666,91.63333));(y["Asia/Jakarta"]=new a.GeographicPoint(-6.174444,106.829445));(y["Asia/Krasnoyarsk"]=new a.GeographicPoint(56.009724,92.791664));(y["Asia/Phnom_Penh"]=new a.GeographicPoint(11.55,104.916664));(y["Asia/Pontianak"]=new a.GeographicPoint(-0.0333333,109.333336));(y["Asia/Saigon"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Vientiane"]=new a.GeographicPoint(17.966667,102.6));(y["Etc/GMT-7"]=p);(y["Indian/Christmas"]=new a.GeographicPoint(-10.416667,105.71667));(y["Asia/Brunei"]=new a.GeographicPoint(4.883333,114.933334));(y["Asia/Choibalsan"]=new a.GeographicPoint(48.066666,114.5));(y["Asia/Chongqing"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Chungking"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Harbin"]=new a.GeographicPoint(45.75,126.65));(y["Asia/Hong_Kong"]=new a.GeographicPoint(22.283333,114.15));(y["Asia/Irkutsk"]=new a.GeographicPoint(52.266666,104.333336));(y["Asia/Kashgar"]=new a.GeographicPoint(39.391388,76.04));(y["Asia/Kuala_Lumpur"]=new a.GeographicPoint(3.1666667,101.7));(y["Asia/Kuching"]=new a.GeographicPoint(1.55,110.333336));(y["Asia/Macao"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Macau"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Makassar"]=new a.GeographicPoint(2.45,99.78333));(y["Asia/Manila"]=new a.GeographicPoint(14.604167,120.98222));var t=new a.GeographicPoint(31.005,121.40861);(y["Asia/Shanghai"]=t);(y["Asia/Singapore"]=new a.GeographicPoint(1.2930557,103.855835));(y["Asia/Taipei"]=new a.GeographicPoint(25.039167,121.525));(y["Asia/Ujung_Pandang"]=new a.GeographicPoint(-5.1305556,119.406944));(y["Asia/Ulaanbaatar"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Ulan_Bator"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Urumqi"]=new a.GeographicPoint(43.8,87.583336));(y["Australia/Perth"]=new a.GeographicPoint(-31.933332,115.833336));(y["Australia/West"]=new a.GeographicPoint(-31.933332,115.833336));(y["Etc/GMT-8"]=t);(y["Australia/Eucla"]=new a.GeographicPoint(-31.716667,128.86667));(y["Asia/Dili"]=new a.GeographicPoint(-8.55,125.5833));(y["Asia/Jayapura"]=new a.GeographicPoint(-2.5333333,140.7));(y["Asia/Pyongyang"]=new a.GeographicPoint(39.019444,125.75472));(y["Asia/Seoul"]=new a.GeographicPoint(37.566387,126.999725));var i=new a.GeographicPoint(35.685,139.75139);(y["Asia/Tokyo"]=i);(y["Asia/Yakutsk"]=new a.GeographicPoint(62.03389,129.73306));(y["Etc/GMT-9"]=i);(y["Pacific/Palau"]=new a.GeographicPoint(7.5,134.6241));(y["Australia/Adelaide"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Broken_Hill"]=new a.GeographicPoint(-31.95,141.43333));(y["Australia/Darwin"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/North"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/South"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Yancowinna"]=new a.GeographicPoint(-31.7581,141.7178));(y["Antarctica/DumontDUrville"]=new a.GeographicPoint(-66.66277,140.0014));(y["Asia/Sakhalin"]=new a.GeographicPoint(51,143));(y["Asia/Vladivostok"]=new a.GeographicPoint(43.133335,131.9));(y["Australia/ACT"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Brisbane"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Canberra"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Currie"]=new a.GeographicPoint(-39.933334,143.86667));(y["Australia/Hobart"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Lindeman"]=new a.GeographicPoint(-20.45,149.0333));(y["Australia/Melbourne"]=new a.GeographicPoint(-37.816666,144.96666));var n=new a.GeographicPoint(-33.88333,151.21666);(y["Australia/NSW"]=n);(y["Australia/Queensland"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Sydney"]=n);(y["Australia/Tasmania"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Victoria"]=new a.GeographicPoint(-37.816666,144.96666));(y["Etc/GMT-10"]=n);(y["Pacific/Guam"]=new a.GeographicPoint(13.467,144.75));(y["Pacific/Port_Moresby"]=new a.GeographicPoint(-9.464723,147.1925));(y["Pacific/Saipan"]=new a.GeographicPoint(15.1833,145.75));(y["Pacific/Truk"]=new a.GeographicPoint(7.4167,151.7833));(y["Pacific/Yap"]=new a.GeographicPoint(9.514444,138.12917));(y["Australia/LHI"]=new a.GeographicPoint(-31.55,159.083));(y["Australia/Lord_Howe"]=new a.GeographicPoint(-31.55,159.083));(y["Antarctica/Casey"]=new a.GeographicPoint(-66.2833,110.5333));(y["Asia/Magadan"]=new a.GeographicPoint(59.566666,150.8));var c=new a.GeographicPoint(-22.266666,166.45);(y["Etc/GMT-11"]=c);(y["Pacific/Efate"]=new a.GeographicPoint(-17.667,168.417));(y["Pacific/Guadalcanal"]=new a.GeographicPoint(-9.617,160.183));(y["Pacific/Kosrae"]=new a.GeographicPoint(5.317,162.983));(y["Pacific/Noumea"]=c);(y["Pacific/Ponape"]=new a.GeographicPoint(6.963889,158.20833));(y["Pacific/Norfolk"]=new a.GeographicPoint(-29.05,167.95));(y["Antarctica/McMurdo"]=new a.GeographicPoint(-77.85,166.667));(y["Antarctica/South_Pole"]=new a.GeographicPoint(-90,0));(y["Asia/Anadyr"]=new a.GeographicPoint(64.75,177.48334));(y["Asia/Kamchatka"]=new a.GeographicPoint(57,160));var e=new a.GeographicPoint(-36.86667,174.76666);(y["Etc/GMT-12"]=e);(y["Pacific/Auckland"]=e);(y["Pacific/Fiji"]=new a.GeographicPoint(-18.133333,178.41667));(y["Pacific/Funafuti"]=new a.GeographicPoint(-8.516666,179.21666));(y["Pacific/Kwajalein"]=new a.GeographicPoint(9.1939,167.4597));(y["Pacific/Majuro"]=new a.GeographicPoint(7.1,171.38333));(y["Pacific/Nauru"]=new a.GeographicPoint(-0.5322,166.9328));(y["Pacific/Tarawa"]=new a.GeographicPoint(1.4167,173.0333));(y["Pacific/Wake"]=new a.GeographicPoint(19.2833,166.6));(y["Pacific/Wallis"]=new a.GeographicPoint(-13.273,-176.205));(y["Pacific/Chatham"]=new a.GeographicPoint(-43.883,-176.517));var m=new a.GeographicPoint(-3.133,-171.0833);(y["Etc/GMT-13"]=m);(y["Pacific/Enderbury"]=m);(y["Pacific/Tongatapu"]=new a.GeographicPoint(-21.2114,-175.153));var h=new a.GeographicPoint(1.883,-157.4);(y["Etc/GMT-14"]=h);(y["Pacific/Kiritimati"]=h);(y.MIT=g);(y.HST=A);(y.PST=f);(y.PST8PDT=f);(y.MST=k);(y.MST7MDT=k);(y.Navajo=new a.GeographicPoint(35.6728,-109.0622));(y.PNT=new a.GeographicPoint(33.448334,-112.07333));(y["America/Indiana/Knox"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Indiana/Tell_City"]=new a.GeographicPoint(37.953,-86.7614));(y["America/North_Dakota/Center"]=new a.GeographicPoint(47.115,-101.3003));(y["America/North_Dakota/New_Salem"]=new a.GeographicPoint(46.843,101.4119));(y.CST=w);(y.CST6CDT=w);(y["America/Indiana/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Indiana/Marengo"]=new a.GeographicPoint(36.3706,-86.3433));(y["America/Indiana/Petersburg"]=new a.GeographicPoint(38.4917,-87.2803));(y["America/Indiana/Vevay"]=new a.GeographicPoint(38.7458,-85.0711));(y["America/Indiana/Vincennes"]=new a.GeographicPoint(38.6783,-87.5164));(y["America/Indiana/Winamac"]=new a.GeographicPoint(41.0525,-86.6044));(y["America/Kentucky/Louisville"]=new a.GeographicPoint(38.2542,-85.7603));(y["America/Kentucky/Monticello"]=new a.GeographicPoint(36.8381,-84.85));(y.Cuba=new a.GeographicPoint(23.131945,-82.36417));(y.EST=o);(y.EST5EDT=o);(y.IET=o);(y.AST=new a.GeographicPoint(44.65,-63.6));(y.Jamaica=new a.GeographicPoint(18,-76.8));(y["America/Argentina/San_Luis"]=new a.GeographicPoint(-33.3,-66.333));(y.PRT=new a.GeographicPoint(18.467,66.117));(y.CNT=new a.GeographicPoint(47.5675,-52.7072));(y.AGT=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Argentina/ComodRivadavia"]=new a.GeographicPoint(-42.7578,-65.0297));(y["America/Argentina/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Argentina/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Argentina/La_Rioja"]=new a.GeographicPoint(-29.4144,-66.8552));(y["America/Argentina/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Argentina/Rio_Gallegos"]=new a.GeographicPoint(-51.625,-69.2286));(y["America/Argentina/Salta"]=new a.GeographicPoint(-24.783333,-65.416664));(y["America/Argentina/San_Juan"]=new a.GeographicPoint(-31.5333,-68.5167));(y["America/Argentina/Tucuman"]=new a.GeographicPoint(-26.8167,65.2167));(y["America/Argentina/Ushuaia"]=new a.GeographicPoint(-54.6,-68.3));(y.BET=x);(y.Eire=new a.GeographicPoint(53.333057,-6.248889));(y.GB=q);(y["GB-Eire"]=new a.GeographicPoint(53.333057,-6.248889));(y.GMT=q);(y.GMT0=q);(y.Greenwich=q);(y.Iceland=new a.GeographicPoint(64.1333,-21.9333));(y.Portugal=new a.GeographicPoint(38.716667,-9.133333));(y.UCT=q);(y.UTC=q);(y.Universal=q);(y.WET=q);(y.Zulu=q);(y.CET=B);(y.ECT=B);(y.MET=new a.GeographicPoint(35.671944,51.424446));(y.Poland=new a.GeographicPoint(52.25,21));(y.ART=new a.GeographicPoint(-34.5875,-58.6725));(y.CAT=new a.GeographicPoint(-1.9536111,30.060556));(y.EET=new a.GeographicPoint(37.983334,23.733334));(y.Egypt=new a.GeographicPoint(30.05,31.25));(y.Israel=new a.GeographicPoint(32.066666,34.766666));(y.Libya=new a.GeographicPoint(32.8925,13.18));(y.Turkey=new a.GeographicPoint(41.018612,28.964722));(y.EAT=new a.GeographicPoint(-1.2833333,36.816666));(y["W-SU"]=D);(y.Iran=new a.GeographicPoint(35.671944,51.424446));(y.NET=new a.GeographicPoint(40.18111,44.51361));(y.PLT=new a.GeographicPoint(24.866667,67.05));(y.IST=d);(y.BST=s);(y.VST=p);(y.CTT=t);(y.Hongkong=new a.GeographicPoint(22.283333,114.15));(y.PRC=t);(y.Singapore=new a.GeographicPoint(1.2930557,103.855835));(y.JST=i);(y.Japan=i);(y.ROK=new a.GeographicPoint(37.566387,126.999725));(y.ACT=new a.GeographicPoint(-35.283333,149.21666));(y.AET=n);(y.SST=new a.GeographicPoint(-28.4667,159.8167));(y.Kwajalein=new a.GeographicPoint(9.1939,167.4597));(y.NST=e);(y.NZ=e);(y["NZ-CHAT"]=new a.GeographicPoint(-43.883,-176.517));a.timeZoneGeographicPointsReference=(y)}var v=(function(E,F){return E[F]===undefined?null:E[F]})(y,"UTC");if(v==null){v=(function(E,F){return E[F]===undefined?null:E[F]})(y,"Etc/GMT")}this.latitude=(function(E){return E*Math.PI/180})(v.getLatitudeInDegrees());this.longitude=(function(E){return E*Math.PI/180})(v.getLongitudeInDegrees())};a.timeZoneGeographicPointsReference=null;return a}(HomeObject));Compass.__class="com.eteks.sweethome3d.model.Compass";Compass.__interfaces=["com.eteks.sweethome3d.model.Selectable"];(function(a){var b=(function(){function c(d,e){if(this.latitudeInDegrees===undefined){this.latitudeInDegrees=0}if(this.longitudeInDegrees===undefined){this.longitudeInDegrees=0}this.latitudeInDegrees=d;this.longitudeInDegrees=e}c.prototype.getLatitudeInDegrees=function(){return this.latitudeInDegrees};c.prototype.getLongitudeInDegrees=function(){return this.longitudeInDegrees};return c}());a.GeographicPoint=b;b.__class="com.eteks.sweethome3d.model.Compass.GeographicPoint"})(Compass||(Compass={}));Compass.__transients=["pointsCache","dateCache","sunElevationCache","sunAzimuthCache","propertyChangeSupport"];var Wall=(function(a){__extends(b,a);function b(F,i,G,o,H,s,c,h){var f=this;if(((typeof F==="string")||F===null)&&((typeof i==="number")||i===null)&&((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof H==="number")||H===null)&&((typeof s==="number")||s===null)&&((typeof c==="number")||c===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||h===null)){var O=arguments;f=a.call(this,F)||this;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;f.xStart=i;f.yStart=G;f.xEnd=o;f.yEnd=H;f.thickness=s;f.height=c;f.pattern=h}else{if(((typeof F==="string")||F===null)&&((typeof i==="number")||i===null)&&((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof H==="number")||H===null)&&((typeof s==="number")||s===null)&&((typeof c==="number")||c===null)&&h===undefined){var O=arguments;var A=arguments;var r=null;f=a.call(this,F)||this;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;f.xStart=i;f.yStart=G;f.xEnd=o;f.yEnd=H;f.thickness=s;f.height=c;f.pattern=r;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true}else{if(((typeof F==="number")||F===null)&&((typeof i==="number")||i===null)&&((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof H==="number")||H===null)&&((typeof s==="number")||s===null)&&((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||c===null)&&h===undefined){var O=arguments;var N=O[0];var R=O[1];var g=O[2];var E=O[3];var B=O[4];var m=O[5];var q=O[6];var y=arguments;var M=HomeObject.createId("wall");f=a.call(this,M)||this;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;f.xStart=N;f.yStart=R;f.xEnd=g;f.yEnd=E;f.thickness=B;f.height=m;f.pattern=q;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true}else{if(((typeof F==="number")||F===null)&&((typeof i==="number")||i===null)&&((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof H==="number")||H===null)&&((typeof s==="number")||s===null)&&c===undefined&&h===undefined){var O=arguments;var L=O[0];var Q=O[1];var e=O[2];var D=O[3];var z=O[4];var l=O[5];var w=arguments;var p=null;var v=arguments;var K=HomeObject.createId("wall");f=a.call(this,K)||this;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;f.xStart=L;f.yStart=Q;f.xEnd=e;f.yEnd=D;f.thickness=z;f.height=l;f.pattern=p;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true}else{if(((typeof F==="number")||F===null)&&((typeof i==="number")||i===null)&&((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof H==="number")||H===null)&&s===undefined&&c===undefined&&h===undefined){var O=arguments;var J=O[0];var P=O[1];var d=O[2];var C=O[3];var x=O[4];var u=arguments;var k=0;var t=arguments;var n=null;var j=arguments;var I=HomeObject.createId("wall");f=a.call(this,I)||this;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;f.xStart=J;f.yStart=P;f.xEnd=d;f.yEnd=C;f.thickness=x;f.height=k;f.pattern=n;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true;if(f.xStart===undefined){f.xStart=0}if(f.yStart===undefined){f.yStart=0}if(f.xEnd===undefined){f.xEnd=0}if(f.yEnd===undefined){f.yEnd=0}if(f.arcExtent===undefined){f.arcExtent=null}if(f.wallAtStart===undefined){f.wallAtStart=null}if(f.wallAtEnd===undefined){f.wallAtEnd=null}if(f.thickness===undefined){f.thickness=0}if(f.height===undefined){f.height=null}if(f.heightAtEnd===undefined){f.heightAtEnd=null}if(f.leftSideColor===undefined){f.leftSideColor=null}if(f.leftSideTexture===undefined){f.leftSideTexture=null}if(f.leftSideShininess===undefined){f.leftSideShininess=0}if(f.leftSideBaseboard===undefined){f.leftSideBaseboard=null}if(f.rightSideColor===undefined){f.rightSideColor=null}if(f.rightSideTexture===undefined){f.rightSideTexture=null}if(f.rightSideShininess===undefined){f.rightSideShininess=0}if(f.rightSideBaseboard===undefined){f.rightSideBaseboard=null}if(f.pattern===undefined){f.pattern=null}if(f.topColor===undefined){f.topColor=null}if(f.level===undefined){f.level=null}if(f.shapeCache===undefined){f.shapeCache=null}if(f.arcCircleCenterCache===undefined){f.arcCircleCenterCache=null}if(f.pointsCache===undefined){f.pointsCache=null}if(f.pointsIncludingBaseboardsCache===undefined){f.pointsIncludingBaseboardsCache=null}f.symmetric=true}else{throw new Error("invalid overload")}}}}}return f}b.prototype.getXStart=function(){return this.xStart};b.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("X_START",c,d)}};b.prototype.getYStart=function(){return this.yStart};b.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("Y_START",c,d)}};b.prototype.getXEnd=function(){return this.xEnd};b.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("X_END",d,c)}};b.prototype.getYEnd=function(){return this.yEnd};b.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("Y_END",d,c)}};b.prototype.getLength=function(){if(this.arcExtent==null||this.arcExtent===0){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)}else{var d=this.getArcCircleCenter();var c=java.awt.geom.Point2D.distance(this.xStart,this.yStart,d[0],d[1]);return Math.abs(this.arcExtent)*c}};b.prototype.getStartPointToEndPointDistance=function(){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)};b.prototype.setArcExtent=function(d){if(d!==this.arcExtent&&(d==null||!(d===this.arcExtent))){var c=this.arcExtent;this.arcExtent=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("ARC_EXTENT",c,d)}};b.prototype.getArcExtent=function(){return this.arcExtent};b.prototype.getXArcCircleCenter=function(){if(this.arcExtent==null){return(this.xStart+this.xEnd)/2}else{return this.getArcCircleCenter()[0]}};b.prototype.getYArcCircleCenter=function(){if(this.arcExtent==null){return(this.yStart+this.yEnd)/2}else{return this.getArcCircleCenter()[1]}};b.prototype.getArcCircleCenter=function(){if(this.arcCircleCenterCache==null){var f=java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd);var e=Math.abs(this.arcExtent)>Math.PI?-(Math.PI+this.arcExtent)/2:(Math.PI-this.arcExtent)/2;var d=-(Math.tan(e)*f/2);var g=(this.xStart+this.xEnd)/2;var c=(this.yStart+this.yEnd)/2;var h=Math.atan2(this.xStart-this.xEnd,this.yEnd-this.yStart);this.arcCircleCenterCache=[(g+d*Math.cos(h)),(c+d*Math.sin(h))]}return this.arcCircleCenterCache};b.prototype.getWallAtStart=function(){return this.wallAtStart};b.prototype.setWallAtStart=function(d,c){if(c===void 0){c=true}if(d!==this.wallAtStart){var e=this.wallAtStart;this.wallAtStart=d;this.clearPointsCache();this.firePropertyChange("WALL_AT_START",e,d);if(c){this.detachJoinedWall(e)}}};b.prototype.getWallAtEnd=function(){return this.wallAtEnd};b.prototype.setWallAtEnd=function(e,d){if(d===void 0){d=true}if(e!==this.wallAtEnd){var c=this.wallAtEnd;this.wallAtEnd=e;this.clearPointsCache();this.firePropertyChange("WALL_AT_END",c,e);if(d){this.detachJoinedWall(c)}}};b.prototype.detachJoinedWall=function(c){if(c!=null){if(c.getWallAtStart()===this){c.setWallAtStart(null,false)}else{if(c.getWallAtEnd()===this){c.setWallAtEnd(null,false)}}}};b.prototype.getThickness=function(){return this.thickness};b.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.clearPointsCache();this.firePropertyChange("THICKNESS",c,d)}};b.prototype.getHeight=function(){return this.height};b.prototype.setHeight=function(c){if(c!==this.height&&(c==null||!(c===this.height))){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}};b.prototype.getHeightAtEnd=function(){return this.heightAtEnd};b.prototype.setHeightAtEnd=function(c){if(c!==this.heightAtEnd&&(c==null||!(c===this.heightAtEnd))){var d=this.heightAtEnd;this.heightAtEnd=c;this.firePropertyChange("HEIGHT_AT_END",d,c)}};b.prototype.isTrapezoidal=function(){return this.height!=null&&this.heightAtEnd!=null&&!(this.height===this.heightAtEnd)};b.prototype.getLeftSideColor=function(){return this.leftSideColor};b.prototype.setLeftSideColor=function(c){if(c!==this.leftSideColor&&(c==null||!(c===this.leftSideColor))){var d=this.leftSideColor;this.leftSideColor=c;this.firePropertyChange("LEFT_SIDE_COLOR",d,c)}};b.prototype.getRightSideColor=function(){return this.rightSideColor};b.prototype.setRightSideColor=function(c){if(c!==this.rightSideColor&&(c==null||!(c===this.rightSideColor))){var d=this.rightSideColor;this.rightSideColor=c;this.firePropertyChange("RIGHT_SIDE_COLOR",d,c)}};b.prototype.getLeftSideTexture=function(){return this.leftSideTexture};b.prototype.setLeftSideTexture=function(d){if(d!==this.leftSideTexture&&(d==null||!d.equals(this.leftSideTexture))){var c=this.leftSideTexture;this.leftSideTexture=d;this.firePropertyChange("LEFT_SIDE_TEXTURE",c,d)}};b.prototype.getRightSideTexture=function(){return this.rightSideTexture};b.prototype.setRightSideTexture=function(c){if(c!==this.rightSideTexture&&(c==null||!c.equals(this.rightSideTexture))){var d=this.rightSideTexture;this.rightSideTexture=c;this.firePropertyChange("RIGHT_SIDE_TEXTURE",d,c)}};b.prototype.getLeftSideShininess=function(){return this.leftSideShininess};b.prototype.setLeftSideShininess=function(c){if(c!==this.leftSideShininess){var d=this.leftSideShininess;this.leftSideShininess=c;this.firePropertyChange("LEFT_SIDE_SHININESS",d,c)}};b.prototype.getRightSideShininess=function(){return this.rightSideShininess};b.prototype.setRightSideShininess=function(d){if(d!==this.rightSideShininess){var c=this.rightSideShininess;this.rightSideShininess=d;this.firePropertyChange("RIGHT_SIDE_SHININESS",c,d)}};b.prototype.getLeftSideBaseboard=function(){return this.leftSideBaseboard};b.prototype.setLeftSideBaseboard=function(d){if(d!==this.leftSideBaseboard&&(d==null||!d.equals(this.leftSideBaseboard))){var c=this.leftSideBaseboard;this.leftSideBaseboard=d;this.clearPointsCache();this.firePropertyChange("LEFT_SIDE_BASEBOARD",c,d)}};b.prototype.getRightSideBaseboard=function(){return this.rightSideBaseboard};b.prototype.setRightSideBaseboard=function(c){if(c!==this.rightSideBaseboard&&(c==null||!c.equals(this.rightSideBaseboard))){var d=this.rightSideBaseboard;this.rightSideBaseboard=c;this.clearPointsCache();this.firePropertyChange("RIGHT_SIDE_BASEBOARD",d,c)}};b.prototype.getPattern=function(){return this.pattern};b.prototype.setPattern=function(d){if(this.pattern!==d){var c=this.pattern;this.pattern=d;this.firePropertyChange("PATTERN",c,d)}};b.prototype.getTopColor=function(){return this.topColor};b.prototype.setTopColor=function(c){if(this.topColor!==c&&(c==null||!(c===this.topColor))){var d=this.topColor;this.topColor=c;this.firePropertyChange("TOP_COLOR",d,c)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&c+this.getWallMaximumHeight()>d}else{return false}}};b.prototype.getWallMaximumHeight=function(){if(this.height==null){return 0}else{if(this.isTrapezoidal()){return Math.max(this.height,this.heightAtEnd)}else{return this.height}}};b.prototype.clearPointsCache=function(){this.shapeCache=null;this.pointsCache=null;this.pointsIncludingBaseboardsCache=null;if(this.wallAtStart!=null){this.wallAtStart.pointsCache=null;this.wallAtStart.pointsIncludingBaseboardsCache=null}if(this.wallAtEnd!=null){this.wallAtEnd.pointsCache=null;this.wallAtEnd.pointsIncludingBaseboardsCache=null}};b.prototype.getPoints$=function(){return this.getPoints$boolean(false)};b.prototype.getPoints$boolean=function(c){if(c&&(this.leftSideBaseboard!=null||this.rightSideBaseboard!=null)){if(this.pointsIncludingBaseboardsCache==null){this.pointsIncludingBaseboardsCache=this.getShapePoints(true)}return this.clonePoints(this.pointsIncludingBaseboardsCache)}else{if(this.pointsCache==null){this.pointsCache=this.getShapePoints(false)}return this.clonePoints(this.pointsCache)}};b.prototype.getPoints=function(c){if(((typeof c==="boolean")||c===null)){return this.getPoints$boolean(c)}else{if(c===undefined){return this.getPoints$()}else{throw new Error("invalid overload")}}};b.prototype.clonePoints=function(d){var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(d.length);for(var c=0;c<d.length;c++){e[c]=d[c].slice(0)}return e};b.prototype.getShapePoints=function(m){var z=0.01;var c=this.getUnjoinedShapePoints(m);var w=0;var i=c.length-1;var t=(c.length/2|0)-1;var o=(c.length/2|0);if(this.wallAtStart!=null){var y=this.wallAtStart.getUnjoinedShapePoints(m);var v=0;var s=y.length-1;var g=(y.length/2|0)-1;var h=(y.length/2|0);var n=this.wallAtStart.getWallAtEnd()===this&&(this.wallAtStart.getWallAtStart()!==this||(this.wallAtStart.xEnd===this.xStart&&this.wallAtStart.yEnd===this.yStart));var x=this.wallAtStart.getWallAtStart()===this&&(this.wallAtStart.getWallAtEnd()!==this||(this.wallAtStart.xStart===this.xStart&&this.wallAtStart.yStart===this.yStart));var k=m?this.wallAtStart.pointsIncludingBaseboardsCache:this.wallAtStart.pointsCache;var u=2*Math.max(this.thickness,this.wallAtStart.getThickness());if(n){this.computeIntersection(c[w],c[w+1],y[g],y[g-1],u);this.computeIntersection(c[i],c[i-1],y[h],y[h+1],u);if(k!=null){if(Math.abs(c[w][0]-k[g][0])<z&&Math.abs(c[w][1]-k[g][1])<z){c[w]=k[g]}if(Math.abs(c[i][0]-k[h][0])<z&&Math.abs(c[i][1]-k[h][1])<z){c[i]=k[h]}}}else{if(x){this.computeIntersection(c[w],c[w+1],y[s],y[s-1],u);this.computeIntersection(c[i],c[i-1],y[v],y[v+1],u);if(k!=null){if(Math.abs(c[w][0]-k[s][0])<z&&Math.abs(c[w][1]-k[s][1])<z){c[w]=k[s]}if(k!=null&&Math.abs(c[i][0]-k[v][0])<z&&Math.abs(c[i][1]-k[v][1])<z){c[i]=k[v]}}}}}if(this.wallAtEnd!=null){var d=this.wallAtEnd.getUnjoinedShapePoints(m);var l=0;var q=d.length-1;var r=(d.length/2|0)-1;var j=(d.length/2|0);var p=this.wallAtEnd.getWallAtStart()===this&&(this.wallAtEnd.getWallAtEnd()!==this||(this.wallAtEnd.xStart===this.xEnd&&this.wallAtEnd.yStart===this.yEnd));var f=this.wallAtEnd.getWallAtEnd()===this&&(this.wallAtEnd.getWallAtStart()!==this||(this.wallAtEnd.xEnd===this.xEnd&&this.wallAtEnd.yEnd===this.yEnd));var e=m?this.wallAtEnd.pointsIncludingBaseboardsCache:this.wallAtEnd.pointsCache;var u=2*Math.max(this.thickness,this.wallAtEnd.getThickness());if(p){this.computeIntersection(c[t],c[t-1],d[l],d[l+1],u);this.computeIntersection(c[o],c[o+1],d[q],d[q-1],u);if(e!=null){if(Math.abs(c[t][0]-e[l][0])<z&&Math.abs(c[t][1]-e[l][1])<z){c[t]=e[l]}if(Math.abs(c[o][0]-e[q][0])<z&&Math.abs(c[o][1]-e[q][1])<z){c[o]=e[q]}}}else{if(f){this.computeIntersection(c[t],c[t-1],d[j],d[j+1],u);this.computeIntersection(c[o],c[o+1],d[r],d[r-1],u);if(e!=null){if(Math.abs(c[t][0]-e[j][0])<z&&Math.abs(c[t][1]-e[j][1])<z){c[t]=e[j]}if(Math.abs(c[o][0]-e[r][0])<z&&Math.abs(c[o][1]-e[r][1])<z){c[o]=e[r]}}}}}return c};b.prototype.getUnjoinedShapePoints=function(k){if(this.arcExtent!=null&&this.arcExtent!==0&&java.awt.geom.Point2D.distanceSq(this.xStart,this.yStart,this.xEnd,this.yEnd)>1e-10){var h=this.getArcCircleCenter();var u=Math.atan2(h[1]-this.yStart,h[0]-this.xStart);u+=2*Math.atan2(this.yStart-this.yEnd,this.xEnd-this.xStart);var t=java.awt.geom.Point2D.distance(h[0],h[1],this.xStart,this.yStart);var e=t+this.thickness/2;var p=Math.max(0,t-this.thickness/2);var s=e*Math.abs(this.arcExtent);var q=this.arcExtent/Math.sqrt(s);var g=((this.arcExtent/q)|0);if(k){if(q>0){if(this.leftSideBaseboard!=null){e+=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){p-=this.rightSideBaseboard.getThickness()}}else{if(this.leftSideBaseboard!=null){p-=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){e+=this.rightSideBaseboard.getThickness()}}}var c=([]);if(this.symmetric){if(Math.abs(this.arcExtent-g*q)>0.000001){q=this.arcExtent/++g}for(var v=0;v<=g;v++){this.computeRoundWallShapePoint(c,u+this.arcExtent-v*q,v,q,h,e,p)}}else{var v=0;for(var w=this.arcExtent;q>0?w>=q*0.1:w<=-q*0.1;w-=q,v++){this.computeRoundWallShapePoint(c,u+w,v,q,h,e,p)}this.computeRoundWallShapePoint(c,u,v,q,h,e,p)}return c.slice(0)}else{var w=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=Math.sin(w);var f=Math.cos(w);var n=this.thickness/2;if(k&&this.leftSideBaseboard!=null){n+=this.leftSideBaseboard.getThickness()}var l=d*n;var j=f*n;var r=this.thickness/2;if(k&&this.rightSideBaseboard!=null){r+=this.rightSideBaseboard.getThickness()}var o=d*r;var m=f*r;return[[this.xStart+l,this.yStart-j],[this.xEnd+l,this.yEnd-j],[this.xEnd-o,this.yEnd+m],[this.xStart-o,this.yStart+m]]}};b.prototype.computeRoundWallShapePoint=function(m,e,g,d,k,c,h){var l=Math.cos(e);var j=Math.sin(e);var f=[(k[0]+h*l),(k[1]-h*j)];var i=[(k[0]+c*l),(k[1]-c*j)];if(d>0){m.splice(g,0,f);m.splice(m.length-1-g,0,i)}else{m.splice(g,0,i);m.splice(m.length-1-g,0,f)}};b.prototype.computeIntersection=function(k,i,h,g,c){var n=(i[1]-k[1])/(i[0]-k[0]);var m=(g[1]-h[1])/(g[0]-h[0]);if(n!==m){var l=k[0];var j=k[1];if(Math.abs(n)>4000){if(Math.abs(m)<4000){l=k[0];var e=g[1]-m*g[0];j=m*l+e}}else{if(Math.abs(m)>4000){if(Math.abs(n)<4000){l=h[0];var f=i[1]-n*i[0];j=n*l+f}}else{var d=(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(n)===(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(m);if(Math.abs(n-m)>0.00001&&(!d||(Math.abs(n)>Math.abs(m)?n/m:m/n)>1.004)){var f=i[1]-n*i[0];var e=g[1]-m*g[0];l=(e-f)/(n-m);j=n*l+f}}}if(java.awt.geom.Point2D.distanceSq(l,j,k[0],k[1])<c*c){k[0]=l;k[1]=j}}};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape(false).intersects(d)};b.prototype.containsPoint$float$float$float=function(c,e,d){return this.containsPoint$float$float$boolean$float(c,e,false,d)};b.prototype.containsPoint$float$float$boolean$float=function(c,f,e,d){return this.containsShapeAtWithMargin(this.getShape(e),c,f,d)};b.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="boolean")||e===null)&&((typeof d==="number")||d===null)){return this.containsPoint$float$float$boolean$float(c,f,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}}};b.prototype.isMiddlePointAt=function(c,i,h){var g=this.getPoints$();var f=(g.length/4|0);var e=g.length-1-f;var d=g.length%4===0?new java.awt.geom.Line2D.Float((g[f-1][0]+g[f][0])/2,(g[f-1][1]+g[f][1])/2,(g[e][0]+g[e+1][0])/2,(g[e][1]+g[e+1][1])/2):new java.awt.geom.Line2D.Float(g[f][0],g[f][1],g[e][0],g[e][1]);return this.containsShapeAtWithMargin(d,c,i,h)};b.prototype.containsWallStartAt=function(c,g,e){var d=this.getPoints$();var f=new java.awt.geom.Line2D.Float(d[0][0],d[0][1],d[d.length-1][0],d[d.length-1][1]);return this.containsShapeAtWithMargin(f,c,g,e)};b.prototype.containsWallEndAt=function(c,g,f){var d=this.getPoints$();var e=new java.awt.geom.Line2D.Float(d[(d.length/2|0)-1][0],d[(d.length/2|0)-1][1],d[(d.length/2|0)][0],d[(d.length/2|0)][1]);return this.containsShapeAtWithMargin(e,c,g,f)};b.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};b.prototype.getShape=function(f){if(this.shapeCache==null){var c=this.getPoints$boolean(f);var e=new java.awt.geom.GeneralPath();e.moveTo(c[0][0],c[0][1]);for(var d=1;d<c.length;d++){e.lineTo(c[d][0],c[d][1])}e.closePath();this.shapeCache=e}return this.shapeCache};b.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};b.duplicate=function(e){var f=([]);for(var d=0;d<e.length;d++){var c=e[d];(f.push(c.duplicate())>0)}b.updateBoundWalls(f,e);return f};b.clone=function(e){var f=([]);for(var d=0;d<e.length;d++){var c=e[d];(f.push((function(h){if(h.clone!=undefined){return h.clone()}else{var i=Object.create(h);for(var g in h){if(h.hasOwnProperty(g)){i[g]=h[g]}}return i}})(c))>0)}b.updateBoundWalls(f,e);return f};b.updateBoundWalls=function(g,d){for(var e=0;e<d.length;e++){var c=d[e];var f=d.indexOf(c.getWallAtStart());if(f!==-1){g[e].setWallAtStart(g[f])}var h=d.indexOf(c.getWallAtEnd());if(h!==-1){g[e].setWallAtEnd(g[h])}}};b.prototype.clone=function(){var d=this;var c=(function(f){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g}})(this);c.wallAtStart=null;c.wallAtEnd=null;c.level=null;c.shapeCache=null;c.pointsCache=null;c.pointsIncludingBaseboardsCache=null;return c};return b}(HomeObject));Wall.__class="com.eteks.sweethome3d.model.Wall";Wall.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"];Wall.__transients=["shapeCache","arcCircleCenterCache","pointsCache","pointsIncludingBaseboardsCache","propertyChangeSupport"];var DimensionLine=(function(b){__extends(a,b);function a(G,o,y,e,w,B,u,r){var J=this;if(((typeof G==="string")||G===null)&&((typeof o==="number")||o===null)&&((typeof y==="number")||y===null)&&((typeof e==="number")||e===null)&&((typeof w==="number")||w===null)&&((typeof B==="number")||B===null)&&((typeof u==="number")||u===null)&&((typeof r==="number")||r===null)){var t=arguments;J=b.call(this,G)||this;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}J.xStart=o;J.yStart=y;J.elevationStart=e;J.xEnd=w;J.yEnd=B;J.elevationEnd=u;J.offset=r;J.endMarkSize=10}else{if(((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof y==="number")||y===null)&&((typeof e==="number")||e===null)&&((typeof w==="number")||w===null)&&((typeof B==="number")||B===null)&&((typeof u==="number")||u===null)&&r===undefined){var t=arguments;var d=t[0];var C=t[1];var k=t[2];var q=t[3];var z=t[4];var h=t[5];var s=t[6];var H=arguments;var K=HomeObject.createId("dimensionLine");J=b.call(this,K)||this;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}J.xStart=d;J.yStart=C;J.elevationStart=k;J.xEnd=q;J.yEnd=z;J.elevationEnd=h;J.offset=s;J.endMarkSize=10;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}}else{if(((typeof G==="string")||G===null)&&((typeof o==="number")||o===null)&&((typeof y==="number")||y===null)&&((typeof e==="number")||e===null)&&((typeof w==="number")||w===null)&&((typeof B==="number")||B===null)&&u===undefined&&r===undefined){var t=arguments;var n=t[3];var x=t[4];var p=t[5];var F=arguments;var j=0;var g=0;J=b.call(this,G)||this;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}J.xStart=o;J.yStart=y;J.elevationStart=j;J.xEnd=n;J.yEnd=x;J.elevationEnd=g;J.offset=p;J.endMarkSize=10;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}}else{if(((typeof G==="number")||G===null)&&((typeof o==="number")||o===null)&&((typeof y==="number")||y===null)&&((typeof e==="number")||e===null)&&((typeof w==="number")||w===null)&&B===undefined&&u===undefined&&r===undefined){var t=arguments;var c=t[0];var A=t[1];var l=t[2];var v=t[3];var m=t[4];var E=arguments;var i=0;var f=0;var D=arguments;var I=HomeObject.createId("dimensionLine");J=b.call(this,I)||this;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}J.xStart=c;J.yStart=A;J.elevationStart=i;J.xEnd=l;J.yEnd=v;J.elevationEnd=f;J.offset=m;J.endMarkSize=10;if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}if(J.xStart===undefined){J.xStart=0}if(J.yStart===undefined){J.yStart=0}if(J.elevationStart===undefined){J.elevationStart=0}if(J.xEnd===undefined){J.xEnd=0}if(J.yEnd===undefined){J.yEnd=0}if(J.elevationEnd===undefined){J.elevationEnd=0}if(J.offset===undefined){J.offset=0}if(J.endMarkSize===undefined){J.endMarkSize=0}if(J.pitch===undefined){J.pitch=0}if(J.lengthStyle===undefined){J.lengthStyle=null}if(J.color===undefined){J.color=null}if(J.visibleIn3D===undefined){J.visibleIn3D=false}if(J.level===undefined){J.level=null}if(J.shapeCache===undefined){J.shapeCache=null}}else{throw new Error("invalid overload")}}}}return J}a.prototype.getXStart=function(){return this.xStart};a.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.shapeCache=null;this.firePropertyChange("X_START",c,d)}};a.prototype.getYStart=function(){return this.yStart};a.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.shapeCache=null;this.firePropertyChange("Y_START",c,d)}};a.prototype.getElevationStart=function(){return this.elevationStart};a.prototype.setElevationStart=function(d){if(d!==this.elevationStart){var c=this.elevationStart;this.elevationStart=d;this.shapeCache=null;this.firePropertyChange("ELEVATION_START",c,d)}};a.prototype.getXEnd=function(){return this.xEnd};a.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.shapeCache=null;this.firePropertyChange("X_END",d,c)}};a.prototype.getYEnd=function(){return this.yEnd};a.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.shapeCache=null;this.firePropertyChange("Y_END",d,c)}};a.prototype.getElevationEnd=function(){return this.elevationEnd};a.prototype.setElevationEnd=function(c){if(c!==this.elevationEnd){var d=this.elevationEnd;this.elevationEnd=c;this.shapeCache=null;this.firePropertyChange("ELEVATION_END",d,c)}};a.prototype.isElevationDimensionLine=function(){return this.xStart===this.xEnd&&this.yStart===this.yEnd&&this.elevationStart!==this.elevationEnd};a.prototype.getOffset=function(){return this.offset};a.prototype.setOffset=function(d){if(d!==this.offset){var c=this.offset;this.offset=d;this.shapeCache=null;this.firePropertyChange("OFFSET",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.shapeCache=null;this.firePropertyChange("PITCH",c,d)}};a.prototype.getLength=function(){var d=this.xEnd-this.xStart;var c=this.yEnd-this.yStart;var e=this.elevationEnd-this.elevationStart;return Math.sqrt(d*d+c*c+e*e)};a.prototype.getLengthStyle=function(){return this.lengthStyle};a.prototype.setLengthStyle=function(c){if(c!==this.lengthStyle){var d=this.lengthStyle;this.lengthStyle=c;this.firePropertyChange("LENGTH_STYLE",d,c)}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}};a.prototype.getEndMarkSize=function(){return this.endMarkSize};a.prototype.setEndMarkSize=function(c){if(c!==this.endMarkSize){var d=this.endMarkSize;this.endMarkSize=c;this.shapeCache=null;this.firePropertyChange("END_MARK_SIZE",d,c)}};a.prototype.isVisibleIn3D=function(){return this.visibleIn3D};a.prototype.setVisibleIn3D=function(c){if(c!==this.visibleIn3D){this.visibleIn3D=c;this.firePropertyChange("VISIBLE_IN_3D",!c,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&c+Math.max(this.elevationStart,this.elevationEnd)>d}else{return false}}};a.prototype.getPoints=function(){var e=this.isElevationDimensionLine()?this.pitch:Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=-Math.sin(e)*this.offset;var c=Math.cos(e)*this.offset;return[[this.xStart,this.yStart],[this.xStart+d,this.yStart+c],[this.xEnd+d,this.yEnd+c],[this.xEnd,this.yEnd]]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.isMiddlePointAt=function(c,j,g){if(this.elevationStart===this.elevationEnd){var h=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var e=-Math.sin(h)*this.offset;var d=Math.cos(h)*this.offset;var i=(this.xStart+this.xEnd)/2+e;var f=(this.yStart+this.yEnd)/2+d;return Math.abs(c-i)<=g&&Math.abs(j-f)<=g}else{return false}};a.prototype.containsStartExtensionLinetAt=function(c,g,e){if(this.elevationStart===this.elevationEnd){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+-Math.sin(f)*this.offset,this.yStart+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(d,c,g,e)}else{return false}};a.prototype.containsEndExtensionLineAt=function(d,g,e){if(this.elevationStart===this.elevationEnd){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var c=new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+-Math.sin(f)*this.offset,this.yEnd+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(c,d,g,e)}else{return false}};a.prototype.isTopPointAt=function(c,i,f){if(this.elevationStart!==this.elevationEnd){var h=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch;var e=-Math.sin(h)*(this.offset-this.endMarkSize/2*((function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)===0?-1:(function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)));var d=Math.cos(h)*(this.offset-this.endMarkSize/2*((function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)===0?-1:(function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)));var g=java.awt.geom.Point2D.distanceSq(c,i,this.xStart+e,this.yStart+d);return g<=f*f}else{return false}};a.prototype.isRightPointAt=function(h,g,e){if(this.elevationStart!==this.elevationEnd){var d=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch;var f=Math.sin(d);var i=Math.cos(d);var k=-f*this.offset+i*this.endMarkSize/2;var j=i*this.offset+f*this.endMarkSize/2;var c=java.awt.geom.Point2D.distanceSq(h,g,this.xStart+k,this.yStart+j);return c<=e*e}else{return false}};a.prototype.isBottomPointAt=function(c,i,f){if(this.elevationStart!==this.elevationEnd){var h=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch;var e=-Math.sin(h)*(this.offset+this.endMarkSize/2*((function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)===0?-1:(function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)));var d=Math.cos(h)*(this.offset+this.endMarkSize/2*((function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)===0?-1:(function(j){if(j>0){return 1}else{if(j<0){return -1}else{return 0}}})(this.offset)));var g=java.awt.geom.Point2D.distanceSq(c,i,this.xStart+e,this.yStart+d);return g<=f*f}else{return false}};a.prototype.isLeftPointAt=function(h,g,e){if(this.elevationStart!==this.elevationEnd){var d=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch;var f=Math.sin(d);var i=Math.cos(d);var k=-f*this.offset-i*this.endMarkSize/2;var j=i*this.offset-f*this.endMarkSize/2;var c=java.awt.geom.Point2D.distanceSq(h,g,this.xStart+k,this.yStart+j);return c<=e*e}else{return false}};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var g=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch;var e=this.elevationStart===this.elevationEnd;var d=-Math.sin(g)*this.offset;var c=Math.cos(g)*this.offset;var f=new java.awt.geom.GeneralPath();if(e){f.append(new java.awt.geom.Line2D.Float(this.xStart+d,this.yStart+c,this.xEnd+d,this.yEnd+c),false);f.append(new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+d,this.yEnd+c),false)}else{f.append(new java.awt.geom.Ellipse2D.Float(this.xStart+d-this.endMarkSize/2,this.yStart+c-this.endMarkSize/2,this.endMarkSize,this.endMarkSize),false)}f.append(new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+d,this.yStart+c),false);this.shapeCache=f}return this.shapeCache};a.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.level=null;return c};return a}(HomeObject));DimensionLine.__class="com.eteks.sweethome3d.model.DimensionLine";DimensionLine.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"];DimensionLine.__transients=["shapeCache","propertyChangeSupport"];var Camera=(function(b){__extends(a,b);function a(A,q,n,k,o,l,M,i,N){var E=this;if(((typeof A==="string")||A===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof o==="number")||o===null)&&((typeof l==="number")||l===null)&&((typeof M==="number")||M===null)&&((typeof i==="number")||i===null)&&((typeof N==="number")||N===null)){var h=arguments;E=b.call(this,A)||this;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}E.x=q;E.y=n;E.z=k;E.yaw=o;E.pitch=l;E.fieldOfView=M;E.time=i;E.lens=N}else{if(((typeof A==="number")||A===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof o==="number")||o===null)&&((typeof l==="number")||l===null)&&((typeof M==="number")||M===null)&&((typeof i==="number")||i===null)&&N===undefined){var h=arguments;var B=h[0];var d=h[1];var I=h[2];var g=h[3];var H=h[4];var C=h[5];var p=h[6];var L=h[7];var u=arguments;var D=HomeObject.createId("camera");E=b.call(this,D)||this;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}E.x=B;E.y=d;E.z=I;E.yaw=g;E.pitch=H;E.fieldOfView=C;E.time=p;E.lens=L;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}}else{if(((typeof A==="string")||A===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof o==="number")||o===null)&&((typeof l==="number")||l===null)&&((typeof M==="number")||M===null)&&i===undefined&&N===undefined){var h=arguments;var t=arguments;var m=a.midday();var K=a.Lens.PINHOLE;E=b.call(this,A)||this;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}E.x=q;E.y=n;E.z=k;E.yaw=o;E.pitch=l;E.fieldOfView=M;E.time=m;E.lens=K;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}}else{if(((typeof A==="number")||A===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof o==="number")||o===null)&&((typeof l==="number")||l===null)&&M===undefined&&i===undefined&&N===undefined){var h=arguments;var w=h[0];var c=h[1];var G=h[2];var e=h[3];var F=h[4];var v=h[5];var s=arguments;var j=a.midday();var J=a.Lens.PINHOLE;var r=arguments;var f=HomeObject.createId("camera");E=b.call(this,f)||this;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}E.x=w;E.y=c;E.z=G;E.yaw=e;E.pitch=F;E.fieldOfView=v;E.time=j;E.lens=J;if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}if(E.name===undefined){E.name=null}if(E.x===undefined){E.x=0}if(E.y===undefined){E.y=0}if(E.z===undefined){E.z=0}if(E.yaw===undefined){E.yaw=0}if(E.pitch===undefined){E.pitch=0}if(E.fieldOfView===undefined){E.fieldOfView=0}if(E.time===undefined){E.time=0}if(E.lens===undefined){E.lens=null}if(E.lensName===undefined){E.lensName=null}if(E.renderer===undefined){E.renderer=null}}else{throw new Error("invalid overload")}}}}return E}a.midday=function(){var c=new Date();(function(f,e){return f.UTC?f.setUTCHours(e):f.setHours(e)})(c,12);(function(f,e){return f.UTC?f.setUTCMinutes(e):f.setMinutes(e)})(c,0);(function(f,e){return f.UTC?f.setUTCSeconds(e):f.setSeconds(e)})(c,0);(function(f,e){return f.UTC?f.setUTCMilliseconds(e):f.setMilliseconds(e)})(c,0);return c.getTime()};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getYaw=function(){return this.yaw};a.prototype.setYaw=function(d){if(d!==this.yaw){var c=this.yaw;this.yaw=d;this.firePropertyChange("YAW",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.firePropertyChange("PITCH",c,d)}};a.prototype.getFieldOfView=function(){return this.fieldOfView};a.prototype.setFieldOfView=function(c){if(c!==this.fieldOfView){var d=this.fieldOfView;this.fieldOfView=c;this.firePropertyChange("FIELD_OF_VIEW",d,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.firePropertyChange("Y",c,d)}};a.prototype.getZ=function(){return this.z};a.prototype.setZ=function(d){if(d!==this.z){var c=this.z;this.z=d;this.firePropertyChange("Z",c,d)}};a.prototype.getTime=function(){return this.time};a.prototype.setTime=function(c){if(this.time!==c){var d=this.time;this.time=c;this.firePropertyChange("TIME",d,c)}};a.convertTimeToTimeZone=function(d,e){var f=new Date();f.setTime(d);var c=new Date();(function(h,g){return h.UTC?h.setUTCFullYear(g):h.setFullYear(g)})(c,(function(g){return g.UTC?g.getUTCFullYear():g.getFullYear()})(f));(function(h,g){return h.UTC?h.setUTCMonth(g):h.setMonth(g)})(c,(function(g){return g.UTC?g.getUTCMonth():g.getMonth()})(f));(function(h,g){return h.UTC?h.setUTCDate(g):h.setDate(g)})(c,(function(g){return g.UTC?g.getUTCDate():g.getDate()})(f));(function(h,g){return h.UTC?h.setUTCHours(g):h.setHours(g)})(c,(function(g){return g.UTC?g.getUTCHours():g.getHours()})(f));(function(h,g){return h.UTC?h.setUTCMinutes(g):h.setMinutes(g)})(c,(function(g){return g.UTC?g.getUTCMinutes():g.getMinutes()})(f));(function(h,g){return h.UTC?h.setUTCSeconds(g):h.setSeconds(g)})(c,(function(g){return g.UTC?g.getUTCSeconds():g.getSeconds()})(f));(function(h,g){return h.UTC?h.setUTCMilliseconds(g):h.setMilliseconds(g)})(c,(function(g){return g.UTC?g.getUTCMilliseconds():g.getMilliseconds()})(f));return c.getTime()};a.prototype.getLens=function(){return this.lens};a.prototype.setLens=function(c){if(c!==this.lens){var d=this.lens;this.lens=c;this.lensName=a.Lens[this.lens];this.firePropertyChange("LENS",d,c)}};a.prototype.setRenderer=function(d){if(d!==this.renderer&&(d==null||!(d===this.renderer))){var c=this.renderer;this.renderer=d;this.firePropertyChange("RENDERER",c,d)}};a.prototype.getRenderer=function(){return this.renderer};a.prototype.setCamera=function(c){this.setX(c.getX());this.setY(c.getY());this.setZ(c.getZ());this.setYaw(c.getYaw());this.setPitch(c.getPitch());this.setFieldOfView(c.getFieldOfView())};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomeObject));Camera.__class="com.eteks.sweethome3d.model.Camera";(function(b){var a;(function(c){c[c.PINHOLE=0]="PINHOLE";c[c.NORMAL=1]="NORMAL";c[c.FISHEYE=2]="FISHEYE";c[c.SPHERICAL=3]="SPHERICAL"})(a=b.Lens||(b.Lens={}))})(Camera||(Camera={}));Camera.__transients=["lens","propertyChangeSupport"];var Level=(function(b){__extends(a,b);function a(d,c,m,g,n){var i=this;if(((typeof d==="string")||d===null)&&((typeof c==="string")||c===null)&&((typeof m==="number")||m===null)&&((typeof g==="number")||g===null)&&((typeof n==="number")||n===null)){var j=arguments;i=b.call(this,d)||this;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}i.name=c;i.elevation=m;i.floorThickness=g;i.height=n;i.visible=true;i.viewable=true;i.elevationIndex=-1}else{if(((typeof d==="string")||d===null)&&((typeof c==="number")||c===null)&&((typeof m==="number")||m===null)&&((typeof g==="number")||g===null)&&n===undefined){var j=arguments;var h=j[0];var k=j[1];var o=j[2];var f=j[3];var e=arguments;var l=HomeObject.createId("level");i=b.call(this,l)||this;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}i.name=h;i.elevation=k;i.floorThickness=o;i.height=f;i.visible=true;i.viewable=true;i.elevationIndex=-1;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}}else{throw new Error("invalid overload")}}return i}a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getElevation=function(){return this.elevation};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.getFloorThickness=function(){return this.floorThickness};a.prototype.setFloorThickness=function(d){if(d!==this.floorThickness){var c=this.floorThickness;this.floorThickness=d;this.firePropertyChange("FLOOR_THICKNESS",c,d)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(c!==this.height){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(d){if(d!==this.backgroundImage){var c=this.backgroundImage;this.backgroundImage=d;this.firePropertyChange("BACKGROUND_IMAGE",c,d)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.isViewable=function(){return this.viewable};a.prototype.setViewable=function(c){if(c!==this.viewable){this.viewable=c;this.firePropertyChange("VIEWABLE",!c,c)}};a.prototype.isViewableAndVisible=function(){return this.viewable&&this.visible};a.prototype.getElevationIndex=function(){return this.elevationIndex};a.prototype.setElevationIndex=function(c){if(c!==this.elevationIndex){var d=this.elevationIndex;this.elevationIndex=c;this.firePropertyChange("ELEVATION_INDEX",d,c)}};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomeObject));Level.__class="com.eteks.sweethome3d.model.Level";Level.__transients=["propertyChangeSupport"];var Polyline=(function(b){__extends(a,b);function a(M,Q,p,q,v,V,I,o,c,aj,H){var j=this;if(((typeof M==="string")||M===null)&&((Q!=null&&Q instanceof Array&&(Q.length==0||Q[0]==null||Q[0] instanceof Array))||Q===null)&&((typeof p==="number")||p===null)&&((typeof q==="number")||q===null)&&((typeof v==="number")||v===null)&&((typeof V==="number")||V===null)&&((typeof I==="number")||I===null)&&((typeof o==="number")||o===null)&&((typeof c==="number")||c===null)&&((typeof aj==="boolean")||aj===null)&&((typeof H==="number")||H===null)){var Z=arguments;j=b.call(this,M)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(Q);j.thickness=p;j.capStyle=q;j.joinStyle=v;j.dashStyle=V;j.dashOffset=I;j.startArrowStyle=o;j.endArrowStyle=c;j.closedPath=aj;j.color=H}else{if(((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||M[0] instanceof Array))||M===null)&&((typeof Q==="number")||Q===null)&&((typeof p==="number")||p===null)&&((typeof q==="number")||q===null)&&((typeof v==="number")||v===null)&&((typeof V==="number")||V===null)&&((typeof I==="number")||I===null)&&((typeof o==="number")||o===null)&&((typeof c==="boolean")||c===null)&&((typeof aj==="number")||aj===null)&&H===undefined){var Z=arguments;var ai=Z[0];var z=Z[1];var T=Z[2];var X=Z[3];var e=Z[4];var G=Z[5];var i=Z[6];var n=Z[7];var D=Z[8];var W=Z[9];var ag=arguments;var x=HomeObject.createId("polyline");j=b.call(this,x)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(ai);j.thickness=z;j.capStyle=T;j.joinStyle=X;j.dashStyle=e;j.dashOffset=G;j.startArrowStyle=i;j.endArrowStyle=n;j.closedPath=D;j.color=W;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||M[0] instanceof Array))||M===null)&&((typeof Q==="number")||Q===null)&&((typeof p==="number")||p===null)&&((typeof q==="number")||q===null)&&((typeof v==="number")||v===null)&&((typeof V==="number")||V===null)&&((typeof I==="number")||I===null)&&((typeof o==="boolean")||o===null)&&((typeof c==="number")||c===null)&&aj===undefined&&H===undefined){var Z=arguments;var ah=Z[0];var w=Z[1];var S=Z[2];var U=Z[3];var d=Z[4];var h=Z[5];var m=Z[6];var B=Z[7];var L=Z[8];var ae=arguments;var F=0;var ad=arguments;var u=HomeObject.createId("polyline");j=b.call(this,u)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(ah);j.thickness=w;j.capStyle=S;j.joinStyle=U;j.dashStyle=d;j.dashOffset=F;j.startArrowStyle=h;j.endArrowStyle=m;j.closedPath=B;j.color=L;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((typeof M==="string")||M===null)&&((Q!=null&&Q instanceof Array&&(Q.length==0||Q[0]==null||Q[0] instanceof Array))||Q===null)&&p===undefined&&q===undefined&&v===undefined&&V===undefined&&I===undefined&&o===undefined&&c===undefined&&aj===undefined&&H===undefined){var Z=arguments;var ac=arguments;var t=1;var P=a.CapStyle.BUTT;var R=a.JoinStyle.MITER;var al=a.DashStyle.SOLID;var E=0;var g=a.ArrowStyle.NONE;var l=a.ArrowStyle.NONE;var A=false;var K=-16777216;j=b.call(this,M)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(Q);j.thickness=t;j.capStyle=P;j.joinStyle=R;j.dashStyle=al;j.dashOffset=E;j.startArrowStyle=g;j.endArrowStyle=l;j.closedPath=A;j.color=K;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||M[0] instanceof Array))||M===null)&&Q===undefined&&p===undefined&&q===undefined&&v===undefined&&V===undefined&&I===undefined&&o===undefined&&c===undefined&&aj===undefined&&H===undefined){var Z=arguments;var af=Z[0];var ab=arguments;var s=1;var N=a.CapStyle.BUTT;var O=a.JoinStyle.MITER;var ak=a.DashStyle.SOLID;var f=a.ArrowStyle.NONE;var k=a.ArrowStyle.NONE;var y=false;var J=-16777216;var aa=arguments;var C=0;var Y=arguments;var r=HomeObject.createId("polyline");j=b.call(this,r)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(af);j.thickness=s;j.capStyle=N;j.joinStyle=O;j.dashStyle=ak;j.dashOffset=C;j.startArrowStyle=f;j.endArrowStyle=k;j.closedPath=y;j.color=J;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{throw new Error("invalid overload")}}}}}return j}a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=(function(g){var f=[];while(g-->0){f.push(null)}return f})(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=(function(i){var h=[];while(i-->0){h.push(null)}return h})(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.getThickness=function(){return this.thickness};a.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.firePropertyChange("THICKNESS",c,d)}};a.prototype.getCapStyle=function(){return this.capStyle};a.prototype.setCapStyle=function(d){if(d!==this.capStyle){var c=this.capStyle;this.capStyle=d;this.capStyleName=a.CapStyle[this.capStyle];this.firePropertyChange("CAP_STYLE",c,d)}};a.prototype.getJoinStyle=function(){return this.joinStyle};a.prototype.setJoinStyle=function(d){if(d!==this.joinStyle){var c=this.joinStyle;this.joinStyle=d;this.joinStyleName=a.JoinStyle[this.joinStyle];this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("JOIN_STYLE",c,d)}};a.prototype.getDashStyle=function(){return this.dashStyle};a.prototype.setDashStyle=function(e){if(e!==this.dashStyle){var c=this.getDashPattern();var d=this.dashStyle;this.dashStyle=e;this.dashStyleName=a.DashStyle[this.dashStyle];if(e!==a.DashStyle.CUSTOMIZED){this.dashPattern=null}this.firePropertyChange("DASH_PATTERN",c,this.getDashPattern());this.firePropertyChange("DASH_STYLE",d,e)}};a.prototype.getDashPattern=function(){var c=null;if(this.dashStyle!==a.DashStyle.CUSTOMIZED){return a.DashStyle["_$wrappers"][this.dashStyle].getDashPattern()}else{if(this.dashPattern!=null){c=this.dashPattern.slice(0)}}return c};a.prototype.setDashPattern=function(c){var h=function(){var i=[];for(var j in a.DashStyle){if(!isNaN(j)){i.push(parseInt(j,10))}}return i}();for(var e=0;e<h.length;e++){var g=h[e];if(this.dashStyle!==a.DashStyle.CUSTOMIZED){if((function(k,j){if(k==null&&j==null){return true}if(k==null||j==null){return false}if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true})(c,a.DashStyle["_$wrappers"][g].getDashPattern())){this.setDashStyle(g);return}}}if(!(function(k,j){if(k==null&&j==null){return true}if(k==null||j==null){return false}if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true})(c,this.dashPattern)){var d=this.getDashPattern();this.dashPattern=c.slice(0);this.firePropertyChange("DASH_PATTERN",d,c);var f=this.dashStyle;this.dashStyle=a.DashStyle.CUSTOMIZED;this.dashStyleName=a.DashStyle[this.dashStyle];this.firePropertyChange("DASH_STYLE",f,a.DashStyle.CUSTOMIZED)}};a.prototype.getDashOffset=function(){return this.dashOffset};a.prototype.setDashOffset=function(d){if(d!==this.dashOffset){var c=this.dashOffset;this.dashOffset=d;this.firePropertyChange("DASH_OFFSET",c,d)}};a.prototype.getStartArrowStyle=function(){return this.startArrowStyle};a.prototype.setStartArrowStyle=function(d){if(d!==this.startArrowStyle){var c=this.startArrowStyle;this.startArrowStyle=d;this.startArrowStyleName=a.ArrowStyle[this.startArrowStyle];this.firePropertyChange("START_ARROW_STYLE",c,d)}};a.prototype.getEndArrowStyle=function(){return this.endArrowStyle};a.prototype.setEndArrowStyle=function(c){if(c!==this.endArrowStyle){var d=this.endArrowStyle;this.endArrowStyle=c;this.endArrowStyleName=a.ArrowStyle[this.endArrowStyle];this.firePropertyChange("END_ARROW_STYLE",d,c)}};a.prototype.isClosedPath=function(){return this.closedPath};a.prototype.setClosedPath=function(c){if(c!==this.closedPath){this.closedPath=c;this.firePropertyChange("CLOSED_PATH",!c,c)}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}};a.prototype.getGroundElevation=function(){var c=this.getElevation();if(this.level!=null){return c+this.level.getElevation()}else{return c}};a.prototype.getElevation=function(){return this.elevation!=null?this.elevation:0};a.prototype.setElevation=function(d){if(this.elevation!=null&&d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.isVisibleIn3D=function(){return this.elevation!=null};a.prototype.setVisibleIn3D=function(c){if((c)!==((this.elevation!=null))){this.elevation=c?0:null;this.firePropertyChange("VISIBLE_IN_3D",!c,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getLength=function(){var g=[0,0];var e=[0,0];var c=[0,0];var f=0;for(var d=this.getPolylinePath().getPathIterator(null,0.1);!d.isDone();d.next()){switch((d.currentSegment(c))){case java.awt.geom.PathIterator.SEG_CLOSE:f+=java.awt.geom.Point2D.distance(g[0],g[1],e[0],e[1]);break;case java.awt.geom.PathIterator.SEG_MOVETO:(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,g,0,2);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break;case java.awt.geom.PathIterator.SEG_LINETO:f+=java.awt.geom.Point2D.distance(e[0],e[1],c[0],c[1]);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break}}return f};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getPolylinePath=function(){if(this.polylinePathCache==null){var j=new java.awt.geom.GeneralPath();if(this.joinStyle===a.JoinStyle.CURVED){for(var g=0,c=this.closedPath?this.points.length:this.points.length-1;g<c;g++){var h=new java.awt.geom.CubicCurve2D.Float();var e=this.points[g===0?this.points.length-1:g-1];var m=this.points[g];var k=this.points[g===this.points.length-1?0:g+1];var l=[k[0]-e[0],k[1]-e[1]];var d=this.points[(g+2)%this.points.length];var f=[m[0]-d[0],m[1]-d[1]];h.setCurve(m[0],m[1],m[0]+(g!==0||this.closedPath?l[0]/3.625:0),m[1]+(g!==0||this.closedPath?l[1]/3.625:0),k[0]+(g!==this.points.length-2||this.closedPath?f[0]/3.625:0),k[1]+(g!==this.points.length-2||this.closedPath?f[1]/3.625:0),k[0],k[1]);j.append(h,true)}}else{j.moveTo(this.points[0][0],this.points[0][1]);for(var g=1;g<this.points.length;g++){j.lineTo(this.points[g][0],this.points[g][1])}if(this.closedPath){j.closePath()}}this.polylinePathCache=j}return this.polylinePathCache};a.prototype.getShape=function(){if(this.shapeCache==null){this.shapeCache=new java.awt["BasicStroke"](this.thickness).createStrokedShape(this.getPolylinePath())}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.level=null;return c};return a}(HomeObject));Polyline.__class="com.eteks.sweethome3d.model.Polyline";Polyline.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"];(function(b){var c;(function(g){g[g.BUTT=0]="BUTT";g[g.SQUARE=1]="SQUARE";g[g.ROUND=2]="ROUND"})(c=b.CapStyle||(b.CapStyle={}));var e;(function(g){g[g.BEVEL=0]="BEVEL";g[g.MITER=1]="MITER";g[g.ROUND=2]="ROUND";g[g.CURVED=3]="CURVED"})(e=b.JoinStyle||(b.JoinStyle={}));var f;(function(g){g[g.NONE=0]="NONE";g[g.DELTA=1]="DELTA";g[g.OPEN=2]="OPEN";g[g.DISC=3]="DISC"})(f=b.ArrowStyle||(b.ArrowStyle={}));var d;(function(g){g[g.SOLID=0]="SOLID";g[g.DOT=1]="DOT";g[g.DASH=2]="DASH";g[g.DASH_DOT=3]="DASH_DOT";g[g.DASH_DOT_DOT=4]="DASH_DOT_DOT";g[g.CUSTOMIZED=5]="CUSTOMIZED"})(d=b.DashStyle||(b.DashStyle={}));var a=(function(){function g(i,h){this._$ordinal=i;this._$name=h}g.prototype.getDashPattern=function(){switch((this._$ordinal)){case b.DashStyle.SOLID:return[1,0];case b.DashStyle.DOT:return[1,1];case b.DashStyle.DASH:return[4,2];case b.DashStyle.DASH_DOT:return[8,2,2,2];case b.DashStyle.DASH_DOT_DOT:return[8,2,2,2,2,2];default:return null}};g.prototype.name=function(){return this._$name};g.prototype.ordinal=function(){return this._$ordinal};g.prototype.compareTo=function(h){return this._$ordinal-(isNaN(h)?h._$ordinal:h)};return g}());b.DashStyle_$WRAPPER=a;d.__class="com.eteks.sweethome3d.model.Polyline.DashStyle";d["_$wrappers"]={0:new a(0,"SOLID"),1:new a(1,"DOT"),2:new a(2,"DASH"),3:new a(3,"DASH_DOT"),4:new a(4,"DASH_DOT_DOT"),5:new a(5,"CUSTOMIZED")}})(Polyline||(Polyline={}));Polyline.__transients=["capStyle","joinStyle","dashStyle","startArrowStyle","endArrowStyle","polylinePathCache","shapeCache","propertyChangeSupport"];var CatalogDoorOrWindow=(function(b){__extends(a,b);function a(U,ap,ak,ac,bX,E,ba,bU,u,ay,bW,bo,e,bS,bn,bF,b4,aR,Q,ar,bh,aB,bO,am,al,bc,an,bK,bG,g,au,p,bR,L,F){var bj=this;if(((typeof U==="string")||U===null)&&((typeof ap==="string")||ap===null)&&((typeof ak==="string")||ak===null)&&((typeof ac==="string")||ac===null)&&((typeof bX==="string")||bX===null)&&((E!=null&&E instanceof Array&&(E.length==0||E[0]==null||(typeof E[0]==="string")))||E===null)&&((typeof ba==="number")||ba===null)&&((typeof bU==="number")||bU===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((ay!=null&&(ay.constructor!=null&&ay.constructor.__interfaces!=null&&ay.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ay===null)&&((bW!=null&&(bW.constructor!=null&&bW.constructor.__interfaces!=null&&bW.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bW===null)&&((typeof bo==="number")||bo===null)&&((typeof e==="number")||e===null)&&((typeof bS==="number")||bS===null)&&((typeof bn==="number")||bn===null)&&((typeof bF==="number")||bF===null)&&((typeof b4==="boolean")||b4===null)&&((typeof aR==="string")||aR===null)&&((typeof Q==="number")||Q===null)&&((typeof ar==="number")||ar===null)&&((typeof bh==="boolean")||bh===null)&&((typeof aB==="boolean")||aB===null)&&((bO!=null&&bO instanceof Array&&(bO.length==0||bO[0]==null||(bO[0]!=null&&bO[0] instanceof Sash)))||bO===null)&&((am!=null&&am instanceof Array&&(am.length==0||am[0]==null||am[0] instanceof Array))||am===null)&&((typeof al==="number")||al===null)&&((typeof bc==="number")||bc===null)&&((typeof an==="string")||an===null)&&((typeof bK==="boolean")||bK===null)&&((typeof bG==="boolean")||bG===null)&&((typeof g==="boolean")||g===null)&&((au!=null&&au instanceof Big)||au===null)&&((p!=null&&p instanceof Big)||p===null)&&((typeof bR==="string")||bR===null)&&((L!=null&&(L instanceof Object))||L===null)&&((F!=null&&(F instanceof Object))||F===null)){var k=arguments;bj=b.call(this,U,ap,ak,ac,bX,E,ba,bU,u,ay,bW,bo,e,bS,bn,bF,b4,null,am,al,bc,an,bK,bG,g,false,au,p,bR,L,F)||this;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}bj.cutOutShape=aR;bj.wallThickness=Q;bj.wallDistance=ar;bj.wallCutOutOnBothSides=bh;bj.widthDepthDeformable=aB;bj.sashes=bO}else{if(((typeof U==="string")||U===null)&&((typeof ap==="string")||ap===null)&&((typeof ak==="string")||ak===null)&&((typeof ac==="string")||ac===null)&&((bX!=null&&bX instanceof Array&&(bX.length==0||bX[0]==null||(typeof bX[0]==="string")))||bX===null)&&((typeof E==="number")||E===null)&&((typeof ba==="number")||ba===null)&&((bU!=null&&(bU.constructor!=null&&bU.constructor.__interfaces!=null&&bU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bU===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((ay!=null&&(ay.constructor!=null&&ay.constructor.__interfaces!=null&&ay.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ay===null)&&((typeof bW==="number")||bW===null)&&((typeof bo==="number")||bo===null)&&((typeof e==="number")||e===null)&&((typeof bS==="number")||bS===null)&&((typeof bn==="number")||bn===null)&&((typeof bF==="boolean")||bF===null)&&((typeof b4==="string")||b4===null)&&((typeof aR==="number")||aR===null)&&((typeof Q==="number")||Q===null)&&((typeof ar==="boolean")||ar===null)&&((typeof bh==="boolean")||bh===null)&&((aB!=null&&aB instanceof Array&&(aB.length==0||aB[0]==null||(aB[0]!=null&&aB[0] instanceof Sash)))||aB===null)&&((bO!=null&&bO instanceof Array&&(bO.length==0||bO[0]==null||bO[0] instanceof Array))||bO===null)&&((typeof am==="boolean")||am===null)&&((typeof al==="number")||al===null)&&((typeof bc==="string")||bc===null)&&((typeof an==="boolean")||an===null)&&((typeof bK==="boolean")||bK===null)&&((typeof bG==="boolean")||bG===null)&&((g!=null&&g instanceof Big)||g===null)&&((au!=null&&au instanceof Big)||au===null)&&((typeof p==="string")||p===null)&&((bR!=null&&(bR instanceof Object))||bR===null)&&L===undefined&&F===undefined){var k=arguments;var aN=k[4];var a9=k[5];var z=k[6];var X=k[7];var x=k[8];var aZ=k[9];var a6=k[10];var o=k[11];var bN=k[12];var bg=k[13];var D=k[14];var a4=k[15];var b2=k[16];var aj=k[17];var y=k[18];var I=k[19];var bm=k[20];var ai=k[21];var aK=k[22];var B=k[23];var bV=k[24];var c=k[25];var aJ=k[26];var aA=k[27];var bs=k[28];var by=k[29];var bC=k[30];var bE=k[31];var at=k[32];var aQ=arguments;var f=B?PieceOfFurniture.SHOW_BACK_FACE:0;var aP=arguments;var P=null;var K=null;bj=b.call(this,U,ap,ak,ac,P,aN,a9,z,X,x,aZ,a6,o,bN,bg,D,a4,null,aK,f,bV,c,aJ,aA,bs,false,by,bC,bE,at,K)||this;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}bj.cutOutShape=b2;bj.wallThickness=aj;bj.wallDistance=y;bj.wallCutOutOnBothSides=I;bj.widthDepthDeformable=bm;bj.sashes=ai;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}}else{if(((typeof U==="string")||U===null)&&((typeof ap==="string")||ap===null)&&((typeof ak==="string")||ak===null)&&((typeof ac==="string")||ac===null)&&((bX!=null&&bX instanceof Array&&(bX.length==0||bX[0]==null||(typeof bX[0]==="string")))||bX===null)&&((typeof E==="number")||E===null)&&((typeof ba==="number")||ba===null)&&((bU!=null&&(bU.constructor!=null&&bU.constructor.__interfaces!=null&&bU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bU===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((ay!=null&&(ay.constructor!=null&&ay.constructor.__interfaces!=null&&ay.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ay===null)&&((typeof bW==="number")||bW===null)&&((typeof bo==="number")||bo===null)&&((typeof e==="number")||e===null)&&((typeof bS==="number")||bS===null)&&((typeof bn==="number")||bn===null)&&((typeof bF==="boolean")||bF===null)&&((typeof b4==="string")||b4===null)&&((typeof aR==="number")||aR===null)&&((typeof Q==="number")||Q===null)&&((typeof ar==="boolean")||ar===null)&&((typeof bh==="boolean")||bh===null)&&((aB!=null&&aB instanceof Array&&(aB.length==0||aB[0]==null||(aB[0]!=null&&aB[0] instanceof Sash)))||aB===null)&&((bO!=null&&bO instanceof Array&&(bO.length==0||bO[0]==null||bO[0] instanceof Array))||bO===null)&&((typeof am==="number")||am===null)&&((typeof al==="number")||al===null)&&((typeof bc==="string")||bc===null)&&((typeof an==="boolean")||an===null)&&((typeof bK==="boolean")||bK===null)&&((typeof bG==="boolean")||bG===null)&&((g!=null&&g instanceof Big)||g===null)&&((au!=null&&au instanceof Big)||au===null)&&((typeof p==="string")||p===null)&&((bR!=null&&(bR instanceof Object))||bR===null)&&L===undefined&&F===undefined){var k=arguments;var aM=k[4];var a8=k[5];var w=k[6];var W=k[7];var n=k[8];var aW=k[9];var a5=k[10];var m=k[11];var bM=k[12];var bf=k[13];var C=k[14];var a2=k[15];var b1=k[16];var ah=k[17];var v=k[18];var H=k[19];var bl=k[20];var ag=k[21];var aI=k[22];var d=k[23];var bT=k[24];var b5=k[25];var aH=k[26];var ax=k[27];var br=k[28];var bw=k[29];var bz=k[30];var bB=k[31];var aq=k[32];var aO=arguments;var O=null;var J=null;bj=b.call(this,U,ap,ak,ac,O,aM,a8,w,W,n,aW,a5,m,bM,bf,C,a2,null,aI,d,bT,b5,aH,ax,br,false,bw,bz,bB,aq,J)||this;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}bj.cutOutShape=b1;bj.wallThickness=ah;bj.wallDistance=v;bj.wallCutOutOnBothSides=H;bj.widthDepthDeformable=bl;bj.sashes=ag;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}}else{if(((typeof U==="string")||U===null)&&((typeof ap==="string")||ap===null)&&((typeof ak==="string")||ak===null)&&((typeof ac==="string")||ac===null)&&((bX!=null&&bX instanceof Array&&(bX.length==0||bX[0]==null||(typeof bX[0]==="string")))||bX===null)&&((typeof E==="number")||E===null)&&((typeof ba==="number")||ba===null)&&((bU!=null&&(bU.constructor!=null&&bU.constructor.__interfaces!=null&&bU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bU===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((ay!=null&&(ay.constructor!=null&&ay.constructor.__interfaces!=null&&ay.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ay===null)&&((typeof bW==="number")||bW===null)&&((typeof bo==="number")||bo===null)&&((typeof e==="number")||e===null)&&((typeof bS==="number")||bS===null)&&((typeof bn==="number")||bn===null)&&((typeof bF==="boolean")||bF===null)&&((typeof b4==="string")||b4===null)&&((typeof aR==="number")||aR===null)&&((typeof Q==="number")||Q===null)&&((typeof ar==="boolean")||ar===null)&&((typeof bh==="boolean")||bh===null)&&((aB!=null&&aB instanceof Array&&(aB.length==0||aB[0]==null||(aB[0]!=null&&aB[0] instanceof Sash)))||aB===null)&&((bO!=null&&bO instanceof Array&&(bO.length==0||bO[0]==null||bO[0] instanceof Array))||bO===null)&&((typeof am==="boolean")||am===null)&&((typeof al==="number")||al===null)&&((typeof bc==="string")||bc===null)&&((typeof an==="boolean")||an===null)&&((typeof bK==="boolean")||bK===null)&&((typeof bG==="boolean")||bG===null)&&((g!=null&&g instanceof Big)||g===null)&&((au!=null&&au instanceof Big)||au===null)&&((typeof p==="string")||p===null)&&bR===undefined&&L===undefined&&F===undefined){var k=arguments;var aL=k[4];var a7=k[5];var t=k[6];var V=k[7];var l=k[8];var aU=k[9];var a3=k[10];var j=k[11];var bL=k[12];var be=k[13];var A=k[14];var a0=k[15];var bZ=k[16];var af=k[17];var s=k[18];var G=k[19];var bk=k[20];var ae=k[21];var aG=k[22];var B=k[23];var az=k[24];var b3=k[25];var aF=k[26];var aw=k[27];var bq=k[28];var bv=k[29];var bx=k[30];var bi=k[31];var bJ=arguments;var bp=null;var bI=arguments;var M=B?PieceOfFurniture.SHOW_BACK_FACE:0;var bH=arguments;var N=null;var Y=null;bj=b.call(this,U,ap,ak,ac,N,aL,a7,t,V,l,aU,a3,j,bL,be,A,a0,null,aG,M,az,b3,aF,aw,bq,false,bv,bx,bi,bp,Y)||this;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}bj.cutOutShape=bZ;bj.wallThickness=af;bj.wallDistance=s;bj.wallCutOutOnBothSides=G;bj.widthDepthDeformable=bk;bj.sashes=ae;if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}}else{if(((typeof U==="string")||U===null)&&((ap!=null&&(ap.constructor!=null&&ap.constructor.__interfaces!=null&&ap.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ap===null)&&((ak!=null&&(ak.constructor!=null&&ak.constructor.__interfaces!=null&&ak.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ak===null)&&((typeof ac==="number")||ac===null)&&((typeof bX==="number")||bX===null)&&((typeof E==="number")||E===null)&&((typeof ba==="number")||ba===null)&&((typeof bU==="boolean")||bU===null)&&((typeof u==="number")||u===null)&&((typeof ay==="number")||ay===null)&&((bW!=null&&bW instanceof Array&&(bW.length==0||bW[0]==null||(bW[0]!=null&&bW[0] instanceof Sash)))||bW===null)&&((typeof bo==="number")||bo===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)&&((typeof bS==="boolean")||bS===null)&&((typeof bn==="number")||bn===null)&&((typeof bF==="string")||bF===null)&&((typeof b4==="number")||b4===null)&&((typeof aR==="boolean")||aR===null)&&Q===undefined&&ar===undefined&&bh===undefined&&aB===undefined&&bO===undefined&&am===undefined&&al===undefined&&bc===undefined&&an===undefined&&bK===undefined&&bG===undefined&&g===undefined&&au===undefined&&p===undefined&&bR===undefined&&L===undefined&&F===undefined){var k=arguments;var ao=k[0];var T=k[1];var aT=k[2];var a1=k[3];var i=k[4];var bD=k[5];var bd=k[6];var aY=k[7];var ad=k[8];var r=k[9];var ab=k[10];var bQ=k[11];var aE=k[12];var B=k[13];var av=k[14];var b0=k[15];var R=k[16];var bP=k[17];if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}}else{if(((typeof U==="string")||U===null)&&((typeof ap==="string")||ap===null)&&((typeof ak==="string")||ak===null)&&((ac!=null&&(ac.constructor!=null&&ac.constructor.__interfaces!=null&&ac.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ac===null)&&((bX!=null&&(bX.constructor!=null&&bX.constructor.__interfaces!=null&&bX.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bX===null)&&((typeof E==="number")||E===null)&&((typeof ba==="number")||ba===null)&&((typeof bU==="number")||bU===null)&&((typeof u==="number")||u===null)&&((typeof ay==="boolean")||ay===null)&&((typeof bW==="number")||bW===null)&&((typeof bo==="number")||bo===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||(e[0]!=null&&e[0] instanceof Sash)))||e===null)&&((bS!=null&&bS instanceof Array&&(bS.length==0||bS[0]==null||bS[0] instanceof Array))||bS===null)&&((typeof bn==="string")||bn===null)&&((typeof bF==="boolean")||bF===null)&&((b4!=null&&b4 instanceof Big)||b4===null)&&((aR!=null&&aR instanceof Big)||aR===null)&&Q===undefined&&ar===undefined&&bh===undefined&&aB===undefined&&bO===undefined&&am===undefined&&al===undefined&&bc===undefined&&an===undefined&&bK===undefined&&bG===undefined&&g===undefined&&au===undefined&&p===undefined&&bR===undefined&&L===undefined&&F===undefined){var k=arguments;var S=k[3];var aS=k[4];var aX=k[5];var h=k[6];var bA=k[7];var bb=k[8];var aV=k[9];var aa=k[10];var q=k[11];var Z=k[12];var aD=k[13];var bY=k[14];var aC=k[15];var bt=k[16];var bu=k[17];if(bj.wallThickness===undefined){bj.wallThickness=0}if(bj.wallDistance===undefined){bj.wallDistance=0}if(bj.wallCutOutOnBothSides===undefined){bj.wallCutOutOnBothSides=false}if(bj.widthDepthDeformable===undefined){bj.widthDepthDeformable=false}if(bj.sashes===undefined){bj.sashes=null}if(bj.cutOutShape===undefined){bj.cutOutShape=null}}else{throw new Error("invalid overload")}}}}}}return bj}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.isDoorOrWindow=function(){return true};a.prototype.isHorizontallyRotatable=function(){return false};return a}(CatalogPieceOfFurniture));CatalogDoorOrWindow.__class="com.eteks.sweethome3d.model.CatalogDoorOrWindow";CatalogDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture"];var CatalogShelfUnit=(function(a){__extends(b,a);function b(v,J,A,G,o,t,e,c,F,m,i,w,I,u,x,B,q,d,g,s,f,j,h,p,l,C,H,E,z,r,k,n,D){var y=a.call(this,v,J,A,G,o,t,e,c,F,m,i,w,I,u,x,B,g,s,f,j,h,p,l,C,H,E,z,r,k,n,D)||this;if(y.shelfElevations===undefined){y.shelfElevations=null}if(y.shelfBoxes===undefined){y.shelfBoxes=null}y.shelfElevations=q!=null&&q.length>0?q.slice(0):b.EMPTY_SHELF_ELEVATIONS_$LI$();y.shelfBoxes=d!=null&&d.length>0?d.slice(0):b.EMPTY_SHELF_BOXES_$LI$();return y}b.EMPTY_SHELF_ELEVATIONS_$LI$=function(){if(b.EMPTY_SHELF_ELEVATIONS==null){b.EMPTY_SHELF_ELEVATIONS=[]}return b.EMPTY_SHELF_ELEVATIONS};b.EMPTY_SHELF_BOXES_$LI$=function(){if(b.EMPTY_SHELF_BOXES==null){b.EMPTY_SHELF_BOXES=[]}return b.EMPTY_SHELF_BOXES};b.prototype.getShelfElevations=function(){return this.shelfElevations!=null?this.shelfElevations.slice(0):null};b.prototype.getShelfBoxes=function(){return this.shelfBoxes.slice(0)};return b}(CatalogPieceOfFurniture));CatalogShelfUnit.__class="com.eteks.sweethome3d.model.CatalogShelfUnit";CatalogShelfUnit.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.ShelfUnit"];var CatalogLight=(function(b){__extends(a,b);function a(aa,aA,k,aY,S,aN,bd,aU,m,aK,L,aX,bb,E,l,ba,j,bp,aJ,aq,aC,ag,bc,R,a7,ax,x,a3,bm,e,t,ai,ad){var F=this;if(((typeof aa==="string")||aa===null)&&((typeof aA==="string")||aA===null)&&((typeof k==="string")||k===null)&&((typeof aY==="string")||aY===null)&&((typeof S==="string")||S===null)&&((aN!=null&&aN instanceof Array&&(aN.length==0||aN[0]==null||(typeof aN[0]==="string")))||aN===null)&&((typeof bd==="number")||bd===null)&&((typeof aU==="number")||aU===null)&&((m!=null&&(m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((aK!=null&&(aK.constructor!=null&&aK.constructor.__interfaces!=null&&aK.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aK===null)&&((L!=null&&(L.constructor!=null&&L.constructor.__interfaces!=null&&L.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||L===null)&&((typeof aX==="number")||aX===null)&&((typeof bb==="number")||bb===null)&&((typeof E==="number")||E===null)&&((typeof l==="number")||l===null)&&((typeof ba==="number")||ba===null)&&((typeof j==="boolean")||j===null)&&((bp!=null&&bp instanceof Array&&(bp.length==0||bp[0]==null||(bp[0]!=null&&bp[0] instanceof LightSource)))||bp===null)&&((aJ!=null&&aJ instanceof Array&&(aJ.length==0||aJ[0]==null||(typeof aJ[0]==="string")))||aJ===null)&&((typeof aq==="string")||aq===null)&&((aC!=null&&aC instanceof Array&&(aC.length==0||aC[0]==null||aC[0] instanceof Array))||aC===null)&&((typeof ag==="number")||ag===null)&&((typeof bc==="number")||bc===null)&&((typeof R==="string")||R===null)&&((typeof a7==="boolean")||a7===null)&&((typeof ax==="boolean")||ax===null)&&((typeof x==="boolean")||x===null)&&((typeof a3==="boolean")||a3===null)&&((bm!=null&&bm instanceof Big)||bm===null)&&((e!=null&&e instanceof Big)||e===null)&&((typeof t==="string")||t===null)&&((ai!=null&&(ai instanceof Object))||ai===null)&&((ad!=null&&(ad instanceof Object))||ad===null)){var am=arguments;F=b.call(this,aa,aA,k,aY,S,aN,bd,aU,m,aK,L,aX,bb,E,l,ba,j,aq,aC,ag,bc,R,a7,ax,x,a3,bm,e,t,ai,ad)||this;if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}F.lightSources=bp!=null&&bp.length>0?bp.slice(0):a.EMPTY_LIGHT_SOURCES_$LI$();F.lightSourceMaterialNames=aJ!=null&&aJ.length>0?aJ.slice(0):a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$()}else{if(((typeof aa==="string")||aa===null)&&((typeof aA==="string")||aA===null)&&((typeof k==="string")||k===null)&&((typeof aY==="string")||aY===null)&&((S!=null&&S instanceof Array&&(S.length==0||S[0]==null||(typeof S[0]==="string")))||S===null)&&((typeof aN==="number")||aN===null)&&((typeof bd==="number")||bd===null)&&((aU!=null&&(aU.constructor!=null&&aU.constructor.__interfaces!=null&&aU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aU===null)&&((m!=null&&(m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((aK!=null&&(aK.constructor!=null&&aK.constructor.__interfaces!=null&&aK.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aK===null)&&((typeof L==="number")||L===null)&&((typeof aX==="number")||aX===null)&&((typeof bb==="number")||bb===null)&&((typeof E==="number")||E===null)&&((typeof l==="number")||l===null)&&((typeof ba==="boolean")||ba===null)&&((j!=null&&j instanceof Array&&(j.length==0||j[0]==null||(j[0]!=null&&j[0] instanceof LightSource)))||j===null)&&((bp!=null&&bp instanceof Array&&(bp.length==0||bp[0]==null||(typeof bp[0]==="string")))||bp===null)&&((typeof aJ==="string")||aJ===null)&&((aq!=null&&aq instanceof Array&&(aq.length==0||aq[0]==null||aq[0] instanceof Array))||aq===null)&&((typeof aC==="number")||aC===null)&&((typeof ag==="number")||ag===null)&&((typeof bc==="string")||bc===null)&&((typeof R==="boolean")||R===null)&&((typeof a7==="boolean")||a7===null)&&((typeof ax==="boolean")||ax===null)&&((typeof x==="boolean")||x===null)&&((a3!=null&&a3 instanceof Big)||a3===null)&&((bm!=null&&bm instanceof Big)||bm===null)&&((typeof e==="string")||e===null)&&((t!=null&&(t instanceof Object))||t===null)&&ai===undefined&&ad===undefined){var am=arguments;var a1=am[4];var aD=am[5];var W=am[6];var af=am[7];var P=am[8];var M=am[9];var h=am[10];var aT=am[11];var J=am[12];var A=am[13];var al=am[14];var a5=am[15];var aQ=am[16];var bh=am[17];var aM=am[18];var aI=am[19];var w=am[20];var at=am[21];var ao=am[22];var D=am[23];var a9=am[24];var br=am[25];var a0=am[26];var s=am[27];var r=am[28];var i=am[29];var aG=am[30];var bq=arguments;var Y=null;var ay=null;F=b.call(this,aa,aA,k,aY,Y,a1,aD,W,af,P,M,h,aT,J,A,al,a5,aM,aI,w,at,ao,D,a9,br,a0,s,r,i,aG,ay)||this;if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}F.lightSources=aQ!=null&&aQ.length>0?aQ.slice(0):a.EMPTY_LIGHT_SOURCES_$LI$();F.lightSourceMaterialNames=bh!=null&&bh.length>0?bh.slice(0):a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$();if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}}else{if(((typeof aa==="string")||aa===null)&&((typeof aA==="string")||aA===null)&&((typeof k==="string")||k===null)&&((typeof aY==="string")||aY===null)&&((S!=null&&S instanceof Array&&(S.length==0||S[0]==null||(typeof S[0]==="string")))||S===null)&&((typeof aN==="number")||aN===null)&&((typeof bd==="number")||bd===null)&&((aU!=null&&(aU.constructor!=null&&aU.constructor.__interfaces!=null&&aU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aU===null)&&((m!=null&&(m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((aK!=null&&(aK.constructor!=null&&aK.constructor.__interfaces!=null&&aK.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aK===null)&&((typeof L==="number")||L===null)&&((typeof aX==="number")||aX===null)&&((typeof bb==="number")||bb===null)&&((typeof E==="number")||E===null)&&((typeof l==="number")||l===null)&&((typeof ba==="boolean")||ba===null)&&((j!=null&&j instanceof Array&&(j.length==0||j[0]==null||(j[0]!=null&&j[0] instanceof LightSource)))||j===null)&&((typeof bp==="string")||bp===null)&&((aJ!=null&&aJ instanceof Array&&(aJ.length==0||aJ[0]==null||aJ[0] instanceof Array))||aJ===null)&&((typeof aq==="boolean")||aq===null)&&((typeof aC==="number")||aC===null)&&((typeof ag==="string")||ag===null)&&((typeof bc==="boolean")||bc===null)&&((typeof R==="boolean")||R===null)&&((typeof a7==="boolean")||a7===null)&&((typeof ax==="boolean")||ax===null)&&((x!=null&&x instanceof Big)||x===null)&&((a3!=null&&a3 instanceof Big)||a3===null)&&((typeof bm==="string")||bm===null)&&((e!=null&&(e instanceof Object))||e===null)&&t===undefined&&ai===undefined&&ad===undefined){var am=arguments;var aZ=am[4];var az=am[5];var U=am[6];var ae=am[7];var O=am[8];var K=am[9];var g=am[10];var aS=am[11];var H=am[12];var z=am[13];var ak=am[14];var a4=am[15];var aP=am[16];var aL=am[17];var aH=am[18];var Q=am[19];var ar=am[20];var an=am[21];var C=am[22];var a8=am[23];var bo=am[24];var aW=am[25];var q=am[26];var p=am[27];var f=am[28];var aE=am[29];var bn=arguments;var bf=null;var v=Q?PieceOfFurniture.SHOW_BACK_FACE:0;var bl=arguments;var X=null;var av=null;F=b.call(this,aa,aA,k,aY,X,aZ,az,U,ae,O,K,g,aS,H,z,ak,a4,aL,aH,v,ar,an,C,a8,bo,aW,q,p,f,aE,av)||this;if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}F.lightSources=aP!=null&&aP.length>0?aP.slice(0):a.EMPTY_LIGHT_SOURCES_$LI$();F.lightSourceMaterialNames=bf!=null&&bf.length>0?bf.slice(0):a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$();if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}}else{if(((typeof aa==="string")||aa===null)&&((typeof aA==="string")||aA===null)&&((typeof k==="string")||k===null)&&((typeof aY==="string")||aY===null)&&((S!=null&&S instanceof Array&&(S.length==0||S[0]==null||(typeof S[0]==="string")))||S===null)&&((typeof aN==="number")||aN===null)&&((typeof bd==="number")||bd===null)&&((aU!=null&&(aU.constructor!=null&&aU.constructor.__interfaces!=null&&aU.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aU===null)&&((m!=null&&(m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((aK!=null&&(aK.constructor!=null&&aK.constructor.__interfaces!=null&&aK.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aK===null)&&((typeof L==="number")||L===null)&&((typeof aX==="number")||aX===null)&&((typeof bb==="number")||bb===null)&&((typeof E==="number")||E===null)&&((typeof l==="number")||l===null)&&((typeof ba==="boolean")||ba===null)&&((j!=null&&j instanceof Array&&(j.length==0||j[0]==null||(j[0]!=null&&j[0] instanceof LightSource)))||j===null)&&((typeof bp==="string")||bp===null)&&((aJ!=null&&aJ instanceof Array&&(aJ.length==0||aJ[0]==null||aJ[0] instanceof Array))||aJ===null)&&((typeof aq==="boolean")||aq===null)&&((typeof aC==="number")||aC===null)&&((typeof ag==="string")||ag===null)&&((typeof bc==="boolean")||bc===null)&&((typeof R==="boolean")||R===null)&&((typeof a7==="boolean")||a7===null)&&((typeof ax==="boolean")||ax===null)&&((x!=null&&x instanceof Big)||x===null)&&((a3!=null&&a3 instanceof Big)||a3===null)&&((typeof bm==="string")||bm===null)&&e===undefined&&t===undefined&&ai===undefined&&ad===undefined){var am=arguments;var aV=am[4];var aw=am[5];var T=am[6];var ac=am[7];var N=am[8];var I=am[9];var d=am[10];var aR=am[11];var G=am[12];var y=am[13];var aj=am[14];var a2=am[15];var aO=am[16];var ah=am[17];var aF=am[18];var Q=am[19];var ap=am[20];var Z=am[21];var B=am[22];var a6=am[23];var bk=am[24];var ab=am[25];var o=am[26];var n=am[27];var c=am[28];var bj=arguments;var aB=null;var bi=arguments;var be=null;var u=Q?PieceOfFurniture.SHOW_BACK_FACE:0;var bg=arguments;var V=null;var au=null;F=b.call(this,aa,aA,k,aY,V,aV,aw,T,ac,N,I,d,aR,G,y,aj,a2,ah,aF,u,ap,Z,B,a6,bk,ab,o,n,c,aB,au)||this;if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}F.lightSources=aO!=null&&aO.length>0?aO.slice(0):a.EMPTY_LIGHT_SOURCES_$LI$();F.lightSourceMaterialNames=be!=null&&be.length>0?be.slice(0):a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$();if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}if(F.lightSources===undefined){F.lightSources=null}if(F.lightSourceMaterialNames===undefined){F.lightSourceMaterialNames=null}}else{throw new Error("invalid overload")}}}}return F}a.EMPTY_LIGHT_SOURCES_$LI$=function(){if(a.EMPTY_LIGHT_SOURCES==null){a.EMPTY_LIGHT_SOURCES=[]}return a.EMPTY_LIGHT_SOURCES};a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$=function(){if(a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES==null){a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES=[]}return a.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES};a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};a.prototype.getLightSourceMaterialNames=function(){if(this.lightSourceMaterialNames.length===0){return this.lightSourceMaterialNames}else{return this.lightSourceMaterialNames.slice(0)}};return a}(CatalogPieceOfFurniture));CatalogLight.__class="com.eteks.sweethome3d.model.CatalogLight";CatalogLight.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Light"];var HomeShelfUnit=(function(a){__extends(b,a);function b(c,d,g){var k=this;if(((typeof c==="string")||c===null)&&((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0))||d===null)&&((g!=null&&g instanceof Array&&(g.length==0||g[0]==null||(typeof g[0]==="string")))||g===null)){var l=arguments;k=a.call(this,c,d,g)||this;if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}k.shelfElevations=d.getShelfElevations();k.shelfBoxes=d.getShelfBoxes()}else{if(((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0))||c===null)&&((d!=null&&d instanceof Array&&(d.length==0||d[0]==null||(typeof d[0]==="string")))||d===null)&&g===undefined){var l=arguments;var j=l[0];var h=l[1];var q=arguments;var n=HomeObject.createId("shelfUnit");k=a.call(this,n,j,h)||this;if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}k.shelfElevations=j.getShelfElevations();k.shelfBoxes=j.getShelfBoxes();if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}}else{if(((typeof c==="string")||c===null)&&((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0))||d===null)&&g===undefined){var l=arguments;var r=arguments;var f=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();k=a.call(this,c,d,f)||this;if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}k.shelfElevations=d.getShelfElevations();k.shelfBoxes=d.getShelfBoxes();if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}}else{if(((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0))||c===null)&&d===undefined&&g===undefined){var l=arguments;var i=l[0];var p=arguments;var e=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();var o=arguments;var m=HomeObject.createId("shelfUnit");k=a.call(this,m,i,e)||this;if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}k.shelfElevations=i.getShelfElevations();k.shelfBoxes=i.getShelfBoxes();if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}if(k.shelfElevations===undefined){k.shelfElevations=null}if(k.shelfBoxes===undefined){k.shelfBoxes=null}}else{throw new Error("invalid overload")}}}}return k}b.prototype.getShelfElevations=function(){return this.shelfElevations!=null?this.shelfElevations.slice(0):null};b.prototype.setShelfElevations=function(d){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.shelfElevations)){var c=this.shelfElevations.length===0?this.shelfElevations:this.shelfElevations.slice(0);this.shelfElevations=d.length===0?d:d.slice(0);this.firePropertyChange("SHELF_ELEVATIONS",c,d)}};b.prototype.getShelfBoxes=function(){return this.shelfBoxes.slice(0)};b.prototype.setShelfBoxes=function(c){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(c,this.shelfBoxes)){var d=this.shelfBoxes.length===0?this.shelfBoxes:this.shelfBoxes.slice(0);this.shelfBoxes=c.length===0?c:c.slice(0);this.firePropertyChange("SHELF_BOXES",d,c)}};b.prototype.clone=function(){var c=this;return(function(e){if(a.prototype.clone!=undefined){return a.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return b}(HomePieceOfFurniture));HomeShelfUnit.__class="com.eteks.sweethome3d.model.HomeShelfUnit";HomeShelfUnit.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.ShelfUnit","com.eteks.sweethome3d.model.Elevatable"];HomeShelfUnit.__transients=["shapeCache","propertyChangeSupport"];var HomeLight=(function(b){__extends(a,b);function a(c,h,g){var i=this;if(((typeof c==="string")||c===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||h===null)&&((g!=null&&g instanceof Array&&(g.length==0||g[0]==null||(typeof g[0]==="string")))||g===null)){var j=arguments;i=b.call(this,c,h,g)||this;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}i.lightSources=h.getLightSources();i.lightSourceMaterialNames=h.getLightSourceMaterialNames();i.power=0.5}else{if(((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||c===null)&&((h!=null&&h instanceof Array&&(h.length==0||h[0]==null||(typeof h[0]==="string")))||h===null)&&g===undefined){var j=arguments;var r=j[0];var f=j[1];var p=arguments;var n=HomeObject.createId("light");i=b.call(this,n,r,f)||this;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}i.lightSources=r.getLightSources();i.lightSourceMaterialNames=r.getLightSourceMaterialNames();i.power=0.5;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}}else{if(((typeof c==="string")||c===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||h===null)&&g===undefined){var j=arguments;var o=arguments;var e=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();i=b.call(this,c,h,e)||this;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}i.lightSources=h.getLightSources();i.lightSourceMaterialNames=h.getLightSourceMaterialNames();i.power=0.5;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}}else{if(((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||c===null)&&h===undefined&&g===undefined){var j=arguments;var q=j[0];var m=arguments;var d=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();var l=arguments;var k=HomeObject.createId("light");i=b.call(this,k,q,d)||this;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}i.lightSources=q.getLightSources();i.lightSourceMaterialNames=q.getLightSourceMaterialNames();i.power=0.5;if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}if(i.lightSources===undefined){i.lightSources=null}if(i.lightSourceMaterialNames===undefined){i.lightSourceMaterialNames=null}if(i.power===undefined){i.power=0}}else{throw new Error("invalid overload")}}}}return i}a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};a.prototype.setLightSources=function(c){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(c,this.lightSources)){var d=this.lightSources.length===0?this.lightSources:this.lightSources.slice(0);this.lightSources=c.length===0?c:c.slice(0);this.firePropertyChange("LIGHT_SOURCES",d,c)}};a.prototype.getLightSourceMaterialNames=function(){if(this.lightSourceMaterialNames.length===0){return this.lightSourceMaterialNames}else{return this.lightSourceMaterialNames.slice(0)}};a.prototype.setLightSourceMaterialNames=function(d){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.lightSourceMaterialNames)){var c=this.lightSourceMaterialNames.length===0?this.lightSourceMaterialNames:this.lightSourceMaterialNames.slice(0);this.lightSourceMaterialNames=d.length===0?d:d.slice(0);this.firePropertyChange("LIGHT_SOURCE_MATERIAL_NAMES",c,d)}};a.prototype.getPower=function(){return this.power};a.prototype.setPower=function(d){if(d!==this.power){var c=this.power;this.power=d;this.firePropertyChange("POWER",c,d)}};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomePieceOfFurniture));HomeLight.__class="com.eteks.sweethome3d.model.HomeLight";HomeLight.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","com.eteks.sweethome3d.model.Light"];HomeLight.__transients=["shapeCache","propertyChangeSupport"];var HomeDoorOrWindow=(function(b){__extends(a,b);function a(d,r,h){var n=this;if(((typeof d==="string")||d===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||r===null)&&((h!=null&&h instanceof Array&&(h.length==0||h[0]==null||(typeof h[0]==="string")))||h===null)){var p=arguments;n=b.call(this,d,r,h)||this;if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}n.wallThickness=r.getWallThickness();n.wallDistance=r.getWallDistance();n.wallWidth=1;n.wallLeft=0;n.wallHeight=1;n.wallTop=0;n.wallCutOutOnBothSides=r.isWallCutOutOnBothSides();n.widthDepthDeformable=r.isWidthDepthDeformable();n.sashes=r.getSashes();n.cutOutShape=r.getCutOutShape()}else{if(((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||d===null)&&((r!=null&&r instanceof Array&&(r.length==0||r[0]==null||(typeof r[0]==="string")))||r===null)&&h===undefined){var p=arguments;var e=p[0];var i=p[1];var o=arguments;var m=HomeObject.createId("doorOrWindow");n=b.call(this,m,e,i)||this;if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}n.wallThickness=e.getWallThickness();n.wallDistance=e.getWallDistance();n.wallWidth=1;n.wallLeft=0;n.wallHeight=1;n.wallTop=0;n.wallCutOutOnBothSides=e.isWallCutOutOnBothSides();n.widthDepthDeformable=e.isWidthDepthDeformable();n.sashes=e.getSashes();n.cutOutShape=e.getCutOutShape();if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}}else{if(((typeof d==="string")||d===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||r===null)&&h===undefined){var p=arguments;var l=arguments;var g=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();n=b.call(this,d,r,g)||this;if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}n.wallThickness=r.getWallThickness();n.wallDistance=r.getWallDistance();n.wallWidth=1;n.wallLeft=0;n.wallHeight=1;n.wallTop=0;n.wallCutOutOnBothSides=r.isWallCutOutOnBothSides();n.widthDepthDeformable=r.isWidthDepthDeformable();n.sashes=r.getSashes();n.cutOutShape=r.getCutOutShape();if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}}else{if(((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||d===null)&&r===undefined&&h===undefined){var p=arguments;var c=p[0];var j=arguments;var f=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();var k=arguments;var q=HomeObject.createId("doorOrWindow");n=b.call(this,q,c,f)||this;if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}n.wallThickness=c.getWallThickness();n.wallDistance=c.getWallDistance();n.wallWidth=1;n.wallLeft=0;n.wallHeight=1;n.wallTop=0;n.wallCutOutOnBothSides=c.isWallCutOutOnBothSides();n.widthDepthDeformable=c.isWidthDepthDeformable();n.sashes=c.getSashes();n.cutOutShape=c.getCutOutShape();if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}if(n.wallThickness===undefined){n.wallThickness=0}if(n.wallDistance===undefined){n.wallDistance=0}if(n.wallWidth===undefined){n.wallWidth=0}if(n.wallLeft===undefined){n.wallLeft=0}if(n.wallHeight===undefined){n.wallHeight=0}if(n.wallTop===undefined){n.wallTop=0}if(n.wallCutOutOnBothSides===undefined){n.wallCutOutOnBothSides=false}if(n.widthDepthDeformable===undefined){n.widthDepthDeformable=false}if(n.sashes===undefined){n.sashes=null}if(n.cutOutShape===undefined){n.cutOutShape=null}if(n.boundToWall===undefined){n.boundToWall=false}}else{throw new Error("invalid overload")}}}}return n}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.setWallThickness=function(c){if(c!==this.wallThickness){var d=this.wallThickness;this.wallThickness=c;this.firePropertyChange("WALL_THICKNESS",d,c)}};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.setWallDistance=function(c){if(c!==this.wallDistance){var d=this.wallDistance;this.wallDistance=c;this.firePropertyChange("WALL_DISTANCE",d,c)}};a.prototype.getWallWidth=function(){return this.wallWidth};a.prototype.setWallWidth=function(d){if(d!==this.wallWidth){var c=this.wallWidth;this.wallWidth=d;this.firePropertyChange("WALL_WIDTH",c,d)}};a.prototype.getWallLeft=function(){return this.wallLeft};a.prototype.setWallLeft=function(d){if(d!==this.wallLeft){var c=this.wallLeft;this.wallLeft=d;this.firePropertyChange("WALL_LEFT",c,d)}};a.prototype.getWallHeight=function(){return this.wallHeight};a.prototype.setWallHeight=function(c){if(c!==this.wallHeight){var d=this.wallHeight;this.wallHeight=c;this.firePropertyChange("WALL_HEIGHT",d,c)}};a.prototype.getWallTop=function(){return this.wallTop};a.prototype.setWallTop=function(d){if(d!==this.wallTop){var c=this.wallTop;this.wallTop=d;this.firePropertyChange("WALL_TOP",c,d)}};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.setSashes=function(d){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.sashes)){var c=this.sashes.length===0?this.sashes:this.sashes.slice(0);this.sashes=d.length===0?d:d.slice(0);this.firePropertyChange("SASHES",c,d)}};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.setCutOutShape=function(c){if(c!==this.cutOutShape&&(c==null||!(c===this.cutOutShape))){var d=this.cutOutShape;this.cutOutShape=c;this.firePropertyChange("CUT_OUT_SHAPE",d,c)}};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.setWallCutOutOnBothSides=function(c){if(c!==this.wallCutOutOnBothSides){this.wallCutOutOnBothSides=c;this.firePropertyChange("WALL_CUT_OUT_ON_BOTH_SIDES",!c,c)}};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.setWidthDepthDeformable=function(c){if(c!==this.widthDepthDeformable){this.widthDepthDeformable=c;this.firePropertyChange("WIDTH_DEPTH_DEFORMABLE",!c,c)}};a.prototype.isBoundToWall=function(){return this.boundToWall};a.prototype.setBoundToWall=function(c){if(c!==this.boundToWall){this.boundToWall=c;this.firePropertyChange("BOUND_TO_WALL",!c,c)}};a.prototype.setX=function(c){if(this.getX()!==c){this.boundToWall=false}b.prototype.setX.call(this,c)};a.prototype.setY=function(c){if(this.getY()!==c){this.boundToWall=false}b.prototype.setY.call(this,c)};a.prototype.setAngle=function(c){if(this.getAngle()!==c){this.boundToWall=false}b.prototype.setAngle.call(this,c)};a.prototype.setDepth=function(c){if(this.getDepth()!==c){this.boundToWall=false}b.prototype.setDepth.call(this,c)};a.prototype.isDoorOrWindow=function(){return true};a.prototype.duplicate=function(){var c=b.prototype.duplicate.call(this);c.boundToWall=false;return c};return a}(HomePieceOfFurniture));HomeDoorOrWindow.__class="com.eteks.sweethome3d.model.HomeDoorOrWindow";HomeDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"];HomeDoorOrWindow.__transients=["shapeCache","propertyChangeSupport"];var HomeFurnitureGroup=(function(b){__extends(a,b);function a(v,q,z,x,I){var w=this;if(((typeof v==="string")||v===null)&&((q!=null&&(q instanceof Array))||q===null)&&((typeof z==="number")||z===null)&&((typeof x==="boolean")||x===null)&&((typeof I==="string")||I===null)){var i=arguments;w=b.call(this,v,q[0])||this;if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}w.furniture=q.slice(0);w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var f=false;for(var j=0;j<q.length;j++){var g=q[j];h=g.isMovable()&&h;f=g.isVisible()||f}w.setName(I);w.setCatalogId(null);w.setDescription(null);w.setInformation(null);w.setCreator(null);w.setNameVisible(false);w.setNameXOffset(0);w.setNameYOffset(0);w.setNameAngle(0);w.setNameStyle(null);b.prototype.setIcon.call(w,null);b.prototype.setPlanIcon.call(w,null);b.prototype.setModel.call(w,null);b.prototype.setMovable.call(w,h);b.prototype.setAngle.call(w,z);b.prototype.setModelMirrored.call(w,x);w.setVisible(f);w.updateLocationAndSize(q,z,true);w.addFurnitureListener()}else{if(((v!=null&&(v instanceof Array))||v===null)&&((typeof q==="number")||q===null)&&((typeof z==="boolean")||z===null)&&((typeof x==="string")||x===null)&&I===undefined){var i=arguments;var r=i[0];var H=i[1];var e=i[2];var u=i[3];var G=arguments;var o=HomeObject.createId("furnitureGroup");w=b.call(this,o,r[0])||this;if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}w.furniture=r.slice(0);w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var f=false;for(var j=0;j<r.length;j++){var g=r[j];h=g.isMovable()&&h;f=g.isVisible()||f}w.setName(u);w.setCatalogId(null);w.setDescription(null);w.setInformation(null);w.setCreator(null);w.setNameVisible(false);w.setNameXOffset(0);w.setNameYOffset(0);w.setNameAngle(0);w.setNameStyle(null);b.prototype.setIcon.call(w,null);b.prototype.setPlanIcon.call(w,null);b.prototype.setModel.call(w,null);b.prototype.setMovable.call(w,h);b.prototype.setAngle.call(w,H);b.prototype.setModelMirrored.call(w,e);w.setVisible(f);w.updateLocationAndSize(r,H,true);w.addFurnitureListener();if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}}else{if(((v!=null&&(v instanceof Array))||v===null)&&((q!=null&&q instanceof HomePieceOfFurniture)||q===null)&&((typeof z==="string")||z===null)&&x===undefined&&I===undefined){var i=arguments;var n=i[0];var t=i[1];var s=i[2];var E=arguments;var F=t.getAngle();var d=false;var C=arguments;var m=HomeObject.createId("furnitureGroup");w=b.call(this,m,n[0])||this;if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}w.furniture=n.slice(0);w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var f=false;for(var j=0;j<n.length;j++){var g=n[j];h=g.isMovable()&&h;f=g.isVisible()||f}w.setName(s);w.setCatalogId(null);w.setDescription(null);w.setInformation(null);w.setCreator(null);w.setNameVisible(false);w.setNameXOffset(0);w.setNameYOffset(0);w.setNameAngle(0);w.setNameStyle(null);b.prototype.setIcon.call(w,null);b.prototype.setPlanIcon.call(w,null);b.prototype.setModel.call(w,null);b.prototype.setMovable.call(w,h);b.prototype.setAngle.call(w,F);b.prototype.setModelMirrored.call(w,d);w.setVisible(f);w.updateLocationAndSize(n,F,true);w.addFurnitureListener();if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}}else{if(((v!=null&&(v instanceof Array))||v===null)&&((typeof q==="string")||q===null)&&z===undefined&&x===undefined&&I===undefined){var i=arguments;var l=i[0];var p=i[1];var B=arguments;var t=B[0][0];var A=arguments;var D=t.getAngle();var c=false;var y=arguments;var k=HomeObject.createId("furnitureGroup");w=b.call(this,k,l[0])||this;if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}w.furniture=l.slice(0);w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var f=false;for(var j=0;j<l.length;j++){var g=l[j];h=g.isMovable()&&h;f=g.isVisible()||f}w.setName(p);w.setCatalogId(null);w.setDescription(null);w.setInformation(null);w.setCreator(null);w.setNameVisible(false);w.setNameXOffset(0);w.setNameYOffset(0);w.setNameAngle(0);w.setNameStyle(null);b.prototype.setIcon.call(w,null);b.prototype.setPlanIcon.call(w,null);b.prototype.setModel.call(w,null);b.prototype.setMovable.call(w,h);b.prototype.setAngle.call(w,D);b.prototype.setModelMirrored.call(w,c);w.setVisible(f);w.updateLocationAndSize(l,D,true);w.addFurnitureListener();if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}if(w.furniture===undefined){w.furniture=null}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(w.fixedWidth===undefined){w.fixedWidth=0}if(w.fixedDepth===undefined){w.fixedDepth=0}if(w.fixedHeight===undefined){w.fixedHeight=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){w.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(w.furnitureListener===undefined){w.furnitureListener=null}}else{throw new Error("invalid overload")}}}}return w}a.prototype.updateLocationAndSize=function(j,s,p){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=j[0].getCurrency();for(var f=0;f<j.length;f++){var e=j[f];this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=e.isResizable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=e.isDeformable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=e.isTexturable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=e.isDoorOrWindow()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow;if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency!=null){if(e.getCurrency()==null||!(e.getCurrency()===this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency)){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}}}var m=3.4028235e+38;if(p){var u=null;for(var f=0;f<j.length;f++){var e=j[f];var c=e.getLevel();if(c!=null&&(u==null||c.getElevation()<u.getElevation())){u=c}}for(var f=0;f<j.length;f++){var e=j[f];if(e.getLevel()!=null){m=Math.min(m,e.getGroundElevation()-u.getElevation());e.setElevation(e.getGroundElevation()-u.getElevation());e.setLevel(null)}else{m=Math.min(m,e.getElevation())}}}else{for(var f=0;f<j.length;f++){var e=j[f];m=Math.min(m,e.getElevation())}}var k=0;var o=-1;for(var f=0;f<j.length;f++){var e=j[f];k=Math.max(k,e.getElevation()+e.getHeightInPlan());if(e.getDropOnTopElevation()>=0){o=Math.max(o,e.getElevation()+e.getHeightInPlan()*e.getDropOnTopElevation())}}k-=m;o-=m;var n=java.awt.geom.AffineTransform.getRotateInstance(-s);var h=null;var g=this.getFurnitureWithoutGroups(j);for(var f=0;f<g.length;f++){var e=g[f];var d=new java.awt.geom.GeneralPath();var q=e.getPoints();d.moveTo(q[0][0],q[0][1]);for(var r=1;r<q.length;r++){d.lineTo(q[r][0],q[r][1])}d.closePath();if(h==null){h=d.createTransformedShape(n).getBounds2D()}else{h.add(d.createTransformedShape(n).getBounds2D())}}var t=new java.awt.geom.Point2D.Float(h.getCenterX(),h.getCenterY());n.setToRotation(s);n.transform(t,t);if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){var l=h.getWidth();b.prototype.setWidth.call(this,l);b.prototype.setWidthInPlan.call(this,l);var v=h.getHeight();b.prototype.setDepth.call(this,v);b.prototype.setDepthInPlan.call(this,v);b.prototype.setHeight.call(this,k);b.prototype.setHeightInPlan.call(this,k)}else{this.fixedWidth=h.getWidth();this.fixedDepth=h.getHeight();this.fixedHeight=k}this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=o/k;b.prototype.setX.call(this,t.getX());b.prototype.setY.call(this,t.getY());b.prototype.setElevation.call(this,m)};a.prototype.addFurnitureListener=function(){this.furnitureListener=new a.LocationAndSizeChangeListener(this);for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.addPropertyChangeListener(this.furnitureListener)}};a.prototype.getFurnitureWithoutGroups=function(f){var e=([]);for(var c=0;c<f.length;c++){var d=f[c];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,this.getFurnitureWithoutGroups(d.getFurniture()))}else{(e.push(d)>0)}}return e};a.prototype.getAllFurniture=function(){var e=(this.furniture.slice(0));var f=this.getFurniture();for(var c=0;c<f.length;c++){var d=f[c];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,d.getAllFurniture())}}return e};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture=function(d,c){this.furniture=(this.furniture.slice(0));d.setLevel(this.getLevel());this.furniture.splice(c,0,d);d.addPropertyChangeListener(this.furnitureListener);this.updateLocationAndSize(this.furniture,this.getAngle(),false)};a.prototype.deletePieceOfFurniture=function(d){var c=this.furniture.indexOf(d);if(c!==-1){if(this.furniture.length>1){d.setLevel(null);d.removePropertyChangeListener(this.furnitureListener);this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1)[0];this.updateLocationAndSize(this.furniture,this.getAngle(),false)}else{throw new IllegalStateException("Group can't be empty")}}};a.prototype.getCatalogId=function(){return b.prototype.getCatalogId.call(this)};a.prototype.getInformation=function(){return b.prototype.getInformation.call(this)};a.prototype.isMovable=function(){return b.prototype.isMovable.call(this)};a.prototype.setMovable=function(c){b.prototype.setMovable.call(this,c)};a.prototype.isDoorOrWindow=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow};a.prototype.isResizable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable};a.prototype.isDeformable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable};a.prototype.isTexturable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable};a.prototype.isHorizontallyRotatable=function(){return false};a.prototype.getWidth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedWidth}else{return b.prototype.getWidth.call(this)}};a.prototype.getWidthInPlan=function(){return this.getWidth()};a.prototype.getDepth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedDepth}else{return b.prototype.getDepth.call(this)}};a.prototype.getDepthInPlan=function(){return this.getDepth()};a.prototype.getHeight=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedHeight}else{return b.prototype.getHeight.call(this)}};a.prototype.getHeightInPlan=function(){return this.getHeight()};a.prototype.isHorizontallyRotated=function(){if(b.prototype.isHorizontallyRotated.call(this)){return true}else{var e=this.getFurniture();for(var d=0;d<e.length;d++){var c=e[d];if(c.isHorizontallyRotated()){return true}}return false}};a.prototype.getDropOnTopElevation=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation};a.prototype.getIcon=function(){return null};a.prototype.setIcon=function(c){throw new IllegalStateException("Can't set icon of a group")};a.prototype.getPlanIcon=function(){return null};a.prototype.setPlanIcon=function(c){throw new IllegalStateException("Can't set plan icon of a group")};a.prototype.getModel=function(){return null};a.prototype.setModel=function(c){throw new IllegalStateException("Can't set model of a group")};a.prototype.getModelSize=function(){return null};a.prototype.setModelSize=function(c){throw new IllegalStateException("Can't set model size of a group")};a.prototype.getModelRotation=function(){return PieceOfFurniture.IDENTITY_ROTATION_$LI$()};a.prototype.setModelRotation=function(c){throw new IllegalStateException("Can't set model rotation of a group")};a.prototype.isModelCenteredAtOrigin=function(){return true};a.prototype.getModelFlags=function(){return 0};a.prototype.setModelFlags=function(c){throw new IllegalStateException("Can't set model flags attribute of a group")};a.prototype.isBackFaceShown=function(){return false};a.prototype.setBackFaceShown=function(c){throw new IllegalStateException("Can't set back face shown attribute of a group")};a.prototype.getModelTransformations=function(){return null};a.prototype.setModelTransformations=function(e){if(this.isDeformable()){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setModelTransformations(e)}}};a.prototype.getPitch=function(){return 0};a.prototype.getRoll=function(){return 0};a.prototype.getStaircaseCutOutShape=function(){return null};a.prototype.setStaircaseCutOutShape=function(c){throw new IllegalStateException("Can't set staircase cut out shape of a group")};a.prototype.getCreator=function(){return b.prototype.getCreator.call(this)};a.prototype.getPrice=function(){var e=null;for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];if(d.getPrice()!=null){if(e==null){e=d.getPrice()}else{e=e.plus(d.getPrice())}}}if(e==null){return b.prototype.getPrice.call(this)}else{return e}};a.prototype.setPrice=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];if(d.getPrice()!=null){throw new UnsupportedOperationException("Can't change the price of a group containing pieces with a price")}}b.prototype.setPrice.call(this,e)};a.prototype.getValueAddedTaxPercentage=function(){var e=this.furniture[0].getValueAddedTaxPercentage();if(e!=null){for(var d=0;d<this.furniture.length;d++){var f=this.furniture[d];var c=f.getValueAddedTaxPercentage();if(c==null||!((e)!=null?c.eq(e):(c===(e)))){return null}}}return e};a.prototype.getCurrency=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency};a.prototype.getValueAddedTax=function(){var c=null;for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];var f=e.getValueAddedTax();if(f!=null){if(c==null){c=f}else{c=c.plus(f)}}}return c};a.prototype.getPriceValueAddedTaxIncluded=function(){var c=null;for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];if(e.getPrice()!=null){if(c==null){c=e.getPriceValueAddedTaxIncluded()}else{c=c.plus(e.getPriceValueAddedTaxIncluded())}}}return c};a.prototype.getColor=function(){return null};a.prototype.setColor=function(c){if(this.isTexturable()){for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];e.setColor(c)}}};a.prototype.getTexture=function(){return null};a.prototype.setTexture=function(e){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setTexture(e)}}};a.prototype.getModelMaterials=function(){return null};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setModelMaterials(d)}}};a.prototype.getShininess=function(){return null};a.prototype.setShininess=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setShininess(d)}}};a.prototype.setAngle=function(j){if(j!==this.getAngle()){var c=j-this.getAngle();var f=Math.cos(c);var g=Math.sin(c);for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];e.removePropertyChangeListener(this.furnitureListener);e.setAngle(e.getAngle()+c);var i=this.getX()+((e.getX()-this.getX())*f-(e.getY()-this.getY())*g);var h=this.getY()+((e.getX()-this.getX())*g+(e.getY()-this.getY())*f);e.setX(i);e.setY(h);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setAngle.call(this,j)}};a.prototype.setX=function(c){if(c!==this.getX()){var d=c-this.getX();for(var e=0;e<this.furniture.length;e++){var f=this.furniture[e];f.removePropertyChangeListener(this.furnitureListener);f.setX(f.getX()+d);f.addPropertyChangeListener(this.furnitureListener)}b.prototype.setX.call(this,c)}};a.prototype.setY=function(f){if(f!==this.getY()){var c=f-this.getY();for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];e.removePropertyChangeListener(this.furnitureListener);e.setY(e.getY()+c);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setY.call(this,f)}};a.prototype.setWidth=function(d){if(d!==this.getWidth()){var j=d/this.getWidth();var h=this.getAngle();for(var i=0;i<this.furniture.length;i++){var n=this.furniture[i];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(j-1)*Math.abs(Math.cos(g)));n.setDepth(e+e*(j-1)*Math.abs(Math.sin(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);c=this.getX()+(c-this.getX())*j;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,d)}};a.prototype.setDepth=function(i){if(i!==this.getDepth()){var d=i/this.getDepth();var h=this.getAngle();for(var j=0;j<this.furniture.length;j++){var n=this.furniture[j];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(d-1)*Math.abs(Math.sin(g)));n.setDepth(e+e*(d-1)*Math.abs(Math.cos(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);m=this.getY()+(m-this.getY())*d;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setDepth.call(this,i)}};a.prototype.setHeight=function(c){if(c!==this.getHeight()){var e=c/this.getHeight();for(var d=0;d<this.furniture.length;d++){var f=this.furniture[d];f.removePropertyChangeListener(this.furnitureListener);f.setHeight(f.getHeight()*e);f.setElevation(this.getElevation()+(f.getElevation()-this.getElevation())*e);f.addPropertyChangeListener(this.furnitureListener)}b.prototype.setHeight.call(this,c)}};a.prototype.scale=function(j){var i=this.getAngle();for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];e.removePropertyChangeListener(this.furnitureListener);e.setWidth(e.getWidth()*j);e.setDepth(e.getDepth()*j);e.setHeight(e.getHeight()*j);var c=Math.cos(i);var f=Math.sin(i);var h=this.getX()+((e.getX()-this.getX())*c+(e.getY()-this.getY())*f);var g=this.getY()+((e.getX()-this.getX())*-f+(e.getY()-this.getY())*c);h=this.getX()+(h-this.getX())*j;g=this.getY()+(g-this.getY())*j;e.setX(this.getX()+((h-this.getX())*c-(g-this.getY())*f));e.setY(this.getY()+((h-this.getX())*f+(g-this.getY())*c));e.setElevation(this.getElevation()+(e.getElevation()-this.getElevation())*j);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,this.getWidth()*j);b.prototype.setDepth.call(this,this.getDepth()*j);b.prototype.setHeight.call(this,this.getHeight()*j)};a.prototype.setElevation=function(e){if(e!==this.getElevation()){var f=e-this.getElevation();for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.removePropertyChangeListener(this.furnitureListener);d.setElevation(d.getElevation()+f);d.addPropertyChangeListener(this.furnitureListener)}b.prototype.setElevation.call(this,e)}};a.prototype.setModelMirrored=function(c){if(c!==this.isModelMirrored()){var j=this.getAngle();for(var e=0;e<this.furniture.length;e++){var f=this.furniture[e];f.removePropertyChangeListener(this.furnitureListener);f.setModelMirrored(!f.isModelMirrored());var d=Math.cos(j);var g=Math.sin(j);var i=this.getX()+((f.getX()-this.getX())*d+(f.getY()-this.getY())*g);var h=this.getY()+((f.getX()-this.getX())*-g+(f.getY()-this.getY())*d);i=this.getX()-(i-this.getX());f.setX(this.getX()+((i-this.getX())*d-(h-this.getY())*g));f.setY(this.getY()+((i-this.getX())*g+(h-this.getY())*d));f.addPropertyChangeListener(this.furnitureListener)}b.prototype.setModelMirrored.call(this,c)}};a.prototype.setVisible=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setVisible(e)}b.prototype.setVisible.call(this,e)};a.prototype.setLevel=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setLevel(e)}b.prototype.setLevel.call(this,e)};a.prototype.intersectsRectangle=function(e,h,d,g){for(var c=0;c<this.furniture.length;c++){var f=this.furniture[c];if(f.intersectsRectangle(e,h,d,g)){return true}}return false};a.prototype.containsPoint=function(c,g,f){for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];if(e.containsPoint(c,g,f)){return true}}return false};a.prototype.duplicate=function(){var g=b.prototype.duplicate.call(this);var c=([]);for(var d=0;d<g.furniture.length;d++){var f=g.furniture[d];f.removePropertyChangeListener(g.furnitureListener);var e=f.duplicate();(c.push(e)>0);e.addPropertyChangeListener(g.furnitureListener)}g.furniture=c.slice(0);return g};a.prototype.clone=function(){var f=this;var e=(function(i){if(b.prototype.clone!=undefined){return b.prototype.clone.call(f)}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(this);e.furniture=([]);for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];(e.furniture.push((function(i){if(i.clone!=undefined){return i.clone()}else{var h=Object.create(i);for(var g in i){if(i.hasOwnProperty(g)){h[g]=i[g]}}return h}})(d))>0)}e.furniture=e.furniture.slice(0);e.addFurnitureListener();return e};return a}(HomePieceOfFurniture));HomeFurnitureGroup.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup";HomeFurnitureGroup.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"];(function(a){var b=(function(){function c(d){if(this.group===undefined){this.group=null}this.group=(d)}c.prototype.propertyChange=function(d){var e=this.group;if(e==null){d.getSource().removePropertyChangeListener(this)}else{if(("X"===d.getPropertyName())||("Y"===d.getPropertyName())||("ELEVATION"===d.getPropertyName())||("ANGLE"===d.getPropertyName())||("WIDTH_IN_PLAN"===d.getPropertyName())||("DEPTH_IN_PLAN"===d.getPropertyName())||("HEIGHT_IN_PLAN"===d.getPropertyName())){e.updateLocationAndSize(e.getFurniture(),e.getAngle(),false)}}};return c}());a.LocationAndSizeChangeListener=b;b.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup.LocationAndSizeChangeListener"})(HomeFurnitureGroup||(HomeFurnitureGroup={}));HomeFurnitureGroup.__transients=["furnitureListener","shapeCache","propertyChangeSupport"];var ObserverCamera=(function(b){__extends(a,b);function a(c,q,o,m,h,d,j){var l=this;if(((typeof c==="string")||c===null)&&((typeof q==="number")||q===null)&&((typeof o==="number")||o===null)&&((typeof m==="number")||m===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof j==="number")||j===null)){var k=arguments;l=b.call(this,c,q,o,m,h,d,j)||this;if(l.fixedSize===undefined){l.fixedSize=false}if(l.shapeCache===undefined){l.shapeCache=null}if(l.rectangleShapeCache===undefined){l.rectangleShapeCache=null}l.planScale=1}else{if(((typeof c==="number")||c===null)&&((typeof q==="number")||q===null)&&((typeof o==="number")||o===null)&&((typeof m==="number")||m===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&j===undefined){var k=arguments;var n=k[0];var r=k[1];var f=k[2];var p=k[3];var g=k[4];var s=k[5];var e=arguments;var i=HomeObject.createId("observerCamera");l=b.call(this,i,n,r,f,p,g,s)||this;if(l.fixedSize===undefined){l.fixedSize=false}if(l.shapeCache===undefined){l.shapeCache=null}if(l.rectangleShapeCache===undefined){l.rectangleShapeCache=null}l.planScale=1;if(l.fixedSize===undefined){l.fixedSize=false}if(l.shapeCache===undefined){l.shapeCache=null}if(l.rectangleShapeCache===undefined){l.rectangleShapeCache=null}l.planScale=1}else{throw new Error("invalid overload")}}return l}a.prototype.setFixedSize=function(e){if(this.fixedSize!==e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();this.fixedSize=e;this.shapeCache=null;this.rectangleShapeCache=null;this.firePropertyChange("WIDTH",c,this.getWidth());this.firePropertyChange("DEPTH",d,this.getDepth());this.firePropertyChange("HEIGHT",f,this.getHeight())}};a.prototype.isFixedSize=function(){return this.fixedSize};a.prototype.setPlanScale=function(e){if(this.planScale!==e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();this.planScale=e;this.shapeCache=null;this.rectangleShapeCache=null;this.firePropertyChange("WIDTH",c,this.getWidth());this.firePropertyChange("DEPTH",d,this.getDepth());this.firePropertyChange("HEIGHT",f,this.getHeight())}};a.prototype.getPlanScale=function(){return this.planScale};a.prototype.setYaw=function(c){b.prototype.setYaw.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setX=function(c){b.prototype.setX.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setY=function(c){b.prototype.setY.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setZ=function(e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();b.prototype.setZ.call(this,e);this.shapeCache=null;this.rectangleShapeCache=null;this.firePropertyChange("WIDTH",c,this.getWidth());this.firePropertyChange("DEPTH",d,this.getDepth());this.firePropertyChange("HEIGHT",f,this.getHeight())};a.prototype.getWidth=function(){if(this.fixedSize||this.planScale>1){return 46.6*this.planScale}else{var c=this.getZ()*4/14;return Math.min(Math.max(c,20),62.5)*this.planScale}};a.prototype.getDepth=function(){if(this.fixedSize||this.planScale>1){return 18.6*this.planScale}else{var c=this.getZ()*8/70;return Math.min(Math.max(c,8),25)*this.planScale}};a.prototype.getHeight=function(){if(this.fixedSize||this.planScale>1){return 175*this.planScale}else{return this.getZ()*15/14*this.planScale}};a.prototype.getPoints=function(){var e=(function(g){var f=function(j){if(j.length===0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var d=this.getRectangleShape().getPathIterator(null);for(var c=0;c<e.length;c++){d.currentSegment(e[c]);d.next()}return e};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.getShape=function(){if(this.shapeCache==null){if(this.planScale<=1){var c=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}else{this.shapeCache=this.getRectangleShape()}}return this.shapeCache};a.prototype.getRectangleShape=function(){if(this.rectangleShapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var e=c.getPathIterator(d);var f=new java.awt.geom.GeneralPath();f.append(e,false);this.rectangleShapeCache=f}return this.rectangleShapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(Camera));ObserverCamera.__class="com.eteks.sweethome3d.model.ObserverCamera";ObserverCamera.__interfaces=["com.eteks.sweethome3d.model.Selectable"];ObserverCamera.__transients=["planScale","shapeCache","rectangleShapeCache","lens","propertyChangeSupport"];var Home=(function(){function a(k,b){if(((k!=null&&(k instanceof Array))||k===null)&&((typeof b==="number")||b===null)){var i=arguments;if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(k.slice(0));this.walls=([]);this.wallHeight=b;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.furnitureVisiblePropertyNames=([]);for(var j=0;j<this.furnitureVisibleProperties.length;j++){var m=this.furnitureVisibleProperties[j];(this.furnitureVisiblePropertyNames.push(m)>0)}this.init(true);this.addModelListeners()}else{if(((k!=null&&(k instanceof Array))||k===null)&&b===undefined){var i=arguments;var f=arguments;var p=250;if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(k.slice(0));this.walls=([]);this.wallHeight=p;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.furnitureVisiblePropertyNames=([]);for(var j=0;j<this.furnitureVisibleProperties.length;j++){var m=this.furnitureVisibleProperties[j];(this.furnitureVisiblePropertyNames.push(m)>0)}this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{if(((k!=null&&k instanceof a)||k===null)&&b===undefined){var i=arguments;var l=i[0];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.wallHeight=l.getWallHeight();a.copyHomeData(l,this);a.initListenersSupport(this);this.addModelListeners()}else{if(((typeof k==="number")||k===null)&&b===undefined){var i=arguments;var o=i[0];var d=arguments;var h=[];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(h.slice(0));this.walls=([]);this.wallHeight=o;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.furnitureVisiblePropertyNames=([]);for(var j=0;j<this.furnitureVisibleProperties.length;j++){var m=this.furnitureVisibleProperties[j];(this.furnitureVisiblePropertyNames.push(m)>0)}this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{if(k===undefined&&b===undefined){var i=arguments;var e=arguments;var n=250;var c=arguments;var g=[];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(g.slice(0));this.walls=([]);this.wallHeight=n;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.furnitureVisiblePropertyNames=([]);for(var j=0;j<this.furnitureVisibleProperties.length;j++){var m=this.furnitureVisibleProperties[j];(this.furnitureVisiblePropertyNames.push(m)>0)}this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.furnitureAdditionalProperties===undefined){this.furnitureAdditionalProperties=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{throw new Error("invalid overload")}}}}}}a.LEVEL_ELEVATION_COMPARATOR_$LI$=function(){if(a.LEVEL_ELEVATION_COMPARATOR==null){a.LEVEL_ELEVATION_COMPARATOR=function(d,c){var b=(d.getElevation()-c.getElevation());if(b!==0){return b}else{return d.getElevationIndex()-c.getElevationIndex()}}}return a.LEVEL_ELEVATION_COMPARATOR};a.prototype.moveVisualProperty=function(b){var d=this;if(this.visualProperties.hasOwnProperty(b)){var c=(function(e,f){return e[f]===undefined?null:e[f]})(this.visualProperties,b);(this.properties[b]=c!=null?String(c).toString():null);(function(f){var e=d.visualProperties[b];delete d.visualProperties[b];return e})(this.visualProperties)}};a.prototype.init=function(b){this.selectedItems=([]);a.initListenersSupport(this);if(this.furnitureVisibleProperties==null){this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","COLOR","MOVABLE","DOOR_OR_WINDOW","VISIBLE"].slice(0)}this.topCamera=new Camera(a.HOME_TOP_CAMERA_ID,50,1050,1010,Math.PI,Math.PI/4,Math.PI*63/180);this.observerCamera=new ObserverCamera(a.HOME_OBSERVER_CAMERA_ID,50,50,170,7*Math.PI/4,Math.PI/16,Math.PI*63/180);this.storedCameras=[];this.environment=new HomeEnvironment(a.HOME_ENVIRONMENT_ID);this.rooms=([]);this.polylines=([]);this.dimensionLines=([]);this.labels=([]);this.compass=new Compass(a.HOME_COMPASS_ID,-100,50,100);this.levels=([]);this.compass.setVisible(b);this.visualProperties=({});this.properties=({});this.furnitureAdditionalProperties=([]);this.version=a.CURRENT_VERSION};a.initListenersSupport=function(b){b.furnitureChangeSupport=(new CollectionChangeSupport(b));b.selectionListeners=([]);b.levelsChangeSupport=(new CollectionChangeSupport(b));b.wallsChangeSupport=(new CollectionChangeSupport(b));b.roomsChangeSupport=(new CollectionChangeSupport(b));b.polylinesChangeSupport=(new CollectionChangeSupport(b));b.dimensionLinesChangeSupport=(new CollectionChangeSupport(b));b.labelsChangeSupport=(new CollectionChangeSupport(b));b.propertyChangeSupport=new PropertyChangeSupport(b)};a.prototype.addModelListeners=function(){var c=new a.Home$0(this);for(var b=0;b<this.levels.length;b++){var d=this.levels[b];d.addPropertyChangeListener(c)}this.addLevelsListener(function(e){switch((e.getType())){case CollectionEvent.Type.ADD:e.getItem().addPropertyChangeListener(c);break;case CollectionEvent.Type.DELETE:e.getItem().removePropertyChangeListener(c);break}})};a.prototype.isFurnitureSortedPropertyBackwardCompatible=function(b){if(b!=null){switch((b)){case"NAME":case"WIDTH":case"DEPTH":case"HEIGHT":case"MOVABLE":case"DOOR_OR_WINDOW":case"COLOR":case"VISIBLE":case"X":case"Y":case"ELEVATION":case"ANGLE":return true;default:return false}}else{return false}};a.prototype.getGroupFurniture=function(d){var c=([]);var f=d.getFurniture();for(var b=0;b<f.length;b++){var e=f[b];if(e!=null&&e instanceof HomeFurnitureGroup){(function(h,g){return h.push.apply(h,g)})(c,this.getGroupFurniture(e))}else{(c.push(e)>0)}}return c};a.prototype.addLevelsListener=function(b){this.levelsChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeLevelsListener=function(b){this.levelsChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getLevels=function(){return this.levels.slice(0)};a.prototype.addLevel=function(g){if(g.getElevationIndex()<0){var d=0;for(var c=0;c<this.levels.length;c++){var b=this.levels[c];if(b.getElevation()===g.getElevation()){d=b.getElevationIndex()+1}else{if(b.getElevation()>g.getElevation()){break}}}g.setElevationIndex(d)}this.levels=(this.levels.slice(0));var e=(function(h,q,m){var k=m;if(typeof m!="function"){k=function(r,l){return m.compare(r,l)}}var n=0;var i=h.length-1;while(n<=i){var p=(n+i)>>>1;var j=h[p];var o=k(j,q);if(o<0){n=p+1}else{if(o>0){i=p-1}else{return p}}}return -(n+1)})(this.levels,g,a.LEVEL_ELEVATION_COMPARATOR_$LI$());var f;if(e>=0){f=e}else{f=-(e+1)}this.levels.splice(f,0,g);this.levelsChangeSupport.fireCollectionChanged(g,f,CollectionEvent.Type.ADD)};a.prototype.deleteLevel=function(c){var d=this.levels.indexOf(c);if(d!==-1){for(var f=0;f<this.furniture.length;f++){var k=this.furniture[f];if(k.getLevel()===c){this.deletePieceOfFurniture(k)}}for(var f=0;f<this.rooms.length;f++){var b=this.rooms[f];if(b.getLevel()===c){this.deleteRoom(b)}}for(var f=0;f<this.walls.length;f++){var i=this.walls[f];if(i.getLevel()===c){this.deleteWall(i)}}for(var f=0;f<this.polylines.length;f++){var h=this.polylines[f];if(h.getLevel()===c){this.deletePolyline(h)}}for(var f=0;f<this.dimensionLines.length;f++){var j=this.dimensionLines[f];if(j.getLevel()===c){this.deleteDimensionLine(j)}}for(var f=0;f<this.labels.length;f++){var g=this.labels[f];if(g.getLevel()===c){this.deleteLabel(g)}}if(this.selectedLevel===c){if(this.levels.length===1){this.setSelectedLevel(null);this.setAllLevelsSelection(false)}else{this.setSelectedLevel(this.levels[d>=1?d-1:d+1])}}if(this.print!=null&&this.print.getPrintedLevels()!=null){var e=(this.print.getPrintedLevels().slice(0));if((function(l){var m=l.indexOf(c);if(m>=0){l.splice(m,1);return true}else{return false}})(e)){this.print=new HomePrint(this.print.getPaperOrientation(),this.print.getPaperWidth(),this.print.getPaperHeight(),this.print.getPaperTopMargin(),this.print.getPaperLeftMargin(),this.print.getPaperBottomMargin(),this.print.getPaperRightMargin(),this.print.isFurniturePrinted(),this.print.isPlanPrinted(),e,this.print.isView3DPrinted(),this.print.getPlanScale(),this.print.getHeaderFormat(),this.print.getFooterFormat())}}this.levels=(this.levels.slice(0));this.levels.splice(d,1)[0];this.levelsChangeSupport.fireCollectionChanged(c,d,CollectionEvent.Type.DELETE)}};a.prototype.getSelectedLevel=function(){return this.selectedLevel};a.prototype.setSelectedLevel=function(c){if(c!==this.selectedLevel){var b=this.selectedLevel;this.selectedLevel=c;this.propertyChangeSupport.firePropertyChange("SELECTED_LEVEL",b,c)}};a.prototype.isAllLevelsSelection=function(){return this.allLevelsSelection};a.prototype.setAllLevelsSelection=function(b){if(b!==this.allLevelsSelection){this.allLevelsSelection=b;this.propertyChangeSupport.firePropertyChange("ALL_LEVELS_SELECTION",!b,b)}};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture=function(b){this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(b,this.furniture.length)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int=function(c,b){this.furniture=(this.furniture.slice(0));c.setLevel(this.selectedLevel);this.furniture.splice(b,0,c);this.furnitureChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addPieceOfFurniture=function(c,b){if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&((typeof b==="number")||b===null)){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(c,b)}else{if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&b===undefined){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(c)}else{throw new Error("invalid overload")}}};a.prototype.addPieceOfFurnitureToGroup=function(c,d,b){c.setLevel(this.selectedLevel);d.addPieceOfFurniture(c,b);this.furnitureChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.ADD)};a.prototype.deletePieceOfFurniture=function(d){this.deselectItem(d);if(d!=null&&d instanceof HomeFurnitureGroup){var g=d.getAllFurniture();for(var b=0;b<g.length;b++){var f=g[b];this.deselectItem(f)}}var c=this.furniture.indexOf(d);var e=c===-1?this.getPieceOfFurnitureGroup(d,null,this.furniture):null;if(c!==-1||e!=null){d.setLevel(null);this.furniture=(this.furniture.slice(0));if(e!=null){e.deletePieceOfFurniture(d);this.furnitureChangeSupport.fireCollectionChanged(d,CollectionEvent.Type.DELETE)}else{this.furniture.splice(c,1)[0];this.furnitureChangeSupport.fireCollectionChanged(d,c,CollectionEvent.Type.DELETE)}}};a.prototype.getPieceOfFurnitureGroup=function(d,c,f){for(var b=0;b<f.length;b++){var e=f[b];if((function(i,h){if(i&&i.equals){return i.equals(h)}else{return i===h}})(e,d)){return c}else{if(e!=null&&e instanceof HomeFurnitureGroup){var g=this.getPieceOfFurnitureGroup(d,e,e.getFurniture());if(g!=null){return g}}}}return null};a.prototype.addSelectionListener=function(b){(this.selectionListeners.push(b)>0)};a.prototype.removeSelectionListener=function(b){(function(c){var d=c.indexOf(b);if(d>=0){c.splice(d,1);return true}else{return false}})(this.selectionListeners)};a.prototype.getSelectedItems=function(){return this.selectedItems.slice(0)};a.prototype.isItemSelected=function(b){return(this.selectedItems.indexOf((b))>=0)};a.prototype.setSelectedItems=function(g){var f=this.selectedItems.slice(0);this.selectedItems=(g.slice(0));if(!(this.selectionListeners.length==0)){var b=new SelectionEvent(this,f,this.getSelectedItems());var d=this.selectionListeners.slice(0);for(var c=0;c<d.length;c++){var e=d[c];e.selectionChanged(b)}}};a.prototype.deselectItem=function(c){var b=this.selectedItems.indexOf(c);if(b!==-1){var d=(this.getSelectedItems().slice(0));d.splice(b,1)[0];this.setSelectedItems(d)}};a.prototype.addRoomsListener=function(b){this.roomsChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeRoomsListener=function(b){this.roomsChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getRooms=function(){return this.rooms.slice(0)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room=function(b){this.addRoom$com_eteks_sweethome3d_model_Room$int(b,this.rooms.length)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room$int=function(c,b){this.rooms=(this.rooms.slice(0));this.rooms.splice(b,0,c);c.setLevel(this.selectedLevel);this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addRoom=function(c,b){if(((c!=null&&c instanceof Room)||c===null)&&((typeof b==="number")||b===null)){return this.addRoom$com_eteks_sweethome3d_model_Room$int(c,b)}else{if(((c!=null&&c instanceof Room)||c===null)&&b===undefined){return this.addRoom$com_eteks_sweethome3d_model_Room(c)}else{throw new Error("invalid overload")}}};a.prototype.deleteRoom=function(c){this.deselectItem(c);var b=this.rooms.indexOf(c);if(b!==-1){c.setLevel(null);this.rooms=(this.rooms.slice(0));this.rooms.splice(b,1)[0];this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.DELETE)}};a.prototype.addWallsListener=function(b){this.wallsChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeWallsListener=function(b){this.wallsChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getWalls=function(){return this.walls.slice(0)};a.prototype.addWall=function(b){this.walls=(this.walls.slice(0));(this.walls.push(b)>0);b.setLevel(this.selectedLevel);this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteWall=function(b){this.deselectItem(b);var f=this.getWalls();for(var e=0;e<f.length;e++){var d=f[e];if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,d.getWallAtStart())){d.setWallAtStart(null)}else{if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,d.getWallAtEnd())){d.setWallAtEnd(null)}}}var c=this.walls.indexOf(b);if(c!==-1){b.setLevel(null);this.walls=(this.walls.slice(0));this.walls.splice(c,1)[0];this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addPolylinesListener=function(b){this.polylinesChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removePolylinesListener=function(b){this.polylinesChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getPolylines=function(){return this.polylines.slice(0)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline=function(b){this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,this.polylines.length)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline$int=function(b,c){this.polylines=(this.polylines.slice(0));this.polylines.splice(c,0,b);b.setLevel(this.selectedLevel);this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.addPolyline=function(b,c){if(((b!=null&&b instanceof Polyline)||b===null)&&((typeof c==="number")||c===null)){return this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,c)}else{if(((b!=null&&b instanceof Polyline)||b===null)&&c===undefined){return this.addPolyline$com_eteks_sweethome3d_model_Polyline(b)}else{throw new Error("invalid overload")}}};a.prototype.deletePolyline=function(b){this.deselectItem(b);var c=this.polylines.indexOf(b);if(c!==-1){b.setLevel(null);this.polylines=(this.polylines.slice(0));this.polylines.splice(c,1)[0];this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getDimensionLines=function(){return this.dimensionLines.slice(0)};a.prototype.addDimensionLine=function(b){this.dimensionLines=(this.dimensionLines.slice(0));(this.dimensionLines.push(b)>0);b.setLevel(this.selectedLevel);this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteDimensionLine=function(b){this.deselectItem(b);var c=this.dimensionLines.indexOf(b);if(c!==-1){b.setLevel(null);this.dimensionLines=(this.dimensionLines.slice(0));this.dimensionLines.splice(c,1)[0];this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addLabelsListener=function(b){this.labelsChangeSupport.addCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.removeLabelsListener=function(b){this.labelsChangeSupport.removeCollectionListener(((function(c){if(c==null||typeof c=="function"){return c}return function(d){return(c.collectionChanged?c.collectionChanged:c).call(c,d)}})(b)))};a.prototype.getLabels=function(){return this.labels.slice(0)};a.prototype.addLabel=function(b){this.labels=(this.labels.slice(0));(this.labels.push(b)>0);b.setLevel(this.selectedLevel);this.labelsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteLabel=function(c){this.deselectItem(c);var b=this.labels.indexOf(c);if(b!==-1){c.setLevel(null);this.labels=(this.labels.slice(0));this.labels.splice(b,1)[0];this.labelsChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.DELETE)}};a.prototype.getSelectableViewableItems=function(){var b=([]);this.addViewableItems(this.walls,b);this.addViewableItems(this.rooms,b);this.addViewableItems(this.dimensionLines,b);this.addViewableItems(this.polylines,b);this.addViewableItems(this.labels,b);var e=this.getFurniture();for(var c=0;c<e.length;c++){var d=e[c];if(d.isVisible()&&(d.getLevel()==null||d.getLevel().isViewable())){(b.push(d)>0)}}if(this.compass.isVisible()){(b.push(this.compass)>0)}return b};a.prototype.addViewableItems=function(b,f){for(var c=0;c<b.length;c++){var d=b[c];if(d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0)){var e=d;if(e.getLevel()==null||e.getLevel().isViewable()){(f.push(d)>0)}}}};a.prototype.getHomeObjects=function(){var c=([]);(c.push(this.environment)>0);(c.push(this.compass)>0);(function(g,f){return g.push.apply(g,f)})(c,this.levels);(function(g,f){return g.push.apply(g,f)})(c,this.walls);(function(g,f){return g.push.apply(g,f)})(c,this.rooms);(function(g,f){return g.push.apply(g,f)})(c,this.dimensionLines);(function(g,f){return g.push.apply(g,f)})(c,this.polylines);(function(g,f){return g.push.apply(g,f)})(c,this.labels);var e=this.getFurniture();for(var b=0;b<e.length;b++){var d=e[b];(c.push(d)>0);if(d!=null&&d instanceof HomeFurnitureGroup){(function(g,f){return g.push.apply(g,f)})(c,d.getAllFurniture())}}(c.push(this.topCamera)>0);(c.push(this.observerCamera)>0);(function(g,f){return g.push.apply(g,f)})(c,this.storedCameras);(function(g,f){return g.push.apply(g,f)})(c,this.environment.getVideoCameraPath());return c};a.prototype.isEmpty=function(){return(this.furniture.length==0)&&(this.walls.length==0)&&(this.rooms.length==0)&&(this.dimensionLines.length==0)&&(this.polylines.length==0)&&(this.labels.length==0)};a.prototype.getWallHeight=function(){return this.wallHeight};a.prototype.getName=function(){return this.name};a.prototype.setName=function(b){if(b!==this.name&&(b==null||!(b===this.name))){var c=this.name;this.name=b;this.propertyChangeSupport.firePropertyChange("NAME",c,b)}};a.prototype.isModified=function(){return this.modified};a.prototype.setModified=function(b){if(b!==this.modified){this.modified=b;this.propertyChangeSupport.firePropertyChange("MODIFIED",!b,b)}};a.prototype.isRecovered=function(){return this.recovered};a.prototype.setRecovered=function(b){if(b!==this.recovered){this.recovered=b;this.propertyChangeSupport.firePropertyChange("RECOVERED",!b,b)}};a.prototype.isRepaired=function(){return this.repaired};a.prototype.setRepaired=function(b){if(b!==this.repaired){this.repaired=b;this.propertyChangeSupport.firePropertyChange("REPAIRED",!b,b)}};a.prototype.getFurnitureSortedPropertyName=function(){return this.furnitureSortedPropertyName};a.prototype.setFurnitureSortedPropertyName=function(d){if(d!==this.furnitureSortedPropertyName&&(d==null||!(d===this.furnitureSortedPropertyName))){var c=this.furnitureSortedPropertyName;this.furnitureSortedPropertyName=d;try{this.furnitureSortedProperty=d!=null?d:null}catch(b){this.furnitureSortedProperty=null}this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",c,d)}};a.prototype.getFurnitureSortedProperty=function(){return this.furnitureSortedProperty};a.prototype.setFurnitureSortedProperty=function(b){if(b!==this.furnitureSortedProperty&&(b==null||!(b==this.furnitureSortedProperty))){var c=this.furnitureSortedProperty;this.furnitureSortedProperty=b;this.furnitureSortedPropertyName=b!=null?b:null;this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",c,b)}};a.prototype.isFurnitureDescendingSorted=function(){return this.furnitureDescendingSorted};a.prototype.setFurnitureDescendingSorted=function(b){if(b!==this.furnitureDescendingSorted){this.furnitureDescendingSorted=b;this.propertyChangeSupport.firePropertyChange("FURNITURE_DESCENDING_SORTED",!b,b)}};a.prototype.getFurnitureVisiblePropertyNames=function(){if(this.furnitureVisiblePropertyNames==null){return[]}else{return this.furnitureVisiblePropertyNames.slice(0)}};a.prototype.setFurnitureVisiblePropertyNames=function(d){if(d!==this.furnitureVisiblePropertyNames&&(d==null||!(function(h,g){if(h==null&&g==null){return true}if(h==null||g==null){return false}if(h.length!=g.length){return false}for(var j=0;j<h.length;j++){if(h[j]!=g[j]){return false}}return true})(d,this.furnitureVisiblePropertyNames))){var f=this.furnitureVisiblePropertyNames;this.furnitureVisiblePropertyNames=(d.slice(0));this.furnitureVisibleProperties=([]);for(var c=0;c<d.length;c++){var b=d[c];try{(this.furnitureVisibleProperties.push(b)>0)}catch(e){}}this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",f.slice(0),d.slice(0))}};a.prototype.getFurnitureVisibleProperties=function(){if(this.furnitureVisibleProperties==null){return[]}else{return this.furnitureVisibleProperties.slice(0)}};a.prototype.setFurnitureVisibleProperties=function(d){if(d!==this.furnitureVisibleProperties&&(d==null||!(function(g,f){if(g==null&&f==null){return true}if(g==null||f==null){return false}if(g.length!=f.length){return false}for(var h=0;h<g.length;h++){if(g[h]!=f[h]){return false}}return true})(d,this.furnitureVisibleProperties))){var c=this.furnitureVisibleProperties;this.furnitureVisibleProperties=(d.slice(0));this.furnitureVisiblePropertyNames=([]);for(var b=0;b<d.length;b++){var e=d[b];(this.furnitureVisiblePropertyNames.push(e)>0)}this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",c.slice(0),d.slice(0))}};a.prototype.getFurnitureAdditionalProperties=function(){return this.furnitureAdditionalProperties.slice(0)};a.prototype.setFurnitureAdditionalProperties=function(b){if(b!==this.furnitureAdditionalProperties&&(b==null||!(function(h,g){if(h==null&&g==null){return true}if(h==null||g==null){return false}if(h.length!=g.length){return false}for(var j=0;j<h.length;j++){if(h[j]!=g[j]){return false}}return true})(b,this.furnitureAdditionalProperties))){var f=this.furnitureAdditionalProperties;this.furnitureAdditionalProperties=(b.slice(0));var c=(this.getFurnitureVisiblePropertyNames().slice(0));for(var e=c.length-1;e>=0;e--){try{c[e]}catch(d){if(!(b.indexOf((new ObjectProperty(c[e])))>=0)){c.splice(e,1)[0]}}}this.setFurnitureVisiblePropertyNames(c);if(this.getFurnitureSortedPropertyName()!=null&&!(b.indexOf((new ObjectProperty(this.getFurnitureSortedPropertyName())))>=0)){this.setFurnitureSortedPropertyName(null)}this.propertyChangeSupport.firePropertyChange("FURNITURE_ADDITIONAL_PROPERTIES",f.slice(0),b.slice(0))}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(c){if(c!==this.backgroundImage){var b=this.backgroundImage;this.backgroundImage=c;this.propertyChangeSupport.firePropertyChange("BACKGROUND_IMAGE",b,c)}};a.prototype.getTopCamera=function(){return this.topCamera};a.prototype.getObserverCamera=function(){return this.observerCamera};a.prototype.setCamera=function(c){if(c!==this.camera){var b=this.camera;this.camera=c;this.propertyChangeSupport.firePropertyChange("CAMERA",b,c)}};a.prototype.getCamera=function(){if(this.camera==null){this.camera=this.getTopCamera()}return this.camera};a.prototype.setStoredCameras=function(c){if(!(function(e,d){if(e==null&&d==null){return true}if(e==null||d==null){return false}if(e.length!=d.length){return false}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return false}}return true})(this.storedCameras,c)){var b=this.storedCameras;if(c==null){this.storedCameras=[]}else{this.storedCameras=(c.slice(0))}this.propertyChangeSupport.firePropertyChange("STORED_CAMERAS",b.slice(0),c.slice(0))}};a.prototype.getStoredCameras=function(){return this.storedCameras.slice(0)};a.prototype.getEnvironment=function(){return this.environment};a.prototype.getCompass=function(){return this.compass};a.prototype.getPrint=function(){return this.print};a.prototype.setPrint=function(b){if(b!==this.print){var c=this.print;this.print=b;this.propertyChangeSupport.firePropertyChange("PRINT",c,b)}this.print=b};a.prototype.getVisualProperty=function(b){return(function(c,d){return c[d]===undefined?null:c[d]})(this.visualProperties,b)};a.prototype.setVisualProperty=function(b,c){(this.visualProperties[b]=c)};a.prototype.getProperty=function(b){return(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)};a.prototype.getNumericProperty=function(b){var e=(function(f,g){return f[g]===undefined?null:f[g]})(this.properties,b);if(e!=null){try{return new Number(e).valueOf()}catch(c){try{return new Number(e).valueOf()}catch(d){}}}return null};a.prototype.setProperty=function(c,d){var e=this;var b=(function(f,g){return f[g]===undefined?null:f[g]})(this.properties,c);if(d==null){if(b!=null){(function(g){var f=e.properties[c];delete e.properties[c];return f})(this.properties);this.propertyChangeSupport.firePropertyChange(c,b,null)}}else{(this.properties[c]=d);this.propertyChangeSupport.firePropertyChange(c,b,d)}};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.addPropertyChangeListener=function(b,c){this.propertyChangeSupport.addPropertyChangeListener(b,c)};a.prototype.removePropertyChangeListener=function(b,c){this.propertyChangeSupport.removePropertyChangeListener(b,c)};a.prototype.isBasePlanLocked=function(){return this.basePlanLocked};a.prototype.setBasePlanLocked=function(b){if(b!==this.basePlanLocked){this.basePlanLocked=b;this.propertyChangeSupport.firePropertyChange("BASE_PLAN_LOCKED",!b,b)}};a.prototype.getVersion=function(){return this.version};a.prototype.setVersion=function(b){this.version=b};a.prototype.clone=function(){try{var c=(function(e){var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f})(this);a.copyHomeData(this,c);a.initListenersSupport(c);c.addModelListeners();return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.copyHomeData=function(b,k){k.allLevelsSelection=b.allLevelsSelection;k.name=b.name;k.modified=b.modified;k.recovered=b.recovered;k.repaired=b.repaired;k.backgroundImage=b.backgroundImage;k.furnitureDescendingSorted=b.furnitureDescendingSorted;k.version=b.version;k.basePlanLocked=b.basePlanLocked;k.skyColor=b.skyColor;k.groundColor=b.groundColor;k.lightColor=b.lightColor;k.wallsAlpha=b.wallsAlpha;k.furnitureSortedProperty=b.furnitureSortedProperty;k.selectedItems=([]);k.furniture=a.cloneSelectableItems(b.furniture,b.selectedItems,k.selectedItems);k.rooms=a.cloneSelectableItems(b.rooms,b.selectedItems,k.selectedItems);k.dimensionLines=a.cloneSelectableItems(b.dimensionLines,b.selectedItems,k.selectedItems);k.polylines=a.cloneSelectableItems(b.polylines,b.selectedItems,k.selectedItems);k.labels=a.cloneSelectableItems(b.labels,b.selectedItems,k.selectedItems);k.walls=Wall.clone(b.walls);for(var d=0;d<b.walls.length;d++){var m=b.walls[d];if((b.selectedItems.indexOf((m))>=0)){(k.selectedItems.push(k.walls[d])>0)}}k.levels=([]);if(b.levels.length>0){for(var e=0;e<b.levels.length;e++){var c=b.levels[e];(k.levels.push((function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(c))>0)}for(var d=0;d<b.furniture.length;d++){var n=b.furniture[d].getLevel();if(n!=null){k.furniture[d].setLevel(k.levels[b.levels.indexOf(n)])}}for(var d=0;d<b.rooms.length;d++){var p=b.rooms[d].getLevel();if(p!=null){k.rooms[d].setLevel(k.levels[b.levels.indexOf(p)])}}for(var d=0;d<b.dimensionLines.length;d++){var o=b.dimensionLines[d].getLevel();if(o!=null){k.dimensionLines[d].setLevel(k.levels[b.levels.indexOf(o)])}}for(var d=0;d<b.polylines.length;d++){var l=b.polylines[d].getLevel();if(l!=null){k.polylines[d].setLevel(k.levels[b.levels.indexOf(l)])}}for(var d=0;d<b.labels.length;d++){var h=b.labels[d].getLevel();if(h!=null){k.labels[d].setLevel(k.levels[b.levels.indexOf(h)])}}for(var d=0;d<b.walls.length;d++){var g=b.walls[d].getLevel();if(g!=null){k.walls[d].setLevel(k.levels[b.levels.indexOf(g)])}}if(b.selectedLevel!=null){k.selectedLevel=k.levels[b.levels.indexOf(b.selectedLevel)]}}if(b.print!=null&&b.print.getPrintedLevels()!=null){var j=(b.print.getPrintedLevels().slice(0));for(var d=0;d<j.length;d++){(j[d]=k.levels[b.levels.indexOf(j[d])])}k.print=new HomePrint(b.print.getPaperOrientation(),b.print.getPaperWidth(),b.print.getPaperHeight(),b.print.getPaperTopMargin(),b.print.getPaperLeftMargin(),b.print.getPaperBottomMargin(),b.print.getPaperRightMargin(),b.print.isFurniturePrinted(),b.print.isPlanPrinted(),j,b.print.isView3DPrinted(),b.print.getPlanScale(),b.print.getHeaderFormat(),b.print.getFooterFormat())}else{k.print=b.print}k.observerCamera=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.observerCamera);k.topCamera=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.topCamera);if(b.camera===b.observerCamera){k.camera=k.observerCamera;if((b.selectedItems.indexOf((b.observerCamera))>=0)){(k.selectedItems.push(k.observerCamera)>0)}}else{k.camera=k.topCamera}k.storedCameras=([]);for(var e=0;e<b.storedCameras.length;e++){var f=b.storedCameras[e];(k.storedCameras.push((function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(f))>0)}k.environment=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.environment);k.compass=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.compass);k.furnitureVisibleProperties=(b.furnitureVisibleProperties.slice(0));k.furnitureVisiblePropertyNames=(b.furnitureVisiblePropertyNames.slice(0));k.visualProperties=((function(s){var i={};for(var q in s){i[q]=s[q]}return i})(b.visualProperties));k.properties=((function(s){var i={};for(var q in s){i[q]=s[q]}return i})(b.properties))};a.cloneSelectableItems=function(b,h,c){var k=([]);for(var g=0;g<b.length;g++){var l=b[g];var j=(function(q){if(q.clone!=undefined){return q.clone()}else{var n=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){n[i]=q[i]}}return n}})(l);(k.push(j)>0);if((h.indexOf((l))>=0)){(c.push(j)>0)}else{if(l!=null&&l instanceof HomeFurnitureGroup){var m=l.getAllFurniture();var d=null;for(var f=0,e=m.length;f<e;f++){var o=m[f];if((h.indexOf((o))>=0)){if(d==null){d=j.getAllFurniture()}(c.push(d[f])>0)}}}}}return k};a.duplicate=function(d){var g=([]);var c=Wall.duplicate(a.getWallsSubList(d));var b=0;for(var e=0;e<d.length;e++){var f=d[e];if(f!=null&&f instanceof Wall){(g.push(c[b++])>0)}else{if(f!=null&&f instanceof HomeObject){(g.push(f.duplicate())>0)}else{(g.push((function(i){if(i.clone!=undefined){return i.clone()}else{var j=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){j[h]=i[h]}}return j}})(f))>0)}}}return g};a.getFurnitureSubList=function(b){return a.getSubList(b,HomePieceOfFurniture)};a.getWallsSubList=function(b){return a.getSubList(b,Wall)};a.getRoomsSubList=function(b){return a.getSubList(b,Room)};a.getPolylinesSubList=function(b){return a.getSubList(b,Polyline)};a.getDimensionLinesSubList=function(b){return a.getSubList(b,DimensionLine)};a.getLabelsSubList=function(b){return a.getSubList(b,Label)};a.getSubList=function(c,f){var b=([]);for(var d=0;d<c.length;d++){var e=c[d];if((function(h,g){if(typeof h==="string"){return(g.constructor&&g.constructor.__interfaces&&g.constructor.__interfaces.indexOf(h)>=0)||(g.__interfaces&&g.__interfaces.indexOf(h)>=0)}else{if(typeof h==="function"){return(g instanceof h)||(g.constructor&&g.constructor===h)}}})(f,e)){(b.push(e)>0)}}return b};a.CURRENT_VERSION=7200;a.HOME_TOP_CAMERA_ID="camera-homeTopCamera";a.HOME_OBSERVER_CAMERA_ID="observerCamera-homeObserverCamera";a.HOME_ENVIRONMENT_ID="environment-homeEnvironment";a.HOME_COMPASS_ID="compass-homeCompass";a.KEEP_BACKWARD_COMPATIBLITY=true;return a}());Home.__class="com.eteks.sweethome3d.model.Home";(function(a){var b=(function(){function c(d){this.__parent=d}c.prototype.propertyChange=function(d){if(("ELEVATION"===d.getPropertyName())||("ELEVATION_INDEX"===d.getPropertyName())){this.__parent.levels=(this.__parent.levels.slice(0));(function(e,f){if(f.compare){e.sort(function(h,g){return f.compare(h,g)})}else{e.sort(f)}})(this.__parent.levels,a.LEVEL_ELEVATION_COMPARATOR_$LI$())}};return c}());a.Home$0=b})(Home||(Home={}));Home.__transients=["furnitureChangeSupport","selectedItems","selectionListeners","allLevelsSelection","levelsChangeSupport","wallsChangeSupport","roomsChangeSupport","polylinesChangeSupport","dimensionLinesChangeSupport","labelsChangeSupport","modified","recovered","repaired","propertyChangeSupport","furnitureAdditionalProperties"];Home.LEVEL_ELEVATION_COMPARATOR_$LI$();CatalogLight.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$();CatalogLight.EMPTY_LIGHT_SOURCES_$LI$();CatalogShelfUnit.EMPTY_SHELF_BOXES_$LI$();CatalogShelfUnit.EMPTY_SHELF_ELEVATIONS_$LI$();HomePieceOfFurniture.SORTABLE_PROPERTY_COMPARATORS_$LI$();HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();HomePieceOfFurniture.ROUND_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.STRAIGHT_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.TWICE_PI_$LI$();HomePieceOfFurniture.__static_initialize();Label.TWICE_PI_$LI$();Room.TWICE_PI_$LI$();FurnitureCategory.COMPARATOR_$LI$();CatalogPieceOfFurniture.recentFilters_$LI$();CatalogPieceOfFurniture.COMPARATOR_$LI$();CatalogPieceOfFurniture.EMPTY_CRITERIA_$LI$();CatalogPieceOfFurniture.__static_initialize();Baseboard.baseboardsCache_$LI$();TextStyle.textStylesCache_$LI$();CatalogTexture.recentFilters_$LI$();CatalogTexture.COMPARATOR_$LI$();CatalogTexture.EMPTY_CRITERIA_$LI$();CatalogTexture.__static_initialize();TexturesCategory.COMPARATOR_$LI$();function DAELoader(){ModelLoader.call(this,"dae")}DAELoader.prototype=Object.create(ModelLoader.prototype);DAELoader.prototype.constructor=DAELoader;DAELoader.prototype.parseEntryScene=function(b,c,a,d,i,g){var h=new Group3D();var j=new DAEHandler(h,c);var f=new SAXParser(j,j,j,j,j);g(ModelLoader.PARSING_MODEL,c,0);try{f.parseString(b)}catch(e){h.removeAllChildren()}if(i===null){g(ModelLoader.PARSING_MODEL,c,1);return h}else{setTimeout(function(){g(ModelLoader.PARSING_MODEL,c,1);i(h)},0)}};function DAEHandler(a,b){DefaultHandler.call(this);this.sceneRoot=a;this.daeEntryName=b;this.parentGroups=[];this.parentElements=[];this.buffer="";this.postProcessingBinders=[];this.textures={};this.effectAppearances={};this.materialEffects={};this.materialNames={};this.surface2DIds={};this.sampler2DIds={};this.geometries={};this.sources={};this.positions={};this.normals={};this.textureCoordinates={};this.floatArrays={};this.sourceAccessorStrides=[];this.appearanceGeometries={};this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.nodes={};this.controllersSkinMeshes={};this.instantiatedNodes={};this.visualScenes={};this.visualScene=null;this.floats=null;this.geometryVertices=[];this.geometryNormals=[];this.geometryTextureCoordinates=[];this.vcount=[];this.transparentColor=[];this.transparency=null;this.inRootAsset=false;this.reverseTransparency=false;this.imageId=null;this.materialId=null;this.effectId=null;this.newParamSid=null;this.inSurface2D=false;this.inPhongBlinnOrLambert=false;this.techniqueProfile=null;this.inConstant=false;this.geometryId=null;this.meshSourceId=null;this.verticesId=null;this.floatArrayId=null;this.controllerId=null;this.geometryAppearance=null;this.geometryVertexOffset=0;this.geometryNormalOffset=0;this.geometryTextureCoordinatesOffset=0;this.axis=null;this.meterScale=1;this.floatValue=0;this.opaque=null;this.inputCount=0}DAEHandler.prototype=Object.create(DefaultHandler.prototype);DAEHandler.prototype.constructor=DAEHandler;DAEHandler.prototype.startElement=function(e,v,j,z){this.buffer="";var f=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if(f===null&&!("COLLADA"==j)){throw new SAXException("Expected COLLADA element")}else{if("COLLADA"==j){var I=z.getValue("version");if(I.indexOf("1.4")!==0){throw new SAXException("Version "+I+" not supported")}}else{if("COLLADA"==f&&"asset"==j){this.inRootAsset=true}else{if("asset"==f&&"unit"==j){var C=z.getValue("meter");if(C!==null){this.meterScale=parseFloat(C)}}else{if("image"==j){this.imageId=z.getValue("id")}else{if("material"==j){this.materialId=z.getValue("id");this.materialNames[this.materialId]=z.getValue("name")}else{if("material"==f&&"instance_effect"==j){var t=z.getValue("url");if(t.indexOf("#")===0){var u=t.substring(1);this.materialEffects[this.materialId]=u}}else{if("effect"==j){this.effectId=z.getValue("id");this.effectAppearances[this.effectId]=new Appearance3D()}else{if(this.effectId!==null){if("profile_COMMON"==f&&"newparam"==j){this.newParamSid=z.getValue("sid")}else{if("newparam"==f&&"surface"==j&&"2D"==z.getValue("type")){this.inSurface2D=true}else{if("extra"==f&&"technique"==j){this.techniqueProfile=z.getValue("profile")}else{if("phong"==j||"blinn"==j){this.inPhongBlinnOrLambert=true}else{if("lambert"==j){this.inPhongBlinnOrLambert=true;this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(0,0,0));this.effectAppearances[this.effectId].setShininess(1)}else{if("constant"==j){this.inConstant=true}else{if(this.inConstant||this.inPhongBlinnOrLambert&&("transparent"==j)){this.opaque=z.getValue("opaque");if(this.opaque===null){this.opaque="A_ONE"}}else{if("texture"==j&&"diffuse"==f){var y=this.surface2DIds[this.sampler2DIds[z.getValue("texture")]];var p=this.effectAppearances[this.effectId];var w=this;this.postProcessingBinders.push(function(){p.imageEntryName=w.textures[y]})}}}}}}}}}else{if("geometry"==j){this.geometryId=z.getValue("id");this.geometries[this.geometryId]=[]}else{if(this.geometryId!==null){if("mesh"==f&&"source"==j){this.meshSourceId=z.getValue("id")}else{if("mesh"==f&&"vertices"==j){this.verticesId=z.getValue("id")}else{if(this.meshSourceId!==null){if("float_array"==j){this.floatArrayId=z.getValue("id")}else{if("technique_common"==f&&"accessor"==j){var x=z.getValue("source").substring(1);var s=z.getValue("stride");s=s!==null?parseInt(s):1;this.sourceAccessorStrides.push({floatArray:this.floatArrays[x],stride:s})}}}else{if(this.verticesId!==null&&"input"==j){var J=z.getValue("source").substring(1);var o=this.sources[J];if(o!==undefined){if("POSITION"==z.getValue("semantic")){this.positions[this.verticesId]=new Array(o.length/3);for(var H=0,F=0;F<o.length;H++,F+=3){this.positions[this.verticesId][H]=vec3.fromValues(o[F],o[F+1],o[F+2])}}else{if("NORMAL"==z.getValue("semantic")){this.normals[this.verticesId]=new Array(o.length/3);for(var H=0,F=0;F<o.length;H++,F+=3){this.normals[this.verticesId][H]=vec3.fromValues(o[F],o[F+1],o[F+2])}}else{if("TEXCOORD"==z.getValue("semantic")){this.textureCoordinates[this.verticesId]=new Array(o.length/2);for(var H=0,F=0;F<o.length;H++,F+=2){this.textureCoordinates[this.verticesId][H]=vec2.fromValues(o[F],o[F+1])}}}}}}else{if(this.verticesId===null&&"input"==j){var J=z.getValue("source").substring(1);var A=parseInt(z.getValue("offset"));if(this.inputCount<A+1){this.inputCount=A+1}if("VERTEX"==z.getValue("semantic")){this.geometryVertices=this.positions[J];if(this.geometryVertices===undefined){this.geometryVertices=null}this.geometryVertexOffset=A;if(this.geometryNormals===null){this.geometryNormals=this.normals[J];this.geometryNormalOffset=A}if(this.geometryTextureCoordinates===null){this.geometryTextureCoordinates=this.textureCoordinates[J];this.geometryTextureCoordinatesOffset=A}}else{if("NORMAL"==z.getValue("semantic")){var o=this.sources[J];if(o!==undefined){this.geometryNormals=new Array(o.length/3);for(var H=0,F=0;F<o.length;H++,F+=3){this.geometryNormals[H]=vec3.fromValues(o[F],o[F+1],o[F+2])}this.geometryNormalOffset=A}}else{if("TEXCOORD"==z.getValue("semantic")){var o=this.sources[J];if(o!==undefined){this.geometryTextureCoordinates=new Array(o.length/2);for(var H=0,F=0;F<o.length;H++,F+=2){this.geometryTextureCoordinates[H]=vec2.fromValues(o[F],o[F+1])}this.geometryTextureCoordinatesOffset=A}}}}}else{if("triangles"==j||"trifans"==j||"tristrips"==j||"polylist"==j||"polygons"==j||"lines"==j||"linestrips"==j){this.geometryAppearance=z.getValue("material");this.inputCount=0;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}}}}else{if("controller"==j){this.controllerId=z.getValue("id")}else{if("skin"==j){var G=z.getValue("source");if(G.indexOf("#")===0){var l=G.substring(1);this.controllersSkinMeshes[this.controllerId]=l}}else{if("visual_scene"==j){var D=new TransformGroup3D();this.parentGroups.push(D);this.visualScenes[z.getValue("id")]=D}else{if("node"==j){var b=new TransformGroup3D();if(this.parentGroups.length>0){this.parentGroups[this.parentGroups.length-1].addChild(b)}this.parentGroups.push(b);this.nodes[z.getValue("id")]=b;var a=z.getValue("name");if(a!==null){b.setName(a)}}else{if("node"==f&&("instance_geometry"==j||"instance_controller"==j)){var M=z.getValue("url");if(M.indexOf("#")===0){var q="instance_controller"==j;var L=M.substring(1);var a=z.getValue("name");var E=new Group3D();this.parentGroups[this.parentGroups.length-1].addChild(E);this.parentGroups.push(E);var w=this;this.postProcessingBinders.push(function(){var P=0;var O=q?w.geometries[w.controllersSkinMeshes[L]]:w.geometries[L];for(var N=0;N<O.length;N++){var k=new Shape3D(O[N]);E.addChild(k);if(a!==null){if(P===0){k.setName(a)}else{k.setName(a+"_"+P)}P++}}})}}else{if("instance_node"==j){var B=z.getValue("url");if(B.indexOf("#")===0){var d=B.substring(1);var K=this.parentGroups[this.parentGroups.length-1];var w=this;this.postProcessingBinders.push(function(){var i=w.instantiatedNodes[d];if(i===undefined){i=new SharedGroup3D();i.addChild(w.nodes[d]);w.instantiatedNodes[d]=i}K.addChild(new Link3D(i))})}}else{if("instance_material"==j&&this.parentGroups.length>0){var g=z.getValue("target");if(g.indexOf("#")==0){var m=g.substring(1);var r=z.getValue("symbol");var n=this.parentGroups[this.parentGroups.length-1];var w=this;this.postProcessingBinders.push(function(){var i=w.effectAppearances[w.materialEffects[m]];var k=function(T,O,P){if(T instanceof Group3D){var N=false;var R=T.getChildren();for(var Q=0;Q<R.length;Q++){N|=k(R[Q],O,P)}return N}else{if(T instanceof Link3D){return k(T.getSharedGroup(),O,P)}else{if(T instanceof Shape3D){var S=P?T.getGeometries():w.appearanceGeometries[r];if(S!==undefined){for(var Q=0;Q<S.length;Q++){if(S[Q]===T.getGeometries()[0]){T.setAppearance(O);return true}}}}}}return false};if(!k(n,i,false)){k(n,i,true)}i.setName(w.materialNames[m])})}}else{if("instance_visual_scene"==j){var h=z.getValue("url");if(h.indexOf("#")===0){var c=h.substring(1);var w=this;this.postProcessingBinders.push(function(){w.visualScene=w.visualScenes[c]})}}}}}}}}}}}}}}}}}}}}this.parentElements.push(j)};DAEHandler.prototype.characters=function(a,c,b){this.buffer+=a.substring(c,c+b)};DAEHandler.prototype.endElement=function(c,f,b){this.parentElements.pop();var l=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if("color"==b||"float_array"==b||"matrix"==b||"rotate"==b||"scale"==b||"translate"==b){var g=this.getCharacters().split(/\s/);this.floats=new Array(g.length);var d=0;for(var h=0;h<g.length;h++){if(g[h].length>0){var j=parseFloat(g[h]);if(isNaN(j)){j=0}this.floats[d++]=j}}if(d!==g.length){this.floats.splice(d,this.floats.length-d)}if(this.floatArrayId!==null){this.floatArrays[this.floatArrayId]=this.floats;this.floatArrayId=null}}else{if("float"==b){this.floatValue=parseFloat(this.getCharacters())}}if(this.inRootAsset){this.handleRootAssetElementsEnd(b)}else{if("image"==b){this.imageId=null}else{if(this.imageId!==null){this.handleImageElementsEnd(b)}else{if("material"==b){this.materialId=null}else{if("effect"==b){this.effectId=null}else{if(this.effectId!==null){this.handleEffectElementsEnd(b,l)}else{if("geometry"==b){this.geometryId=null}else{if(this.geometryId!==null){this.handleGeometryElementsEnd(b,l)}else{if("controller"==b){this.controllerId=null}else{if("visual_scene"==b||"node"==b||"node"==l&&"instance_geometry"==b){this.parentGroups.pop()}else{if("matrix"==b){var k=mat4.fromValues(this.floats[0],this.floats[4],this.floats[8],this.floats[12],this.floats[1],this.floats[5],this.floats[9],this.floats[13],this.floats[2],this.floats[6],this.floats[10],this.floats[14],this.floats[3],this.floats[7],this.floats[11],this.floats[15]);this.mulTransformGroup(k)}else{if("node"==l&&"rotate"==b){var m=mat4.create();mat4.fromRotation(m,this.floats[3]*Math.PI/180,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(m)}else{if("scale"==b){var e=mat4.create();mat4.scale(e,e,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(e)}else{if("node"==l&&"translate"==b){var a=mat4.create();mat4.translate(a,a,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(a)}}}}}}}}}}}}}}};DAEHandler.prototype.getCharacters=function(){return this.buffer.trim()};DAEHandler.prototype.handleRootAssetElementsEnd=function(c){if("asset"==c){this.inRootAsset=false}else{if("up_axis"==c){this.axis=this.getCharacters()}else{if("subject"==c){this.scene.setName(this.getCharacters())}else{if("authoring_tool"==c){var b=this.getCharacters();if(b.indexOf("Google SketchUp")===0){var d=b.substring("Google SketchUp".length).trim();if(d.length>0){var f=d.indexOf(".");var e=f===-1?d:d.substring(0,f);var a=parseInt(e);if(a<7||(a==7&&(f>=d.length-1||d[f+1]<"1"))){this.reverseTransparency=true}}}}}}}};DAEHandler.prototype.handleImageElementsEnd=function(c){if("init_from"==c){var f=this.getCharacters();if(f.indexOf("./")===0){f=f.substring(2)}var a=this.daeEntryName.lastIndexOf("/");if(a>=0){var e=this.daeEntryName.split("/");var b=f.split("/");e.splice(e.length-1,1);while(b[0]==".."||b[0]=="."){if(b[0]==".."){e.splice(e.length-1,1)}b.splice(0,1)}f="";for(var d=0;d<e.length;d++){f+=e[d]+"/"}for(var d=0;d<b.length;d++){f+=b[d]+"/"}f=f.substring(0,f.length-1)}this.textures[this.imageId]=f}else{if("data"==c){throw new SAXException("<data> not supported")}}};DAEHandler.prototype.handleEffectElementsEnd=function(b,c){if("profile_COMMON"==c&&"newparam"==b){this.newParamSid=null}else{if("newparam"==c&&"surface"==b){this.inSurface2D=false}else{if(this.newParamSid!==null){if(this.inSurface2D&&"init_from"==b){this.surface2DIds[this.newParamSid]=this.getCharacters()}else{if("sampler2D"==c&&"source"==b){this.sampler2DIds[this.newParamSid]=this.getCharacters()}}}else{if("extra"==c&&"technique"==b){this.techniqueProfile=null}else{if("phong"==b||"blinn"==b||"lambert"==b||"constant"==b){var e;if(this.transparentColor!==null){if("RGB_ZERO"==this.opaque){e=this.transparentColor[0]*0.212671+this.transparentColor[1]*0.71516+this.transparentColor[2]*0.072169;if(this.transparency!==null){e*=this.transparency}}else{if(this.transparency!==null){e=1-this.transparentColor[3]*this.transparency}else{e=1-this.transparentColor[3]}if(this.reverseTransparency){e=1-e}}}else{e=0}var a=this.effectAppearances[this.effectId];if(e>0){a.setTransparency(e)}var d=this.transparentColor!=null?vec3.fromValues(this.transparentColor[0],this.transparentColor[1],this.transparentColor[2]):vec3.fromValues(0,0,0);if(!a.getAmbientColor()&&!a.getDiffuseColor()&&!a.getSpecularColor()){if(!a.getAmbientColor()){a.setAmbientColor(d)}if(!a.getDiffuseColor()){a.setDiffuseColor(d)}if(!a.getSpecularColor()){a.setSpecularColor(d)}if(!a.getShininess()){a.setShininess(1)}if("constant"==b){this.effectAppearances[this.effectId].setIllumination(0)}}this.transparentColor=null;this.transparency=null;this.inPhongBlinnOrLambert=false;this.inConstant=false}else{if(this.inConstant||this.inPhongBlinnOrLambert){if("color"==b){if("emission"==c){if(this.inPhongBlinnOrLambert){this.effectAppearances[this.effectId].setEmissiveColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.effectAppearances[this.effectId].setIllumination(0)}}else{if("ambient"==c){this.effectAppearances[this.effectId].setAmbientColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("diffuse"==c){this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("specular"==c){this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("transparent"==c){this.transparentColor=this.floats}}}}}}else{if("float"==b){if("shininess"==c){this.effectAppearances[this.effectId].setShininess(this.floatValue)}else{if("transparency"==c){this.transparency=this.floatValue}}}}}else{if("double_sided"==b&&"1"==this.getCharacters()&&("GOOGLEEARTH"==this.techniqueProfile||"MAX3D"==this.techniqueProfile||"MAYA"==this.techniqueProfile)){this.effectAppearances[this.effectId].setCullFace(Appearance3D.CULL_NONE)}}}}}}}};DAEHandler.prototype.handleGeometryElementsEnd=function(a,e){if("mesh"==e&&"source"==a){if(this.floats!==null){this.sources[this.meshSourceId]=this.floats;this.floats=null}this.meshSourceId=null}else{if("mesh"==e&&"vertices"==a){this.verticesId=null}else{if("p"==a||"h"==a||"vcount"==a){var f=this.getCharacters().split(/\s/);var h=new Array(f.length);var d=0;for(var b=0;b<f.length;b++){if(f[b].length>0){h[d++]=parseInt(f[b])}}if(d!==f.length){h.splice(d,h.length-d)}if("ph"!=e&&"p"==a){this.facesAndLinesPrimitives.push(h)}else{if("vcount"==a){this.vcount=h}else{if("ph"==e){if("p"==a){this.polygonsPrimitives.push(h)}else{if("h"==a){if(this.polygonsPrimitives.length>this.polygonsHoles.length){this.polygonsHoles.push([])}this.polygonsHoles[this.polygonsPrimitives.length-1].push(h)}}}}}}else{if(("triangles"==a||"trifans"==a||"tristrips"==a||"polylist"==a||"polygons"==a||"lines"==a||"linestrips"==a)&&this.geometryVertices!==null){var g;if("lines"==a||"linestrips"==a){g=this.getLinesGeometry(a)}else{g=this.getFacesGeometry(a)}if(g!==null){this.geometries[this.geometryId].push(g);if(this.geometryAppearance!==null){var c=this.appearanceGeometries[this.geometryAppearance];if(c===undefined){c=[];this.appearanceGeometries[this.geometryAppearance]=c}c.push(g)}}this.geometryAppearance=null;this.geometryVertices=null;this.geometryNormals=null;this.geometryTextureCoordinates=null;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}};DAEHandler.prototype.getFacesGeometry=function(b){var o;if("triangles"==b){o=GeometryInfo3D.TRIANGLE_ARRAY}else{if("trifans"==b){o=GeometryInfo3D.TRIANGLE_FAN_ARRAY}else{if("tristrips"==b){o=GeometryInfo3D.TRIANGLE_STRIP_ARRAY}else{o=GeometryInfo3D.POLYGON_ARRAY}}}var d=new GeometryInfo3D(o);d.setCoordinates(this.geometryVertices);d.setCoordinateIndices(this.getIndices(this.geometryVertexOffset));if(this.geometryNormals){d.setNormals(this.geometryNormals);d.setNormalIndices(this.getIndices(this.geometryNormalOffset))}if(this.geometryTextureCoordinates){var a;for(var f=0;f<this.sourceAccessorStrides.length;f++){var p=this.sourceAccessorStrides[f];if(p.floatArray===this.geometryTextureCoordinates){a=p.stride;break}}var c;if(a>2){c=new Array(this.geometryTextureCoordinates.length/a*2);for(var f=0,e=0;e<this.geometryTextureCoordinates.length;e+=a){c[f++]=this.geometryTextureCoordinates[e];c[f++]=this.geometryTextureCoordinates[e+1]}}else{c=this.geometryTextureCoordinates}d.setTextureCoordinates(c);d.setTextureCoordinateIndices(this.getIndices(this.geometryTextureCoordinatesOffset))}if("tristrips"==b||"trifans"==b){var h=new Array(this.facesAndLinesPrimitives.length);for(var f=0;f<h.length;f++){h[f]=this.facesAndLinesPrimitives[f].length/this.inputCount}d.setStripCounts(h)}else{if("polylist"==b){d.setStripCounts(this.vcount)}else{if("polygons"==b){var m=0;for(var f=0;f<this.polygonsHoles.length;f++){m+=this.polygonsHoles[f].length}var h=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length+m);var n=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length);var l=0;var k=0;for(var f=0;f<this.facesAndLinesPrimitives.length;f++){h[l++]=this.facesAndLinesPrimitives[f].length/this.inputCount;n[k++]=1}for(var f=0;f<this.polygonsPrimitives.length;f++){h[l++]=this.polygonsPrimitives[f].length/this.inputCount;var g=this.polygonsHoles[f];for(var e=0;e<g.length;e++){h[l++]=g[e].length/this.inputCount}n[k++]=1+g.length}d.setStripCounts(h);d.setContourCounts(n)}}}if(!this.geometryNormals){d.setCreaseAngle(Math.PI/2);d.setGeneratedNormals(true)}return d.getIndexedGeometryArray()};DAEHandler.prototype.getLinesGeometry=function(a){var h=this.getIndices(this.geometryVertexOffset);if(h.length!==0){var f=this.geometryTextureCoordinates?this.getIndices(this.geometryTextureCoordinatesOffset):[];if("linestrips"==a){var j=[];var b=[];for(var d=0,e=0;d<this.facesAndLinesPrimitives.length;d++){var g=this.facesAndLinesPrimitives[d].length/this.inputCount;for(var c=0;c<g-1;c++){j.push(h[e+c]);j.push(h[e+c+1]);if(textureCoordinateIndices.length>0){b.push(textureCoordinateIndices[e+c]);b.push(textureCoordinateIndices[e+c+1])}}e+=g}h=j;f=b}return new IndexedLineArray3D(this.geometryVertices,h,this.geometryTextureCoordinates,f)}else{return null}};DAEHandler.prototype.getIndices=function(f){if(this.facesAndLinesPrimitives.length===1&&this.polygonsPrimitives.length===1&&this.inputCount===1){return facesAndLinesPrimitives[0]}else{var m=this.getIndexCount(this.facesAndLinesPrimitives);m+=this.getIndexCount(this.polygonsPrimitives);for(var e=0;e<this.polygonsHoles.length;e++){m+=this.getIndexCount(this.polygonsHoles[e])}var o=new Array(m/this.inputCount);var e=0;for(var d=0;d<this.facesAndLinesPrimitives.length;d++){var n=this.facesAndLinesPrimitives[d];for(var c=f;c<n.length;c+=this.inputCount){o[e++]=n[c]}}for(var d=0;d<this.polygonsPrimitives.length;d++){var h=this.polygonsPrimitives[d];for(var c=f;c<h.length;c+=this.inputCount){o[e++]=h[c]}var g=this.polygonsHoles[d];for(var c=0;c<g.length;c++){var a=g[c];for(var b=f;b<a.length;b+=this.inputCount){o[e++]=a[b]}}}return o}};DAEHandler.prototype.getIndexCount=function(a){var c=0;for(var b=0;b<a.length;b++){c+=a[b].length}return c};DAEHandler.prototype.mulTransformGroup=function(b){var c=this.parentGroups[this.parentGroups.length-1];var a=mat4.create();c.getTransform(a);mat4.mul(a,a,b);c.setTransform(a)};DAEHandler.prototype.endDocument=function(){for(var b=0;b<this.postProcessingBinders.length;b++){this.postProcessingBinders[b]()}if(this.visualScene!==null){var g=mat4.create();this.visualScene.getTransform(g);var e=new BoundingBox3D(vec3.fromValues(Infinity,Infinity,Infinity),vec3.fromValues(-Infinity,-Infinity,-Infinity));this.computeBounds(this.visualScene,e,mat4.create());var a=vec3.create();e.getLower(a);if(a[0]!==Infinity){var d=vec3.create();e.getUpper(d);var h=mat4.create();mat4.translate(h,h,vec3.fromValues(-a[0]-(d[0]-a[0])/2,-a[1]-(d[1]-a[1])/2,-a[2]-(d[2]-a[2])/2));mat4.mul(h,h,g);g=h}var c=mat4.create();mat4.scale(c,c,vec3.fromValues(this.meterScale*100,this.meterScale*100,this.meterScale*100));mat4.mul(c,c,g);var f=mat4.create();if("Z_UP"==this.axis){mat4.fromXRotation(f,-Math.PI/2)}else{if("X_UP"==this.axis){mat4.fromZRotation(f,Math.PI/2)}}mat4.mul(f,f,c);this.visualScene.setTransform(f);this.sceneRoot.addChild(this.visualScene)}};DAEHandler.prototype.computeBounds=function(g,f,e){if(g instanceof Group3D){if(g instanceof TransformGroup3D){e=mat4.clone(e);var b=mat4.create();g.getTransform(b);mat4.mul(e,e,b)}var d=g.getChildren();for(var c=0;c<d.length;c++){this.computeBounds(d[c],f,e)}}else{if(g instanceof Link3D){this.computeBounds(g.getSharedGroup(),f,e)}else{if(g instanceof Shape3D){var a=g.getBounds();a.transform(e);f.combine(a)}}}};function Max3DSLoader(){ModelLoader.call(this,"3ds");if(Max3DSLoader.DEFAULT_APPEARANCE===null){Max3DSLoader.DEFAULT_APPEARANCE=new Appearance3D("Default");Max3DSLoader.DEFAULT_APPEARANCE.setAmbientColor(vec3.fromValues(0.4,0.4,0.4));Max3DSLoader.DEFAULT_APPEARANCE.setDiffuseColor(vec3.fromValues(0.7102,0.702,0.6531));Max3DSLoader.DEFAULT_APPEARANCE.setSpecularColor(vec3.fromValues(0.3,0.3,0.3));Max3DSLoader.DEFAULT_APPEARANCE.setShininess(128)}}Max3DSLoader.prototype=Object.create(ModelLoader.prototype);Max3DSLoader.prototype.constructor=Max3DSLoader;Max3DSLoader.NULL_CHUNK=0;Max3DSLoader.M3DMAGIC=19789;Max3DSLoader.MLIBMAGIC=15786;Max3DSLoader.CMAGIC=49725;Max3DSLoader.M3D_VERSION=2;Max3DSLoader.COLOR_FLOAT=16;Max3DSLoader.COLOR_24=17;Max3DSLoader.LINEAR_COLOR_24=18;Max3DSLoader.LINEAR_COLOR_FLOAT=19;Max3DSLoader.PERCENTAGE_INT=48;Max3DSLoader.PERCENTAGE_FLOAT=49;Max3DSLoader.EDITOR_DATA=15677;Max3DSLoader.MESH_VERSION=15678;Max3DSLoader.MASTER_SCALE=256;Max3DSLoader.MATERIAL_ENTRY=45055;Max3DSLoader.MATERIAL_NAME=40960;Max3DSLoader.MATERIAL_AMBIENT=40976;Max3DSLoader.MATERIAL_DIFFUSE=40992;Max3DSLoader.MATERIAL_SPECULAR=41008;Max3DSLoader.MATERIAL_SHININESS=41024;Max3DSLoader.MATERIAL_TRANSPARENCY=41040;Max3DSLoader.MATERIAL_TWO_SIDED=41089;Max3DSLoader.MATERIAL_TEXMAP=41472;Max3DSLoader.MATERIAL_MAPNAME=41728;Max3DSLoader.NAMED_OBJECT=16384;Max3DSLoader.TRIANGLE_MESH_OBJECT=16640;Max3DSLoader.POINT_ARRAY=16656;Max3DSLoader.FACE_ARRAY=16672;Max3DSLoader.MESH_MATERIAL_GROUP=16688;Max3DSLoader.SMOOTHING_GROUP=16720;Max3DSLoader.MESH_BOXMAP=16784;Max3DSLoader.TEXTURE_COORDINATES=16704;Max3DSLoader.MESH_MATRIX=16736;Max3DSLoader.MESH_COLOR=16741;Max3DSLoader.KEY_FRAMER_DATA=45056;Max3DSLoader.OBJECT_NODE_TAG=45058;Max3DSLoader.NODE_ID=45104;Max3DSLoader.NODE_HIERARCHY=45072;Max3DSLoader.PIVOT=45075;Max3DSLoader.POSITION_TRACK_TAG=45088;Max3DSLoader.ROTATION_TRACK_TAG=45089;Max3DSLoader.SCALE_TRACK_TAG=45090;Max3DSLoader.TRACK_KEY_USE_TENS=1;Max3DSLoader.TRACK_KEY_USE_CONT=2;Max3DSLoader.TRACK_KEY_USE_BIAS=4;Max3DSLoader.TRACK_KEY_USE_EASE_TO=8;Max3DSLoader.TRACK_KEY_USE_EASE_FROM=16;Max3DSLoader.DEFAULT_APPEARANCE=null;Max3DSLoader.prototype.createScene=function(j,b,d,s,c,l,r){var m=new Group3D();var n=mat4.create();mat4.fromXRotation(n,-Math.PI/2);mat4.scale(n,n,vec3.fromValues(c,c,c));var g=new TransformGroup3D(n);m.addChild(g);if(s.getChildren().length>0){g.addChild(s);g=s}var q={};for(var u in d){var o=d[u];var p=new Appearance3D(u);if(o.ambientColor!==null){p.setAmbientColor(o.ambientColor)}if(o.diffuseColor!==null){p.setDiffuseColor(o.diffuseColor)}if(o.shininess!==null){p.setShininess(o.shininess*128*0.6)}if(o.specularColor!==null){if(o.shininess!==null){var a=vec3.clone(o.specularColor);vec3.scale(a,a,o.shininess);p.setSpecularColor(a)}else{p.setSpecularColor(o.specularColor)}}if(o.transparency!==null&&o.transparency>0){p.setTransparency(Math.min(1,o.transparency))}if(o.texture){p.imageEntryName=o.texture}q[u]=p}if(l===null){r(ModelLoader.BUILDING_MODEL,"",0);for(var t=0;t<j.length;t++){this.createShapes(j[t],b,q,m,g)}r(ModelLoader.BUILDING_MODEL,"",1);return m}else{var e=j.length;var h=0;var k=this;var f=function(){r(ModelLoader.BUILDING_MODEL,"",e!==0?h/e:0);var i=Date.now();while(j.length>0){k.createShapes(j[0],b,q,m,g);h++;j.splice(0,1);if(h<e&&Date.now()-i>10){setTimeout(f,0);return}}setTimeout(function(){r(ModelLoader.BUILDING_MODEL,"",1);l(m)},0)};f()}};Max3DSLoader.prototype.createShapes=function(s,R,h,w,e){var J=mat4.create();var g=s.faces;if(g!==null&&g.length>0){var a=s.vertices;var S=new Array(a.length);for(var Q=0;Q<S.length;Q++){S[Q]=null}var F=new Array(3*g.length);var p=vec3.create();var m=vec3.create();for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;for(var P=0;P<3;P++,O++){var C=x[P];vec3.subtract(p,a[x[P<2?P+1:0]],a[C]);vec3.subtract(m,a[x[P>0?P-1:2]],a[C]);var G=vec3.create();vec3.cross(G,p,m);var n=vec3.length(G);if(n>0){var I=Math.atan2(n,vec3.dot(p,m));vec3.scale(G,G,I/n)}var c=new Max3DSLoader.Mesh3DSSharedVertex(Q,G);c.nextVertex=S[C];S[C]=c;F[O]=G}}var q=new Array(3*g.length);for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;var d=new Array(3);for(var P=0;P<3;P++,O++){var C=x[P];var G=vec3.create();if(f.smoothingGroup===null){for(var c=S[C];c!==null;c=c.nextVertex){if(g[c.faceIndex].smoothingGroup===null&&(c.normal===F[O]||vec3.dot(c.normal,F[O])>0)){vec3.add(G,G,c.normal)}}}else{var E=f.smoothingGroup;for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(f.smoothingGroup&L.smoothingGroup)!==0){E|=L.smoothingGroup}}for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(E&L.smoothingGroup)!==0){vec3.add(G,G,c.normal)}}}if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}else{vec3.copy(G,F[O]);if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}}q[O]=G;d[P]=O}f.normalIndices=d}g.sort(function(j,l){var k=j.material;var i=l.material;if(k===null){if(i===null){return j.index-l.index}else{return -1}}else{if(i===null){return 1}else{return 0}}});var K;var B=R[s.name];if(B===undefined){K=e}else{if(B.length===1){K=B[0]}else{var b=new SharedGroup3D();for(var Q=0;Q<B.length;Q++){B[Q].addChild(new Link3D(b))}K=b}}var z=s.transform;if(z!==null){if(!mat4.exactEquals(z,J)){var y=new TransformGroup3D(z);K.addChild(y);K=y}}var r=s.textureCoordinates;var Q=0;var o=null;var N=null;while(Q<g.length){var D=g[Q];var v=D.material;var u=Q;while(++u<g.length){if(v!==g[u].material){break}}var U=u-Q;var T=new Array(U*3);var d=new Array(U*3);for(var P=0,O=0;P<U;P++){var f=g[Q+P];var x=f.vertexIndices;var A=f.normalIndices;for(var M=0;M<3;M++,O++){T[O]=x[M];d[O]=A[M]}}var H=new GeometryInfo3D(GeometryInfo3D.TRIANGLE_ARRAY);H.setCoordinates(a);H.setCoordinateIndices(T);H.setNormals(q);H.setNormalIndices(d);if(r!==null){H.setTextureCoordinates(r);H.setTextureCoordinateIndices(T)}geometryArray=H.getIndexedGeometryArray();if(o===null||N!==v){N=v;var t=Max3DSLoader.DEFAULT_APPEARANCE;if(v!==null&&h[v.name]!==undefined){t=h[v.name]}t=t.clone();if(v!==null&&v.twoSided){t.setCullFace(Appearance3D.CULL_NONE)}o=new Shape3D(geometryArray,t);K.addChild(o);o.setName(s.name+(Q===0?"":"_"+Q))}else{o.addGeometry(geometryArray)}Q=u}}};Max3DSLoader.prototype.getModelContent=function(a){return a.asUint8Array()};Max3DSLoader.prototype.parseEntryScene=function(f,a,c,g,k,h){var d=[];var m={};var l={};var b;var i=new TransformGroup3D();if(k===null){h(ModelLoader.PARSING_MODEL,a,0);b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);h(ModelLoader.PARSING_MODEL,a,1);return this.createScene(d,m,l,i,b,null,h)}else{var j=this;b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);var e=function(){setTimeout(function(){h(ModelLoader.PARSING_MODEL,a,1);j.createScene(d,m,l,i,b,function(n){k(n)},h)},0)};e()}};Max3DSLoader.prototype.parse3DSStream=function(h,a,c,d,i,j,g){var b=1;try{var e=false;switch(h.readChunkHeader().id){case Max3DSLoader.M3DMAGIC:case Max3DSLoader.MLIBMAGIC:case Max3DSLoader.CMAGIC:e=true;while(!h.isChunckEndReached()){switch(h.readChunkHeader().id){case Max3DSLoader.M3D_VERSION:h.readLittleEndianUnsignedInt();break;case Max3DSLoader.EDITOR_DATA:this.parseEditorData(h,a,c,d,j);break;case Max3DSLoader.KEY_FRAMER_DATA:this.parseKeyFramerData(h,i,g);break;default:h.readUntilChunkEnd();break}h.releaseChunk()}break;case Max3DSLoader.EDITOR_DATA:b=this.parseEditorData(h,a,c,d,j);break;default:if(e){h.readUntilChunkEnd()}else{throw new IncorrectFormat3DException("Bad magic number")}}h.releaseChunk()}catch(f){d.length=0}return b};Max3DSLoader.prototype.parseEditorData=function(e,b,g,a,c){var d=1;while(!e.isChunckEndReached()){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_VERSION:e.readLittleEndianInt();break;case Max3DSLoader.MASTER_SCALE:d=e.readLittleEndianFloat();break;case Max3DSLoader.NAMED_OBJECT:this.parseNamedObject(e,a,c);break;case Max3DSLoader.MATERIAL_ENTRY:var f=this.parseMaterial(e,b,g);c[f.name]=f;break;default:e.readUntilChunkEnd();break}e.releaseChunk()}return d};Max3DSLoader.prototype.parseNamedObject=function(c,a,b){var d=c.readString();while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.TRIANGLE_MESH_OBJECT:a.push(this.parseMeshData(c,d,b));break;default:c.readUntilChunkEnd();break}c.releaseChunk()}};Max3DSLoader.prototype.parseMeshData=function(l,a,o){var k=null;var e=null;var c=null;var f=null;var d=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATRIX:c=this.parseMatrix(l);c=mat4.invert(c,c);break;case Max3DSLoader.MESH_COLOR:f=l.readUnsignedByte();break;case Max3DSLoader.POINT_ARRAY:k=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<k.length;g++){k[g]=vec3.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;case Max3DSLoader.FACE_ARRAY:d=this.parseFacesData(l);while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATERIAL_GROUP:var m=l.readString();var j=null;if(o!==null){j=o[m]}for(var g=0,b=l.readLittleEndianUnsignedShort();g<b;g++){var h=l.readLittleEndianUnsignedShort();if(h<d.length){d[h].material=j}}break;case Max3DSLoader.SMOOTHING_GROUP:for(var g=0;g<d.length;g++){d[g].smoothingGroup=l.readLittleEndianUnsignedInt()}break;case Max3DSLoader.MESH_BOXMAP:default:l.readUntilChunkEnd();break}l.releaseChunk()}break;case Max3DSLoader.TEXTURE_COORDINATES:e=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<e.length;g++){e[g]=vec2.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;default:l.readUntilChunkEnd();break}l.releaseChunk()}return new Max3DSLoader.Mesh3DS(a,k,e,d,f,c)};Max3DSLoader.prototype.parseKeyFramerData=function(p,b,s){var l=[];var k=[];var j=null;while(!p.isChunckEndReached()){switch(p.readChunkHeader().id){case Max3DSLoader.OBJECT_NODE_TAG:var v=true;var h=null;var y=null;var f=0;var x=null;var z=null;var n=-1;while(!p.isChunckEndReached()){switch(p.readChunkHeader().id){case Max3DSLoader.NODE_ID:n=p.readLittleEndianShort();break;case Max3DSLoader.NODE_HIERARCHY:var w=p.readString();v="$$$DUMMY"!=w;p.readLittleEndianUnsignedShort();p.readLittleEndianUnsignedShort();var u=p.readLittleEndianShort();var m=new TransformGroup3D();if(u===-1){s.addChild(m)}else{var q=false;for(var t=0;t<k.length;t++){if(u===k[t]){l[t].addChild(m);q=true;break}}if(!q){throw new IncorrectFormat3DException("Inconsistent nodes hierarchy")}}k.push(n);l.push(m);if(v){var e=b[w];if(e===undefined){e=[];b[w]=e}e.push(m)}j=m;break;case Max3DSLoader.PIVOT:h=this.parseVector(p);break;case Max3DSLoader.POSITION_TRACK_TAG:this.parseKeyFramerTrackStart(p);y=this.parseVector(p);p.readUntilChunkEnd();break;case Max3DSLoader.ROTATION_TRACK_TAG:this.parseKeyFramerTrackStart(p);f=p.readLittleEndianFloat();x=this.parseVector(p);p.readUntilChunkEnd();break;case Max3DSLoader.SCALE_TRACK_TAG:this.parseKeyFramerTrackStart(p);z=this.parseVector(p);p.readUntilChunkEnd();break;default:p.readUntilChunkEnd();break}p.releaseChunk()}var o=mat4.create();if(y!==null){mat4.translate(o,o,y)}if(x!==null&&f!==0){var d=vec3.length(x);if(d>0){var r=-f/2;var a=Math.sin(r)/d;var c=Math.cos(r);var g=mat4.create();mat4.fromQuat(g,quat.fromValues(x[0]*a,x[1]*a,x[2]*a,c));mat4.mul(o,o,g)}}if(z!==null){mat4.scale(o,o,z)}if(h!==null&&v){vec3.negate(h,h);mat4.translate(o,o,h)}j.setTransform(o);break;default:p.readUntilChunkEnd();break}p.releaseChunk()}};Max3DSLoader.prototype.parseKeyFramerTrackStart=function(b){b.readLittleEndianUnsignedShort();b.readLittleEndianUnsignedInt();b.readLittleEndianUnsignedInt();b.readLittleEndianInt();b.readLittleEndianInt();var a=b.readLittleEndianUnsignedShort();if((a&Max3DSLoader.TRACK_KEY_USE_TENS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_CONT)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_BIAS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_TO)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_FROM)!==0){b.readLittleEndianFloat()}};Max3DSLoader.prototype.parseFacesData=function(b){var a=new Array(b.readLittleEndianUnsignedShort());for(var c=0;c<a.length;c++){a[c]=new Max3DSLoader.Face3DS(c,b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort())}return a};Max3DSLoader.prototype.parseMaterial=function(j,a,c){var b=null;var g=null;var h=null;var e=null;var k=null;var d=null;var f=false;var i=null;while(!j.isChunckEndReached()){switch(j.readChunkHeader().id){case Max3DSLoader.MATERIAL_NAME:b=j.readString();break;case Max3DSLoader.MATERIAL_AMBIENT:g=this.parseColor(j);break;case Max3DSLoader.MATERIAL_DIFFUSE:h=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SPECULAR:e=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SHININESS:k=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TRANSPARENCY:d=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TWO_SIDED:f=true;break;case Max3DSLoader.MATERIAL_TEXMAP:i=this.parseTextureMap(j,a,c);break;default:j.readUntilChunkEnd();break}j.releaseChunk()}return new Max3DSLoader.Material3DS(b,g,h,e,k,d,i,f)};Max3DSLoader.prototype.parseColor=function(c){var d=false;var b=null;var a;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.LINEAR_COLOR_24:d=true;b=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);break;case Max3DSLoader.COLOR_24:a=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);if(!d){b=a}break;case Max3DSLoader.LINEAR_COLOR_FLOAT:d=true;b=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());break;case Max3DSLoader.COLOR_FLOAT:a=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());if(!d){b=a}break;default:c.readUntilChunkEnd();break}c.releaseChunk()}if(b!==null){return b}else{throw new IncorrectFormat3DException("Expected color value")}};Max3DSLoader.prototype.parsePercentage=function(b){var a=null;while(!b.isChunckEndReached()){switch(b.readChunkHeader().id){case Max3DSLoader.PERCENTAGE_INT:a=b.readLittleEndianShort()/100;break;case Max3DSLoader.PERCENTAGE_FLOAT:a=b.readLittleEndianFloat();break;default:b.readUntilChunkEnd();break}b.releaseChunk()}if(a!==null){return a}else{throw new IncorrectFormat3DException("Expected percentage value")}};Max3DSLoader.prototype.parseTextureMap=function(c,b,f){var e=null;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.MATERIAL_MAPNAME:e=c.readString();break;case Max3DSLoader.PERCENTAGE_INT:default:c.readUntilChunkEnd();break}c.releaseChunk()}if(e!==null){var a=b.lastIndexOf("/");if(a>=0){e=b.substring(0,a+1)+e}var d=f.file(e);if(d!==null){return e}else{return this.getEntryNameIgnoreCase(f,e)}}return null};Max3DSLoader.prototype.getEntryNameIgnoreCase=function(c,d){d=d.toUpperCase();var a=c.file(/.*/);for(var b=0;b<a.length;b++){if(a[b].name.toUpperCase()==d){return a[b].name}}return null};Max3DSLoader.prototype.parseMatrix=function(a){return mat4.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),1)};Max3DSLoader.prototype.parseVector=function(a){return vec3.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat())};Max3DSLoader.Chunk3DS=function(b,a){if(a<6){throw new IncorrectFormat3DException("Invalid chunk "+b+" length "+a)}this.id=b;this.length=a;this.readLength=6};Max3DSLoader.Chunk3DS.prototype.incrementReadLength=function(a){this.readLength+=a};Max3DSLoader.Chunk3DS.prototype.toString=function(){return this.id+" "+this.length};Max3DSLoader.ChunksInputStream=function(a){this.input=a;this.index=0;this.stack=[]};Max3DSLoader.ChunksInputStream.prototype.read=function(){if(this.index>=this.input.length){return -1}else{return this.input[this.index++]}};Max3DSLoader.ChunksInputStream.prototype.readChunkHeader=function(){var a=this.readLittleEndianUnsignedShort(false);var b=new Max3DSLoader.Chunk3DS(a,this.readLittleEndianUnsignedInt(false));this.stack.push(b);return b};Max3DSLoader.ChunksInputStream.prototype.releaseChunk=function(){var a=this.stack.pop();if(a.length!==a.readLength){throw new IncorrectFormat3DException("Chunk "+a.id+" invalid length. Expected to read "+a.length+" bytes, but actually read "+a.readLength+" bytes")}if(this.stack.length!==0){this.stack[this.stack.length-1].incrementReadLength(a.length)}};Max3DSLoader.ChunksInputStream.prototype.isChunckEndReached=function(){var a=this.stack[this.stack.length-1];return a.length===a.readLength};Max3DSLoader.ChunksInputStream.prototype.readUntilChunkEnd=function(){var a=this.stack[this.stack.length-1];var c=a.length-a.readLength;for(var b=c;b>0;b--){if(this.read()<0){throw new IncorrectFormat3DException("Chunk "+a.id+" too short")}}a.incrementReadLength(c)};Max3DSLoader.ChunksInputStream.prototype.readUnsignedByte=function(){var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Unexpected EOF")}else{this.stack[this.stack.length-1].incrementReadLength(1);return a}};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedShort=function(c){if(c===undefined){c=true}var b=this.read();if(b===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Can't read short")}if(c){this.stack[this.stack.length-1].incrementReadLength(2)}return(a<<8)|b};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianShort=function(b){var a=this.readLittleEndianUnsignedShort(b);if(a&32768){a=(-1&~32767)|a}return a};Max3DSLoader.ChunksInputStream.converter=new Int8Array(4);Max3DSLoader.ChunksInputStream.int32Converter=new Int32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.float32Converter=new Float32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.prototype.readLittleEndianFloat=function(){Max3DSLoader.ChunksInputStream.int32Converter[0]=this.readLittleEndianUnsignedInt(true);return Max3DSLoader.ChunksInputStream.float32Converter[0]};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedInt=function(e){if(e===undefined){e=true}var d=this.read();if(d===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var c=this.read();var b=this.read();var a=this.read();if(c===-1||b===-1||a===-1){throw new IncorrectFormat3DException("Can't read int")}if(e){this.stack[this.stack.length-1].incrementReadLength(4)}return(a<<24)|(b<<16)|(c<<8)|d};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianInt=function(b){var a=this.readLittleEndianUnsignedInt(b);if(a&2147483648){a=(-1&~2147483647)|a}return a};Max3DSLoader.ChunksInputStream.prototype.readString=function(){var c="";var a;while((a=this.read())!==-1&&a!==0){c+=String.fromCharCode(a)}if(a===-1){throw new IncorrectFormat3DException("Unexpected end of file")}this.stack[this.stack.length-1].incrementReadLength(c.length+1);return c};Max3DSLoader.Mesh3DS=function(f,e,b,a,c,d){this.name=f;this.vertices=e;this.textureCoordinates=b;this.faces=a;this.color=c;this.transform=d};Max3DSLoader.Face3DS=function(e,d,b,c,a){this.index=e;this.vertexIndices=[d,b,c];this.normalIndices=null;this.material=null;this.smoothingGroup=null};Max3DSLoader.Material3DS=function(d,c,g,h,e,b,f,a){this.name=d;this.ambientColor=c;this.diffuseColor=g;this.specularColor=h;this.shininess=e;this.transparency=b;this.texture=f;this.twoSided=a};Max3DSLoader.Mesh3DSSharedVertex=function(a,b){this.faceIndex=a;this.normal=b;this.nextVertex=null};var ShapeTools={parsedShapes:{}};ShapeTools.getStroke=function(h,j,d,a,b){var f;switch(j){case Polyline.CapStyle.ROUND:f=java.awt.BasicStroke.CAP_ROUND;break;case Polyline.CapStyle.SQUARE:f=java.awt.BasicStroke.CAP_SQUARE;break;default:f=java.awt.BasicStroke.CAP_BUTT;break}var e;switch(d){case Polyline.JoinStyle.ROUND:case Polyline.JoinStyle.CURVED:e=java.awt.BasicStroke.JOIN_ROUND;break;case Polyline.JoinStyle.BEVEL:e=java.awt.BasicStroke.JOIN_BEVEL;break;default:e=java.awt.BasicStroke.JOIN_MITER;break}var g=0;if(a!=null){if(!Array.isArray(a)){a=undefined;g=undefined}else{a=a.slice(0);for(var c=0;c<a.length;c++){a[c]*=h;g+=a[c]}g*=b}}return new java.awt.BasicStroke(h,f,e,10,a,g)};ShapeTools.getPolylineShape=function(o,j,h){if(j){var c=new java.awt.geom.GeneralPath();for(var f=0,a=h?o.length:o.length-1;f<a;f++){var g=new java.awt.geom.CubicCurve2D.Float();var d=o[f===0?o.length-1:f-1];var m=o[f];var k=o[f===o.length-1?0:f+1];var l=[k[0]-d[0],k[1]-d[1]];var b=o[(f+2)%o.length];var e=[m[0]-b[0],m[1]-b[1]];g.setCurve(m[0],m[1],m[0]+(f!==0||h?l[0]/3.625:0),m[1]+(f!==0||h?l[1]/3.625:0),k[0]+(f!==o.length-2||h?e[0]/3.625:0),k[1]+(f!==o.length-2||h?e[1]/3.625:0),k[0],k[1]);c.append(g,true)}return c}else{return ShapeTools.getShape(o,h,null)}};ShapeTools.getShape=function(j,e,c){if(j instanceof Array){var k=new java.awt.geom.GeneralPath();k.moveTo(Math.fround(j[0][0]),Math.fround(j[0][1]));for(var d=1;d<j.length;d++){k.lineTo(Math.fround(j[d][0]),Math.fround(j[d][1]))}if(e){k.closePath()}if(c!=null){k.transform(c)}return k}else{var g=j;var b=ShapeTools.parsedShapes[g];if(!b){b=new java.awt.geom.Rectangle2D.Float(0,0,1,1);try{var a=new org.apache.batik.parser.AWTPathProducer();var h=new org.apache.batik.parser.PathParser();h.setPathHandler(a);h.parse(g);b=a.getShape()}catch(f){}ShapeTools.parsedShapes[g]=b}return b}};function HomeRecorder(a){this.configuration=a!==undefined?a:{}}HomeRecorder.READING_HOME="Reading home";HomeRecorder.PARSING_HOME="Parsing home";HomeRecorder.prototype.readHome=function(d,c){if(c.progression!==undefined){c.progression(HomeRecorder.READING_HOME,d,0)}var b="Home.xml";if(d.indexOf("jar:")===0){var e=d.indexOf("!/");b=d.substring(e+2);d=d.substring(4,e)}var a=this;ZIPTools.getZIP(d,{zipReady:function(h){try{var i=h.file(b);if(i!==null){var g={homeLoaded:function(j){a.replaceHomeContents(j,d,c)},homeError:function(j){if(c.homeError!==undefined){c.homeError(j)}},progression:function(k,l,j){if(c.progression!==undefined){c.progression(j)}}};a.parseHomeXMLEntry(i,h,d,typeof ContentDigestManager==="undefined"?c:g)}else{this.zipError(new Error("No "+b+" entry in "+d))}}catch(f){this.zipError(f)}},zipError:function(f){if(c.homeError!==undefined){c.homeError(f)}},progression:function(g,h,f){if(c.progression!==undefined){c.progression(HomeRecorder.READING_HOME,d,f)}}})};HomeRecorder.prototype.parseHomeXMLEntry=function(h,e,f,b){var g=h.asText();if(b.progression!==undefined){b.progression(HomeRecorder.READING_HOME,h.name,1);b.progression(HomeRecorder.PARSING_HOME,h.name,0)}var d=this.getHomeXMLHandler();d.homeUrl=f;var a=new SAXParser(d,d,d,d,d);try{g=g.replace(/\'/g,'"');a.parseString(g);b.homeLoaded(d.getHome())}catch(c){if(b.homeError!==undefined){b.homeError(c)}}if(b.progression!==undefined){b.progression(HomeRecorder.PARSING_HOME,h.name,1)}};HomeRecorder.prototype.getHomeXMLHandler=function(){return new HomeXMLHandler()};HomeRecorder.cacheResourcesStoredInContentDigestManager=false;HomeRecorder.prototype.replaceHomeContents=function(E,e,y){if(!HomeRecorder.cacheResourcesStoredInContentDigestManager&&this.configuration.listCacheResourcesURL&&this.configuration.readCacheResourceURL){var k=this;var f=ContentDigestManager.getInstance();var g=this.configuration.listCacheResourcesURL;if(g.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)===0){var u=g.substring(g.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)+LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length);var m=new RegExp(u.indexOf("?")>0?u.substring(0,u.indexOf("?")):u);var A=Object.getOwnPropertyNames(localStorage);var w=[];for(var B=0;B<A.length;B++){var r=A[B].match(m);if(r){w.push(A[B])}}if(w.length>0){for(var B=w.length-1;B>=0;B--){var I=localStorage.getItem(w[B]);var D=I.substring("data:".length,I.indexOf(";"));var t=atob(I.substring(I.indexOf(",")+1));var o=new Array(t.length);for(var z=0;z<o.length;z++){o[z]=t.charCodeAt(z)}var q=new Uint8Array(o);var s=new BlobURLContent(new Blob([q],{type:D}));f.getContentDigest(s,{key:w[B],blobContentUrl:s,digestReady:function(J,K){URL.revokeObjectURL(this.blobContentUrl);var j=this.key.match(m);var i=URLContent.fromURL(CoreTools.format(k.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(j.length>1?j[1]:j[0])));f.setContentDigest(i,K);w.splice(w.lastIndexOf(this.key),1);if(w.length===0){k.replaceOrExtractHomeContents(E,e,y)}},digestError:function(i,j){URL.revokeObjectURL(this.blobContentUrl);console.warn("Can't retrieve cache content digest: "+j)}})}}else{k.replaceOrExtractHomeContents(E,e,y)}}else{if(g.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)===0){var H=g.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)+IndexedDBURLContent.INDEXED_DB_PREFIX.length;var v=g.indexOf("/",H);var F=g.indexOf("?",v+1);var b=g.indexOf("=",F+1);var l=g.indexOf("&",b+1);var G=g.substring(H,v);var d=g.substring(v+1,F);var n=g.substring(F+1,b);var m=new RegExp(g.substring(b+1,l>0?l:g.length));var x=function(i){var j=i.target.result;if(!j.objectStoreNames.contains(d)){j.createObjectStore(d,{keyPath:n})}};var C=function(i){console.warn("Can't connect to database "+G);k.replaceOrExtractHomeContents(E,e,y)};var a=function(J){var M=J.target.result;try{if(!M.objectStoreNames.contains(d)){M.close();var L=indexedDB.open(G,M.version+1);L.addEventListener("upgradeneeded",x);L.addEventListener("error",C);L.addEventListener("success",a)}else{var N=M.transaction(d,"readonly");var i=N.objectStore(d);var K;K=i.openCursor();K.addEventListener("success",function(R){var S=R.target.result;if(S!=null){var Q=S.primaryKey.match(m);if(Q){var P=Q.length>1?Q[1]:Q[0];var O=URLContent.fromURL(CoreTools.format(k.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(P)));f.setContentDigest(O,S.value.digest)}S["continue"]()}else{k.replaceOrExtractHomeContents(E,e,y)}});K.addEventListener("error",function(O){console.warn("Can't query in "+d);k.replaceOrExtractHomeContents(E,e,y)});N.addEventListener("complete",function(O){M.close()})}}catch(j){console.warn("Issue in "+d+": "+j.message);k.replaceOrExtractHomeContents(E,e,y)}};if(indexedDB!=null){var c=indexedDB.open(G);c.addEventListener("upgradeneeded",x);c.addEventListener("error",C);c.addEventListener("success",a)}else{if(y.homeError!==undefined){console.warn("indexedDB unavailable");k.replaceOrExtractHomeContents(E,e,y)}}}else{var c=new XMLHttpRequest();var p=g.indexOf("?")!=-1?"&":"?";c.open("GET",g+p+"requestId="+UUID.randomUUID(),true);c.addEventListener("load",function(L){if(c.readyState===XMLHttpRequest.DONE&&c.status===200){var M=JSON.parse(c.responseText);for(var K=0;K<M.length;K++){var J=M[K].name;var j=URLContent.fromURL(CoreTools.format(k.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(J)));f.setContentDigest(j,M[K].digest)}}else{if(y.homeError!==undefined){console.warn("Error while requesting "+g)}}k.replaceOrExtractHomeContents(E,e,y)});if(y.homeError!==undefined){var h=function(i){console.warn("Error while requesting "+g);k.replaceOrExtractHomeContents(E,e,y)};c.addEventListener("error",h);c.addEventListener("timeout",h)}c.send();return c}}HomeRecorder.cacheResourcesStoredInContentDigestManager=true}else{this.replaceOrExtractHomeContents(E,e,y)}};HomeRecorder.prototype.replaceOrExtractHomeContents=function(h,g,d){var a=[];this.searchContents(h,[],a,function(i){return i instanceof HomeURLContent});if(a.length>0){var c=this;var f=a.slice(0).reverse();var b=ContentDigestManager.getInstance();for(var e=f.length-1;e>=0;e--){b.getContentDigest(f[e],{homeContent:f[e],digestReady:function(r,q){f.splice(f.lastIndexOf(r),1);if(f.length===0){var v=[];c.searchContents(h,[],v,function(j){return j instanceof HomeURLContent&&b.getPermanentContentDigest(j)!=null},function(w){var j=b.getPermanentContentDigest(w);if(j.getURL().indexOf(".extract",j.getURL().length-".extract".length)>0){return URLContent.fromURL("jar:"+j.getURL()+"!/data")}else{if(w.isJAREntry()&&w.getJAREntryName().indexOf("/")>0&&!j.isJAREntry()){return URLContent.fromURL("jar:"+j.getURL()+"!/"+w.getJAREntryName().substring(w.getJAREntryName().indexOf("/")+1))}else{return j}}});var u=a.length-v.length;if(u>0&&c.configuration.readCacheResourceURL&&c.configuration.writeCacheResourceURL){var i=c.configuration.writeCacheResourceURL.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)<0&&c.configuration.writeCacheResourceURL.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0?5:0;var s=function(){if(--u===0){ZIPTools.disposeZIP(g);c.searchContents(h,[],v,function(j){return j instanceof HomeURLContent},function(w){var j=n[w.getURL()];return j!==undefined?j:w});d.homeLoaded(h)}};var l=function(x,j,w,z){var y=UUID.randomUUID();if(z!=null){y+=z}b.getContentDigest(x,{digestReady:function(A,B){new BlobURLContent(j).writeBlob(c.configuration.writeCacheResourceURL,[y,B],{blobSaved:function(E,F){var D=CoreTools.format(c.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(F));if(w!=null){D="jar:"+D+"!/"+w}var C=URLContent.fromURL(D);n[x.getURL()]=C;b.setContentDigest(C,B);s()},blobError:function(C,D){console.warn("Can't saved all home extracted data: "+D);s()}})}})};var n={};for(var p=0;p<a.length;p++){var t=a[p];if(v.indexOf(t)<0){var k=t.getJAREntryName();var m=k.indexOf("/");if(m>0){var o=new JSZip();c.writeHomeZipEntries(o,"",t,{blobContentEntryName:k.substring(m+1),contentSaved:function(j){l(j,c.generateZip(o,i,"blob"),this.blobContentEntryName)},contentError:function(j,w){console.warn("Can't extract all home data: "+w);s()}})}else{t.getStreamURL({homeContent:t,urlReady:function(w){if(w.indexOf("jar:")===0){var x=w.indexOf("!/");var y=decodeURIComponent(w.substring(x+2));var j=w.substring(4,x);ZIPTools.getZIP(j,false,{homeContent:this.homeContent,zipReady:function(C){try{var z=C.file(y);var D=z.asUint8Array();if(ZIPTools.isPNGImage(D)||ZIPTools.isGIFImage(D)||ZIPTools.isJPEGImage(D)||ZIPTools.isBMPImage(D)){l(this.homeContent,new Blob([D]))}else{var A=new JSZip();c.writeZipEntry(A,"data",this.homeContent,{contentSaved:function(E){l(E,c.generateZip(A,i,"blob"),"data",".extract")},contentError:function(E,F){console.warn("Can't extract all home data: "+F);s()}})}}catch(B){this.zipError(B)}},zipError:function(z){console.warn("Can't extract all home data: "+z);s()}})}},urlError:function(j,w){console.warn("Can't extract all home data: "+w);s()}})}}}}else{ZIPTools.disposeZIP(g);d.homeLoaded(h)}}},digestError:function(i,j){console.warn("Can't retrieve home content digest: "+j);f.splice(f.lastIndexOf(this.homeContent),1);if(f.length===0){d.homeLoaded(h)}}})}}else{d.homeLoaded(h)}};HomeRecorder.prototype.writeHome=function(m,h,l){var g=this.configuration.includeAllContent!==undefined?this.configuration.includeAllContent:true;var n=this.configuration.writeDataType!==undefined?this.configuration.writeDataType:"blob";var d=[];this.searchContents(m,[],d);var b=false;var o=null;if(d.length>0){var p=this;var f=d.slice(0);var k=[];var a={};var q=0;var c=ContentDigestManager.getInstance();for(var e=f.length-1;e>=0;e--){var j=f[e];if(j instanceof LocalURLContent||(j.isJAREntry()&&URLContent.fromURL(j.getJAREntryURL()) instanceof LocalURLContent)||j instanceof HomeURLContent||j instanceof SimpleURLContent||g){c.getContentDigest(j,{digestReady:function(w,v){var u=false;if(v!==undefined){for(var s=0;s<k.length;s++){var y=k[s];if(w.getURL()!==y.getURL()&&c.equals(w,y)){a[w.getURL()]=a[y.getURL()];d.splice(d.indexOf(w),1);u=true;break}}}if(!u){var r="";if(w.isJAREntry()){var x=w.getJAREntryName();if(w instanceof HomeURLContent){var i=x.indexOf("/");if(i>0){r=x.substring(i)}}else{if(!(w instanceof SimpleURLContent)){r="/"+x}}}var t=q+++r;a[w.getURL()]=t;k.push(w)}f.splice(f.lastIndexOf(w),1);if(f.length===0&&!b){o=p.writeHomeToZip(m,h,d,a,n,l)}},digestError:function(i,r){if(l.homeError!==undefined){l.homeError(i,r)}}})}else{d.splice(e,1);f.splice(f.lastIndexOf(j),1);if(f.length===0&&!b){o=p.writeHomeToZip(m,h,d,a,n,l)}}}}else{o=this.writeHomeToZip(m,h,d,{},n,l)}return{abort:function(){b=true;if(o!=null){o.abort()}}}};HomeRecorder.prototype.writeHomeToZip=function(o,j,n,b,p,m){var h=o.clone();h.setName(j);var f=new StringWriter();var c=this.getHomeXMLExporter();c.setSavedContentNames(b);c.writeElement(new XMLWriter(f),h);var k=f.toString();if((!OperatingSystem.isInternetExplorer()||n.length==0)&&this.configuration.writeHomeWithWorker){if(this.writeHomeWorker==null){var a=new Blob(["importScripts('"+ZIPTools.getScriptFolder()+"jszip.min.js');importScripts('"+(document.getElementById("recorder-worker")!=null?document.getElementById("recorder-worker").src:ZIPTools.getScriptFolder("URLContent.js")+"URLContent.js', '"+ZIPTools.getScriptFolder("HomeRecorder.js")+"HomeRecorder.js")+"');onmessage = function(ev) {  new HomeRecorder(ev.data.recorderConfiguration).generateHomeZip(      ev.data.homeXmlEntry, ev.data.homeContents, ev.data.homeContentTypes, ev.data.savedContentNames, ev.data.dataType, {         homeSaved: function(homeXmlEntry, data) {            postMessage(data);         },         homeError: function(status, error) {            postMessage({status: status, error: error});         }    });}"],{type:"text/plain"});this.writeHomeWorker=new Worker(URL.createObjectURL(a))}var q=this;var l=function(i){q.writeHomeWorker.removeEventListener("message",l);if(i.data.error){if(i.data.error==="indexedDB unavailable"){console.warn("Can't use worker to save home");q.writeHomeToZipWithoutWorker(o,k,n,b,p,m)}else{if(m.homeError!==undefined){m.homeError(i.data.status,i.data.error)}}}else{m.homeSaved(o,i.data)}};this.writeHomeWorker.addEventListener("message",l);var e=new Array(n.length);for(var g=0;g<n.length;g++){var d=Object.getPrototypeOf(n[g]).constructor;if(d!==undefined&&d.name!==undefined){e[g]=d.name}else{e[g]=n[g].constructor.toString().match(/function (\w*)/)[1]}}this.writeHomeWorker.postMessage({recorderConfiguration:this.configuration,homeXmlEntry:k,homeContents:n,homeContentTypes:e,savedContentNames:b,dataType:p});return{abort:function(){if(q.writeHomeWorker!=null){q.writeHomeWorker.terminate()}q.writeHomeWorker=null}}}else{this.writeHomeToZipWithoutWorker(o,k,n,b,p,m)}};HomeRecorder.prototype.writeHomeToZipWithoutWorker=function(f,e,a,d,c,b){this.generateHomeZip(e,a,null,d,c,{homeSaved:function(h,g){b.homeSaved(f,g)},homeError:function(g,h){if(b.homeError!==undefined){b.homeError(g,h)}}});return{abort:function(){}}};HomeRecorder.prototype.generateHomeZip=function(l,n,e,b,o,m){var j=new JSZip();j.file("Home.xml",l);if(n.length>0){if(e!==null){for(var g=0;g<n.length;g++){var h=b[n[g].url];switch(e[g]){case"SimpleURLContent":n[g]=new SimpleURLContent(n[g].url);break;case"HomeURLContent":n[g]=new HomeURLContent(n[g].url);break;case"BlobURLContent":n[g]=new BlobURLContent(n[g].blob);break;default:n[g]=URLContent.fromURL(n[g].url);if(n[g] instanceof LocalStorageURLContent){m.homeError(0,"Data from localstorage not supported in workers");return}break}b[n[g].getURL()]=h}}var p=this;var f=n.slice(0).reverse();var a={contentSaved:function(i){f.splice(f.lastIndexOf(i),1);if(f.length===0){m.homeSaved(l,p.generateZip(j,p.configuration.compressionLevel,o))}},contentError:function(i,q){m.homeError(i,q)}};for(var g=f.length-1;g>=0;g--){var k=f[g];var c=b[k.getURL()];if(c!==undefined){var d=c.indexOf("/");if(d>0){c=c.substring(0,d)}if(!(k instanceof SimpleURLContent)&&k.isJAREntry()){if(k instanceof HomeURLContent){this.writeHomeZipEntries(j,c,k,a)}else{this.writeZipEntries(j,c,k,a)}}else{this.writeZipEntry(j,c,k,a)}}else{a.contentSaved(k)}}}else{m.homeSaved(l,this.generateZip(j,this.configuration.compressionLevel,o))}};HomeRecorder.prototype.generateZip=function(d,e,b){var a=e!==undefined&&e===0?"STORE":"DEFLATE";var c=e!==undefined?e:1;return d.generate({type:b,compression:a,compressionOptions:{level:c}})};HomeRecorder.prototype.writeHomeZipEntries=function(f,b,e,a){var g=e.getJAREntryName();var d=g.indexOf("/");if(d>0){var c=e.getJAREntryURL();var i=g.substring(0,d+1);var h=this;URLContent.fromURL(e.getJAREntryURL()).getStreamURL({urlReady:function(j){ZIPTools.getZIP(j,false,{zipReady:function(o){try{var k=o.file(new RegExp("^"+i+".*")).reverse();for(var n=k.length-1;n>=0;n--){var p=k[n];var m=new URLContent("jar:"+c+"!/"+encodeURIComponent(p.name).replace("+","%20"));h.writeZipEntry(f,b.length>0?b+p.name.substring(d):p.name.substring(d+1),m,{zipEntry:p,contentSaved:function(q){k.splice(k.lastIndexOf(this.zipEntry),1);if(k.length===0){a.contentSaved(e)}},contentError:function(q,r){a.contentError(q,r)}})}}catch(l){this.zipError(l)}},zipError:function(k){a.contentError(k,k.message)}})},urlError:function(j,k){a.contentError(j,k)}})}else{this.writeZipEntry(f,b,e,a)}};HomeRecorder.prototype.writeZipEntries=function(e,a,c,d){var b=this;URLContent.fromURL(c.getJAREntryURL()).getStreamURL({urlReady:function(f){ZIPTools.getZIP(f,false,{zipReady:function(l){try{var g=l.file(/.*/).reverse();for(var k=g.length-1;k>=0;k--){var m=g[k];var j=new URLContent("jar:"+c.getJAREntryURL()+"!/"+encodeURIComponent(m.name).replace("+","%20"));b.writeZipEntry(e,a+"/"+m.name,j,{zipEntry:m,contentSaved:function(i){g.splice(g.lastIndexOf(this.zipEntry),1);if(g.length===0){d.contentSaved(c)}},contentError:function(i,n){d.contentError(i,n)}})}}catch(h){this.zipError(h)}},zipError:function(g){d.contentError(g,g.message)}})},urlError:function(f,g){d.contentError(f,g)}})};HomeRecorder.prototype.writeZipEntry=function(d,c,b,a){b.getStreamURL({urlReady:function(f){if(f.indexOf("jar:")===0){var h=f.indexOf("!/");var i=decodeURIComponent(f.substring(h+2));var e=f.substring(4,h);ZIPTools.getZIP(e,false,{zipReady:function(l){try{var j=l.file(i);d.file(c,j.asUint8Array(),{binary:true});a.contentSaved(b)}catch(k){this.zipError(k)}},zipError:function(j){a.contentError(j,j.message)}})}else{var g=new XMLHttpRequest();g.open("GET",f,true);g.responseType="arraybuffer";g.addEventListener("load",function(){d.file(c,g.response);a.contentSaved(b)});g.send()}},urlError:function(e,f){a.contentError(e,f)}})};HomeRecorder.prototype.getHomeXMLExporter=function(){return new HomeXMLExporter()};HomeRecorder.prototype.searchContents=function(e,a,c,m,h){if(Array.isArray(e)){for(var g=0;g<e.length;g++){var l=this.searchContents(e[g],a,c,m,h);if(l!==null){e[g]=l}}}else{if(e instanceof URLContent&&(m===undefined||m(e))){var g=0;for(;g<c.length;g++){if(c[g].getURL()==e.getURL()){break}}if(g===c.length){c.push(e)}if(h!==undefined){return h(e)}else{return null}}else{if(e!=null&&typeof e!=="number"&&typeof e!=="string"&&typeof e!=="boolean"&&typeof e!=="function"&&!(e instanceof URLContent)&&a.indexOf(e)<0){a.push(e);var b=Object.getOwnPropertyNames(e);for(var f=0;f<b.length;f++){var k=b[f];if(k=="object3D"||e.constructor&&e.constructor.__transients&&e.constructor.__transients.indexOf(k)!=-1){continue}var d=e[k];var l=this.searchContents(d,a,c,m,h);if(l!==null){e[k]=l}}}}}return null};function HomeComponent3D(e,d,c,b,a){this.home=d;this.preferences=c;this.object3dFactory=b!==null?b:new Object3DBranchFactory(c);this.homeObjects=[];this.homeObjects3D=[];this.sceneLights=[];this.camera=null;this.windowResizeListener=null;this.preferencesChangeListener=null;this.cameraChangeListener=null;this.homeCameraListener=null;this.groundChangeListener=null;this.backgroundChangeListener=null;this.lightColorListener=null;this.elevationChangeListener=null;this.wallsAlphaListener=null;this.selectionListener=null;this.levelListener=null;this.levelChangeListener=null;this.wallListener=null;this.wallChangeListener=null;this.furnitureListener=null;this.furnitureChangeListener=null;this.roomListener=null;this.roomChangeListener=null;this.polylineChangeListener=null;this.polylineListener=null;this.dimensionLineChangeListener=null;this.dimensionLineListener=null;this.labelChangeListener=null;this.labelListener=null;this.approximateHomeBoundsCache=null;this.homeHeightCache=null;this.createComponent3D(e,c,a)}HomeComponent3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.View3D","com.eteks.sweethome3d.viewcontroller.View"];HomeComponent3D.LONG_TOUCH_DELAY=200;HomeComponent3D.LONG_TOUCH_DELAY_WHEN_DRAGGING=400;HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY=800;HomeComponent3D.DOUBLE_TOUCH_DELAY=500;HomeComponent3D.prototype.createComponent3D=function(d,c,a){this.canvas3D=new HTMLCanvas3D(d);var b=this;if(a){this.addMouseListeners(a,c,this.canvas3D);if(c!==null){this.navigationPanelId=this.createNavigationPanel(this.home,c,a);this.setNavigationPanelVisible(c.isNavigationPanelVisible());this.preferencesChangeListener=function(e){b.setNavigationPanelVisible(e.getNewValue())};c.addPropertyChangeListener("NAVIGATION_PANEL_VISIBLE",this.preferencesChangeListener);this.editingIn3DViewChangeListener=function(e){b.updateObjectsAndFurnitureGroups(b.home.getSelectedItems())};c.addPropertyChangeListener("EDITING_IN_3D_VIEW_ENABLED",this.editingIn3DViewChangeListener)}this.createActions(a);this.installKeyboardActions()}this.updateView(this.home.getCamera());this.updateViewPlatformTransform(this.home.getCamera(),false);this.addCameraListeners();this.canvas3D.setScene(this.createSceneTree(true,false));this.unitChangeListener=function(e){b.updateObjects(b.home.getDimensionLines())};c.addPropertyChangeListener("UNIT",this.unitChangeListener)};HomeComponent3D.prototype.getHTMLElement=function(){return this.canvas3D.getHTMLElement()};HomeComponent3D.prototype.disposeGeometries=function(){if(this.home.structure){ModelManager.getInstance().unloadModel(this.home.structure,true)}ModelManager.getInstance().disposeGeometries(this.canvas3D.getScene())};HomeComponent3D.prototype.revalidate=function(){var a=this.canvas3D.getHTMLElement();var b=a.getBoundingClientRect();if(this.navigationPanelId!=null){navigationPanelDiv=document.getElementById(this.navigationPanelId);if(navigationPanelDiv!==undefined&&navigationPanelDiv.style!==undefined){navigationPanelDiv.style.left=(b.left+window.pageXOffset)+"px";navigationPanelDiv.style.top=(b.top+window.pageYOffset)+"px"}}this.canvas3D.updateViewportSize()};HomeComponent3D.prototype.createNavigationPanel=function(l,g,h){var a=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);var j=null;var b;try{b=g.getLocalizedString("HomeComponent3D","navigationPanel.innerHTML")}catch(k){b='<img src="'+ZIPTools.getScriptFolder("gl-matrix-min.js")+'navigationPanel.png"     style="width: 56px; height:59px; margin:5px; user-drag: none; user-select: none; -moz-user-select: none; -webkit-user-drag: none; -webkit-user-select: none; -ms-user-select: none;"     usemap="#navigationPanelMap"/><map name="navigationPanelMap" id="navigationPanelMap">  <area shape="poly" coords="28,4,33,8,33,19,22,19,22,8,29,4" data-simulated-key="UP" />  <area shape="poly" coords="4,28,8,23,19,23,19,34,8,34,4,29" data-simulated-key="LEFT" />  <area shape="poly" coords="28,54,33,50,33,39,22,39,22,50,29,54" data-simulated-key="DOWN" />  <area shape="poly" coords="51,28,47,23,36,23,36,34,47,34,51,29" data-simulated-key="RIGHT" />  <area shape="poly" coords="28,22,33,26,33,28,22,28,22,26,29,22" data-simulated-key="PAGE_UP" />  <area shape="poly" coords="28,36,33,32,33,30,22,30,22,32,29,36" data-simulated-key="PAGE_DOWN" /></map>'}var m=this;if(b!==null){j=document.createElement("div");j.setAttribute("id","div"+Math.floor(Math.random()*10000000000));j.style.position="absolute";this.windowResizeListener=function(i){m.revalidate()};window.addEventListener("resize",this.windowResizeListener);var d=0;for(var f=this.canvas3D.getHTMLElement();f&&f.style&&isNaN(d=parseInt(f.style.zIndex));f=f.parentElement){}j.style.zIndex=isNaN(d)?"1":(d+1).toString();j.style.visibility="hidden";j.innerHTML=b;a.push.apply(a,this.getSimulatedKeyElements(j));var c=document.getElementsByTagName("body")[0];c.insertBefore(j,c.firstChild);j.addEventListener("mousedown",function(i){m.mouseListener.mousePressed(i)})}this.simulatedEventListener={mousePressed:function(o){var q=o.target;var i=function(){var s=q.getAttribute("data-simulated-key");var r=s.substring(s.indexOf(":")+1);var t="";if(o.ctrlKey||r.indexOf("control ")!=-1){t+="control "}if(o.altKey||r.indexOf("alt ")!=-1){t+="alt "}if(o.metaKey||r.indexOf("meta ")!=-1){t+="meta "}if(o.shiftKey||r.indexOf("shift ")!=-1){t+="shift "}t+="pressed "+r;m.callAction(o,t)};var p=function(r){window.clearInterval(n);if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){q.removeEventListener("pointerup",p);q.removeEventListener("pointerleave",p)}else{q.removeEventListener("touchend",p);q.removeEventListener("mouseup",p);q.removeEventListener("mouseleave",p)}m.mouseListener.windowMouseReleased(r);r.stopPropagation()};if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){q.addEventListener("pointerup",p);q.addEventListener("pointerleave",p)}else{q.addEventListener("touchend",p);q.addEventListener("mouseup",p);q.addEventListener("mouseleave",p)}i();var n=window.setInterval(i,80)},pointerMousePressed:function(i){i.stopPropagation()},touchStarted:function(i){i.preventDefault();m.simulatedEventListener.mousePressed(i)}};for(var e=0;e<a.length;e++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){a[e].addEventListener("pointerdown",this.simulatedEventListener.mousePressed);a[e].addEventListener("mousedown",this.simulatedEventListener.pointerMousePressed)}else{a[e].addEventListener("touchstart",this.simulatedEventListener.touchStarted);a[e].addEventListener("mousedown",this.simulatedEventListener.mousePressed)}}if(j!==null){return j.getAttribute("id")}else{return null}};HomeComponent3D.prototype.getSimulatedKeyElements=function(c){var e=[];if(c.hasChildNodes()){for(var b=0;b<c.childNodes.length;b++){var d=c.childNodes[b];if(d.hasAttribute&&d.hasAttribute("data-simulated-key")){var a=d.getAttribute("data-simulated-key");if(a.indexOf(":")===-1||a.indexOf(this.canvas3D.getHTMLElement().getAttribute("id")+":")===0){e.push(d)}}e.push.apply(e,this.getSimulatedKeyElements(d))}}return e};HomeComponent3D.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelId!=null){document.getElementById(this.navigationPanelId).style.visibility=a?"visible":"hidden";if(a){this.revalidate()}}};HomeComponent3D.prototype.removeHomeListeners=function(){this.home.removePropertyChangeListener("CAMERA",this.homeCameraListener);var h=this.home.getEnvironment();h.removePropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);h.removePropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_COLOR",this.groundChangeListener);h.removePropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener);h.removePropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener);this.home.removePropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener);h.removePropertyChangeListener("LIGHT_COLOR",this.lightColorListener);h.removePropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener);this.home.getCamera().removePropertyChangeListener(this.cameraChangeListener);this.home.removePropertyChangeListener("CAMERA",this.elevationChangeListener);this.home.getCamera().removePropertyChangeListener(this.elevationChangeListener);this.home.removeSelectionListener(this.selectionListener);this.home.removeLevelsListener(this.levelListener);var j=this.home.getLevels();for(var e=0;e<j.length;e++){j[e].removePropertyChangeListener(this.levelChangeListener)}this.home.removeWallsListener(this.wallListener);var a=this.home.getWalls();for(var e=0;e<a.length;e++){a[e].removePropertyChangeListener(this.wallChangeListener)}this.home.removeFurnitureListener(this.furnitureListener);var g=this.home.getFurniture();for(var e=0;e<g.length;e++){this.removePropertyChangeListener(g[e],this.furnitureChangeListener)}this.home.removeRoomsListener(this.roomListener);var b=this.home.getRooms();for(var e=0;e<b.length;e++){b[e].removePropertyChangeListener(this.roomChangeListener)}this.home.removePolylinesListener(this.polylineListener);var c=this.home.getPolylines();for(var e=0;e<c.length;e++){c[e].removePropertyChangeListener(this.polylineChangeListener)}this.home.removeDimensionLinesListener(this.dimensionLineListener);var d=this.home.getDimensionLines();for(var e=0;e<d.length;e++){d[e].removePropertyChangeListener(this.dimensionLineChangeListener)}this.home.removeLabelsListener(this.labelListener);var f=this.home.getLabels();for(var e=0;e<f.length;e++){f[e].removePropertyChangeListener(this.labelChangeListener)}};HomeComponent3D.prototype.removeMouseListeners=function(a){if(this.mouseListener){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){a.getHTMLElement().removeEventListener("pointerdown",this.mouseListener.pointerPressed);a.getHTMLElement().removeEventListener("mousedown",this.mouseListener.pointerMousePressed);a.getHTMLElement().removeEventListener("dblclick",this.mouseListener.mouseDoubleClicked);window.removeEventListener("pointermove",this.mouseListener.windowPointerMoved);window.removeEventListener("pointerup",this.mouseListener.windowPointerReleased)}else{a.getHTMLElement().removeEventListener("touchstart",this.mouseListener.touchStarted);a.getHTMLElement().removeEventListener("touchmove",this.mouseListener.touchMoved);a.getHTMLElement().removeEventListener("touchend",this.mouseListener.touchEnded);a.getHTMLElement().removeEventListener("mousedown",this.mouseListener.mousePressed);a.getHTMLElement().removeEventListener("dblclick",this.mouseListener.mouseDoubleClicked);window.removeEventListener("mousemove",this.mouseListener.windowMouseMoved);window.removeEventListener("mouseup",this.mouseListener.windowMouseReleased)}a.getHTMLElement().removeEventListener("contextmenu",this.mouseListener.contextMenuDisplayed);a.getHTMLElement().removeEventListener("DOMMouseScroll",this.mouseListener.mouseScrolled);a.getHTMLElement().removeEventListener("mousewheel",this.mouseListener.mouseWheelMoved)}};HomeComponent3D.prototype.dispose=function(){this.removeHomeListeners();this.removeMouseListeners(this.canvas3D);if(this.navigationPanelId!=null){this.preferences.removePropertyChangeListener("NAVIGATION_PANEL_VISIBLE",this.preferencesChangeListener);window.removeEventListener("resize",this.windowResizeListener);var c=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);for(var b=0;b<c.length;b++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){c[b].removeEventListener("pointerdown",this.simulatedEventListener.mousePressed);c[b].removeEventListener("mousedown",this.simulatedEventListener.pointerMousePressed)}else{c[b].removeEventListener("touchstart",this.simulatedEventListener.touchStarted);c[b].removeEventListener("mousedown",this.simulatedEventListener.mousePressed)}}var a=document.getElementById(this.navigationPanelId);a.parentElement.removeChild(a);this.navigationPanelId=null}this.preferences.removePropertyChangeListener("EDITING_IN_3D_VIEW_ENABLED",this.editingIn3DViewChangeListener);this.preferences.removePropertyChangeListener("UNIT",this.unitChangeListener);this.canvas3D.clear()};HomeComponent3D.prototype.addCameraListeners=function(){var a=this;var b=this.home;this.cameraChangeListener=function(c){if(!a.cameraChangeListener.updater){a.cameraChangeListener.updater=function(){if(a.canvas3D){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),true)}delete a.cameraChangeListener.updater};setTimeout(a.cameraChangeListener.updater,0)}};b.getCamera().addPropertyChangeListener(this.cameraChangeListener);this.homeCameraListener=function(c){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),false);c.getOldValue().removePropertyChangeListener(a.cameraChangeListener);b.getCamera().addPropertyChangeListener(a.cameraChangeListener)};this.home.addPropertyChangeListener("CAMERA",this.homeCameraListener)};HomeComponent3D.prototype.updateView=function(j){var g=j.getFieldOfView();if(g===0){g=Math.PI*63/180}this.canvas3D.setFieldOfView(g);var k=2.5;var d=500000;if(this.canvas3D.getDepthBits()<=16){var d=3000;var e=this.getApproximateHomeBounds();if(e!=null&&!e.intersect(vec3.fromValues(j.getX(),j.getY(),j.getZ()))){var a=this.getDistanceToBox(j.getX(),j.getY(),j.getZ(),e);if(!isNaN(a)){k=Math.max(k,0.1*a)}}}else{var b=this.getHomeHeight();if(j.getZ()>b){k=Math.max(k,(j.getZ()-b)/10)}}var i=this.canvas3D.getHTMLElement().getBoundingClientRect();if(j.getZ()>0&&i.width!==0&&i.height!==0){var f=Math.atan(Math.tan(g/2)*i.height/i.width);var h=j.getPitch()+f;if(h>0){var c=(j.getZ()/Math.sin(h));k=Math.min(k,0.35*c);if(k*d<c){k=c/d}}}this.canvas3D.setFrontClipDistance(k);this.canvas3D.setBackClipDistance(k*d)};HomeComponent3D.prototype.getApproximateHomeBounds=function(){if(this.approximateHomeBoundsCache===null){var b=null;var h=this.home.getFurniture();for(var q=0;q<h.length;q++){var a=h[q];if(a.isVisible()&&(a.getLevel()===null||a.getLevel().isViewable())){var x=Math.max(a.getWidthInPlan(),a.getDepthInPlan())/2;var m=a.getGroundElevation();var g=vec3.fromValues(a.getX()-x,a.getY()-x,m);if(b===null){b=new BoundingBox3D(g,g)}else{b.combine(g)}b.combine(vec3.fromValues(a.getX()+x,a.getY()+x,m+a.getHeightInPlan()))}}var w=this.home.getWalls();for(var q=0;q<w.length;q++){var r=w[q];if(r.getLevel()===null||r.getLevel().isViewable()){var l=vec3.fromValues(r.getXStart(),r.getYStart(),r.getLevel()!==null?r.getLevel().getElevation():0);if(b===null){b=new BoundingBox3D(l,l)}else{b.combine(l)}b.combine(vec3.fromValues(r.getXEnd(),r.getYEnd(),l.z+(r.getHeight()!==null?r.getHeight():this.home.getWallHeight())))}}var v=this.home.getRooms();for(var q=0;q<v.length;q++){var s=v[q];if(s.getLevel()===null||s.getLevel().isViewable()){var u=vec3.fromValues(s.getXCenter(),s.getYCenter(),s.getLevel()!==null?s.getLevel().getElevation():0);if(b===null){b=new BoundingBox3D(u,u)}else{b.combine(u)}}}var f=this.home.getDimensionLines();for(var q=0;q<f.length;q++){var d=f[q];if((d.getLevel()==null||d.getLevel().isViewable())&&d.isVisibleIn3D()){var o=d.getLevel()!=null?d.getLevel().getElevation():0;var l=vec3.fromValues(d.getXStart(),d.getYStart(),o+d.getElevationStart());if(b==null){b=new BoundingBox3D(l,l)}else{b.combine(l)}b.combine(vec3.fromValues(d.getXEnd(),d.getYEnd(),o+d.getElevationEnd()))}}var t=this.home.getLabels();for(var q=0;q<t.length;q++){var e=t[q];if((e.getLevel()===null||e.getLevel().isViewable())&&e.getPitch()!==null){var u=vec3.fromValues(e.getX(),e.getY(),e.getGroundElevation());if(b==null){b=new BoundingBox3D(u,u)}else{b.combine(u)}}}var c=this.home.getPolylines();for(var q=0;q<c.length;q++){var k=c[q];if((k.getLevel()==null||k.getLevel().isViewable())&&k.isVisibleIn3D()){var p=k.getPoints();for(var n=0;n<p.length;n++){var y=vec3.fromValues(p[n][0],p[n][1],k.getGroundElevation());if(b==null){b=new BoundingBox3D(y,y)}else{b.combine(y)}}}}this.approximateHomeBoundsCache=b}return this.approximateHomeBoundsCache};HomeComponent3D.prototype.getDistanceToBox=function(h,g,f,d){var j=vec3.fromValues(h,g,f);var c=vec3.create();d.getLower(c);var k=vec3.create();d.getUpper(k);var m=[vec3.fromValues(c[0],c[1],c[2]),vec3.fromValues(k[0],c[1],c[2]),vec3.fromValues(c[0],k[1],c[2]),vec3.fromValues(k[0],k[1],c[2]),vec3.fromValues(c[0],c[1],k[2]),vec3.fromValues(k[0],c[1],k[2]),vec3.fromValues(c[0],k[1],k[2]),vec3.fromValues(k[0],k[1],k[2])];var e=new Array(m.length);for(var b=0;b<e.length;b++){e[b]=vec3.squaredDistance(j,m[b])}var l=[this.getDistanceToSide(j,m,e,0,1,3,2,2),this.getDistanceToSide(j,m,e,0,1,5,4,1),this.getDistanceToSide(j,m,e,0,2,6,4,0),this.getDistanceToSide(j,m,e,4,5,7,6,2),this.getDistanceToSide(j,m,e,2,3,7,6,1),this.getDistanceToSide(j,m,e,1,3,7,5,0)];var a=l[0];for(var b=1;b<l.length;b++){a=Math.min(a,l[b])}return a};HomeComponent3D.prototype.getDistanceToSide=function(i,j,k,h,g,e,c,a){switch(a){case 0:if(i[1]<=j[h][1]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[1]>=j[g][1]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 1:if(i[0]<=j[h][0]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 2:if(i[0]<=j[h][0]){if(i[1]<=j[h][1]){return Math.sqrt(k[h])}else{if(i[1]>=j[c][1]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[1]<=j[g][1]){return Math.sqrt(k[g])}else{if(i[1]>=j[e][1]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[1]<=j[h][1]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[1]>=j[c][1]){return this.getDistanceToLine(i,j[e],j[c])}}}}break}var d=vec3.fromValues(j[g][0]-j[h][0],j[g][1]-j[h][1],j[g][2]-j[h][2]);var b=vec3.fromValues(j[e][0]-j[h][0],j[e][1]-j[h][1],j[e][2]-j[h][2]);var f=vec3.create();vec3.cross(f,d,b);return Math.abs(vec3.dot(f,vec3.fromValues(j[h][0]-i[0],j[h][1]-i[1],j[h][2]-i[2])))/vec3.length(f)};HomeComponent3D.prototype.getDistanceToLine=function(a,e,d){var f=vec3.fromValues(d[0]-e[0],d[1]-e[1],d[2]-e[2]);var b=vec3.fromValues(a[0]-e[0],a[1]-e[1],a[2]-e[2]);var c=vec3.create();vec3.cross(c,f,b);return vec3.length(c)/vec3.length(f)};HomeComponent3D.prototype.getHomeHeight=function(){if(this.homeHeightCache===null){var b=0;var k=this.home.getFurniture();for(var h=0;h<k.length;h++){var q=k[h];if(q.isVisible()&&(q.getLevel()==null||q.getLevel().isViewable())){b=Math.max(b,q.getGroundElevation()+q.getHeight())}}var d=this.home.getWalls();for(var h=0;h<d.length;h++){var n=d[h];if(n.getLevel()==null||n.getLevel().isViewable()){var p=n.getLevel()!=null?n.getLevel().getElevation():0;if(n.getHeight()!=null){b=Math.max(b,p+n.getHeight());if(n.getHeightAtEnd()!=null){b=Math.max(b,p+n.getHeightAtEnd())}}else{b=Math.max(b,p+this.home.getWallHeight())}}}var f=this.home.getRooms();for(var h=0;h<f.length;h++){var a=f[h];if(a.getLevel()!=null&&a.getLevel().isViewable()){b=Math.max(b,a.getLevel().getElevation())}}var e=this.home.getPolylines();for(var h=0;h<e.length;h++){var m=e[h];if(m.isVisibleIn3D()&&(m.getLevel()==null||m.getLevel().isViewable())){b=Math.max(b,m.getGroundElevation())}}var g=this.home.getDimensionLines();for(var h=0;h<g.length;h++){var o=g[h];if(o.isVisibleIn3D()&&(o.getLevel()==null||o.getLevel().isViewable())){var c=o.getLevel()!=null?o.getLevel().getElevation():0;b=Math.max(b,c+Math.max(o.getElevationStart(),o.getElevationEnd()))}}var j=this.home.getLabels();for(var h=0;h<j.length;h++){var l=j[h];if(l.getPitch()!=null&&(l.getLevel()==null||l.getLevel().isViewable())){b=Math.max(b,l.getGroundElevation())}}this.homeHeightCache=b}return this.homeHeightCache};HomeComponent3D.prototype.updateViewPlatformTransform=function(b,a){if(a){this.moveCameraWithAnimation(b)}else{delete this.cameraInterpolator;var c=mat4.create();this.computeViewPlatformTransform(c,b.getX(),b.getY(),b.getZ(),b.getYaw(),b.getPitch());this.canvas3D.setViewPlatformTransform(c)}};HomeComponent3D.prototype.moveCameraWithAnimation=function(c){if(this.cameraInterpolator===undefined){this.cameraInterpolator={initialCamera:null,finalCamera:null,alpha:null}}if(this.cameraInterpolator.finalCamera===null||this.cameraInterpolator.finalCamera.getX()!==c.getX()||this.cameraInterpolator.finalCamera.getY()!==c.getY()||this.cameraInterpolator.finalCamera.getZ()!==c.getZ()||this.cameraInterpolator.finalCamera.getYaw()!==c.getYaw()||this.cameraInterpolator.finalCamera.getPitch()!==c.getPitch()){if(this.cameraInterpolator.alpha===null||this.cameraInterpolator.alpha===1){this.cameraInterpolator.initialCamera=new Camera(this.camera.getX(),this.camera.getY(),this.camera.getZ(),this.camera.getYaw(),this.camera.getPitch(),this.camera.getFieldOfView())}else{if(this.cameraInterpolator.alpha<0.3){var b=mat4.create();this.computeViewPlatformTransform(b,this.cameraInterpolator.finalCamera.getX(),this.cameraInterpolator.finalCamera.getY(),this.cameraInterpolator.finalCamera.getZ(),this.cameraInterpolator.finalCamera.getYaw(),this.cameraInterpolator.finalCamera.getPitch());this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.initialCamera=this.cameraInterpolator.finalCamera}else{this.cameraInterpolator.initialCamera=new Camera(this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*this.cameraInterpolator.alpha,c.getFieldOfView())}}this.cameraInterpolator.finalCamera=new Camera(c.getX(),c.getY(),c.getZ(),c.getYaw(),c.getPitch(),c.getFieldOfView());if(this.cameraInterpolator.alpha===null){this.cameraInterpolator.animationDuration=75}this.cameraInterpolator.startTime=Date.now();this.cameraInterpolator.alpha=0;var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}};HomeComponent3D.prototype.interpolateUntilAlphaEquals1=function(){if(this.cameraInterpolator){var c=Date.now();var d=Math.min(1,(c-this.cameraInterpolator.startTime)/this.cameraInterpolator.animationDuration);if(this.cameraInterpolator.alpha!==d){var b=mat4.create();this.computeTransform(d,b);this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.alpha=d}if(this.cameraInterpolator.alpha<1){var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}}};HomeComponent3D.prototype.computeTransform=function(b,a){this.computeViewPlatformTransform(a,this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*b,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*b,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*b,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*b,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*b)};HomeComponent3D.prototype.computeViewPlatformTransform=function(a,g,f,d,c,e){var h=mat4.create();mat4.fromYRotation(h,-c+Math.PI);var b=mat4.create();mat4.fromXRotation(b,-e);mat4.mul(h,h,b);mat4.identity(a);mat4.translate(a,a,vec3.fromValues(g,d,f));mat4.mul(a,a,h);this.camera=new Camera(g,f,d,c,e,0)};HomeComponent3D.prototype.addMouseListeners=function(a,c,e){var b=this;var d={initialPointerLocation:null,lastPointerLocation:null,touchEventType:false,buttonPressed:-1,pointerTouches:{},lastEventType:null,lastTargetTouches:[],distanceLastPinch:-1,firstTouchStartedTimeStamp:0,longTouchActivated:false,doubleLongTouchActivated:false,longTouchStartTime:0,actionStartedInComponent3D:false,contextMenuEventType:false,mousePressed:function(f){if(!d.touchEventType&&!d.contextMenuEventType&&f.button===0){d.updateCoordinates(f,"mousePressed");d.initialPointerLocation=[f.canvasX,f.canvasY];d.lastPointerLocation=[f.canvasX,f.canvasY];d.actionStartedInComponent3D=true;a.pressMouse(f.canvasX,f.canvasY,f.clickCount,d.isShiftDown(f),d.isAlignmentActivated(f),d.isDuplicationActivated(f),d.isMagnetismToggled(f),View.PointerType.MOUSE)}f.stopPropagation()},isShiftDown:function(f){return f.shiftKey&&!f.altKey&&!f.ctrlKey&&!f.metaKey},isAlignmentActivated:function(f){return OperatingSystem.isWindows()||OperatingSystem.isMacOSX()?f.shiftKey:f.shiftKey&&!f.altKey},isDuplicationActivated:function(f){return OperatingSystem.isMacOSX()?f.altKey:f.ctrlKey},isMagnetismToggled:function(f){return OperatingSystem.isWindows()?f.altKey:(OperatingSystem.isMacOSX()?f.metaKey:f.shiftKey&&f.altKey)},mouseDoubleClicked:function(f){d.updateCoordinates(f,"mouseDoubleClicked");d.mousePressed(f);actionStartedInComponent3D=false},windowMouseMoved:function(f){if(!d.touchEventType&&!d.contextMenuEventType){d.updateCoordinates(f,"mouseMoved");if(d.initialPointerLocation!=null&&!(d.initialPointerLocation[0]===f.canvasX&&d.initialPointerLocation[1]===f.canvasY)){d.initialPointerLocation=null}if(d.initialPointerLocation==null&&(f.buttons===0&&d.isInCanvas(f)||d.actionStartedInComponent3D)){if(a.isEditingState()){a.moveMouse(f.canvasX,f.canvasY)}else{if(d.actionStartedInComponent3D&&document.activeElement===b.canvas3D.getHTMLElement()){d.moveCamera(f.canvasX,f.canvasY,d.lastPointerLocation[0],d.lastPointerLocation[1],f.button,f.altKey,f.shiftKey)}}}d.lastPointerLocation=[f.canvasX,f.canvasY]}},windowMouseReleased:function(f){if(!d.touchEventType){if(d.lastPointerLocation!=null){if(d.actionStartedInComponent3D&&document.activeElement===b.canvas3D.getHTMLElement()&&f.button===0){if(d.contextMenuEventType){a.releaseMouse(d.initialPointerLocation[0],d.initialPointerLocation[1])}else{d.updateCoordinates(f,"mouseReleased");a.releaseMouse(f.canvasX,f.canvasY)}}d.initialPointerLocation=null;d.lastPointerLocation=null;d.actionStartedInComponent3D=false}}d.contextMenuEventType=false},pointerPressed:function(f){if(f.pointerType=="mouse"){d.mousePressed(f)}else{d.copyPointerToTargetTouches(f,false);d.touchStarted(f)}},pointerMousePressed:function(f){f.stopPropagation()},windowPointerMoved:function(f){if(f.pointerType=="mouse"){d.windowMouseMoved(f)}else{d.copyPointerToTargetTouches(f,false);d.touchMoved(f)}},windowPointerReleased:function(f){if(f.pointerType=="mouse"){d.windowMouseReleased(f)}else{f.preventDefault();d.copyPointerToTargetTouches(f,true);d.touchEnded(f)}},contextMenuDisplayed:function(f){d.contextMenuEventType=true},touchStarted:function(g){d.touchEventType=g.pointerType===undefined;g.preventDefault();if(document.activeElement!==b.canvas3D.getHTMLElement()){b.canvas3D.getHTMLElement().focus()}d.updateCoordinates(g,"touchStarted");if(d.longTouch!=null){clearTimeout(d.longTouch);d.longTouch=null;b.stopLongTouchAnimation()}if(g.targetTouches.length===1){var f=1;if(d.initialPointerLocation!=null&&d.distance(g.canvasX,g.canvasY,d.initialPointerLocation[0],d.initialPointerLocation[1])<5&&g.timeStamp-d.firstTouchStartedTimeStamp<=HomeComponent3D.DOUBLE_TOUCH_DELAY){f=2;d.firstTouchStartedTimeStamp=0;d.initialPointerLocation=null}else{d.firstTouchStartedTimeStamp=g.timeStamp;d.initialPointerLocation=[g.canvasX,g.canvasY]}d.longTouchActivated=false;d.doubleLongTouchActivated=false;d.distanceLastPinch=null;d.lastPointerLocation=[g.canvasX,g.canvasY];d.actionStartedInComponent3D=true;d.longTouchWhenDragged=false;if(c.isEditingIn3DViewEnabled()&&f==1&&b.getClosestSelectableItemAt(g.canvasX,g.canvasY)!==null){d.longTouch=setTimeout(function(){b.startLongTouchAnimation(g.canvasX,g.canvasY,function(){d.longTouchActivated=true;a.setAlignmentActivated(true)})},HomeComponent3D.LONG_TOUCH_DELAY);d.longTouchStartTime=Date.now()}a.pressMouse(g.canvasX,g.canvasY,f,d.isShiftDown(g),d.isAlignmentActivated(g),d.isDuplicationActivated(g),d.isMagnetismToggled(g),View.PointerType.TOUCH)}else{if(d.longTouchActivated&&g.targetTouches.length===2){d.doubleLongTouchActivated=true;a.setDuplicationActivated(true)}else{a.escape()}if(g.targetTouches.length===2){d.actionStartedInComponent3D=true;d.initialPointerLocation=null;d.distanceLastPinch=d.distance(g.targetTouches[0].clientX,g.targetTouches[0].clientY,g.targetTouches[1].clientX,g.targetTouches[1].clientY)}}},touchMoved:function(h){if(d.actionStartedInComponent3D){h.preventDefault();h.stopPropagation();if(d.updateCoordinates(h,"touchMoved")){d.initialPointerLocation=null;if(h.targetTouches.length==1){if(d.longTouch!=null){clearTimeout(d.longTouch);d.longTouch=null;b.stopLongTouchAnimation()}if(a.isEditingState()){if(!d.doubleLongTouchActivated){a.moveMouse(h.canvasX,h.canvasY)}}else{if(b.home.getCamera()===b.home.getObserverCamera()){d.moveCamera(-h.canvasX,-h.canvasY,-d.lastPointerLocation[0],-d.lastPointerLocation[1],h.button,false,false)}else{d.moveCamera(h.canvasX,h.canvasY,d.lastPointerLocation[0],d.lastPointerLocation[1],h.button,false,false)}}d.lastPointerLocation=[h.canvasX,h.canvasY]}else{if(h.targetTouches.length==2&&d.distanceLastPinch!=null){if(a.isEditingState()){a.moveMouse(h.targetTouches[1].clientX,h.targetTouches[1].clientY)}else{var g=d.distance(h.targetTouches[0].clientX,h.targetTouches[0].clientY,h.targetTouches[1].clientX,h.targetTouches[1].clientY);var f=g/d.distanceLastPinch;d.zoomCamera((1-f)*50,false);d.distanceLastPinch=g}}}}}},touchEnded:function(f){if(d.actionStartedInComponent3D){d.updateCoordinates(f,"touchEnded");if(f.targetTouches.length==0){if(d.longTouch!=null){clearTimeout(d.longTouch);d.longTouch=null;b.stopLongTouchAnimation()}a.releaseMouse(d.lastPointerLocation[0],d.lastPointerLocation[1]);if(d.isLongTouch()){f.preventDefault()}d.actionStartedInComponent3D=false}else{if(f.targetTouches.length==1){d.lastPointerLocation=[f.canvasX,f.canvasY]}else{if(f.targetTouches.length==2&&d.distanceLastPinch!=null){d.distanceLastPinch=d.distance(f.targetTouches[0].clientX,f.targetTouches[0].clientY,f.targetTouches[1].clientX,f.targetTouches[1].clientY)}}}}},copyPointerToTargetTouches:function(h,f){if(f){h.changedTouches=[d.pointerTouches[h.pointerId]];delete d.pointerTouches[h.pointerId]}else{d.pointerTouches[h.pointerId]={clientX:h.clientX,clientY:h.clientY}}h.targetTouches=[];for(var g in d.pointerTouches){if(d.pointerTouches.hasOwnProperty(g)){h.targetTouches.push(d.pointerTouches[g])}}},updateCoordinates:function(k,h){var j=b.canvas3D.getHTMLElement().getBoundingClientRect();var f=true;if(h.indexOf("touch")===0){var m=d.lastEventType=="touchStarted"?5:1.5;var l;if(k.targetTouches.length===1&&h=="touchMoved"&&d.distance(d.lastTargetTouches[0].clientX,d.lastTargetTouches[0].clientY,k.targetTouches[0].clientX,k.targetTouches[0].clientY)<m||k.targetTouches.length===0&&h=="touchEnded"&&d.distance(d.lastTargetTouches[0].clientX,d.lastTargetTouches[0].clientY,k.changedTouches[0].clientX,k.changedTouches[0].clientY)<m){l=d.lastTargetTouches;f=false}else{if(k.targetTouches.length==0){l=k.changedTouches}else{l=k.targetTouches}d.lastEventType=h}if(l.length==1){k.canvasX=l[0].clientX-j.left;k.canvasY=l[0].clientY-j.top;var j=b.canvas3D.getHTMLElement().getBoundingClientRect();k.clientX=l[0].clientX;k.clientY=l[0].clientY;k.button=0}k.clickCount=1;if(f){d.lastTargetTouches=[];for(var g=0;l[g]!==undefined;g++){d.lastTargetTouches.push({clientX:l[g].clientX,clientY:l[g].clientY})}}}else{k.canvasX=k.clientX-j.left;k.canvasY=k.clientY-j.top}if(k.clickCount===undefined){if(h=="mouseDoubleClicked"){k.clickCount=2}else{if(h=="mousePressed"||h=="mouseReleased"){k.clickCount=1}else{k.clickCount=0}}}if(h=="mouseWheelMoved"){k.wheelRotation=(k.deltaY!==undefined?k.deltaX+k.deltaY:-k.wheelDelta)/4}return f},isLongTouch:function(f){return Date.now()-d.longTouchStartTime>((f?HomeComponent3D.LONG_TOUCH_DELAY_WHEN_DRAGGING:HomeComponent3D.LONG_TOUCH_DELAY)+HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY)},distance:function(g,i,f,h){return Math.sqrt(Math.pow(f-g,2)+Math.pow(h-i,2))},isInCanvas:function(f){return f.canvasX>=0&&f.canvasX<b.canvas3D.getHTMLElement().clientWidth&&f.canvasY>=0&&f.canvasY<b.canvas3D.getHTMLElement().clientHeight},mouseScrolled:function(f){d.zoomCamera(f.detail,f.shiftKey)},mouseWheelMoved:function(f){f.preventDefault();if(!a.isEditingState()){d.zoomCamera((f.deltaY!==undefined?f.deltaY:-f.wheelDelta)/4,f.shiftKey)}},zoomCamera:function(g,f){var g=-2.5*g;if(f){g*=5}a.moveCamera(g)},moveCamera:function(m,k,h,g,i,f,j){if((d.lastPointerLocation[0]!==m||d.lastPointerLocation[1]!==k)&&i===0){if(f){var o=1.25*(g-k);if(j){o*=5}a.moveCamera(o)}else{var n=0.005;var p=n*(m-h);if(j){p*=5}a.rotateCameraYaw(p);var l=n*(k-g);a.rotateCameraPitch(l)}}}};if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){e.getHTMLElement().addEventListener("pointerdown",d.pointerPressed);e.getHTMLElement().addEventListener("mousedown",d.pointerMousePressed);e.getHTMLElement().addEventListener("dblclick",d.mouseDoubleClicked);window.addEventListener("pointermove",d.windowPointerMoved);window.addEventListener("pointerup",d.windowPointerReleased)}else{e.getHTMLElement().addEventListener("touchstart",d.touchStarted);e.getHTMLElement().addEventListener("touchmove",d.touchMoved);e.getHTMLElement().addEventListener("touchend",d.touchEnded);e.getHTMLElement().addEventListener("mousedown",d.mousePressed);e.getHTMLElement().addEventListener("dblclick",d.mouseDoubleClicked);window.addEventListener("mousemove",d.windowMouseMoved);window.addEventListener("mouseup",d.windowMouseReleased)}e.getHTMLElement().addEventListener("contextmenu",d.contextMenuDisplayed);e.getHTMLElement().addEventListener("DOMMouseScroll",d.mouseScrolled);e.getHTMLElement().addEventListener("mousewheel",d.mouseWheelMoved);this.mouseListener=d};HomeComponent3D.prototype.startLongTouchAnimation=function(a,e,d){if(this.touchOverlay===undefined){this.touchOverlay=document.createElement("div");this.touchOverlay.id="touch-overlay-timer";this.touchOverlay.classList.add("touch-overlay-timer");this.touchOverlay.style.position="absolute";this.touchOverlay.style.top="0px";this.touchOverlay.style.left="0px";this.touchOverlay.innerHTML='<div class="touch-overlay-timer-content"></div><div class="touch-overlay-timer-bg"></div><div class="touch-overlay-timer-hidder"></div><div class="touch-overlay-timer-loader1"></div><div class="touch-overlay-timer-loader2"></div>';document.body.appendChild(this.touchOverlay);for(var b=0;b<this.touchOverlay.children.length;b++){var c=this.touchOverlay.children.item(b);if(c.classList.contains("overlay-timer-loader1")||c.classList.contains("overlay-timer-loader2")){c.style.borderTopColor="#0000B5";c.style.borderRightColor="#0000B5"}if(c.classList.contains("touch-overlay-timer-content")){c.style.color="#000000";c.innerHTML="<span style='font-weight: bold; font-family: sans-serif; font-size: 140%; line-height: 90%'>&#x21EA;</span>"}c.style.animationDuration=(PlanComponent.LONG_TOUCH_DURATION_AFTER_DELAY)+"ms"}}this.touchOverlay.style.visibility="visible";this.touchOverlay.style.left=(this.getHTMLElement().getBoundingClientRect().left+a-this.touchOverlay.clientWidth/2)+"px";this.touchOverlay.style.top=(this.getHTMLElement().getBoundingClientRect().top+e-this.touchOverlay.clientHeight-40)+"px";for(var b=0;b<this.touchOverlay.children.length;b++){this.touchOverlay.children.item(b).classList.add("animated")}if(d!==undefined){this.longTouchAnimationPostTask=setTimeout(d,HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY)}};HomeComponent3D.prototype.stopLongTouchAnimation=function(a,c){if(this.touchOverlay!==undefined){this.touchOverlay.style.visibility="hidden";for(var b=0;b<this.touchOverlay.children.length;b++){this.touchOverlay.children.item(b).classList.remove("animated")}if(this.longTouchAnimationPostTask!==undefined){clearTimeout(this.longTouchAnimationPostTask);delete this.longTouchAnimationPostTask}}};HomeComponent3D.prototype.installKeyboardActions=function(){this.inputMap={"shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","alt shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","shift pressed W":"MOVE_CAMERA_FAST_FORWARD","pressed UP":"MOVE_CAMERA_FORWARD","alt pressed UP":"MOVE_CAMERA_FORWARD","pressed W":"MOVE_CAMERA_FORWARD","shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","alt shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","shift pressed S":"MOVE_CAMERA_FAST_BACKWARD","pressed DOWN":"MOVE_CAMERA_BACKWARD","alt pressed DOWN":"MOVE_CAMERA_BACKWARD","pressed S":"MOVE_CAMERA_BACKWARD","alt shift pressed LEFT":"MOVE_CAMERA_FAST_LEFT","alt pressed LEFT":"MOVE_CAMERA_LEFT","alt shift pressed RIGHT":"MOVE_CAMERA_FAST_RIGHT","alt pressed RIGHT":"MOVE_CAMERA_RIGHT","shift pressed LEFT":"ROTATE_CAMERA_YAW_FAST_LEFT","shift pressed A":"ROTATE_CAMERA_YAW_FAST_LEFT","pressed LEFT":"ROTATE_CAMERA_YAW_LEFT","pressed A":"ROTATE_CAMERA_YAW_LEFT","shift pressed RIGHT":"ROTATE_CAMERA_YAW_FAST_RIGHT","shift pressed D":"ROTATE_CAMERA_YAW_FAST_RIGHT","pressed RIGHT":"ROTATE_CAMERA_YAW_RIGHT","pressed D":"ROTATE_CAMERA_YAW_RIGHT","shift pressed PAGE_UP":"ROTATE_CAMERA_PITCH_FAST_UP","pressed PAGE_UP":"ROTATE_CAMERA_PITCH_UP","shift pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_FAST_DOWN","pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_DOWN","shift pressed HOME":"ELEVATE_CAMERA_FAST_UP","pressed HOME":"ELEVATE_CAMERA_UP","shift pressed END":"ELEVATE_CAMERA_FAST_DOWN","pressed END":"ELEVATE_CAMERA_DOWN","pressed ESCAPE":"ESCAPE","shift pressed ESCAPE":"ESCAPE"};if(OperatingSystem.isMacOSX()){this.inputMap["alt pressed ALT"]="ACTIVATE_DUPLICATION";this.inputMap["released ALT"]="DEACTIVATE_DUPLICATION";this.inputMap["shift alt pressed ALT"]="ACTIVATE_DUPLICATION";this.inputMap["shift released ALT"]="DEACTIVATE_DUPLICATION";this.inputMap["meta alt pressed ALT"]="ACTIVATE_DUPLICATION";this.inputMap["meta released ALT"]="DEACTIVATE_DUPLICATION";this.inputMap["shift meta alt pressed ALT"]="ACTIVATE_DUPLICATION";this.inputMap["shift meta released ALT"]="DEACTIVATE_DUPLICATION";this.inputMap["alt pressed ESCAPE"]="ESCAPE"}else{this.inputMap["control pressed CONTROL"]="ACTIVATE_DUPLICATION";this.inputMap["released CONTROL"]="DEACTIVATE_DUPLICATION";this.inputMap["shift control pressed CONTROL"]="ACTIVATE_DUPLICATION";this.inputMap["shift released CONTROL"]="DEACTIVATE_DUPLICATION";this.inputMap["meta control pressed CONTROL"]="ACTIVATE_DUPLICATION";this.inputMap["meta released CONTROL"]="DEACTIVATE_DUPLICATION";this.inputMap["shift meta control pressed CONTROL"]="ACTIVATE_DUPLICATION";this.inputMap["shift meta released CONTROL"]="DEACTIVATE_DUPLICATION";this.inputMap["control pressed ESCAPE"]="ESCAPE"}if(OperatingSystem.isWindows()){this.inputMap["alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["shift released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["control alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["control released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["shift control alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["shift control released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["alt pressed ESCAPE"]="ESCAPE"}else{if(OperatingSystem.isMacOSX()){this.inputMap["meta pressed META"]="TOGGLE_MAGNETISM_ON";this.inputMap["released META"]="TOGGLE_MAGNETISM_OFF";this.inputMap["shift meta pressed META"]="TOGGLE_MAGNETISM_ON";this.inputMap["shift released META"]="TOGGLE_MAGNETISM_OFF";this.inputMap["alt meta pressed META"]="TOGGLE_MAGNETISM_ON";this.inputMap["alt released META"]="TOGGLE_MAGNETISM_OFF";this.inputMap["shift alt meta pressed META"]="TOGGLE_MAGNETISM_ON";this.inputMap["shift alt released META"]="TOGGLE_MAGNETISM_OFF";this.inputMap["meta pressed ESCAPE"]="ESCAPE"}else{this.inputMap["shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["alt shift pressed SHIFT"]="TOGGLE_MAGNETISM_ON";this.inputMap["alt released SHIFT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["shift released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["control shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON";this.inputMap["control alt shift pressed SHIFT"]="TOGGLE_MAGNETISM_ON";this.inputMap["control alt released SHIFT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["control shift released ALT"]="TOGGLE_MAGNETISM_OFF";this.inputMap["alt shift ESCAPE"]="ESCAPE";this.inputMap["control alt shift pressed ESCAPE"]="ESCAPE"}}this.inputMap["shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["released SHIFT"]="DEACTIVATE_ALIGNMENT";if(OperatingSystem.isWindows()){this.inputMap["control shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["control released SHIFT"]="DEACTIVATE_ALIGNMENT";this.inputMap["alt shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["alt released SHIFT"]="DEACTIVATE_ALIGNMENT"}else{if(OperatingSystem.isMacOSX()){this.inputMap["alt shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["alt released SHIFT"]="DEACTIVATE_ALIGNMENT";this.inputMap["meta shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["meta released SHIFT"]="DEACTIVATE_ALIGNMENT"}else{this.inputMap["control shift pressed SHIFT"]="ACTIVATE_ALIGNMENT";this.inputMap["control released SHIFT"]="DEACTIVATE_ALIGNMENT";this.inputMap["shift released ALT"]="ACTIVATE_ALIGNMENT";this.inputMap["control shift released ALT"]="ACTIVATE_ALIGNMENT"}}var a=this;this.canvas3D.getHTMLElement().addEventListener("keydown",function(b){a.callAction(b,KeyStroke.getKeyStrokeForEvent(b,"keydown"))},false);this.canvas3D.getHTMLElement().addEventListener("keyup",function(b){a.callAction(b,KeyStroke.getKeyStrokeForEvent(b,"keyup"))},false)};HomeComponent3D.prototype.callAction=function(a,d){if(d!==undefined){var c=this.inputMap[d];if(c!==undefined){var b=this.actionMap[c];if(b!==undefined){b.actionPerformed(a)}a.stopPropagation()}}};HomeComponent3D.prototype.createActions=function(a){function f(g){this.delta=g}f.prototype.actionPerformed=function(g){a.moveCamera(this.delta)};function b(g){this.delta=g}b.prototype.actionPerformed=function(g){a.moveCameraSideways(this.delta)};function e(g){this.delta=g}e.prototype.actionPerformed=function(g){a.elevateCamera(this.delta)};function d(g){this.delta=g}d.prototype.actionPerformed=function(g){a.rotateCameraYaw(this.delta)};function c(g){this.delta=g}c.prototype.actionPerformed=function(g){a.rotateCameraPitch(this.delta)};this.actionMap={MOVE_CAMERA_FORWARD:new f(6.5),MOVE_CAMERA_FAST_FORWARD:new f(32.5),MOVE_CAMERA_BACKWARD:new f(-6.5),MOVE_CAMERA_FAST_BACKWARD:new f(-32.5),MOVE_CAMERA_LEFT:new b(-2.5),MOVE_CAMERA_FAST_LEFT:new b(-10),MOVE_CAMERA_RIGHT:new b(2.5),MOVE_CAMERA_FAST_RIGHT:new b(10),ELEVATE_CAMERA_DOWN:new e(-2.5),ELEVATE_CAMERA_FAST_DOWN:new e(-10),ELEVATE_CAMERA_UP:new e(2.5),ELEVATE_CAMERA_FAST_UP:new e(10),ROTATE_CAMERA_YAW_LEFT:new d(-Math.PI/60),ROTATE_CAMERA_YAW_FAST_LEFT:new d(-Math.PI/12),ROTATE_CAMERA_YAW_RIGHT:new d(Math.PI/60),ROTATE_CAMERA_YAW_FAST_RIGHT:new d(Math.PI/12),ROTATE_CAMERA_PITCH_UP:new c(-Math.PI/120),ROTATE_CAMERA_PITCH_FAST_UP:new c(-Math.PI/24),ROTATE_CAMERA_PITCH_DOWN:new c(Math.PI/120),ROTATE_CAMERA_PITCH_FAST_DOWN:new c(Math.PI/24),ESCAPE:{actionPerformed:function(g){a.escape()}},ACTIVATE_ALIGNMENT:{actionPerformed:function(g){a.setAlignmentActivated(true)}},DEACTIVATE_ALIGNMENT:{actionPerformed:function(g){a.setAlignmentActivated(false)}},TOGGLE_MAGNETISM_ON:{actionPerformed:function(g){a.toggleMagnetism(true)}},TOGGLE_MAGNETISM_OFF:{actionPerformed:function(g){a.toggleMagnetism(false)}},ACTIVATE_DUPLICATION:{actionPerformed:function(g){a.setDuplicationActivated(true)}},DEACTIVATE_DUPLICATION:{actionPerformed:function(g){a.setDuplicationActivated(false)}}}};HomeComponent3D.prototype.getActionMap=function(){return this.actionMap};HomeComponent3D.prototype.getInputMap=function(){return this.inputMap};HomeComponent3D.prototype.getClosestItemAt=function(a,d){var b=this.canvas3D.getClosestShapeAt(a,d);var c=-1;while(b!==null&&(c=this.homeObjects3D.indexOf(b))<0){b=b.getParent()}if(b!=null){return this.homeObjects[c]}else{return null}};HomeComponent3D.prototype.getClosestSelectableItemAt=function(a,c){var b=component3D.canvas3D.getHTMLElement().getBoundingClientRect();return this.getClosestItemAt(a+b.left,c+b.top)};HomeComponent3D.prototype.convertPixelLocationToVirtualWorldPoint=function(b,e){var c=this.canvas3D.getVirtualWorldToImageTransform(mat4.create());mat4.invert(c,c);mat4.mul(c,this.canvas3D.getViewPlatformTransform(mat4.create()),c);var d=this.getHTMLElement().getBoundingClientRect();var a=vec3.fromValues((b/d.width-0.5)*2,(0.5-e/d.height)*2,0);vec3.transformMat4(a,a,c);return a};HomeComponent3D.prototype.convertPixelLocationToVirtualWorld=function(b,c){var a=this.convertPixelLocationToVirtualWorldPoint(b,c);return[a[0],a[2],a[1]]};HomeComponent3D.prototype.getVirtualWorldPointAt=function(g,f,i){var h=this.convertPixelLocationToVirtualWorldPoint(g,f);var d=this.home.getCamera();var c=vec3.fromValues(d.getX(),d.getZ(),d.getY());var a=vec3.sub(vec3.fromValues(0,0,0),h,c);if(a[1]>0){a[1]=-a[1]}var j=(i-h[1])/a[1];var b=(h[0]+j*a[0]);var e=(h[2]+j*a[2]);return[b,e,i]};HomeComponent3D.prototype.createSceneTree=function(b,d){var a=new Group3D();a.addChild(this.createBackgroundNode(b,d));var e=this.createGroundNode(-50000,-50000,100000,100000,b,d);a.addChild(e);a.addChild(this.createHomeTree(b,d));this.sceneLights=this.createLights(b);for(var c=0;c<this.sceneLights.length;c++){a.addChild(this.sceneLights[c])}return a};HomeComponent3D.prototype.createBackgroundNode=function(e,f){var j=new Appearance3D();var d=this.createHalfSphereGeometry(true);var b=new Shape3D(d,j);var c=new BranchGroup3D();c.addChild(b);c.addChild(new Shape3D(this.createHalfSphereGeometry(false)));var h=new Appearance3D();var g=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-1,-0.01,-1),vec3.fromValues(-1,-0.01,1),vec3.fromValues(1,-0.01,1),vec3.fromValues(1,-0.01,-1)],[0,1,2,0,2,3],[],[],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),h);c.addChild(g);var a=new Background3D(c);this.updateBackgroundColorAndTexture(j,h,this.home,f);h.setVisible(this.home.getCamera().getZ()>=0);if(e){var i=this;this.backgroundChangeListener=function(k){i.updateBackgroundColorAndTexture(j,h,i.home,f)};i.home.getEnvironment().addPropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);this.elevationChangeListener=function(k){if(k.getSource()===i.home){k.getOldValue().removePropertyChangeListener(i.elevationChangeListener);i.home.getCamera().addPropertyChangeListener(i.elevationChangeListener)}if(k.getSource()===i.home||k.getPropertyName()==="Z"){h.setVisible(i.home.getCamera().getZ()>=0)}};this.home.getCamera().addPropertyChangeListener(this.elevationChangeListener);this.home.addPropertyChangeListener("CAMERA",this.elevationChangeListener)}return a};HomeComponent3D.prototype.createHalfSphereGeometry=function(l){var x=48;var q=[];var e=[];var r=[];for(var t=0,n=0;t<x;t++){var b=t*2*Math.PI/x;var g=Math.cos(b);var m=Math.sin(b);var d=(t+1)*2*Math.PI/x;var c=Math.cos(d);var v=Math.sin(d);for(var o=0,s=x/4;o<s;o++,n+=4){var w=2*o*Math.PI/x;var u=Math.cos(w);var z=Math.sin(w);var h=o!==0?(l?z:-z):-0.01;var f=2*(o+1)*Math.PI/x;if(!l){f=-f}var a=Math.cos(f);var p=Math.sin(f);q.push(vec3.fromValues(g*u,h,m*u));q.push(vec3.fromValues(c*u,h,v*u));q.push(vec3.fromValues(c*a,p,v*a));q.push(vec3.fromValues(g*a,p,m*a));if(l){e.push(n);e.push(n+1);e.push(n+2);e.push(n);e.push(n+2);e.push(n+3);r.push(vec2.fromValues(t/x,o/s));r.push(vec2.fromValues((t+1)/x,o/s));r.push(vec2.fromValues((t+1)/x,(o+1)/s));r.push(vec2.fromValues(t/x,(o+1)/s))}else{e.push(n);e.push(n+2);e.push(n+1);e.push(n);e.push(n+3);e.push(n+2)}}}return new IndexedTriangleArray3D(q,e,r,e,[],[])};HomeComponent3D.prototype.updateBackgroundColorAndTexture=function(i,g,f,e){var h=f.getEnvironment().getSkyColor();i.setDiffuseColor(vec3.fromValues(((h>>>16)&255)/255,((h>>>8)&255)/255,(h&255)/255));var j=f.getEnvironment().getSkyTexture();if(j!==null){var a=mat3.create();mat3.fromTranslation(a,vec2.fromValues(-j.getXOffset(),0));TextureManager.getInstance().loadTexture(j.getImage(),0,e,{textureUpdated:function(k){i.setTextureImage(k);i.setTextureTransform(a)},textureError:function(k){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}else{i.setTextureImage(null)}var c=f.getEnvironment().getGroundColor();var d=vec3.fromValues(((c>>>16)&255)/255,((c>>>8)&255)/255,(c&255)/255);g.setDiffuseColor(d);g.setAmbientColor(d);var b=f.getEnvironment().getGroundTexture();if(b!==null){TextureManager.getInstance().loadTexture(b.getImage(),0,e,{textureUpdated:function(k){g.setTextureImage(k);g.setTextureCoordinatesGeneration({planeS:vec4.fromValues(100000,0,0,0),planeT:vec4.fromValues(0,0,100000,0)})},textureError:function(k){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}else{g.setTextureImage(null)}};HomeComponent3D.prototype.createGroundNode=function(g,f,b,c,d,e){if(this.home.structure){var l=new BranchGroup3D();l.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);ModelManager.getInstance().loadModel(this.home.structure,e,{modelUpdated:function(m){l.addChild(m)},modelError:function(m){var n=new Appearance3D();n.setDiffuseColor(vec3.fromValues(1,0,0));l.addChild(new Box3D(10000000,0,10000000,n))}});this.groundChangeListener=function(m){};return l}else{var j=typeof Ground3D!=="undefined"?new Ground3D(this.home,g,f,b,c,e):new Box3D(10000000,0,10000000,new Appearance3D());var a=mat4.create();mat4.translate(a,a,vec3.fromValues(0,-0.2,0));var i=new TransformGroup3D(a);i.addChild(j);if(d){var k=this;this.groundChangeListener=function(m){if(!k.groundChangeListener.updater){k.groundChangeListener.updater=function(){j.update();delete k.groundChangeListener.updater};setTimeout(k.groundChangeListener.updater,0)}};var h=this.home.getEnvironment();h.addPropertyChangeListener("GROUND_COLOR",this.groundChangeListener);h.addPropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener);h.addPropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener);this.home.addPropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener)}return i}};HomeComponent3D.prototype.createLights=function(b){var c=[new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(-1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(0,-0.8,1)),new DirectionalLight3D(vec3.fromValues(0.7,0.7,0.7),vec3.fromValues(0,1,0)),new AmbientLight3D(vec3.fromValues(0.2,0.2,0.2))];for(var d=0;d<c.length-1;d++){c[d].defaultColor=c[d].getColor();this.updateLightColor(c[d])}if(b){var a=this;this.lightColorListener=function(f){for(var e=0;e<c.length-1;e++){a.updateLightColor(c[e])}};this.home.getEnvironment().addPropertyChangeListener("LIGHT_COLOR",this.lightColorListener)}return c};HomeComponent3D.prototype.updateLightColor=function(b){var c=b.defaultColor;var a=this.home.getEnvironment().getLightColor();b.setColor(vec3.fromValues(((a>>>16)&255)/255*c[0],((a>>>8)&255)/255*c[1],(a&255)/255*c[2]))};HomeComponent3D.prototype.createHomeTree=function(k,l){var a=new BranchGroup3D();a.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);var m=this.home.getLabels();for(var h=0;h<m.length;h++){this.addObject(a,m[h],k,l)}var g=this.home.getDimensionLines();for(var h=0;h<g.length;h++){this.addObject(a,g[h],k,l)}var e=this.home.getPolylines();for(var h=0;h<e.length;h++){this.addObject(a,e[h],k,l)}var d=this.home.getRooms();for(var h=0;h<d.length;h++){this.addObject(a,d[h],k,l)}var b=this.home.getWalls();for(var h=0;h<b.length;h++){this.addObject(a,b[h],k,l)}var n=this.home.getFurniture();for(var h=0;h<n.length;h++){var p=n[h];if(p instanceof HomeFurnitureGroup){var c=p.getAllFurniture();for(var f=0;f<c.length;f++){var o=c[f];if(!(o instanceof HomeFurnitureGroup)){this.addObject(a,o,k,l)}}}else{this.addObject(a,p,k,l)}}if(k){this.addLevelListener(a);this.addWallListener(a);this.addFurnitureListener(a);this.addRoomListener(a);this.addPolylineListener(a);this.addDimensionLineListener(a);this.addLabelListener(a);this.addEnvironmentListeners();component3D=this;this.selectionListener={selectionChanged:function(i){component3D.updateObjectsAndFurnitureGroups(i.getOldSelectedItems());component3D.updateObjectsAndFurnitureGroups(i.getSelectedItems())}};this.home.addSelectionListener(this.selectionListener)}return a};HomeComponent3D.prototype.addLevelListener=function(d){var a=this;this.levelChangeListener=function(h){var e=h.getPropertyName();if("VISIBLE"==e||"VIEWABLE"==e){var j=a.homeObjects;var k=[];for(var f=0;f<j.length;f++){var g=j[f];if(g instanceof Room||g.isAtLevel!==undefined||g.isAtLevel(h.getSource())){k.push(g)}}a.updateObjects(k);a.groundChangeListener(null)}else{if("ELEVATION"==e){a.updateObjects(a.homeObjects.slice(0));a.groundChangeListener(null)}else{if("BACKGROUND_IMAGE"==e){a.groundChangeListener(null)}else{if("FLOOR_THICKNESS"==e){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())}else{if("HEIGHT"==e){a.updateObjects(a.home.getRooms())}}}}}};var c=this.home.getLevels();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.levelChangeListener)}this.levelListener=function(e){var f=e.getItem();switch((e.getType())){case CollectionEvent.Type.ADD:f.addPropertyChangeListener(a.levelChangeListener);break;case CollectionEvent.Type.DELETE:f.removePropertyChangeListener(a.levelChangeListener);break}a.updateObjects(a.home.getRooms())};this.home.addLevelsListener(this.levelListener)};HomeComponent3D.prototype.addWallListener=function(d){var a=this;this.wallChangeListener=function(g){var f=g.getPropertyName();if("PATTERN"!=f){var e=g.getSource();a.updateWall(e);var h=a.home.getLevels();if(e.getLevel()===null||e.isAtLevel(h[h.length-1])){a.updateObjects(a.home.getRooms())}if(e.getLevel()!=null&&e.getLevel().getElevation()<0){a.groundChangeListener(null)}}};var b=this.home.getWalls();for(var c=0;c<b.length;c++){b[c].addPropertyChangeListener(this.wallChangeListener)}this.wallListener=function(f){var e=f.getItem();switch((f.getType())){case CollectionEvent.Type.ADD:a.addObject(d,e,true,false);e.addPropertyChangeListener(a.wallChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.wallChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addWallsListener(this.wallListener)};HomeComponent3D.prototype.addFurnitureListener=function(e){var a=this;var c=function(i,g,h){a.updateObjects([i]);if(a.containsDoorsAndWindows(i)){if(h!==null){var f=i.clone();if("X"==g){f.setX(h)}else{if("Y"==g){f.setY(h)}else{if("ANGLE"==g){f.setAngle(h)}else{if("WIDTH"==g){f.setWidth(h)}else{if("DEPTH"==g){f.setDepth(h)}}}}}a.updateIntersectingWalls([f,i])}else{a.updateIntersectingWalls([i])}a.updateObjects(a.home.getWalls())}else{if(a.containsStaircases(i)){a.updateObjects(a.home.getRooms())}}if(i.getLevel()!==null&&i.getLevel().getElevation()<0){a.groundChangeListener(null)}};this.furnitureChangeListener=function(h){var f=h.getSource();var g=h.getPropertyName();if("X"==g||"Y"==g||"ANGLE"==g||"ROLL"==g||"PITCH"==g||"WIDTH"==g||"DEPTH"==g){c(f,g,h.getOldValue())}else{if("HEIGHT"==g||"ELEVATION"==g||"MODEL"==g||"MODEL_ROTATION"==g||"MODEL_MIRRORED"==g||"MODEL_FLAGS"==g||"MODEL_TRANSFORMATIONS"==g||"STAIRCASE_CUT_OUT_SHAPE"==g||"VISIBLE"==g||"LEVEL"==g){c(f,null,null)}else{if("CUT_OUT_SHAPE"==g||"WALL_CUT_OUT_ON_BOTH_SIDES"==g||"WALL_WIDTH"==g||"WALL_LEFT"==g||"WALL_HEIGHT"==g||"WALL_TOP"==g){if(a.containsDoorsAndWindows(f)){a.updateIntersectingWalls([f])}}else{if("COLOR"==g||"TEXTURE"==g||"MODEL_MATERIALS"==g||"SHININESS"==g||("POWER"==g&&a.home.getEnvironment().getSubpartSizeUnderLight()>0)){a.updateObjects([f])}}}}};var d=this.home.getFurniture();for(var b=0;b<d.length;b++){this.addPropertyChangeListener(d[b],this.furnitureChangeListener)}this.furnitureListener=function(g){var f=g.getItem();switch(g.getType()){case CollectionEvent.Type.ADD:a.addPieceOfFurniture(e,f,true,false);a.addPropertyChangeListener(f,a.furnitureChangeListener);break;case CollectionEvent.Type.DELETE:a.deletePieceOfFurniture(f);a.removePropertyChangeListener(f,a.furnitureChangeListener);break}if(a.containsDoorsAndWindows(f)){a.updateIntersectingWalls([f])}else{if(a.containsStaircases(f)){a.updateObjects(a.home.getRooms())}else{a.approximateHomeBoundsCache=null;a.homeHeightCache=null}}a.groundChangeListener(null)};this.home.addFurnitureListener(this.furnitureListener)};HomeComponent3D.prototype.addPropertyChangeListener=function(b,d){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.addPropertyChangeListener(c[a],d)}}else{b.addPropertyChangeListener(d)}};HomeComponent3D.prototype.removePropertyChangeListener=function(b,d){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.removePropertyChangeListener(c[a],d)}}else{b.removePropertyChangeListener(d)}};HomeComponent3D.prototype.containsDoorsAndWindows=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsDoorsAndWindows(c[a])){return true}}return false}else{return b.isDoorOrWindow()}};HomeComponent3D.prototype.containsStaircases=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsStaircases(c[a])){return true}}return false}else{return b.getStaircaseCutOutShape()!==null}};HomeComponent3D.prototype.addRoomListener=function(c){var a=this;this.roomChangeListener=function(o){var p=o.getSource();var m=o.getPropertyName();if("FLOOR_COLOR"==m||"FLOOR_TEXTURE"==m||"FLOOR_SHININESS"==m||"CEILING_COLOR"==m||"CEILING_TEXTURE"==m||"CEILING_SHININESS"==m||"CEILING_FLAT"==m){a.updateObjects([p])}else{if("FLOOR_VISIBLE"==m||"CEILING_VISIBLE"==m||"LEVEL"==m){a.updateObjects(a.home.getRooms());a.groundChangeListener(null)}else{if("POINTS"==m){if(a.homeObjectsToUpdate){a.updateObjects(a.home.getRooms())}else{a.updateObjects([p]);var f=new java.awt.geom.Area(a.getShape(o.getOldValue()));var n=new java.awt.geom.Area(a.getShape(o.getNewValue()));var j=p.getLevel();var h=a.home.getRooms();for(var k=0;k<h.length;k++){var e=h[k];var q=e.getLevel();if(e!=p&&(q==null||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()+q.getHeight()))<0.00001||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()-q.getFloorThickness()))<0.00001)){var l=new java.awt.geom.Area(a.getShape(e.getPoints()));var g=new java.awt.geom.Area(l);g.intersect(n);if(!g.isEmpty()){a.updateObjects([e])}else{l.intersect(f);if(!l.isEmpty()){a.updateObjects([e])}}}}}a.groundChangeListener(null)}}}};var d=this.home.getRooms();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.roomChangeListener)}this.roomListener=function(e){var f=e.getItem();switch(e.getType()){case CollectionEvent.Type.ADD:a.addObject(c,f,e.getIndex(),true,false);f.addPropertyChangeListener(a.roomChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(f);f.removePropertyChangeListener(a.roomChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addRoomsListener(this.roomListener)};HomeComponent3D.prototype.getShape=function(b){var c=new java.awt.geom.GeneralPath();c.moveTo(b[0][0],b[0][1]);for(var a=1;a<b.length;a++){c.lineTo(b[a][0],b[a][1])}c.closePath();return c};HomeComponent3D.prototype.addPolylineListener=function(d){var a=this;this.polylineChangeListener=function(f){var e=f.getSource();a.updateObjects([e])};var c=this.home.getPolylines();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.polylineChangeListener)}this.polylineListener=function(f){var e=f.getItem();switch(f.getType()){case CollectionEvent.Type.ADD:a.addObject(d,e,true,false);e.addPropertyChangeListener(a.polylineChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.polylineChangeListener);break}};this.home.addPolylinesListener(this.polylineListener)};HomeComponent3D.prototype.addDimensionLineListener=function(d){var b=this;this.dimensionLineChangeListener=function(e){var f=e.getSource();b.updateObjects([f])};var a=this.home.getDimensionLines();for(var c=0;c<a.length;c++){a[c].addPropertyChangeListener(this.dimensionLineChangeListener)}this.dimensionLineListener=function(f){var e=f.getItem();switch(f.getType()){case CollectionEvent.Type.ADD:b.addObject(d,e,true,false);e.addPropertyChangeListener(b.dimensionLineChangeListener);break;case CollectionEvent.Type.DELETE:b.deleteObject(e);e.removePropertyChangeListener(b.dimensionLineChangeListener);break}};this.home.addDimensionLinesListener(this.dimensionLineListener)};HomeComponent3D.prototype.addLabelListener=function(c){var a=this;this.labelChangeListener=function(f){var e=f.getSource();a.updateObjects([e])};var d=this.home.getLabels();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.labelChangeListener)}this.labelListener=function(f){var e=f.getItem();switch(f.getType()){case CollectionEvent.Type.ADD:a.addObject(c,e,true,false);e.addPropertyChangeListener(a.labelChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.labelChangeListener);break}};this.home.addLabelsListener(this.labelListener)};HomeComponent3D.prototype.addEnvironmentListeners=function(){var a=this;this.wallsAlphaListener=function(b){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())};this.home.getEnvironment().addPropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener)};HomeComponent3D.prototype.addObject=function(e,b,c,a,d){if(d===undefined){d=a;a=c;c=-1}var f=this.object3dFactory.createObject3D(this.home,b,d);if(a){b.object3D=f;this.homeObjects.push(b);this.homeObjects3D.push(f)}if(c===-1){e.addChild(f)}else{e.insertChild(f,c)}return f};HomeComponent3D.prototype.addPieceOfFurniture=function(f,c,a,e){if(c instanceof HomeFurnitureGroup){var d=c.getFurniture();for(var b=0;b<d.length;b++){this.addPieceOfFurniture(f,d[b],a,e)}}else{this.addObject(f,c,a,e)}};HomeComponent3D.prototype.deleteObject=function(a){if(a.object3D){a.object3D.detach();delete a.object3D;var c=this.homeObjects.indexOf(a);this.homeObjects.splice(c,1);this.homeObjects3D.splice(c,1);if(this.homeObjectsToUpdate){var b=this.homeObjectsToUpdate.indexOf(a);if(b>=0){this.homeObjectsToUpdate.splice(b,1)}}}};HomeComponent3D.prototype.deletePieceOfFurniture=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.deletePieceOfFurniture(c[a])}}else{this.deleteObject(b)}};HomeComponent3D.prototype.updateObjects=function(c){if(this.homeObjectsToUpdate){for(var b=0;b<c.length;b++){var a=c[b];if(this.homeObjectsToUpdate.indexOf(a)<=-1){this.homeObjectsToUpdate.push(a)}}}else{this.homeObjectsToUpdate=c.slice(0);setTimeout(function(e){for(var f=0;f<e.homeObjectsToUpdate.length;f++){var d=e.homeObjectsToUpdate[f];if(d.object3D){d.object3D.update()}}delete e.homeObjectsToUpdate},0,this)}this.approximateHomeBoundsCache=null;this.homeHeightCache=null};HomeComponent3D.prototype.updateObjectsAndFurnitureGroups=function(c){this.updateObjects(c);for(var a=0;a<c.length;a++){var b=c[a];if(b instanceof HomeFurnitureGroup){this.updateObjects(b.getAllFurniture())}}};HomeComponent3D.prototype.updateIntersectingWalls=function(e){var b=this.home.getWalls();var a=0;if(this.homeObjectsToUpdate){for(var d=0;d<this.homeObjectsToUpdate.length;d++){if(this.homeObjectsToUpdate[d] instanceof Wall){a++}}}if(a!==b.length){var l=[];var g=null;for(var d=0;d<e.length;d++){var k=e[d];var h=k.getPoints();if(g===null){g=new java.awt.geom.Rectangle2D.Float(h[0][0],h[0][1],0,0)}else{g.add(h[0][0],h[0][1])}for(var c=1;c<h.length;c++){g.add(h[c][0],h[c][1])}}for(var d=0;d<b.length;d++){var f=b[d];if(f.intersectsRectangle(g.getX(),g.getY(),g.getX()+g.getWidth(),g.getY()+g.getHeight())){l.push(f)}}this.updateObjects(l)}};HomeComponent3D.prototype.updateWall=function(b){var a=[];a.push(b);if(b.getWallAtStart()!=null){a.push(b.getWallAtStart())}if(b.getWallAtEnd()!=null){a.push(b.getWallAtEnd())}this.updateObjects(a)};function Object3DBranchFactory(a){if(a!==undefined){this.preferences=a}}Object3DBranchFactory.prototype.createObject3D=function(c,a,b){if(a instanceof HomePieceOfFurniture){return new HomePieceOfFurniture3D(a,c,this.preferences,b)}else{if(a instanceof Wall){return new Wall3D(a,c,this.preferences,b)}else{if(a instanceof Room){return new Room3D(a,c,this.preferences,false,b)}else{if(a instanceof Polyline){return new Polyline3D(a,c,this.preferences,b)}else{if(a instanceof DimensionLine){return new DimensionLine3D(a,c,this.preferences,b)}else{if(a instanceof Label){return new Label3D(a,c,this.preferences,b)}else{return new Group3D()}}}}}}};function Object3DBranch(a,c,b){BranchGroup3D.call(this);if(a!==undefined){this.setUserData(a);this.home=c;this.userPreferences=b}}Object3DBranch.prototype=Object.create(BranchGroup3D.prototype);Object3DBranch.prototype.constructor=Object3DBranch;Object3DBranch.DEFAULT_COLOR=16777215;Object3DBranch.DEFAULT_AMBIENT_COLOR=3355443;Object3DBranch.prototype.getHome=function(){return this.home!==undefined?this.home:null};Object3DBranch.prototype.getUserPreferences=function(){return this.userPreferences!==undefined?this.userPreferences:null};Object3DBranch.prototype.getShape=function(a){return ShapeTools.getShape(a,true,null)};Object3DBranch.prototype.updateAppearanceMaterial=function(a,d,b,c){if(d!==null){a.setAmbientColor(vec3.fromValues(((b>>>16)&255)/255,((b>>>8)&255)/255,(b&255)/255));a.setDiffuseColor(vec3.fromValues(((d>>>16)&255)/255,((d>>>8)&255)/255,(d&255)/255));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}else{a.setAmbientColor(vec3.fromValues(0.2,0.2,0.2));a.setDiffuseColor(vec3.fromValues(1,1,1));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}};Object3DBranch.prototype.updateTextureTransform=function(e,g,c){var f=g.getWidth();var j=g.getHeight();if(f===-1||j===-1){f=100;j=100}var i=g.getXOffset();var d=g.getYOffset();var h=1/g.getScale();var k=mat3.create();mat3.rotate(k,k,g.getAngle());var a=mat3.create();var b=mat3.create();if(c){mat3.fromTranslation(a,vec2.fromValues(-i/h*f,-d/h*j));mat3.scale(b,b,vec2.fromValues(h/f,h/j))}else{mat3.fromTranslation(a,vec2.fromValues(-i/h,-d/h));mat3.multiplyScalar(b,b,h)}mat3.mul(k,k,a);mat3.mul(b,b,k);e.setTextureTransform(b)};Object3DBranch.prototype.updateTextureTransformFittingArea=function(h,k,l,j){var f=Number.POSITIVE_INFINITY;var e=Number.POSITIVE_INFINITY;var c=Number.NEGATIVE_INFINITY;var b=Number.NEGATIVE_INFINITY;for(var g=0;g<l.length;g++){f=Math.min(f,l[g][0]);e=Math.min(e,l[g][1]);c=Math.max(c,l[g][0]);b=Math.max(b,l[g][1])}if(c-f<=0||b-e<=0){this.updateTextureTransform(h,k,true)}var a=mat3.create();mat3.fromTranslation(a,vec2.fromValues(-f,j?e:-e));var d=mat3.create();mat3.scale(d,d,vec2.fromValues(1/(c-f),1/(b-e)));mat3.mul(d,d,a);h.setTextureTransform(d)};Object3DBranch.prototype.getSelectionAppearance=function(){var a=new Appearance3D();a.setCullFace(Appearance3D.CULL_NONE);a.setIllumination(0);a.setDiffuseColor(vec3.fromValues(0,0,0.7102));return a};Object3DBranch.prototype.getAreaPoints=function(t,a,C,e,M){if(e===undefined&&M===undefined){e=a;M=C;a=null;C=null}var p=[];var x=[];var s=null;var Q=null;for(var r=t.getPathIterator(null,e);!r.isDone();r.next()){var u=[0,0];switch((r.currentSegment(u))){case java.awt.geom.PathIterator.SEG_MOVETO:s=[];s.push(u);Q=u;break;case java.awt.geom.PathIterator.SEG_LINETO:if(u[0]!==Q[0]||u[1]!==Q[1]){s.push(u)}Q=u;break;case java.awt.geom.PathIterator.SEG_CLOSE:var n=s[0];if(n[0]===Q[0]&&n[1]===Q[1]){s.splice(s.length-1,1)}if(s.length>2){var G=s;var f=new Room(G);if(f.getArea()>0){var P=f.isClockwise();if(P){x.push(s)}else{p.push(s)}if(a!==null||C!==null){if(P!==M){G=s.slice(0);G.reverse()}if(P){if(C!=null){C.push(G)}}else{if(a!=null){a.push(G)}}}}}break}}var J=[];if((x.length===0)&&a!==null){J.push.apply(J,a)}else{if((p.length===0)&&!(x.length===0)){if(C!==null){C.length=0}}else{var m;var g=[];if(p.length>1){m=[];for(var L=0;p.length!==0;){var y=p[L];var K=0;for(;K<p.length;K++){if(L!==K){var O=p[K];var h=null;for(var I=0;I<g.length;I++){if(g[I].key===O){h=g[I].value;break}}if(h==null){h=new java.awt.geom.Area(this.getShape(O.slice(0)));g.push({key:O,value:h})}if(h.contains(y[0][0],y[0][1])){break}}}if(K===p.length){p.splice(L,1);m.push(y);L=0}else{if(L<p.length){L++}else{L=0}}}}else{m=p}for(var L=m.length-1;L>=0;L--){var D=m[L];var h=null;for(var I=0;I<g.length;I++){if(g[I].key===D){h=g[I].value;break}}if(h===null){h=new java.awt.geom.Area(this.getShape(D.slice(0)))}var E=[];for(var I=0;I<x.length;I++){var F=x[I];if(h.contains(F[0][0],F[0][1])){E.push(F)}}var v=null;while(E.length!==0){var c=Number.MAX_VALUE;var z=0;var w=0;var N=0;for(var K=0;K<E.length&&c>0;K++){var F=E[K];for(var I=0;I<F.length&&c>0;I++){for(var H=0;H<D.length&&c>0;H++){var q=D[H];var o=java.awt.geom.Point2D.distanceSq(F[I][0],F[I][1],q[0],q[1]);if(o<c&&v!==q){c=o;z=K;w=I;N=H}}}}var d=E[z];if(c!==0){v=D[N];D.splice(N,0,v);D.splice(++N,0,d[w])}var B=d.slice(w,d.length);for(var I=0;I<B.length;I++,N++){D.splice(N,0,B[I])}var A=d.slice(0,w);for(var I=0;I<A.length;I++,N++){D.splice(N,0,A[I])}E.splice(z,1);x.splice(d,1)}}for(var I=0;I<m.length;I++){var b=m[I];if(M){b.reverse()}J.push(b.slice(0))}}}return J};Object3DBranch.areModelRotationsEqual=function(a,d){if(a===d){return true}else{if(a==null||d==null){return false}else{for(var c=0;c<a.length;c++){for(var b=0;b<d.length;b++){if(a[c][b]!==d[c][b]){return false}}}return true}}};function HomePieceOfFurniture3D(b,d,a,c){if(c===undefined){c=a;a=null}Object3DBranch.call(this,b,d,a);this.createPieceOfFurnitureNode(b,c)}HomePieceOfFurniture3D.prototype=Object.create(Object3DBranch.prototype);HomePieceOfFurniture3D.prototype.constructor=HomePieceOfFurniture3D;HomePieceOfFurniture3D.DEFAULT_BOX=new Object();HomePieceOfFurniture3D.SELECTION_BOX_GEOMETRY=new IndexedLineArray3D([vec3.fromValues(-0.5,-0.5,-0.5),vec3.fromValues(0.5,-0.5,-0.5),vec3.fromValues(0.5,0.5,-0.5),vec3.fromValues(-0.5,0.5,-0.5),vec3.fromValues(-0.5,-0.5,0.5),vec3.fromValues(0.5,-0.5,0.5),vec3.fromValues(0.5,0.5,0.5),vec3.fromValues(-0.5,0.5,0.5)],[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7,4,6,5,7]);HomePieceOfFurniture3D.prototype.createPieceOfFurnitureNode=function(b,c){var a=new TransformGroup3D();a.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);a.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);this.addChild(a);this.loadPieceOfFurnitureModel(c)};HomePieceOfFurniture3D.prototype.loadPieceOfFurnitureModel=function(f){var c=new BranchGroup3D();var a=new TransformGroup3D();a.addChild(this.getModelBox(vec3.fromValues(1,1,1)));a.setUserData(PieceOfFurniture.IDENTITY_ROTATION);c.addChild(a);var e=this.getChild(0);e.removeAllChildren();e.addChild(c);this.updatePieceOfFurnitureTransform();var d=this.getUserData();var b=d.getModel();e.setUserData(b);var g=this;ModelManager.getInstance().loadModel(b,typeof f=="function"?false:f,{modelUpdated:function(j){g.updateModelTransformations(j);var i=d.getModelRotation();var h=ModelManager.getInstance().getNormalizedTransformGroup(j,i,1,d.isModelCenteredAtOrigin());h.setUserData(i);g.updatePieceOfFurnitureModelNode(j,h,f)},modelError:function(h){g.updatePieceOfFurnitureModelNode(g.getModelBox(vec3.fromValues(1,0,0)),new TransformGroup3D(),f)}})};HomePieceOfFurniture3D.prototype.update=function(){if(this.isVisible()){var b=this.getUserData();var c=this.getChild(0);var a=c.getChild(0).getChild(0);if(b.getModel().equals(c.getUserData())&&Object3DBranch.areModelRotationsEqual(b.getModelRotation(),a.getUserData())){this.updatePieceOfFurnitureModelTransformations();this.updatePieceOfFurnitureTransform();this.updatePieceOfFurnitureColorAndTexture(false)}else{this.loadPieceOfFurnitureModel(false)}}this.updatePieceOfFurnitureVisibility()};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureTransform=function(){var a=this.getChild(0);var b=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(this.getUserData(),a.getChild(0));a.setTransform(b)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureColorAndTexture=function(d){var c=this.getUserData();var a=this.getModelNode();var b=a.getChild(0);if(b.getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX){if(c.getColor()!==null){this.setColorAndTexture(a,c.getColor(),null,c.getShininess(),null,c.isModelMirrored(),c.getModelFlags(),false,null,null,[])}else{if(c.getTexture()!==null){this.setColorAndTexture(a,null,c.getTexture(),c.getShininess(),null,c.isModelMirrored(),c.getModelFlags(),d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{if(c.getModelMaterials()!==null){this.setColorAndTexture(a,null,null,null,c.getModelMaterials(),c.isModelMirrored(),c.getModelFlags(),d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{this.setColorAndTexture(a,null,null,c.getShininess(),null,c.isModelMirrored(),c.getModelFlags(),false,null,null,[])}}}}};HomePieceOfFurniture3D.prototype.getModelNode=function(){var a=this.getChild(0);var b=a.getChild(0);return b.getChild(0)};HomePieceOfFurniture3D.prototype.getSelectionNode=function(){var a=this.getChild(0);var b=a.getChild(0);if(b.getChildren().length>1&&b.getChild(1) instanceof Shape3D){return b.getChild(1)}else{return null}};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureVisibility=function(){var b=this.getUserData();var d=this.isVisible();var a=b.getColor()===null&&b.getTexture()===null?b.getModelMaterials():null;this.setVisible(this.getModelNode(),d,b.getModelFlags(),a);var c=this.getSelectionNode();if(c!=null){this.setVisible(c,this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&d&&this.getHome()!=null&&this.isSelected(this.getHome().getSelectedItems()),0,null)}};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelTransformations=function(){var b=this.getUserData();var a=this.getModelNode();if(a.getChild(0).getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX&&this.updateModelTransformations(this)){var c=ModelManager.getInstance().getNormalizedTransform(a.getChild(0),b.getModelRotation(),1,b.isModelCenteredAtOrigin());a.setTransform(c)}};HomePieceOfFurniture3D.prototype.updateModelTransformations=function(g){var e=false;var b=this.getUserData().getModelTransformations();var a=null;if(b!==null){for(var d=0;d<b.length;d++){var f=b[d];var c=f.getName()+ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX;if(a===null){a=[]}a.push(c);e|=this.updateTransformation(g,c,f.getMatrix())}}e|=this.setNotUpdatedTranformationsToIdentity(g,a);return e};HomePieceOfFurniture3D.prototype.updateTransformation=function(f,g,a){var e=false;if(f instanceof Group3D){if(f instanceof TransformGroup3D&&g==f.getName()){var b=mat4.create();f.getTransform(b);if(a[0][0]!==b[0]||a[0][1]!==b[4]||a[0][2]!==b[8]||a[0][3]!==b[12]||a[1][0]!==b[1]||a[1][1]!==b[5]||a[1][2]!==b[9]||a[1][3]!==b[13]||a[2][0]!==b[2]||a[2][1]!==b[6]||a[2][2]!==b[10]||a[2][3]!==b[14]){mat4.set(b,a[0][0],a[1][0],a[2][0],0,a[0][1],a[1][1],a[2][1],0,a[0][2],a[1][2],a[2][2],0,a[0][3],a[1][3],a[2][3],1);f.setTransform(b);e=true}}else{var d=f.getChildren();for(var c=0;c<d.length;c++){e|=this.updateTransformation(d[c],g,a)}}}return e};HomePieceOfFurniture3D.prototype.setNotUpdatedTranformationsToIdentity=function(f,a){var e=false;if(f instanceof Group3D){if(f instanceof TransformGroup3D&&f.getName()!==null&&f.getName().indexOf(ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX)>=0&&f.getName().indexOf(ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX)===f.getName().length-ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX.length&&(a===null||a.indexOf(f.getName())<0)){var g=f;var b=mat4.create();g.getTransform(b);if(!TransformGroup3D.isIdentity(b)){mat4.identity(b);g.setTransform(b);e=true}}var d=f.getChildren();for(var c=0;c<d.length;c++){e|=this.setNotUpdatedTranformationsToIdentity(d[c],a)}}return e};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelNode=function(c,a,g){a.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);a.addChild(c);var e=new BranchGroup3D();e.addChild(a);if(this.getHome()!=null){var b=new Shape3D(HomePieceOfFurniture3D.SELECTION_BOX_GEOMETRY,this.getSelectionAppearance());b.setPickable(false);e.addChild(b)}var d=this.getUserData();if(d.isDoorOrWindow()){this.setTransparentShapeNotPickable(c)}var f=this.getChild(0);f.removeAllChildren();f.addChild(e);if(d.isHorizontallyRotated()){this.updatePieceOfFurnitureTransform()}if(d.isBackFaceShown()){this.setBackFaceNormalFlip(this.getModelNode(),true)}this.modifiedTexturesCount=0;this.updatePieceOfFurnitureColorAndTexture(g);this.updatePieceOfFurnitureVisibility();if(this.modifiedTexturesCount===0&&typeof g=="function"){g(this)}};HomePieceOfFurniture3D.prototype.getModelBox=function(a){var c=new Appearance3D();c.setDiffuseColor(a);c.setAmbientColor(vec3.scale(vec3.create(),a,0.7));var b=new Box3D(0.5,0.5,0.5,c);b.setUserData(HomePieceOfFurniture3D.DEFAULT_BOX);return b};HomePieceOfFurniture3D.prototype.setColorAndTexture=function(t,v,p,u,c,j,e,m,A,d,z){if(t instanceof Group3D){var f=t.getChildren();for(var x=0;x<f.length;x++){this.setColorAndTexture(f[x],v,p,u,c,j,e,m,A,d,z)}}else{if(t instanceof Link3D){this.setColorAndTexture(t.getSharedGroup(),v,p,u,c,j,e,m,A,d,z)}else{if(t instanceof Shape3D){var b=t;var w=b.getName();var o=b.getAppearance();if(o===null){o=new Appearance3D();t.setAppearance(o)}if(z.indexOf(o)===-1){var a=null;var y=v!==null;var r=!y&&p!==null;var h=!y&&!r&&c!==null&&c.length>0;var l=y||r||h||u!==null||j||e!=0;var s=w!==null&&w.indexOf(ModelManager.WINDOW_PANE_SHAPE_PREFIX)===0;if(!s&&l||s&&h){if(o.defaultAppearance===undefined){o.defaultAppearance=o.clone()}a=o.defaultAppearance}var g=0;if(l){g=u!==null?u:(o.getSpecularColor()!==undefined&&o.getShininess()!==undefined?o.getShininess()/128:0)}if(y){if(s){this.restoreDefaultAppearance(o,null)}else{this.updateAppearanceMaterial(o,v,v,g);if(a.getTransparency()!==undefined){o.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){o.setCullFace(a.getCullFace())}o.setTextureCoordinatesGeneration(a.getTextureCoordinatesGeneration());o.setTextureImage(null)}}else{if(r){if(s){this.restoreDefaultAppearance(o,null)}else{o.setTextureCoordinatesGeneration(this.getTextureCoordinates(o,p,A,d));this.updateTextureTransform(o,p,true);this.updateAppearanceMaterial(o,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,g);TextureManager.getInstance().loadTexture(p.getImage(),0,typeof m=="function"?false:m,this.getTextureObserver(o,j,e,m))}}else{if(h){var q=false;for(var x=0;x<c.length;x++){var n=c[x];if(n!==null&&(n.getKey()!=null&&n.getKey()==o.getName()||n.getKey()==null&&n.getName()==o.getName())){if(n.getShininess()!==null){g=n.getShininess()}v=n.getColor();if(v!==null&&(v&4278190080)!=0){this.updateAppearanceMaterial(o,v,v,g);if(a.getTransparency()!==undefined){o.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){o.setCullFace(a.getCullFace())}o.setTextureImage(null)}else{if(v===null&&n.getTexture()!==null){var k=n.getTexture();if(this.isTexturesCoordinatesDefined(b)){this.restoreDefaultTextureCoordinatesGeneration(o);this.updateTextureTransform(o,k)}else{o.setTextureCoordinatesGeneration(this.getTextureCoordinates(o,n.getTexture(),A,d));this.updateTextureTransform(o,k,true)}this.updateAppearanceMaterial(o,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,g);var k=n.getTexture();TextureManager.getInstance().loadTexture(k.getImage(),0,typeof m=="function"?false:m,this.getTextureObserver(o,j,e,m))}else{this.restoreDefaultAppearance(o,n.getShininess())}}q=true;break}}if(!q){this.restoreDefaultAppearance(o,null)}}else{this.restoreDefaultAppearance(o,u)}}}this.setCullFace(o,j,(e&PieceOfFurniture.SHOW_BACK_FACE)!=0);z.push(o)}}}}};HomePieceOfFurniture3D.prototype.getTextureObserver=function(a,e,b,d){var c=this;this.modifiedTexturesCount++;return{textureUpdated:function(f){if(TextureManager.getInstance().isTextureTransparent(f)){a.setCullFace(Appearance3D.CULL_NONE)}else{var g=a.defaultAppearance;if(g!==null&&g.getCullFace()!==null){a.setCullFace(g.getCullFace())}}if(a.getTextureImage()!==f){a.setTextureImage(f)}c.setCullFace(a,e,(b&PieceOfFurniture.SHOW_BACK_FACE)!=0);if(--c.modifiedTexturesCount===0&&typeof d=="function"){d(c)}},textureError:function(f){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}}};HomePieceOfFurniture3D.prototype.getTextureCoordinates=function(g,h,d,k){var e=vec3.create();k.getLower(e);var l=vec3.create();k.getUpper(l);var a=ModelManager.getInstance().getMinimumSize();var i=d[0]/Math.max(l[0]-e[0],a);var j=-e[0]*i;var c=d[1]/Math.max(l[1]-e[1],a);var b=d[2]/Math.max(l[2]-e[2],a);var f=-e[1]*c+l[2]*b;return{planeS:vec4.fromValues(i,0,0,j),planeT:vec4.fromValues(0,c,-b,f)}};HomePieceOfFurniture3D.prototype.isTexturesCoordinatesDefined=function(a){var c=a.getGeometries();for(var b=0,d=c.length;b<d;b++){if(!c[b].hasTextureCoordinates()){return false}}return true};HomePieceOfFurniture3D.prototype.setCullFace=function(a,d,e){if(a.getCullFace()!==Appearance3D.CULL_NONE){var c=a.getCullFace()!==undefined?a.getCullFace():Appearance3D.CULL_BACK;var b=a.defaultCullFace;if(b===undefined){a.defaultCullFace=(b=c)}a.setCullFace((d^e^b===Appearance3D.CULL_FRONT)?Appearance3D.CULL_FRONT:Appearance3D.CULL_BACK)}};HomePieceOfFurniture3D.prototype.restoreDefaultAppearance=function(a,b){if(a.defaultAppearance!==undefined){var c=a.defaultAppearance;if(c.getAmbientColor()!==undefined){a.setAmbientColor(c.getAmbientColor())}if(c.getDiffuseColor()!==undefined){a.setDiffuseColor(c.getDiffuseColor());if(b!==null){a.setSpecularColor(vec3.fromValues(b,b,b));a.setShininess(b*128)}else{a.setSpecularColor(c.getSpecularColor());a.setShininess(c.getShininess())}}if(c.getTransparency()!==undefined){a.setTransparency(c.getTransparency())}if(a.getCullFace()!==undefined){a.setCullFace(c.getCullFace())}if(c.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(c.getTextureCoordinatesGeneration())}if(a.getTextureImage()!==undefined){a.setTextureImage(c.getTextureImage())}}};HomePieceOfFurniture3D.prototype.restoreDefaultTextureCoordinatesGeneration=function(a){if(a.defaultAppearance!==undefined){var b=a.defaultAppearance;if(b.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(b.getTextureCoordinatesGeneration())}}};HomePieceOfFurniture3D.prototype.setVisible=function(c,b,k,m){if(c instanceof Group3D){var a=c.getChildren();for(var e=0;e<a.length;e++){this.setVisible(a[e],b,k,m)}}else{if(c instanceof Link3D){this.setVisible(c.getSharedGroup(),b,k,m)}else{if(c instanceof Shape3D){var j=c;var f=j.getAppearance();if(f===null){f=new Appearance3D();c.setAppearance(f)}var l=j.getName();if(b&&l!==null&&l.indexOf(ModelManager.LIGHT_SHAPE_PREFIX)===0&&this.getHome()!==null&&!this.isSelected(this.getHome().getSelectedItems())&&(typeof HomeLight==="undefined"||this.getUserData() instanceof HomeLight)){b=false}if(b){var h=f.getName();if(h!=null){if((k&PieceOfFurniture.HIDE_EDGE_COLOR_MATERIAL)!=0&&h.indexOf(ModelManager.EDGE_COLOR_MATERIAL_PREFIX)===0){b=false}else{if(m!=null){for(var e=0;e<m.length;e++){var g=m[e];if(g!==null&&g.getName()==h){var d=g.getColor();b=d===null||(d&4278190080)!==0;break}}}}}}f.setVisible(b)}}}};HomePieceOfFurniture3D.prototype.isVisible=function(){var a=this.getUserData();return a.isVisible()&&(a.getLevel()===null||a.getLevel().isViewableAndVisible())};HomePieceOfFurniture3D.prototype.isSelected=function(c){for(var a=0;a<c.length;a++){var b=c[a];if(b===this.getUserData()||(b instanceof HomeFurnitureGroup&&this.isSelected(b.getFurniture()))){return true}}return false};HomePieceOfFurniture3D.prototype.setBackFaceNormalFlip=function(d,e){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setBackFaceNormalFlip(c[b],e)}}else{if(d instanceof Link3D){this.setBackFaceNormalFlip(d.getSharedGroup(),e)}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a===null){a=new Appearance3D();d.setAppearance(a)}a.setBackFaceNormalFlip(e^a.getCullFace()===Appearance3D.CULL_FRONT)}}}};HomePieceOfFurniture3D.prototype.setTransparentShapeNotPickable=function(d){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setTransparentShapeNotPickable(c[b])}}else{if(d instanceof Link3D){this.setTransparentShapeNotPickable(d.getSharedGroup())}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a!==null&&a.getTransparency()>0){d.setPickable(false)}}}}};function Wall3D(b,g,c,f){if(f===undefined){f=c;c=null}Object3DBranch.call(this,b,g,c);for(var d=0;d<8;d++){var a=new Group3D();a.addChild(this.createWallPartShape());this.addChild(a)}var e=new Shape3D();e.setAppearance(this.getSelectionAppearance());e.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);e.setPickable(false);this.addChild(e);this.updateWallGeometry(f);this.updateWallAppearance(f)}Wall3D.prototype=Object.create(Object3DBranch.prototype);Wall3D.prototype.constructor=Wall3D;Wall3D.LEVEL_ELEVATION_SHIFT=0.1;Wall3D.FULL_FACE_CUT_OUT_AREA=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(-0.5,0.5,1,1));Wall3D.WALL_LEFT_SIDE=0;Wall3D.WALL_RIGHT_SIDE=1;Wall3D.rotatedModelsFrontAreas=[];Wall3D.prototype.createWallPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Wall3D.prototype.update=function(){this.updateWallGeometry(false);this.updateWallAppearance(false)};Wall3D.prototype.updateWallGeometry=function(a){this.updateWallSideGeometry(Wall3D.WALL_LEFT_SIDE,a);this.updateWallSideGeometry(Wall3D.WALL_RIGHT_SIDE,a);this.setPickable(this.getHome().getEnvironment().getWallsAlpha()==0);var b=this.getChild(8);b.addGeometry(this.createWallSelectionGeometry());if(b.getGeometries().length>1){b.removeGeometry(0)}};Wall3D.prototype.updateWallSideGeometry=function(b,l){var n=this.getUserData();var d;var a;if(b===Wall3D.WALL_LEFT_SIDE){d=n.getLeftSideTexture();a=n.getLeftSideBaseboard()}else{d=n.getRightSideTexture();a=n.getRightSideBaseboard()}var m=[this.getChild(b),this.getChild(b+2),this.getChild(b+4),this.getChild(b+6)];var g=new Array(m.length);var h=new Array(m.length);for(var f=0;f<m.length;f++){g[f]=m[f].getChild(0);h[f]=g[f].getGeometries().length}if(n.getLevel()==null||n.getLevel().isViewableAndVisible()){var o=[[],[],[],[]];this.createWallGeometries(o[0],o[2],o[3],b,null,d,l);if(a!=null){var c=a.getTexture();if(c===null&&a.getColor()===null){c=d}this.createWallGeometries(o[1],o[1],o[1],b,a,c,l)}for(var f=0;f<m.length;f++){for(var e=0;e<o[f].length;e++){var k=o[f][e];if(k!==null){g[f].addGeometry(k)}}}}for(var f=0;f<m.length;f++){for(var e=h[f]-1;e>=0;e--){g[f].removeGeometry(e)}}};Wall3D.prototype.createWallGeometries=function(x,W,N,ai,ag,ae,av){var aw=this.getUserData();var at=this.getShape(aw.getPoints());var af=this.getWallSidePoints(ai);var y=this.getShape(af);var K=ag==null?af:this.getWallBaseboardPoints(ai);var aq=this.getShape(K);var a=new java.awt.geom.Area(aq);var V=ai===Wall3D.WALL_LEFT_SIDE?K[0].slice(0):K[K.length-1].slice(0);var k=this.getWallElevation(ag!==null);var ab;var j;if(ag===null){ab=this.getWallTopElevationAtStart();j=this.getWallTopElevationAtEnd()}else{ab=j=this.getBaseboardTopElevation(ag)}var s=Math.max(ab,j);var O=Math.atan2(aw.getYEnd()-aw.getYStart(),aw.getXEnd()-aw.getXStart());var J=Math.cos(O);var P=Math.sin(O);var ak=J*aw.getXStart()+P*aw.getYStart();var g=J*aw.getXEnd()+P*aw.getYEnd();var R=aw.getArcExtent();var am=R!==null&&R!==0;var u;var b;if(ab===j){u=0;b=ab}else{u=(j-ab)/(g-ak);b=ab-u*ak}var z=[];var t=[];var o=this.getVisibleDoorsAndWindows(this.getHome().getFurniture());for(var H=0;H<o.length;H++){var an=o[H];var q=an.getGroundElevation();if(q+an.getHeight()>k&&q<s){var d=new java.awt.geom.Area(this.getShape(an.getPoints()));var S=new java.awt.geom.Area(at);S.intersect(d);if(!S.isEmpty()){var l=null;if(an.isParallelToWall(aw)){if(ag!==null){l=an.clone();l.setDepthInPlan(l.getDepth()+2*ag.getThickness())}if(typeof HomeDoorOrWindow!=="undefined"&&an instanceof HomeDoorOrWindow){if(an.isWallCutOutOnBothSides()){if(l===null){l=an.clone()}l.setDepthInPlan(l.getDepth()+4*aw.getThickness())}}}if(l!==null){d=new java.awt.geom.Area(this.getShape(l.getPoints()));S=new java.awt.geom.Area(aq);S.intersect(d)}else{S=new java.awt.geom.Area(y);S.intersect(d)}if(!S.isEmpty()&&(!aw.isTrapezoidal()||q<this.getMaxElevationAtWallIntersection(S,J,P,u,b))){z.push(new Wall3D.DoorOrWindowArea(S,[an]));t.push(an);a.subtract(d)}}}}if(z.length>1){for(var L=0;L<z.length;L++){var X=z[L];var ar=[];var p=0;for(var H=0;H<z.length;H++){var ac=z[H];if(X.getArea().isEmpty()){break}else{if(p>L){var aj=new java.awt.geom.Area(ac.getArea());aj.intersect(X.getArea());if(!aj.isEmpty()){ac.getArea().subtract(aj);X.getArea().subtract(aj);var m=(X.getDoorsOrWindows().slice(0));m.push.apply(m,ac.getDoorsOrWindows());ar.push(new Wall3D.DoorOrWindowArea(aj,m))}}}p++}z.push.apply(z,ar)}}var G=[];var e=null;for(var B=a.getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G.length>2){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);W.push(this.createVerticalPartGeometry(aw,r,k,J,P,u,b,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e===null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}var U=aw.getLevel();e=null;for(var ap=0;ap<z.length;ap++){var X=z[ap];if(!X.getArea().isEmpty()){for(var B=X.getArea().getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);var m=X.getDoorsOrWindows();if(m.length>1){m.sort(function(az,ax){var i=az.getGroundElevation();var ay=ax.getGroundElevation();if(i<ay){return -1}else{if(i>ay){return 1}else{return 0}}})}var n=m[0];var C=n.getGroundElevation();if(C>k){if(U!=null&&U.getElevation()!==k&&n.getElevation()<Wall3D.LEVEL_ELEVATION_SHIFT){C-=Wall3D.LEVEL_ELEVATION_SHIFT}W.push(this.createVerticalPartGeometry(aw,r,k,J,P,0,C,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));W.push(this.createHorizontalPartGeometry(r,C,false,am))}for(var H=0;H<m.length-1;){var A=m[H];var T=A.getGroundElevation();var E=m[++H];var Z=E.getGroundElevation();while((T+A.getHeight()>=Z+E.getHeight()&&++H<m.length)){E=m[H]}if(H<m.length&&T+A.getHeight()<Z){W.push(this.createVerticalPartGeometry(aw,r,T+A.getHeight(),J,P,0,Z,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,T+A.getHeight(),true,am));W.push(this.createHorizontalPartGeometry(r,Z,false,am))}}var Q=m[m.length-1];var f=Q.getGroundElevation();for(var H=m.length-2;H>=0;H--){var v=m[H];if(v.getGroundElevation()+v.getHeight()>f+Q.getHeight()){Q=v}}var ad=f+Q.getHeight();var ah=true;for(var H=0;H<r.length;H++){var D=J*r[H][0]+P*r[H][1];var F=u*D+b;if(ad>F){if(u===0||am){ah=false;break}var c=(ad-F)/u;r[H][0]+=(c*J);r[H][1]+=(c*P)}}if(ah){W.push(this.createVerticalPartGeometry(aw,r,ad,J,P,u,b,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,ad,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e==null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}}}if(!am&&t.length>0){var M=Math.PI/720;var au=[];for(var H=0;H<t.length;H++){var an=t[H];if(typeof HomeDoorOrWindow!=="undefined"&&an instanceof HomeDoorOrWindow&&(PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE!=an.getCutOutShape()||an.getWallWidth()!==1||an.getWallLeft()!==0||an.getWallHeight()!==1||an.getWallTop()!==0)){var al=Math.abs(O-an.getAngle())%(2*Math.PI);if(al<M||al>2*Math.PI-M||Math.abs(al-Math.PI)<M){var h=Math.abs(al-Math.PI)<M?1:-1;var w=Wall3D.getRotatedModelFrontArea(an);if(w!==null&&(au.length===0||!av)){this.createGeometriesSurroundingDoorOrWindow(an,w,h,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.push(an)}}}}if(au.length>0){var I=ModelManager.getInstance();au=au.slice(0);var ao=this;for(var H=0;H<au.length;H++){var Y={doorOrWindow:au[H],modelUpdated:function(aB){var ay=Wall3D.getRotatedModelFrontArea(this.doorOrWindow);var ax;if(ay===null){var az=new TransformGroup3D(I.getRotationTransformation(this.doorOrWindow.getModelRotation()));az.addChild(aB);ax=I.getFrontArea(this.doorOrWindow.getCutOutShape(),az);Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),cutOutShape:this.doorOrWindow.getCutOutShape(),frontArea:ax})}var i=Math.abs(O-this.doorOrWindow.getAngle())%(2*Math.PI);var aA=Math.abs(i-Math.PI)<M?1:-1;if(av){ao.createGeometriesSurroundingDoorOrWindow(this.doorOrWindow,ax,aA,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.splice(au.indexOf(this.doorOrWindow),1);if(au.length===0&&this.baseboard==null){setTimeout(function(){ao.updateWallSideGeometry(ai,av)},0)}}},modelError:function(i){if(Wall3D.getRotatedModelFrontArea(this.doorOrWindow)===null){Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),cutOutShape:this.doorOrWindow.getCutOutShape(),frontArea:Wall3D.FULL_FACE_CUT_OUT_AREA})}if(!av){au.splice(au.indexOf(this.doorOrWindow),1)}}};I.loadModel(au[H].getModel(),av,Y)}}}};Wall3D.getRotatedModelFrontArea=function(c){var a=null;for(var b=0;b<Wall3D.rotatedModelsFrontAreas.length;b++){if(Wall3D.rotatedModelsFrontAreas[b].model.equals(c.getModel())&&Object3DBranch.areModelRotationsEqual(Wall3D.rotatedModelsFrontAreas[b].modelRotation,c.getModelRotation())&&Wall3D.rotatedModelsFrontAreas[b].cutOutShape==c.getCutOutShape()){return Wall3D.rotatedModelsFrontAreas[b].frontArea}}return null};Wall3D.prototype.getVisibleDoorsAndWindows=function(d){var c=[];for(var a=0;a<d.length;a++){var b=d[a];if(b.isVisible()&&(b.getLevel()==null||b.getLevel().isViewableAndVisible())){if(b instanceof HomeFurnitureGroup){c.push.apply(c,this.getVisibleDoorsAndWindows(b.getFurniture()))}else{if(b.isDoorOrWindow()){c.push(b)}}}}return c};Wall3D.prototype.getWallSidePoints=function(c){var a=this.getUserData();var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=(b.length/2|0);d<b.length;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}else{for(var d=0,e=(b.length/2|0);d<e;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}return b};Wall3D.prototype.getWallBaseboardPoints=function(c){var a=this.getUserData();var e=a.getPoints$boolean(true);var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=Math.floor(e.length/2);d<e.length;d++){e[d]=b[b.length-d-1]}}else{for(var d=0,f=Math.floor(b.length/2);d<f;d++){e[d]=b[b.length-d-1]}}return e};Wall3D.prototype.createVerticalPartGeometry=function(m,L,ab,D,B,T,q,b,u,ad,ac){var x=this.getHome().getEnvironment().getSubpartSizeUnderLight();var e=m.getArcExtent();if((e===null||e===0)&&x>0){var M=[];M.push(L[0]);for(var X=1;X<L.length;X++){var z=java.awt.geom.Point2D.distance(L[X-1][0],L[X-1][1],L[X][0],L[X][1])-x/2;var t=Math.atan2(L[X][1]-L[X-1][1],L[X][0]-L[X-1][0]);var C=Math.cos(t);var l=Math.sin(t);for(var aa=0;aa<z;aa+=x){M.push([(L[X-1][0]+aa*C),(L[X-1][1]+aa*l)])}M.push(L[X])}L=M.slice(0)}var a=new Array(L.length);var g=new Array(L.length);var E=new Array(L.length);var k=m.getXStart();var I=m.getYStart();var s=m.getXEnd();var O=m.getYEnd();var W=null;var H=0;var S=0;if(e!==null&&e!==0){W=[m.getXArcCircleCenter(),m.getYArcCircleCenter()];H=java.awt.geom.Point2D.distance(W[0],W[1],k,I);S=Math.fround(Math.atan2(ad[1]-W[1],ad[0]-W[0]))}for(var X=0;X<L.length;X++){a[X]=vec3.fromValues(L[X][0],ab,L[X][1]);var o=this.getWallPointElevation(L[X][0],L[X][1],D,B,T,q);g[X]=vec3.fromValues(L[X][0],o,L[X][1])}var p=new Array(L.length);for(var X=0;X<L.length;X++){if(W===null){p[X]=java.awt.geom.Line2D.ptLineDistSq(k,I,s,O,a[X][0],a[X][2])}else{p[X]=H-java.awt.geom.Point2D.distance(W[0],W[1],a[X][0],a[X][2]);p[X]*=p[X]}}var ae=L.length;var h=new Array(L.length);if(b===null){for(var X=0;X<L.length-1;X++){h[X]=p[X]>0.001||p[X+1]>0.001;if(!h[X]){ae--}}h[h.length-1]=p[0]>0.001||p[L.length-1]>0.001;if(!h[h.length-1]){ae--}if(ae===0){return null}}else{for(var X=0;X<h.length;X++){h[X]=true}}var n=[];for(var G=0;G<L.length;G++){if(h[G]){var K=ab;var w=a[G];var r=(G+1)%L.length;var v=a[r];if(x>0){for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){n.push(w);n.push(v);w=vec3.fromValues(a[G][0],K,a[G][2]);v=vec3.fromValues(a[r][0],K,a[r][2]);n.push(v);n.push(w)}}n.push(w);n.push(v);n.push(g[r]);n.push(g[G])}}var P=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);P.setCoordinates(n.slice(0));if(u!==null){var Q;if(b!==null){Q=m.getThickness()/2+b.getThickness();Q*=Q}else{Q=(m.getThickness()*m.getThickness())/4}var Z=new Array(n.length);var A=vec2.fromValues(0,ab);var V=0;var R=W===null?m.getThickness()/10000:Q/4;for(var G=0;G<L.length;G++){if(h[G]){var r=(G+1)%L.length;var N;var J;if(Math.abs(p[G]-Q)<R&&Math.abs(p[r]-Q)<R){var f;var F;if(W===null){f=java.awt.geom.Point2D.distance(ad[0],ad[1],L[G][0],L[G][1]);F=java.awt.geom.Point2D.distance(ad[0],ad[1],L[r][0],L[r][1])}else{if(E[G]===undefined){var c=Math.fround(Math.atan2(L[G][1]-W[1],L[G][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[G]=(c-S)*H}if(E[r]===undefined){var c=Math.fround(Math.atan2(L[r][1]-W[1],L[r][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[r]=(c-S)*H}f=E[G];F=E[r]}if(ac===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){f=-f;F=-F}N=vec2.fromValues(f,ab);J=vec2.fromValues(F,ab)}else{N=A;var Y=java.awt.geom.Point2D.distance(L[G][0],L[G][1],L[r][0],L[r][1]);J=vec2.fromValues(Y,ab)}if(x>0){var K=ab;for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){Z[V++]=N;Z[V++]=J;N=vec2.fromValues(N[0],K);J=vec2.fromValues(J[0],K);Z[V++]=J;Z[V++]=N}}Z[V++]=N;Z[V++]=J;Z[V++]=vec2.fromValues(J[0],g[r][1]);Z[V++]=vec2.fromValues(N[0],g[G][1])}}P.setTextureCoordinates(Z)}if(W===null){P.setCreaseAngle(0)}P.setGeneratedNormals(true);return P.getIndexedGeometryArray()};Wall3D.prototype.getMaxElevationAtWallIntersection=function(b,a,c,e,f){var g=-Infinity;for(var d=b.getPathIterator(null);!d.isDone();d.next()){var h=[0,0];if(d.currentSegment(h)!==java.awt.geom.PathIterator.SEG_CLOSE){g=Math.max(g,this.getWallPointElevation(h[0],h[1],a,c,e,f))}}return g};Wall3D.prototype.getWallPointElevation=function(e,g,a,b,c,d){var f=a*e+b*g;return(c*f+d)};Wall3D.prototype.adjustAngleOnReferencePointAngle=function(a,b,c){if(c>0){if((b>0&&(a<0||a<b))||(b<0&&a<b)){a+=2*Math.PI}}else{if((b<0&&(a>0||b<a))||(b>0&&b<a)){a-=2*Math.PI}}return a};Wall3D.prototype.createHorizontalPartGeometry=function(c,g,f,d){var e=new Array(c.length);for(var b=0;b<c.length;b++){e[b]=vec3.fromValues(c[b][0],g,c[b][1])}var a=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);a.setCoordinates(f?e.reverse():e);a.setStripCounts([e.length]);if(d){a.setCreaseAngle(0)}a.setGeneratedNormals(true);return a.getIndexedGeometryArray()};Wall3D.prototype.createTopPartGeometry=function(k,b,g,d,c,l){var j=new Array(k.length);for(var f=0;f<k.length;f++){var h=b*k[f][0]+g*k[f][1];var a=(d*h+c);j[f]=vec3.fromValues(k[f][0],a,k[f][1])}var e=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);e.setCoordinates(j);e.setStripCounts([j.length]);if(l){e.setCreaseAngle(0)}e.setGeneratedNormals(true);return e.getIndexedGeometryArray()};Wall3D.prototype.createGeometriesSurroundingDoorOrWindow=function(N,b,L,n,O,c,v,X,C,A,Y,r,u,ai,ah){if(N.getModelTransformations()!==null){b=new java.awt.geom.Area(b);b.transform(java.awt.geom.AffineTransform.getTranslateInstance(0.5,0.5));b.transform(java.awt.geom.AffineTransform.getScaleInstance(N.getWidth()*N.getWallWidth(),N.getHeight()*N.getWallHeight()));b.transform(java.awt.geom.AffineTransform.getTranslateInstance(N.getWallLeft()*N.getWidth(),(1-N.getWallHeight()-N.getWallTop())*N.getHeight()));b.transform(java.awt.geom.AffineTransform.getScaleInstance(1/N.getWidth(),1/N.getHeight()));b.transform(java.awt.geom.AffineTransform.getTranslateInstance(-0.5,-0.5))}var h=new java.awt.geom.Area(Wall3D.FULL_FACE_CUT_OUT_AREA);h.subtract(b);if(!h.isEmpty()){var y=N.getDepth();var k=(N.getX()-L*y/2*Math.sin(N.getAngle()));var t=(N.getY()+L*y/2*Math.cos(N.getAngle()));var aa=ah===Wall3D.WALL_LEFT_SIDE?v[0]:v[v.length-1];var W=ah===Wall3D.WALL_LEFT_SIDE?v[(v.length/2|0)-1]:v[(v.length/2|0)];var I=java.awt.geom.Line2D.ptLineDist(aa[0],aa[1],W[0],W[1],k,t);var R=java.awt.geom.Line2D.relativeCCW(aa[0],aa[1],W[0],W[1],k,t);var S=L*(0.5-R*I/y);var p=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(N,null);var e=mat4.create();mat4.fromTranslation(e,vec3.fromValues(0,0,S));mat4.mul(p,p,e);var E=mat4.create();mat4.invert(E,p);var w=new java.awt.geom.GeneralPath();var M=vec3.fromValues(aa[0],X,aa[1]);vec3.transformMat4(M,M,E);w.moveTo(M[0],M[1]);M=vec3.fromValues(W[0],X,W[1]);vec3.transformMat4(M,M,E);w.lineTo(M[0],M[1]);var d=vec3.fromValues(W[0],this.getWallPointElevation(W[0],W[1],C,A,Y,r),W[1]);vec3.transformMat4(d,d,E);w.lineTo(d[0],d[1]);var a=vec3.fromValues(aa[0],this.getWallPointElevation(aa[0],aa[1],C,A,Y,r),aa[1]);vec3.transformMat4(a,a,E);w.lineTo(a[0],a[1]);w.closePath();var T=new java.awt.geom.GeneralPath();T.moveTo(-0.5,-0.5);T.lineTo(-0.5,0.5);T.lineTo(0.5,0.5);T.lineTo(0.5,-0.5);T.closePath();var H=new java.awt.geom.Area(T);H.intersect(new java.awt.geom.Area(w));H.subtract(b);var q=0.5/(Math.max(N.getWidth(),N.getHeight()));if(!H.isEmpty()){var ac=L>0!==(ah===Wall3D.WALL_RIGHT_SIDE)!==N.isModelMirrored();var x=this.getAreaPoints(H,q,ac);if(!(x.length===0)){var V=new Array(x.length);var ae=0;for(var ab=0;ab<x.length;ab++){var f=x[ab];V[ab]=f.length+1;ae+=V[ab]}var l=n.getThickness()/2;var F=l*A;var aj=-l*C;if(ah===Wall3D.WALL_LEFT_SIDE){F*=-1;aj*=-1}var m=new Array(ae);var z=([]);var B=([]);var af;var D;if(u!=null){af=new Array(m.length);D=[]}else{af=null;D=null}var ab=0;for(var G=0;G<x.length;G++){var f=x[G];var K=vec3.fromValues(f[0][0],f[0][1],0);vec3.transformMat4(K,K,p);var J=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],K[0],K[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}J=vec2.fromValues(ad,K[1])}var Q=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[0][0],f[0][1]);for(var Z=0;Z<f.length;Z++,ab++){m[ab]=K;if(u!=null){af[ab]=J}var ag=Z<f.length-1?Z+1:0;var o;var g=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[ag][0],f[ag][1]);if(Q<1e-10&&g<1e-10){o=B}else{o=z}var s=vec3.fromValues(f[ag][0],f[ag][1],0);vec3.transformMat4(s,s,p);o.push(K);o.push(vec3.fromValues(K[0]+F,K[1],K[2]+aj));o.push(vec3.fromValues(s[0]+F,s[1],s[2]+aj));o.push(s);var P=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],s[0],s[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}P=vec2.fromValues(ad,s[1]);if(o===z){D.push(J);D.push(J);D.push(P);D.push(P)}}Q=g;K=s;J=P}m[ab]=K;if(u!=null){af[ab]=J}ab++}var U=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);U.setStripCounts(V);U.setCoordinates(m);if(u!==null){U.setTextureCoordinates(af)}U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray());if(z.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(z.slice(0));if(u!==null){U.setTextureCoordinates(D.slice(0))}U.setCreaseAngle(Math.PI/2);U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray())}if(B.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(B.slice(0));U.setGeneratedNormals(true);c.push(U.getIndexedGeometryArray())}}}}};Wall3D.prototype.getWallElevation=function(b){var a=this.getUserData();var d=a.getLevel();if(d===null){return 0}else{if(b){return d.getElevation()}else{var c=this.getFloorThicknessBottomWall();if(c>0){c-=Wall3D.LEVEL_ELEVATION_SHIFT}return d.getElevation()-c}}};Wall3D.prototype.getFloorThicknessBottomWall=function(){var a=this.getUserData();var c=a.getLevel();if(c==null){return 0}else{var b=this.getHome().getLevels();if(!(b.length===0)&&b[0].getElevation()===c.getElevation()){return 0}else{return c.getFloorThickness()}}};Wall3D.prototype.getWallTopElevationAtStart=function(){var a=this.getUserData().getHeight();var b;if(a!==null){b=a+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}else{b=this.getHome().getWallHeight()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}return b+this.getTopElevationShift()};Wall3D.prototype.getTopElevationShift=function(){var b=this.getUserData().getLevel();if(b!==null){var a=this.getHome().getLevels();if(a[a.length-1]!==b){return Wall3D.LEVEL_ELEVATION_SHIFT}}return 0};Wall3D.prototype.getWallTopElevationAtEnd=function(){var a=this.getUserData();if(a.isTrapezoidal()){return a.getHeightAtEnd()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()+this.getTopElevationShift()}else{return this.getWallTopElevationAtStart()}};Wall3D.prototype.getBaseboardTopElevation=function(a){return a.getHeight()+this.getWallElevation(true)};Wall3D.prototype.createWallSelectionGeometry=function(){var x=this.getUserData();var A=this.getWallElevation(true);var n=x.getLeftSideBaseboard();var w=x.getRightSideBaseboard();var a=x.getPoints();var f=x.getPoints(true);var p=new Array(a.length*2+(n!=null?4:0)+(w!=null?4:0));var g=new Array(a.length*4+(n!=null?12:4)+(w!=null?12:4));var u=0,s=0;for(var v=0;v<a.length;v++,u++){p[u]=vec3.fromValues(f[v][0],A,f[v][1]);g[s++]=u;if(v>0){g[s++]=u}}g[s++]=0;var z=this.getWallTopElevationAtStart();var o=this.getWallTopElevationAtEnd();var r=Math.atan2(x.getYEnd()-x.getYStart(),x.getXEnd()-x.getXStart());var d=Math.cos(r);var c=Math.sin(r);var l=d*x.getXStart()+c*x.getYStart();var h=d*x.getXEnd()+c*x.getYEnd();var e;var q;if(z==o){e=0;q=z}else{e=(o-z)/(h-l);q=z-e*l}for(var v=0;v<a.length;v++,u++){var b=d*a[v][0]+c*a[v][1];var y=e*b+q;p[u]=vec3.fromValues(a[v][0],y,a[v][1]);g[s++]=u;if(v>0){g[s++]=u}}g[s++]=a.length;g[s++]=0;if(n!=null){var t=this.getBaseboardTopElevation(n);p[u]=vec3.fromValues(f[0][0],Math.min(t,z),f[0][1]);g[s++]=u;g[s++]=u++;p[u]=vec3.fromValues(a[0][0],Math.min(t,z),a[0][1]);g[s++]=u;g[s++]=u++}g[s++]=a.length;g[s++]=a.length/2-1;if(n!=null){var t=this.getBaseboardTopElevation(n);p[u]=vec3.fromValues(f[a.length/2-1][0],Math.min(t,o),f[a.length/2-1][1]);g[s++]=u;g[s++]=u++;p[u]=vec3.fromValues(a[a.length/2-1][0],Math.min(t,o),a[a.length/2-1][1]);g[s++]=u;g[s++]=u++}g[s++]=a.length+a.length/2-1;g[s++]=a.length-1;if(w!=null){var m=this.getBaseboardTopElevation(w);p[u]=vec3.fromValues(f[a.length-1][0],Math.min(m,z),f[a.length-1][1]);g[s++]=u;g[s++]=u++;p[u]=vec3.fromValues(a[a.length-1][0],Math.min(m,z),a[a.length-1][1]);g[s++]=u;g[s++]=u++}g[s++]=2*a.length-1;g[s++]=a.length/2;if(w!=null){var m=this.getBaseboardTopElevation(w);p[u]=vec3.fromValues(f[a.length/2][0],Math.min(m,o),f[a.length/2][1]);g[s++]=u;g[s++]=u++;p[u]=vec3.fromValues(a[a.length/2][0],Math.min(m,o),a[a.length/2][1]);g[s++]=u;g[s++]=u++}g[s++]=a.length+a.length/2;return new IndexedLineArray3D(p,g)};Wall3D.prototype.updateWallAppearance=function(e){var j=this.getUserData();var b=j.getTopColor();var l=[this.getChild(0),this.getChild(2),this.getChild(4),this.getChild(6)];var a=[this.getChild(1),this.getChild(3),this.getChild(5),this.getChild(7)];for(var f=0;f<l.length;f++){if(f===1){var c=j.getLeftSideBaseboard();if(c!=null){var h=c.getTexture();var d=c.getColor();if(d===null&&h===null){h=j.getLeftSideTexture();d=j.getLeftSideColor()}this.updateFilledWallSideAppearance(l[f].getChild(0).getAppearance(),h,e,d,j.getLeftSideShininess())}var k=j.getRightSideBaseboard();if(k!=null){var h=k.getTexture();var d=k.getColor();if(d==null&&h==null){h=j.getRightSideTexture();d=j.getRightSideColor()}this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),h,e,d,j.getRightSideShininess())}}else{if(f!==3||b==null){this.updateFilledWallSideAppearance(l[f].getChild(0).getAppearance(),j.getLeftSideTexture(),e,j.getLeftSideColor(),j.getLeftSideShininess());this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),j.getRightSideTexture(),e,j.getRightSideColor(),j.getRightSideShininess())}else{this.updateFilledWallSideAppearance(l[f].getChild(0).getAppearance(),null,e,b,0);this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),null,e,b,0)}}}var g=this.getChild(8).getAppearance();g.setVisible(this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(j))};Wall3D.prototype.updateFilledWallSideAppearance=function(f,a,d,c,b){if(a==null){this.updateAppearanceMaterial(f,c,c,b);f.setTextureImage(null)}else{this.updateAppearanceMaterial(f,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,b);this.updateTextureTransform(f,a,true);TextureManager.getInstance().loadTexture(a.getImage(),d,{textureUpdated:function(g){f.setTextureImage(g)},textureError:function(g){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var e=this.getHome().getEnvironment().getWallsAlpha();f.setTransparency(e)};Wall3D.DoorOrWindowArea=function(a,b){this.area=a;this.doorsOrWindows=b};Wall3D.DoorOrWindowArea.prototype.getArea=function(){return this.area};Wall3D.DoorOrWindowArea.prototype.getDoorsOrWindows=function(){return this.doorsOrWindows};function Room3D(e,f,b,c,d){if(d===undefined){waitModelAndTextureLoadingEnd=c;c=b;b=null}Object3DBranch.call(this,e,f,b);if(c===undefined){c=false;d=false}this.addChild(this.createRoomPartShape());this.addChild(this.createRoomPartShape());var a=new Shape3D();a.setAppearance(this.getSelectionAppearance());a.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);a.setPickable(false);this.addChild(a);this.updateRoomGeometry();this.updateRoomAppearance(d);if(c){this.removeChild(Room3D.CEILING_PART)}}Room3D.prototype=Object.create(Object3DBranch.prototype);Room3D.prototype.constructor=Room3D;Room3D.FLOOR_PART=0;Room3D.CEILING_PART=1;Room3D.prototype.createRoomPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Room3D.prototype.update=function(){this.updateRoomGeometry();this.updateRoomAppearance(false)};Room3D.prototype.updateRoomGeometry=function(){this.updateRoomPartGeometry(Room3D.FLOOR_PART,this.getUserData().getFloorTexture());this.updateRoomPartGeometry(Room3D.CEILING_PART,this.getUserData().getCeilingTexture());var a=this.getUserData();this.setPickable(this.getHome().getEnvironment().getWallsAlpha()==0||a.getLevel()==null||a.getLevel().getElevation()<=0)};Room3D.prototype.updateRoomPartGeometry=function(a,f){var g=this.getChild(a);var e=g.getGeometries().length;var h=this.getUserData();if(h.getLevel()==null||h.getLevel().isViewableAndVisible()){var d=this.createRoomGeometries(a,f);for(var c=0;c<d.length;c++){g.addGeometry(d[c])}}for(var c=e-1;c>=0;c--){g.removeGeometry(c)}var b=this.getChild(2);b.addGeometry(this.createRoomSelectionGeometry());if(b.getGeometries().length>1){b.removeGeometry(0)}};Room3D.prototype.createRoomGeometries=function(P,n){var A=this.getUserData();var H=A.getPoints();if((P===Room3D.FLOOR_PART&&A.isFloorVisible()||P===Room3D.CEILING_PART&&A.isCeilingVisible())&&H.length>2){var G=A.getLevel();var o=this.getHome().getLevels();var D=this.isLastLevel(G,o);var q;var m;if(G!=null){m=G.getElevation();q=m-G.getFloorThickness()}else{m=0;q=0}var c;if(o.length===0){c=0}else{c=o[0].getElevation()}var x=P===Room3D.FLOOR_PART&&G!==null&&m!==c;var k=[];var f=[];var J=this.getHome().getRooms();for(var S=0;S<J.length;S++){var v=J[S];var l=v.getLevel();if(l===null||l.isViewableAndVisible()){if(A===v||G===l&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()||P===Room3D.CEILING_PART&&v.isCeilingVisible())||G!=null&&l!=null&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()&&Math.abs(m-l.getElevation())<0.0001||P===Room3D.CEILING_PART&&v.isCeilingVisible()&&!D&&!this.isLastLevel(l,o)&&Math.abs(m+G.getHeight()-(l.getElevation()+l.getHeight()))<0.0001)){k.push(v)}else{if(x&&l!=null&&v.isCeilingVisible()&&!this.isLastLevel(l,o)&&Math.abs(q-(l.getElevation()+l.getHeight()))<0.0001){f.push(v)}}}}if(G!=null){k.sort(function(Y,j){var i=(Y.getLevel().getElevation()-j.getLevel().getElevation());if(i!==0){return i}else{return Y.getLevel().getElevationIndex()-j.getLevel().getElevationIndex()}})}var s;if(G===null||P===Room3D.CEILING_PART&&D){s=[]}else{s=this.getVisibleStaircases(this.getHome().getFurniture(),P,G,G.getElevation()===c)}var X=true;if(P===Room3D.CEILING_PART&&(G===null||D)){var z=this.getRoomHeightAt(H[0][0],H[0][1]);for(var S=1;S<H.length&&X;S++){X=this.getRoomHeightAt(H[S][0],H[S][1])===z}}var d;var W;var e;var E;if(!A.isSingular()||X&&(k[k.length-1]!==A||s.length>0)){E=new java.awt.geom.Area(this.getShape(H));if((k.indexOf(A)>=0)){for(var S=k.length-1;S>0&&k[S]!==A;S--){var a=k[S];E.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}}this.removeStaircasesFromArea(s,E);d=[];W=[];e=this.getAreaPoints(E,d,W,1,P===Room3D.CEILING_PART)}else{var O=A.isClockwise();if(O&&P===Room3D.FLOOR_PART||!O&&P===Room3D.CEILING_PART){H=this.getReversedArray(H)}e=d=[H];W=[];E=null}var g=[];var r=this.getHome().getEnvironment().getSubpartSizeUnderLight();if(e.length!==0){var b=[];var y=true;for(var S=0;S<e.length;S++){var K=e[S];var u=new Array(K.length);for(var R=0;R<K.length;R++){u[R]=P===Room3D.FLOOR_PART?m:this.getRoomHeightAt(K[R][0],K[R][1]);if(y&&R>0){y=u[R]===u[R-1]}}b.push(u)}if(y&&r>0){for(var R=0;R<e.length;R++){var K=e[R];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var S=0;S<K.length;S++){var C=K[S];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var w=new java.awt.geom.Area(this.getShape(K));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var V=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));V.intersect(w);if(!V.isEmpty()){var B=this.getAreaPoints(V,1,P===Room3D.CEILING_PART);if(!(B.length==0)){g.push(this.computeRoomPartGeometry(B,null,G,b[S][0],q,P===Room3D.FLOOR_PART,false,n))}}}}}}else{g.push(this.computeRoomPartGeometry(e,b,G,m,q,P===Room3D.FLOOR_PART,false,n))}if(G!=null&&P===Room3D.FLOOR_PART&&G.getElevation()!==c){g.push(this.computeRoomBorderGeometry(d,W,G,m,n))}}if(x){var p;if(E!=null||f.length>0){var Q=E!=null?E:new java.awt.geom.Area(this.getShape(H));for(var S=0;S<f.length;S++){var a=f[S];Q.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}p=this.getAreaPoints(Q,1,true)}else{p=[this.getReversedArray(H)]}if(p.length!==0){if(r>0){for(var S=0;S<p.length;S++){var F=p[S];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var R=0;R<F.length;R++){var C=F[R];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var L=new java.awt.geom.Area(this.getShape(F));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var T=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));T.intersect(L);if(!T.isEmpty()){var B=this.getAreaPoints(T,1,true);if(B.length!==0){g.push(this.computeRoomPartGeometry(B,null,G,m,q,true,true,n))}}}}}}else{g.push(this.computeRoomPartGeometry(p,null,G,m,q,true,true,n))}}}return g.slice(0)}else{return[]}};Room3D.prototype.computeRoomPartGeometry=function(v,t,b,g,u,m,s,h){var c=new Array(v.length);var f=0;for(var r=0;r<v.length;r++){var d=v[r];c[r]=d.length;f+=c[r]}var q=new Array(f);var r=0;for(var o=0;o<v.length;o++){var d=v[o];var a=t!=null?t[o]:null;for(var n=0;n<d.length;n++){var e=s?u:(a!=null?a[n]:g);q[r++]=vec3.fromValues(d[n][0],e,d[n][1])}}var l=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);l.setCoordinates(q);l.setStripCounts(c);if(h!=null){var p=new Array(f);r=0;for(var o=0;o<v.length;o++){var d=v[o];for(var n=0;n<d.length;n++){p[r++]=vec2.fromValues(d[n][0],m?-d[n][1]:d[n][1])}}l.setTextureCoordinates(p)}l.setGeneratedNormals(true);return l.getIndexedGeometryArray()};Room3D.prototype.computeRoomBorderGeometry=function(q,p,r,n,h){var a=0;for(var e=0;e<q.length;e++){a+=q[e].length}for(var e=0;e<p.length;e++){a+=p[e].length}a=a*4;var e=0;var o=new Array(a);var g=n-r.getFloorThickness();for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){o[e++]=vec3.fromValues(k[d][0],n,k[d][1]);o[e++]=vec3.fromValues(k[d][0],g,k[d][1]);var m=d<k.length-1?d+1:0;o[e++]=vec3.fromValues(k[m][0],g,k[m][1]);o[e++]=vec3.fromValues(k[m][0],n,k[m][1])}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){o[e++]=vec3.fromValues(b[d][0],n,b[d][1]);var m=d<b.length-1?d+1:0;o[e++]=vec3.fromValues(b[m][0],n,b[m][1]);o[e++]=vec3.fromValues(b[m][0],g,b[m][1]);o[e++]=vec3.fromValues(b[d][0],g,b[d][1])}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(o);if(h!=null){var l=new Array(a);e=0;if(h.isFittingArea()){for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){l[e++]=l[e++]=vec2.fromValues(k[d][0],-k[d][1]);var m=d<k.length-1?d+1:0;l[e++]=l[e++]=vec2.fromValues(k[m][0],-k[m][1])}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){l[e]=vec2.fromValues(b[d][0],-b[d][1]);var m=d<b.length-1?d+1:0;l[e+1]=vec2.fromValues(b[m][0],-b[m][1]);l[e+2]=l[e+1];l[e+3]=l[e];e+=4}}}else{for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){l[e++]=vec2.fromValues(0,r.getFloorThickness());l[e++]=vec2.fromValues(0,0);var m=d<k.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(k[d][0],k[d][1],k[m][0],k[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness())}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){l[e++]=vec2.fromValues(0,0);var m=d<b.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(b[d][0],b[d][1],b[m][0],b[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness());l[e++]=vec2.fromValues(0,r.getFloorThickness())}}}c.setTextureCoordinates(l)}c.setCreaseAngle(Math.PI/8);c.setGeneratedNormals(true);return c.getIndexedGeometryArray()};Room3D.prototype.removeStaircasesFromArea=function(b,d){var a=ModelManager.getInstance();for(var c=0;c<b.length;c++){var e=b[c];d.subtract(a.getAreaOnFloor(e))}};Room3D.prototype.getVisibleStaircases=function(f,b,d,g){var a=[];for(var c=0;c<f.length;c++){var e=f[c];if(e.isVisible()&&(e.getLevel()===null||e.getLevel().isViewableAndVisible())){if(e instanceof HomeFurnitureGroup){a.push.apply(a,this.getVisibleStaircases(e.getFurniture(),b,d,g))}else{if(e.getStaircaseCutOutShape()!=null&&"false"!=e.getStaircaseCutOutShape().toLowerCase()&&((b===Room3D.FLOOR_PART&&e.getGroundElevation()<d.getElevation()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()-(g?0:d.getFloorThickness())||b===Room3D.CEILING_PART&&e.getGroundElevation()<d.getElevation()+d.getHeight()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()+d.getHeight()))){a.push(e)}}}}return a};Room3D.prototype.getReversedArray=function(a){a=a.slice(0);return a.reverse()};Room3D.prototype.getRoomHeightAt=function(q,p){var J=Infinity;var F=this.getUserData();var E=this.getHome();var g=F.getLevel();var o=g!==null?g.getElevation():0;var r=o+(g==null?E.getWallHeight():g.getHeight());var h=E.getLevels();if(g==null||this.isLastLevel(g,h)){var H=E.getWalls();if(F.isCeilingFlat()){var j=false;for(var k=0;k<H.length;k++){var D=H[k];if((D.getLevel()===null||D.getLevel().isViewable())&&D.isAtLevel(g)){if(D.getHeight()!==null){var G=D.getHeight();if(D.getLevel()!==null){G+=D.getLevel().getElevation()}if(j){r=Math.max(r,G)}else{r=G;j=true}}if(D.getHeightAtEnd()!==null){var v=D.getHeightAtEnd();if(D.getLevel()!==null){v+=D.getLevel().getElevation()}if(j){r=Math.max(r,v)}else{r=v;j=true}}}}}else{var m=null;var I=null;var C=-1;for(var k=0;k<H.length;k++){var D=H[k];if((D.getLevel()===null||D.getLevel().isViewable())&&D.isAtLevel(g)){var B=D.getPoints();for(var A=0;A<B.length;A++){var d=java.awt.geom.Point2D.distanceSq(B[A][0],B[A][1],q,p);if(d<J){m=D;I=B;C=A;J=d}}}}if(m!=null){r=m.getLevel()==null?0:m.getLevel().getElevation();var t=m.getHeight();if(C===0||C===I.length-1){r+=t!=null?t:E.getWallHeight()}else{if(m.isTrapezoidal()){var u=m.getArcExtent();if(u==null||u===0||C===Math.floor(I.length/2)||C===Math.floor(I.length/2)-1){r+=m.getHeightAtEnd()}else{var f=m.getXArcCircleCenter();var s=m.getYArcCircleCenter();var c=I[C][0];var l=I[C][1];var w=java.awt.geom.Point2D.distance(f,s,c,l);var e=m.getXStart();var n=m.getYStart();var b=java.awt.geom.Point2D.distance(f,s,e,n);var a=(c-f)*(e-f)+(l-s)*(n-s);a/=(w*b);var z=Math.acos(a)*(u>0?1:(u<0?-1:0));r+=t+(m.getHeightAtEnd()-t)*z/u}}else{r+=(t!=null?t:E.getWallHeight())}}}}}return r};Room3D.prototype.isLastLevel=function(b,a){return a.indexOf(b)===a.length-1};Room3D.prototype.createRoomSelectionGeometry=function(){var a=this.getUserData();var o=a.getLevel();var r=this.getHome().getLevels();var h;var l;if(o!=null){l=o.getElevation();h=l-o.getFloorThickness()}else{l=0;h=0}var f;if(r.length==0){f=0}else{f=r[0].getElevation()}var q=a.isFloorVisible();var p=q&&o!=null&&l!=f;var b=a.getPoints();var n=a.isCeilingVisible();if(!q&&!n){q=true}var g=new Array(b.length*((q?(p?2:1):0)+(n?1:0)));var m=new Array((q?(p?b.length*6:b.length*2):0)+(n?(b.length*2):0));var d=0,c=0;if(q){for(var e=0;e<b.length;e++,d++){g[d]=vec3.fromValues(b[e][0],l,b[e][1]);m[c++]=d;if(e>0){m[c++]=d}}m[c++]=0;if(p){for(var e=0;e<b.length;e++,d++){g[d]=vec3.fromValues(b[e][0],h,b[e][1]);m[c++]=d;if(e>0){m[c++]=d}}m[c++]=b.length;for(var e=0;e<b.length;e++){m[c++]=e;m[c++]=e+b.length}}}if(n){for(var e=0;e<b.length;e++,d++){g[d]=vec3.fromValues(b[e][0],this.getRoomHeightAt(b[e][0],b[e][1]),b[e][1]);m[c++]=d;if(e>0){m[c++]=d}}m[c++]=g.length-b.length}return new IndexedLineArray3D(g,m)};Room3D.prototype.updateRoomAppearance=function(e){var d=this.getUserData();var f=d.getLevel()==null||d.getLevel().getElevation()<=0;this.updateRoomPartAppearance(this.getChild(Room3D.FLOOR_PART).getAppearance(),d.getFloorTexture(),e,d.getFloorColor(),d.getFloorShininess(),d.isFloorVisible(),f,true);var c=this.getChildren().length;if(c>2){var a=d.getLevel()==null;this.updateRoomPartAppearance(this.getChild(Room3D.CEILING_PART).getAppearance(),d.getCeilingTexture(),e,d.getCeilingColor(),d.getCeilingShininess(),d.isCeilingVisible(),a,false)}var b=this.getChild(c>2?2:1).getAppearance();b.setVisible(this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(d))};Room3D.prototype.updateRoomPartAppearance=function(f,j,d,c,i,b,h,e){if(j==null){this.updateAppearanceMaterial(f,c,c,i);f.setTextureImage(null)}else{this.updateAppearanceMaterial(f,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,i);var a=this.getUserData();if(j.isFittingArea()){this.updateTextureTransformFittingArea(f,j,a.getPoints(),e)}else{this.updateTextureTransform(f,j,true)}TextureManager.getInstance().loadTexture(j.getImage(),d,{textureUpdated:function(k){f.setTextureImage(k)},textureError:function(k){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var g=this.getHome().getEnvironment().getWallsAlpha();if(h||g===0){f.setTransparency(0)}else{f.setTransparency(g)}f.setVisible(b)};function Ground3D(h,k,j,a,e,b){Object3DBranch.call(this);this.setUserData(h);this.originX=k;this.originY=j;this.width=a;this.depth=e;var c=new Appearance3D();var f=new Shape3D();f.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);f.setAppearance(c);this.addChild(f);var i=new Appearance3D();this.updateAppearanceMaterial(i,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0);i.setCullFace(Appearance3D.CULL_NONE);var g=new TransformGroup3D();g.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);var d=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(-0.5,0,0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(0.5,0,-0.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),i);g.addChild(d);this.addChild(g);this.update(b)}Ground3D.prototype=Object.create(Object3DBranch.prototype);Ground3D.prototype.constructor=Ground3D;Ground3D.prototype.update=function(c){if(c===undefined){c=false}var g=this.getUserData();var f=this.getChild(1);var d=f.getChild(0);var j=d.getAppearance();var h=null;if(g.getEnvironment().isBackgroundImageVisibleOnGround3D()){var k=g.getLevels();if(k.length>0){for(var e=k.length-1;e>=0;e--){var a=k[e];if(a.getElevation()==0&&a.isViewableAndVisible()&&a.getBackgroundImage()!==null&&a.getBackgroundImage().isVisible()){h=a.getBackgroundImage();break}}}else{if(g.getBackgroundImage()!==null&&g.getBackgroundImage().isVisible()){h=g.getBackgroundImage()}}}if(h!==null){var b=this;TextureManager.getInstance().loadTexture(h.getImage(),c,{textureUpdated:function(o){var p=h.getScale();var m=p*o.width;var i=p*o.height;var l=mat4.create();mat4.scale(l,l,vec3.fromValues(m,1,i));var n=mat4.create();mat4.fromTranslation(n,vec3.fromValues(m/2-h.getXOrigin(),0,i/2-h.getYOrigin()));mat4.mul(l,n,l);j.setTextureImage(o);f.setTransform(l);b.updateGround(c,new java.awt.geom.Rectangle2D.Float(-h.getXOrigin(),-h.getYOrigin(),m,i))},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(l,m,i){}});j.setVisible(true)}else{j.setVisible(false);this.updateGround(c,null)}};Ground3D.prototype.updateGround=function(r,K){var p=this.getUserData();var e=this.getChild(0);var d=e.getGeometries().length;var w=e.getAppearance();var v=p.getEnvironment().getGroundTexture();if(v===null){var s=p.getEnvironment().getGroundColor();this.updateAppearanceMaterial(w,s,s,0);w.setTextureImage(null)}else{this.updateAppearanceMaterial(w,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0);this.updateTextureTransform(w,v,true);TextureManager.getInstance().loadTexture(v.getImage(),r,{textureUpdated:function(i){w.setTextureImage(i)},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var n=new java.awt.geom.Area();if(K!==null){n.add(new java.awt.geom.Area(K))}var a=[];var D=p.getRooms();for(var H=0;H<D.length;H++){var y=D[H];var B=y.getLevel();if((B===null||B.isViewable())&&y.isFloorVisible()){var f=y.getPoints();if(f.length>2){var h=new java.awt.geom.Area(this.getShape(f));var g=B!==null&&B.getElevation()<0?this.getUndergroundAreas(a,B):null;if(B===null||(B.getElevation()<=0&&B.isViewableAndVisible())){n.add(h);if(g!==null){g.roomArea.add(h)}}if(g!==null){g.undergroundArea.add(h)}}}}this.updateUndergroundAreasDugByFurniture(a,p.getFurniture());var t=p.getWalls();for(var H=0;H<t.length;H++){var q=t[H];var o=q.getLevel();if(o!==null&&o.isViewable()&&o.getElevation()<0){var g=this.getUndergroundAreas(a,o);g.wallArea.add(new java.awt.geom.Area(this.getShape(q.getPoints())))}}var u=a;for(var H=0;H<u.length;H++){var g=u[H];var b=this.getPoints(g.wallArea);for(var G=0;G<b.length;G++){var C=b[G];if(!new Room(C).isClockwise()){g.undergroundArea.add(new java.awt.geom.Area(this.getShape(C)))}}}u.sort(function(i,j){return -(i.level.getElevation()-j.level.getElevation())});for(var H=0;H<u.length;H++){var g=u[H];var l=g.level;var z=g.undergroundArea;var J=z.clone();g.undergroundSideArea.add(z.clone());for(var G=0;G<u.length;G++){var c=u[G];if(c.level.getElevation()<l.getElevation()){var b=this.getPoints(c.undergroundArea);for(var F=0;F<b.length;F++){var C=b[F];if(!new Room(C).isClockwise()){var L=new java.awt.geom.Area(this.getShape(C));z.subtract(L);g.undergroundSideArea.add(L)}}}}var b=this.getPoints(z);for(var G=0;G<b.length;G++){var C=b[G];if(new Room(C).isClockwise()){var I=new java.awt.geom.Area(this.getShape(C));I.exclusiveOr(J);I.subtract(J);g.upperLevelArea.add(I)}else{n.add(new java.awt.geom.Area(this.getShape(C)))}}}for(var H=0;H<u.length;H++){var g=u[H];var h=g.roomArea;if(h!==null){g.undergroundArea.subtract(h)}}var E=new java.awt.geom.Area(this.getShape([[this.originX,this.originY],[this.originX,this.originY+this.depth],[this.originX+this.width,this.originY+this.depth],[this.originX+this.width,this.originY]]));var A=n.getBounds2D();if(!E.getBounds2D().equals(A)){var x=E;if(n.isEmpty()){A=new java.awt.geom.Rectangle2D.Float(Math.max(-5000,this.originX),Math.max(-5000,this.originY),0,0);A.add(Math.min(5000,this.originX+this.width),Math.min(5000,this.originY+this.depth))}else{A.add(Math.max(A.getMinX()-5000,this.originX),Math.max(A.getMinY()-5000,this.originY));A.add(Math.min(A.getMaxX()+5000,this.originX+this.width),Math.min(A.getMaxY()+5000,this.originY+this.depth))}E=new java.awt.geom.Area(A);x.subtract(E);this.addAreaGeometry(e,v,x,0)}E.subtract(n);u.splice(0,0,new Ground3D.LevelAreas(new Level("Ground",0,0,0),E));var M=0;for(var H=0;H<u.length;H++){var g=u[H];var m=g.level.getElevation();this.addAreaGeometry(e,v,g.undergroundArea,m);if(M-m>0){var b=this.getPoints(g.undergroundSideArea);for(var G=0;G<b.length;G++){var C=b[G];this.addAreaSidesGeometry(e,v,C,m,M-m)}this.addAreaGeometry(e,v,g.upperLevelArea,M)}M=m}for(var H=d-1;H>=0;H--){e.removeGeometry(H)}};Ground3D.prototype.getPoints=function(d){var f=[];var e=[];var a=null;for(var c=d.getPathIterator(null,1);!c.isDone();c.next()){var b=[0,0];if(c.currentSegment(b)===java.awt.geom.PathIterator.SEG_CLOSE){if(e[0][0]===a[0]&&e[0][1]===a[1]){e.splice(e.length-1,1)}if(e.length>2){f.push(e.slice(0))}e.length=0;a=null}else{if(a===null||b[0]!==a[0]||b[1]!==a[1]){e.push(b)}a=b}}return f};Ground3D.prototype.getUndergroundAreas=function(a,d){var c=null;for(var b=0;b<a.length;b++){if(a[b].level===d){c=a[b];break}}if(c===null){a.push(c=new Ground3D.LevelAreas(d))}return c};Ground3D.prototype.updateUndergroundAreasDugByFurniture=function(a,e){for(var c=0;c<e.length;c++){var d=e[c];var b=d.getLevel();if(d.getGroundElevation()<0&&d.isVisible()&&b!==null&&b.isViewable()&&b.getElevation()<0){if(d instanceof HomeFurnitureGroup){this.updateUndergroundAreasDugByFurniture(a,d.getFurniture())}else{var f=this.getUndergroundAreas(a,b);if(d.getStaircaseCutOutShape()===null){f.undergroundArea.add(new java.awt.geom.Area(this.getShape(d.getPoints())))}else{f.undergroundArea.add(ModelManager.getInstance().getAreaOnFloor(d))}}}}};Ground3D.prototype.addAreaGeometry=function(h,c,b,q){var n=this.getAreaPoints(b,1,false);if(n.length!==0){var a=0;var l=new Array(n.length);for(var f=0;f<l.length;f++){l[f]=n[f].length;a+=l[f]}var k=new Array(a);var m=c!==null?new Array(a):null;var e=0;for(var g=0;g<n.length;g++){var p=n[g];for(var f=0;f<p.length;f++,e++){var o=p[f];k[e]=vec3.fromValues(o[0],q,o[1]);if(c!==null){m[e]=vec2.fromValues(o[0]-this.originX,this.originY-o[1])}}}var d=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);d.setCoordinates(k);if(c!==null){d.setTextureCoordinates(m)}d.setStripCounts(l);d.setCreaseAngle(0);d.setGeneratedNormals(true);h.addGeometry(d.getIndexedGeometryArray())}};Ground3D.prototype.addAreaSidesGeometry=function(f,b,m,o,h){var g=new Array(m.length*4);var k=b!==null?new Array(g.length):null;for(var e=0,d=0;e<m.length;e++){var n=m[e];var l=m[e<m.length-1?e+1:0];g[d++]=vec3.fromValues(n[0],o,n[1]);g[d++]=vec3.fromValues(n[0],o+h,n[1]);g[d++]=vec3.fromValues(l[0],o+h,l[1]);g[d++]=vec3.fromValues(l[0],o,l[1]);if(b!==null){var a=java.awt.geom.Point2D.distance(n[0],n[1],l[0],l[1]);k[d-4]=vec2.fromValues(n[0],o);k[d-3]=vec2.fromValues(n[0],o+h);k[d-2]=vec2.fromValues(n[0]-a,o+h);k[d-1]=vec2.fromValues(n[0]-a,o)}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(g);if(b!==null){c.setTextureCoordinates(k)}c.setCreaseAngle(0);c.setGeneratedNormals(true);f.addGeometry(c.getIndexedGeometryArray())};Ground3D.LevelAreas=function(b,a){if(a===undefined){a=new java.awt.geom.Area()}this.level=b;this.undergroundArea=a;this.roomArea=new java.awt.geom.Area();this.wallArea=new java.awt.geom.Area();this.undergroundSideArea=new java.awt.geom.Area();this.upperLevelArea=new java.awt.geom.Area()};function Polyline3D(b,d,a,c){if(c===undefined){c=a;a=null}Object3DBranch.call(this,b,d,a);if(Polyline3D.ARROW===null){Polyline3D.ARROW=new java.awt.geom.GeneralPath();Polyline3D.ARROW.moveTo(-5,-2);Polyline3D.ARROW.lineTo(0,0);Polyline3D.ARROW.lineTo(-5,2)}this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);this.update()}Polyline3D.prototype=Object.create(Object3DBranch.prototype);Polyline3D.prototype.constructor=Polyline3D;Polyline3D.ARROW=null;Polyline3D.prototype.update=function(){var O=this.getUserData();if(O.isVisibleIn3D()&&(O.getLevel()==null||O.getLevel().isViewableAndVisible())){var y=ShapeTools.getStroke(O.getThickness(),O.getCapStyle(),O.getJoinStyle(),O.getDashStyle()!==Polyline.DashStyle.SOLID?O.getDashPattern():null,O.getDashOffset());var o=ShapeTools.getPolylineShape(O.getPoints(),O.getJoinStyle()===Polyline.JoinStyle.CURVED,O.isClosedPath());var n=null;var h=null;var d=null;var c=null;for(var v=o.getPathIterator(null,0.5);!v.isDone();v.next()){var C=[0,0];if(v.currentSegment(C)!==java.awt.geom.PathIterator.SEG_CLOSE){if(n===null){n=C}else{if(h===null){h=C}}d=c;c=C}}var K=Math.atan2(n[1]-h[1],n[0]-h[0]);var m=Math.atan2(c[1]-d[1],c[0]-d[0]);var I=O.getCapStyle()!==Polyline.CapStyle.BUTT?O.getThickness()/2:0;var z=[this.getArrowShape(n,K,O.getStartArrowStyle(),O.getThickness(),I),this.getArrowShape(c,m,O.getEndArrowStyle(),O.getThickness(),I),y.createStrokedShape(o)];var b=new java.awt.geom.Area();for(var N=0;N<z.length;N++){var p=z[N];if(p!=null){b.add(new java.awt.geom.Area(p))}}var E=this.getAreaPoints(b,0.5,false);var u=0;for(var N=0;N<E.length;N++){u+=E[N].length}var a=new Array(u);var H=new Array(E.length);var A=new Array(u*2);for(var N=0,M=0,L=0;N<E.length;N++){var D=E[N];var q=M;for(var J=0;J<D.length;J++){var B=D[J];A[L++]=M;if(J>0){A[L++]=M}a[M++]=vec3.fromValues(B[0],0,B[1])}A[L++]=q;H[N]=D.length}var G=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);G.setCoordinates(a);var s=new Array(a.length);var F=vec3.fromValues(0,1,0);for(var N=0;N<a.length;N++){s[N]=F}G.setNormals(s);G.setStripCounts(H);var g=G.getIndexedGeometryArray();var P=new IndexedLineArray3D(a,A);var w;var e;if(this.getChildren().length===0){var r=new BranchGroup3D();w=new TransformGroup3D();w.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);r.addChild(w);var t=new Appearance3D();this.updateAppearanceMaterial(t,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);t.setCullFace(Appearance3D.CULL_NONE);var p=new Shape3D(g,t);p.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);w.addChild(p);this.addChild(r);var e=this.getSelectionAppearance();var f=new Shape3D(P,e);f.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);f.setPickable(false);w.addChild(f)}else{w=this.getChild(0).getChild(0);var p=w.getChild(0);p.setGeometry(g,0);f=w.getChild(1);f.setGeometry(P,0);e=f.getAppearance()}var x=mat4.create();mat4.fromTranslation(x,vec3.fromValues(0,O.getGroundElevation()+(O.getElevation()<0.05?0.05:0),0));w.setTransform(x);this.updateAppearanceMaterial(w.getChild(0).getAppearance(),O.getColor(),O.getColor(),0);e.setVisible(this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(O))}else{this.removeAllChildren()}};Polyline3D.prototype.getArrowShape=function(j,c,g,i,a){if(g!=null&&g!==Polyline.ArrowStyle.NONE){var b=java.awt.geom.AffineTransform.getTranslateInstance(j[0],j[1]);b.rotate(c);b.translate(a,0);var d=Math.pow(i,0.66)*2;b.scale(d,d);var f=new java.awt.geom.GeneralPath();switch(g){case Polyline.ArrowStyle.DISC:f.append(new java.awt.geom.Ellipse2D.Float(-3.5,-2,4,4),false);break;case Polyline.ArrowStyle.OPEN:var h=new java.awt.BasicStroke((i/d/0.9),java.awt.BasicStroke.CAP_BUTT,java.awt.BasicStroke.JOIN_MITER);f.append(h.createStrokedShape(Polyline3D.ARROW).getPathIterator(java.awt.geom.AffineTransform.getScaleInstance(0.9,0.9),0),false);break;case Polyline.ArrowStyle.DELTA:var e=new java.awt.geom.GeneralPath(Polyline3D.ARROW);e.closePath();f.append(e.getPathIterator(java.awt.geom.AffineTransform.getTranslateInstance(1.65,0),0),false);break;default:return null}return f.createTransformedShape(b)}return null};function DimensionLine3D(a,d,b,c){Object3DBranch.call(this,a,d,b);this.dimensionLineRotations=null;this.cameraChangeListener=null;this.homeCameraListener=null;this.dimensionLinesListener=null;this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);this.update()}DimensionLine3D.prototype=Object.create(Object3DBranch.prototype);DimensionLine3D.prototype.constructor=DimensionLine3D;DimensionLine3D.prototype.update=function(){var i=this.getUserData();if(i.isVisibleIn3D()&&(i.getLevel()==null||i.getLevel().isViewableAndVisible())){var f=i.getLength();var e=this.getUserPreferences().getLengthUnit().getFormat().format(f);var x=i.getLengthStyle();if(x==null){x=this.getUserPreferences().getDefaultTextStyle(DimensionLine)}var r=x.getFontName();if(r===null){r="sans-serif"}var t=x.getFontSize();if(["Times","Serif","Helvetica"].indexOf(r)===-1){t*=1.18}var n=0.23*t;var l=t-n;var g=i.getOffset();var C=g<=0?-n-1:l+1;var o;var q;var A;var h;var v;if(this.getChildren().length===0){var m=new BranchGroup3D();o=new TransformGroup3D();o.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);labelTransformGroup=new TransformGroup3D();labelTransformGroup.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);o.addChild(labelTransformGroup);var j=new Label(e,0,C);j.setColor(i.getColor());j.setStyle(x);j.setPitch(0);var c=new Label3D(j,null,false);labelTransformGroup.addChild(c);var q=new Shape3D();A=new Appearance3D();A.setIllumination(0);q.setAppearance(A);q.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);o.addChild(q);h=new Shape3D();v=this.getSelectionAppearance();h.setAppearance(this.getSelectionAppearance());h.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);h.setPickable(false);o.addChild(h);m.addChild(o);this.addChild(m)}else{o=this.getChild(0).getChild(0);var c=o.getChild(0).getChild(0);var j=c.getUserData();j.setText(e);j.setY(C);j.setColor(i.getColor());j.setStyle(x);c.update();q=o.getChild(1);A=q.getAppearance();h=o.getChild(2);v=h.getAppearance()}var a=i.getElevationStart();var d=mat4.create();mat4.fromTranslation(d,vec3.fromValues(i.getXStart(),i.getLevel()!=null?i.getLevel().getElevation()+a:a,i.getYStart()));if(this.dimensionLineRotations==null){this.dimensionLineRotations=mat4.create()}var u=Math.atan2(i.getElevationEnd()-a,i.getXEnd()-i.getXStart());mat4.fromZRotation(this.dimensionLineRotations,u);var w=mat4.create();var y=Math.atan2(i.getYStart()-i.getYEnd(),i.getXEnd()-i.getXStart());mat4.fromYRotation(w,y);mat4.mul(this.dimensionLineRotations,this.dimensionLineRotations,w);w=mat4.create();mat4.fromXRotation(w,-i.getPitch());mat4.mul(this.dimensionLineRotations,this.dimensionLineRotations,w);mat4.mul(d,d,this.dimensionLineRotations);var p=mat4.create();mat4.fromTranslation(p,vec3.fromValues(0,0,g));mat4.mul(d,d,p);o.setTransform(d);var s=i.getEndMarkSize()/2;var z=new Array(7*2);z[0]=vec3.fromValues(0,0,0);z[1]=vec3.fromValues(f,0,0);z[2]=vec3.fromValues(-s,0,s);z[3]=vec3.fromValues(s,0,-s);z[4]=vec3.fromValues(0,0,s);z[5]=vec3.fromValues(0,0,-s);z[6]=vec3.fromValues(f-s,0,s);z[7]=vec3.fromValues(f+s,0,-s);z[8]=vec3.fromValues(f,0,s);z[9]=vec3.fromValues(f,0,-s);z[10]=vec3.fromValues(0,0,-g);z[11]=vec3.fromValues(0,0,-s);z[12]=vec3.fromValues(f,0,-g);z[13]=vec3.fromValues(f,0,-s);var b=new IndexedLineArray3D(z,[0,1,2,3,4,5,6,7,8,9,10,11,12,13]);q.setGeometry(b,0);h.setGeometry(b,0);this.updateAppearanceMaterial(A,i.getColor()!=null?i.getColor():0,0,0);var B=this.getHome();var D=this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&B.isItemSelected(i);v.setVisible(D);A.setVisible(!D);this.updateLengthLabelDirection(B.getCamera());var k=this;if(this.cameraChangeListener==null){this.cameraChangeListener=function(G){var E=k.getUserData();if(k.getChildren().length>0&&E.isVisibleIn3D()&&(E.getLevel()==null||E.getLevel().isViewableAndVisible())){var F=G.getPropertyName();if("X"==F||"Y"==F||"Z"==F){k.updateLengthLabelDirection(G.getSource())}}};this.homeCameraListener=function(E){E.getOldValue().removePropertyChangeListener(k.cameraChangeListener);E.getNewValue().addPropertyChangeListener(k.cameraChangeListener);k.updateLengthLabelDirection(B.getCamera())};this.dimensionLinesListener=function(E){if(E.getType()===CollectionEvent.Type.DELETE&&E.getItem()===i){B.getCamera().removePropertyChangeListener(k.cameraChangeListener);B.removePropertyChangeListener("CAMERA",k.homeCameraListener);B.removeDimensionLinesListener(k.dimensionLinesListener)}};B.getCamera().addPropertyChangeListener(this.cameraChangeListener);B.addPropertyChangeListener("CAMERA",this.homeCameraListener);B.addDimensionLinesListener(this.dimensionLinesListener)}}else{this.removeAllChildren();this.dimensionLineRotations=null;if(this.cameraChangeListener!=null){this.getHome().getCamera().removePropertyChangeListener(this.cameraChangeListener);this.getHome().removePropertyChangeListener("CAMERA",this.homeCameraListener);this.getHome().removeDimensionLinesListener(this.dimensionLinesListener);this.cameraChangeListener=null;this.homeCameraListener=null;this.dimensionLinesListener=null}}};DimensionLine3D.prototype.updateLengthLabelDirection=function(f){var a=this.getUserData();var e=vec3.fromValues(0,1,0);vec3.transformMat4(e,e,this.dimensionLineRotations);var g=vec3.fromValues((a.getXEnd()+a.getXStart())/2-f.getX(),(a.getElevationEnd()+a.getElevationStart())/2-f.getZ(),(a.getYEnd()+a.getYStart())/2-f.getY());var b=this.getChild(0).getChild(0).getChild(0);var d=mat4.create();mat4.fromTranslation(d,vec3.fromValues(a.getLength()/2,0,0));var c=mat4.create();mat4.fromZRotation(c,vec3.dot(e,g)>0?Math.PI:0);mat4.mul(d,d,c);b.setTransform(d)};function Label3D(b,d,a,c){if(c===undefined){c=a;a=null}Object3DBranch.call(this,b,d,a);this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);this.update()}Label3D.prototype=Object.create(Object3DBranch.prototype);Label3D.prototype.constructor=Label3D;Label3D.dummyContext=document.createElement("canvas").getContext("2d");Label3D.prototype.update=function(){var F=this.getUserData();var y=F.getPitch();var G=F.getStyle();if(y!=null&&G!=null&&(F.getLevel()==null||F.getLevel().isViewableAndVisible())){var u=F.getText();var t=F.getColor();var L=F.getOutlineColor();if(u!=this.text||(G==null&&this.style!=null)||(G!=null&&!G.equals(this.style))||(t==null&&this.color!=null)||(t!=null&&t!==this.color)){var H="";if(G.isBold()){H="bold "}if(G.isItalic()){H+="italic "}var r=G.getFontName();if(r===null){r="sans-serif"}var m=50;var J=m;if(["Times","Serif","Helvetica"].indexOf(r)===-1){J*=1.18}var C=m/G.getFontSize();var E=0.23*J;var K=H+" "+m+"px "+r;Label3D.dummyContext.font=K;var B=u.replace(/\n*$/,"").split("\n");var A=new Array(B.length);var h=-Infinity;var s=-E+J*B.length;for(var I=0;I<B.length;I++){A[I]=Label3D.dummyContext.measureText(B[I]).width;if(G.isItalic()){A[I]+=J*0.154}h=Math.max(A[I],h)}var l=J*B.length;var a=Math.sqrt(h/l);var a=Math.sqrt(h/l);var b;var c;var z;if(a>1){b=Math.ceil(Math.max(255*a,Math.min(h,511*a)));z=b/h;c=Math.ceil(z*l)}else{c=Math.ceil(Math.max(255*a,Math.min(l,511/a)));z=c/l;b=Math.ceil(z*h)}if(b>0&&c>0){var n=document.createElement("canvas");n.width=Appearance3D.getNextHighestPowerOfTwo(b)/2;n.height=Appearance3D.getNextHighestPowerOfTwo(c)/2;n.transparent=true;var N=n.getContext("2d");N.scale(z/b*n.width,z/c*n.height);N.translate(0,s);N.font=K;if(t!==null){N.fillStyle="rgb("+((t>>>16)&255)+","+((t>>>8)&255)+","+(t&255)+")"}if(L!==null){N.strokeStyle="rgb("+((L>>>16)&255)+","+((L>>>8)&255)+","+(L&255)+")"}for(var I=B.length-1;I>=0;I--){var e=B[I];var k;if(G.getAlignment()===TextStyle.Alignment.LEFT){k=0}else{if(G.getAlignment()===TextStyle.Alignment.RIGHT){k=h-A[I]}else{k=(h-A[I])/2}}N.translate(k,0);N.fillText(e,0,0);if(L!==null){N.strokeText(e,0,0)}N.translate(-k,-J)}var x=mat4.create();mat4.scale(x,x,vec3.fromValues(h/C,1,l/C));this.baseLineTransform=mat4.create();var k;if(G.getAlignment()==TextStyle.Alignment.LEFT){k=h/2}else{if(G.getAlignment()==TextStyle.Alignment.RIGHT){k=-h/2}else{k=0}}mat4.fromTranslation(this.baseLineTransform,vec3.fromValues(k/C,0,(l/2-s)/C));mat4.mul(this.baseLineTransform,this.baseLineTransform,x);this.texture=n;this.text=u;this.style=G;this.color=t}else{this.clear()}}if(this.texture!==null){var v;var d;if(this.getChildren().length===0){var p=new BranchGroup3D();v=new TransformGroup3D();v.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);p.addChild(v);var q=new Appearance3D();this.updateAppearanceMaterial(q,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);q.setCullFace(Appearance3D.CULL_NONE);var o=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(-0.5,0,0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(0.5,0,-0.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),q);v.addChild(o);var f=[vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(0.5,0,-0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(-0.5,0,0.5)];var M=new IndexedLineArray3D(f,[0,1,1,2,2,3,3,0]);d=this.getSelectionAppearance();var g=new Shape3D(M,d);g.setPickable(false);v.addChild(g);this.addChild(p)}else{v=this.getChild(0).getChild(0);var g=v.getChild(1);d=g.getAppearance()}var v=this.getChild(0).getChild(0);var D=mat4.create();mat4.fromXRotation(D,y);mat4.mul(D,D,this.baseLineTransform);var j=mat4.create();mat4.fromYRotation(j,-F.getAngle());mat4.mul(j,j,D);var w=mat4.create();mat4.fromTranslation(w,vec3.fromValues(F.getX(),F.getGroundElevation()+(y==0&&F.getElevation()<0.1?0.1:0),F.getY()));mat4.mul(w,w,j);v.setTransform(w);v.getChild(0).getAppearance().setTextureImage(this.texture);d.setVisible(this.getUserPreferences()!=null&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(F))}}else{this.clear()}};Label3D.prototype.clear=function(){this.removeAllChildren();this.text=null;this.style=null;this.color=null;this.texture=null;this.baseLineTransform=null};function TextureManager(){this.loadedTextureImages={};this.loadingTextureObservers={}}TextureManager.READING_TEXTURE="Reading texture";TextureManager.instance=null;TextureManager.getInstance=function(){if(TextureManager.instance==null){TextureManager.instance=new TextureManager()}return TextureManager.instance};TextureManager.prototype.clear=function(){this.loadedTextureImages={};this.loadingTextureObservers={}};TextureManager.prototype.loadTexture=function(d,f,b,c){if(b===undefined){c=f;f=0;b=false}else{if(c===undefined){c=b;b=false}}if(b&&!d.isStreamURLReady()){throw new IllegalStateException("Can't run synchronously with unavailable URL")}var a=this;var e=d.getURL();d.getStreamURL({urlReady:function(g){if(e in a.loadedTextureImages){if(c.textureUpdated!==undefined){c.textureUpdated(a.loadedTextureImages[e])}}else{if(b){a.load(g,b,{textureLoaded:function(i){a.loadedTextureImages[e]=i;if(c.textureUpdated!==undefined){c.textureUpdated(i)}},textureError:function(i){if(c.textureError!==undefined){c.textureError(i)}},progression:function(j,k,i){if(c.progression!==undefined){c.progression(j,k,i)}}})}else{if(e in a.loadingTextureObservers){a.loadingTextureObservers[e].push(c)}else{var h=[];h.push(c);a.loadingTextureObservers[e]=h;a.load(g,b,{textureLoaded:function(j){var l=a.loadingTextureObservers[e];if(l){delete a.loadingTextureObservers[e];a.loadedTextureImages[e]=j;for(var k=0;k<l.length;k++){if(l[k].textureUpdated!==undefined){l[k].textureUpdated(j)}}}},textureError:function(j){var l=a.loadingTextureObservers[e];if(l){delete a.loadingTextureObservers[e];for(var k=0;k<l.length;k++){if(l[k].textureError!==undefined){l[k].textureError(j)}}}},progression:function(k,m,j){var n=a.loadingTextureObservers[e];if(n){for(var l=0;l<n.length;l++){if(n[l].progression!==undefined){n[l].progression(k,m,j)}}}}})}}}},urlError:function(g,h){c.textureError(g)}})};TextureManager.prototype.load=function(b,a,d){d.progression(TextureManager.READING_TEXTURE,b,0);var h=new Image();h.crossOrigin="anonymous";h.url=b;var e=function(j){h.removeEventListener("load",i);h.removeEventListener("error",e);d.textureError("Can't load "+b)};var i=function(){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)};if(b.indexOf("jar:")===0){var g=b.indexOf("!/");var c=decodeURIComponent(b.substring(g+2));var f=b.substring(4,g);ZIPTools.getZIP(f,a,{zipReady:function(l){try{h.addEventListener("load",i);h.addEventListener("error",e);var j=l.file(c);var n=j.asBinary();var m=btoa(n);h.transparent=ZIPTools.isTransparentImage(n);h.src="data:image;base64,"+m;if(h.width!==0||a){i()}}catch(k){this.zipError(k)}},zipError:function(j){d.textureError("Can't load "+f)},progression:function(k,l,j){d.progression(k,l,j)}})}else{h.addEventListener("load",i);h.addEventListener("error",e);h.src=b;if(h.width!==0){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)}}};TextureManager.prototype.isTextureTransparent=function(a){return a.transparent===true};TextureManager.prototype.getRotatedTextureWidth=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.cos(b))+Math.abs(a.getHeight()*Math.sin(b)))}else{return a.getWidth()}};TextureManager.prototype.getRotatedTextureHeight=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.sin(b))+Math.abs(a.getHeight()*Math.cos(b)))}else{return a.getHeight()}};TextureManager.prototype.getErrorImage=function(){if(TextureManager.errorImage===undefined){TextureManager.errorImage=this.getColoredImage("#FF0000")}return TextureManager.errorImage};TextureManager.prototype.getWaitImage=function(){if(TextureManager.waitImage===undefined){TextureManager.waitImage=this.getColoredImage("#FFFFFF")}return TextureManager.waitImage};TextureManager.prototype.getColoredImage=function(b){var c=document.createElement("canvas");c.width=2;c.height=2;var d=c.getContext("2d");d.fillStyle=b;d.fillRect(0,0,2,2);var e=c.toDataURL();var a=new Image();a.url=e;a.src=e;return a};var LengthUnit={};LengthUnit.UNITS_LOCALIZATION={"":{meterUnit:"m",centimeterUnit:"cm",millimeterUnit:"mm",inchUnit:"inch",footUnit:"ft",squareMeterUnit:"m\u00b2",squareFootUnit:"sq ft"},ar:{meterUnit:"\u0645",centimeterUnit:"\u0633\u0645",millimeterUnit:"\u0645\u0645",inchUnit:"\u0627\u0646\u0634",squareMeterUnit:"\u0645\u062a\u0631 \u0645\u0631\u0628\u0639",squareFootUnit:"\u0642\u062f\u0645 \u0645\u0631\u0628\u0639"},bg:{inchUnit:"inch"},cs:{inchUnit:"palce",squareFootUnit:"ft\u00b2"},de:{inchUnit:"inch",footUnit:"ft",squareFootUnit:"ft\u00b2"},el:{inchUnit:"\u03af\u03bd\u03c4\u03c3\u03b1",squareMeterUnit:"m\u00b2",squareFootUnit:"\u03c4\u03b5\u03c4\u03c1\u03b1\u03b3\u03c9\u03bd\u03b9\u03ba\u03cc \u03c0\u03cc\u03b4\u03b9"},es:{inchUnit:"pulgada",squareFootUnit:"ft\u00b2"},eu:{inchUnit:"hazbete",squareFootUnit:"sq ft"},fi:{inchUnit:'"',squareFootUnit:"ft\u00b2"},fr:{inchUnit:"pouce",footUnit:"pied",squareFootUnit:"ft\u00b2"},hu:{inchUnit:"inch",squareFootUnit:"ft\u00b2"},"in":{inchUnit:"inci",squareFootUnit:"ft\u00b2"},it:{inchUnit:"pollice",squareFootUnit:"ft\u00b2"},ja:{inchUnit:"inch",squareFootUnit:"sq ft"},nl:{inchUnit:"inch",squareFootUnit:"vt\u00b2"},pl:{inchUnit:"cal",squareFootUnit:"ft\u00b2"},pt_BR:{inchUnit:"pol",squareFootUnit:"ft\u00b2"},pt:{inchUnit:"pol",squareFootUnit:"p\u00e9\u00b2"},ru:{meterUnit:"\u043c",centimeterUnit:"\u0441\u043c",millimeterUnit:"\u043c\u043c",inchUnit:"\u0434\u044e\u0439\u043c",squareMeterUnit:"\u043c\u00b2",squareFootUnit:"ft\u00b2"},sl:{inchUnit:"in\u010d",squareFootUnit:"kv \u010dl"},sr:{inchUnit:"inch",squareFootUnit:"sq ft"},sv:{inchUnit:"tum",squareFootUnit:"ft\u00b2"},th:{meterUnit:"\u0e21.",centimeterUnit:"\u0e0b\u0e21.",millimeterUnit:"\u0e21\u0e21.",inchUnit:"\u0e19\u0e34\u0e49\u0e27",squareMeterUnit:"\u0e21.\u00b2",squareFootUnit:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e1f\u0e38\u0e15"},tr:{inchUnit:"in\u00e7",squareFootUnit:"kare ft "},uk:{meterUnit:"\u043c",centimeterUnit:"\u0441\u043c",millimeterUnit:"\u043c\u043c",inchUnit:"\u0434\u044e\u0439\u043c",squareMeterUnit:"\u043c\u00b2",squareFootUnit:"\u043a\u0432. \u0444\u0442"},vi:{inchUnit:"inch",squareFootUnit:"sq ft"},zh_CN:{centimeterUnit:"\u5398\u7c73",inchUnit:"\u82f1\u5bf8",millimeterUnit:"\u6beb\u7c73",meterUnit:"\u7c73",squareMeterUnit:"m\u00b2",squareFootUnit:"\u5e73\u65b9\u82f1\u5c3a"},zh_TW:{centimeterUnit:"\u516c\u5206",inchUnit:"\u82f1\u540b",millimeterUnit:"\u516c\u91d0",meterUnit:"\u516c\u5c3a",squareMeterUnit:"m\u00b2",squareFootUnit:"ft\u00b2"}};LengthUnit.getLocalizedUnit=function(b){var a=Locale.getDefault();var d=LengthUnit.UNITS_LOCALIZATION[a];if(d!==undefined){var c=d[b];if(c!==undefined){return c}}if(a.indexOf("_")>0){a=a.substring(0,a.indexOf("_"));var d=LengthUnit.UNITS_LOCALIZATION[a];if(d!==undefined){var c=d[b];if(c!==undefined){return c}}}return LengthUnit.UNITS_LOCALIZATION[""][b]};LengthUnit.getMagnetizedMeterLength=function(d,a){a*=2;var b=1/10;if(a>100){b=100}else{if(a>10){b=10}else{if(a>5){b=5}else{if(a>1){b=1}else{if(a>0.5){b=0.5}}}}}var c=Math.round(d/b)*b;if(c===0&&d>0){return d}else{return c}};LengthUnit.getMagnetizedInchLength=function(d,a){a=LengthUnit.centimeterToInch(a)*2;var b=1/8;if(a>6){b=6}else{if(a>3){b=3}else{if(a>1){b=1}else{if(a>0.5){b=0.5}else{if(a>0.25){b=0.25}}}}}var c=LengthUnit.inchToCentimeter(Math.round(LengthUnit.centimeterToInch(d)/b)*b);if(c===0&&d>0){return d}else{return c}};LengthUnit.skipWhiteSpaces=function(b,a){while(a.getIndex()<b.length&&/\s/.test(b.charAt(a.getIndex()))){a.setIndex(a.getIndex()+1)}};LengthUnit.centimeterToInch=function(a){return a/2.54};LengthUnit.centimeterToFoot=function(a){return a/2.54/12};LengthUnit.inchToCentimeter=function(a){return a*2.54};LengthUnit.footToCentimeter=function(a){return a*2.54*12};LengthUnit.nameOf=function(c){if(c!=null){var d=Object.keys(LengthUnit);for(var a=0;a<d.length;a++){var b=d[a];if(LengthUnit[b]==c){return b}}}return null};LengthUnit.valueOf=function(a){return LengthUnit[a]};LengthUnit.MILLIMETER={formatLocale:null};LengthUnit.MILLIMETER.name=function(){return LengthUnit.nameOf(this)};LengthUnit.MILLIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.MILLIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.MILLIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.MILLIMETER.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.MILLIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("millimeterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("0",10,this.unitName);this.lengthFormat=new MeterFamilyFormat("0",10);var a=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.MILLIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.MILLIMETER.getMinimumLength=function(){return 0.1};LengthUnit.MILLIMETER.getMaximumLength=function(){return 100000};LengthUnit.MILLIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.MILLIMETER.getStepSize=function(){return 0.5};LengthUnit.MILLIMETER.centimeterToUnit=function(a){return a*10};LengthUnit.MILLIMETER.unitToCentimeter=function(a){return a/10};LengthUnit.MILLIMETER.isMetric=function(){return true};LengthUnit.CENTIMETER={formatLocale:null};LengthUnit.CENTIMETER.name=function(){return LengthUnit.nameOf(this)};LengthUnit.CENTIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.CENTIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.CENTIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.CENTIMETER.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.CENTIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("centimeterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("0.#",1,this.unitName);this.lengthFormat=new MeterFamilyFormat("0.#",1);var a=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.CENTIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.CENTIMETER.getMinimumLength=function(){return 0.1};LengthUnit.CENTIMETER.getMaximumLength=function(){return 100000};LengthUnit.CENTIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.CENTIMETER.getStepSize=function(){return 0.5};LengthUnit.CENTIMETER.centimeterToUnit=function(a){return a};LengthUnit.CENTIMETER.unitToCentimeter=function(a){return a};LengthUnit.CENTIMETER.isMetric=function(){return true};LengthUnit.METER={formatLocale:null};LengthUnit.METER.name=function(){return LengthUnit.nameOf(this)};LengthUnit.METER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.METER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.METER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.METER.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.METER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("meterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("0.00#",0.01,this.unitName);this.lengthFormat=new MeterFamilyFormat("0.00#",0.01);var a=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.METER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.METER.getMinimumLength=function(){return 0.1};LengthUnit.METER.getMaximumLength=function(){return 100000};LengthUnit.METER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.METER.getStepSize=function(){return 0.5};LengthUnit.METER.centimeterToUnit=function(a){return a/100};LengthUnit.METER.unitToCentimeter=function(a){return a*100};LengthUnit.METER.isMetric=function(){return true};LengthUnit.INCH={formatLocale:null};LengthUnit.INCH.name=function(){return LengthUnit.nameOf(this)};LengthUnit.INCH.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH.getFormat=function(){return this.getFormatWithUnit()};LengthUnit.INCH.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.INCH.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("inchUnit");var a="";this.lengthFormat=new InchFractionFormat(true,a);var b=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0",b)}};LengthUnit.INCH.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH.getStepSize=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH.centimeterToUnit=function(a){return LengthUnit.centimeterToInch(a)};LengthUnit.INCH.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};LengthUnit.INCH.isMetric=function(){return false};LengthUnit.INCH_FRACTION={formatLocale:null};LengthUnit.INCH_FRACTION.name=function(){return LengthUnit.nameOf(this)};LengthUnit.INCH_FRACTION.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH_FRACTION.getFormat=function(){return this.getFormatWithUnit()};LengthUnit.INCH_FRACTION.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH_FRACTION.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.INCH_FRACTION.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("inchUnit");var a="";this.lengthFormat=new InchFractionFormat(false,a);var b=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0",b)}};LengthUnit.INCH_FRACTION.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH_FRACTION.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_FRACTION.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH_FRACTION.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH_FRACTION.getStepSize=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_FRACTION.centimeterToUnit=function(a){return LengthUnit.centimeterToInch(a)};LengthUnit.INCH_FRACTION.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};LengthUnit.INCH_FRACTION.isMetric=function(){return false};LengthUnit.INCH_DECIMALS={formatLocale:null};LengthUnit.INCH_DECIMALS.name=function(){return LengthUnit.nameOf(this)};LengthUnit.INCH_DECIMALS.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.INCH_DECIMALS.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH_DECIMALS.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH_DECIMALS.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.INCH_DECIMALS.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("inchUnit");this.lengthFormat=new InchDecimalsFormat("0.###");this.lengthFormatWithUnit=new InchDecimalsFormat("0.###",'"');var a=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0.##",a)}};LengthUnit.INCH_DECIMALS.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_DECIMALS.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH_DECIMALS.getStepSize=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_DECIMALS.centimeterToUnit=function(a){return LengthUnit.centimeterToInch(a)};LengthUnit.INCH_DECIMALS.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};LengthUnit.INCH_DECIMALS.isMetric=function(){return false};LengthUnit.FOOT_DECIMALS={formatLocale:null};LengthUnit.FOOT_DECIMALS.name=function(){return LengthUnit.nameOf(this)};LengthUnit.FOOT_DECIMALS.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.FOOT_DECIMALS.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.FOOT_DECIMALS.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.FOOT_DECIMALS.getName=function(){this.checkLocaleChange();return this.unitName};LengthUnit.FOOT_DECIMALS.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();this.unitName=LengthUnit.getLocalizedUnit("footUnit");this.lengthFormat=new FootDecimalsFormat("0.###");this.lengthFormatWithUnit=new FootDecimalsFormat("0.###","'");var a=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0.##",a)}};LengthUnit.FOOT_DECIMALS.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.FOOT_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.FOOT_DECIMALS.getMaximumLength=function(){return LengthUnit.footToCentimeter(3280)};LengthUnit.FOOT_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.FOOT_DECIMALS.getStepSize=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.FOOT_DECIMALS.centimeterToUnit=function(a){return LengthUnit.centimeterToFoot(a)};LengthUnit.FOOT_DECIMALS.unitToCentimeter=function(a){return LengthUnit.footToCentimeter(a)};LengthUnit.FOOT_DECIMALS.isMetric=function(){return false};function MeterFamilyFormat(c,a,b){DecimalFormat.call(this,c);this.setGroupingUsed(true);this.unitMultiplier=a;this.unit=b}MeterFamilyFormat.prototype=Object.create(DecimalFormat.prototype);MeterFamilyFormat.prototype.constructor=MeterFamilyFormat;MeterFamilyFormat.prototype.format=function(a){var b=DecimalFormat.prototype.format.call(this,a*this.unitMultiplier);return b+(this.unit?" "+this.unit:"")};MeterFamilyFormat.prototype.parse=function(c,b){var a=DecimalFormat.prototype.parse.call(this,c,b);if(a===null){return null}else{return a/this.unitMultiplier}};function SquareMeterAreaFormatWithUnit(a){DecimalFormat.call(this,"0.##");this.setGroupingUsed(true);this.squareMeterUnit=a}SquareMeterAreaFormatWithUnit.prototype=Object.create(DecimalFormat.prototype);SquareMeterAreaFormatWithUnit.prototype.constructor=SquareMeterAreaFormatWithUnit;SquareMeterAreaFormatWithUnit.prototype.format=function(a){var b=DecimalFormat.prototype.format.call(this,a/10000);return b+(this.squareMeterUnit?" "+this.squareMeterUnit:"")};function InchFractionFormat(b,a){DecimalFormat.call(this,"0.###");this.setGroupingUsed(true);this.footInch=b;this.footInchSeparator=a}InchFractionFormat.prototype=Object.create(DecimalFormat.prototype);InchFractionFormat.prototype.constructor=InchFractionFormat;InchFractionFormat.INCH_FRACTION_CHARACTERS=["\u215b","\u00bc","\u215c","\u00bd","\u215d","\u00be","\u215e"];InchFractionFormat.INCH_FRACTION_STRINGS=["1/8","1/4","3/8","1/2","5/8","3/4","7/8"];InchFractionFormat.prototype.format=function(f){var g=Math.abs(f);var b=Math.floor(LengthUnit.centimeterToFoot(g));var e=LengthUnit.centimeterToInch(g-LengthUnit.footToCentimeter(b));if(e>=11.9375){b++;e-=12}var i=f>=0?"":"-";var a=DecimalFormat.prototype.format.call(this,b);if(e>=0.0005){var c=Math.floor(e);var d=e-c;var h=Math.round(d*8);if(this.footInch){i+=a;if(h===0||h===8){i+="'";i+=Math.round(e*8)/8}else{i+="'";i+=c;i+=InchFractionFormat.INCH_FRACTION_CHARACTERS[h-1]}}else{if(h===0||h===8){i+=b*12+Math.round(e*8)/8}else{i+=b*12+c;i+=InchFractionFormat.INCH_FRACTION_CHARACTERS[h-1]}}i+='"'}else{if(this.footInch){i+=a;i+="'"}else{i+=DecimalFormat.prototype.format.call(this,b*12);i+='"'}}return i};InchFractionFormat.prototype.parse=function(o,k){var m=0;var n=new ParsePosition(k.getIndex());LengthUnit.skipWhiteSpaces(o,n);var f=NumberFormat.getIntegerInstance();var d=o.indexOf("'",k.getIndex());var e=n.getIndex()<o.length&&o.charAt(n.getIndex())==="-";var h=false;if(d!==-1){var b=f.parse(o,n);if(b===null){k.setErrorIndex(n.getErrorIndex());return null}LengthUnit.skipWhiteSpaces(o,n);if(n.getIndex()===d){m=LengthUnit.footToCentimeter(b);h=true;n=new ParsePosition(d+1);LengthUnit.skipWhiteSpaces(o,n);if(n.getIndex()<o.length&&this.footInchSeparator.indexOf(o.charAt(n.getIndex()))>=0){n.setIndex(n.getIndex()+1);LengthUnit.skipWhiteSpaces(o,n)}if(n.getIndex()===o.length){k.setIndex(o.length);return m}}else{if(this.decimalSeparator===o.charAt(n.getIndex())){var p=new ParsePosition(k.getIndex());if(DecimalFormat.prototype.parse.call(this,o,p)!==null&&p.getIndex()===d){k.setErrorIndex(n.getErrorIndex());return null}}n.setIndex(k.getIndex())}}var c=DecimalFormat.prototype.parse.call(this,o,n);if(c===null){if(h){k.setIndex(n.getIndex());return m}else{k.setErrorIndex(n.getErrorIndex());return null}}if(e){if(d===-1){m=LengthUnit.inchToCentimeter(c)}else{m-=LengthUnit.inchToCentimeter(c)}}else{m+=LengthUnit.inchToCentimeter(c)}LengthUnit.skipWhiteSpaces(o,n);if(n.getIndex()===o.length){k.setIndex(o.length);return m}if(o.charAt(n.getIndex())==='"'){k.setIndex(n.getIndex()+1);return m}var a=o.charAt(n.getIndex());var j=o.length-n.getIndex()>=3?o.substring(n.getIndex(),n.getIndex()+3):null;for(var g=0;g<InchFractionFormat.INCH_FRACTION_CHARACTERS.length;g++){if(InchFractionFormat.INCH_FRACTION_CHARACTERS[g]===a||InchFractionFormat.INCH_FRACTION_STRINGS[g]==j){var l=o.lastIndexOf(this.decimalSeparator,n.getIndex()-1);if(l>d){return null}else{if(e){m-=LengthUnit.inchToCentimeter((g+1)/8)}else{m+=LengthUnit.inchToCentimeter((g+1)/8)}k.setIndex(n.getIndex()+(InchFractionFormat.INCH_FRACTION_CHARACTERS[g]===a?1:3));LengthUnit.skipWhiteSpaces(o,k);if(k.getIndex()<o.length&&o.charAt(k.getIndex())==='"'){k.setIndex(k.getIndex()+1)}return m}}}k.setIndex(n.getIndex());return m};function SquareFootAreaFormatWithUnit(b,a){DecimalFormat.call(this,b);this.setGroupingUsed(true);this.unit=a}SquareFootAreaFormatWithUnit.prototype=Object.create(DecimalFormat.prototype);SquareFootAreaFormatWithUnit.prototype.constructor=SquareFootAreaFormatWithUnit;SquareFootAreaFormatWithUnit.prototype.format=function(a){var b=DecimalFormat.prototype.format.call(this,a/929.0304);return b+(this.unit?" "+this.unit:"")};function InchDecimalsFormat(b,a){DecimalFormat.call(this,b);this.setGroupingUsed(true);this.unit=a}InchDecimalsFormat.prototype=Object.create(DecimalFormat.prototype);InchDecimalsFormat.prototype.constructor=InchDecimalsFormat;InchDecimalsFormat.prototype.format=function(a){var b=DecimalFormat.prototype.format.call(this,LengthUnit.centimeterToInch(a));return b+(this.unit?this.unit:"")};InchDecimalsFormat.prototype.parse=function(e,a){var d=new ParsePosition(a.getIndex());LengthUnit.skipWhiteSpaces(e,d);var c=DecimalFormat.prototype.parse.call(this,e,d);if(c===null){a.setErrorIndex(d.getErrorIndex());return null}var b=LengthUnit.inchToCentimeter(c);LengthUnit.skipWhiteSpaces(e,d);if(d.getIndex()<e.length&&e.charAt(d.getIndex())==='"'){a.setIndex(d.getIndex()+1)}else{a.setIndex(d.getIndex())}return b};function FootDecimalsFormat(b,a){DecimalFormat.call(this,b);this.setGroupingUsed(true);this.unit=a}FootDecimalsFormat.prototype=Object.create(DecimalFormat.prototype);FootDecimalsFormat.prototype.constructor=FootDecimalsFormat;FootDecimalsFormat.prototype.format=function(a){var b=DecimalFormat.prototype.format.call(this,LengthUnit.centimeterToFoot(a));return b+(this.unit?this.unit:"")};FootDecimalsFormat.prototype.parse=function(e,b){var d=new ParsePosition(b.getIndex());LengthUnit.skipWhiteSpaces(e,d);var a=DecimalFormat.prototype.parse.call(this,e,d);if(a===null){b.setErrorIndex(d.getErrorIndex());return null}var c=LengthUnit.footToCentimeter(a);LengthUnit.skipWhiteSpaces(e,d);if(d.getIndex()<e.length&&e.charAt(d.getIndex())==="'"){b.setIndex(d.getIndex()+1)}else{b.setIndex(d.getIndex())}return c};function UserPreferences(){this.propertyChangeSupport=new PropertyChangeSupport(this);this.initSupportedLanguages(UserPreferences.DEFAULT_SUPPORTED_LANGUAGES);this.resourceBundles=[];this.furnitureCatalogResourceBundles=[];this.texturesCatalogResourceBundles=[];this.furnitureCatalog=null;this.texturesCatalog=null;this.patternsCatalog=null;this.currency=null;this.valueAddedTaxEnabled=false;this.defaultValueAddedTaxPercentage=null;this.unit=null;this.furnitureCatalogViewedInTree=false;this.navigationPanelVisible=true;this.editingIn3DViewEnabled=false;this.aerialViewCenteredOnSelectionEnabled=false;this.observerCameraSelectedAtChange=true;this.magnetismEnabled=true;this.rulersVisible=true;this.gridVisible=true;this.defaultFontName=null;this.furnitureViewedFromTop=true;this.furnitureModelIconSize=128;this.roomFloorColoredOrTextured=true;this.wallPattern=null;this.newWallPattern=null;this.newWallThickness=7.5;this.newWallHeight=250;this.newWallBaseboardThickness=1;this.newWallBaseboardHeight=7;this.newRoomFloorColor=null;this.newFloorThickness=12;this.autoSaveDelayForRecovery=0;this.recentHomes=[];this.autoCompletionStrings={};this.recentColors=[];this.recentTextures=[];this.homeExamples=[];this.ignoredActionTips={}}UserPreferences.DEFAULT_SUPPORTED_LANGUAGES=["bg","cs","de","el","en","es","fr","it","ja","hu","nl","pl","pt","pt_BR","ru","sv","vi","zh_CN","zh_TW"];UserPreferences.DEFAULT_TEXT_STYLE=new TextStyle(18);UserPreferences.DEFAULT_ROOM_TEXT_STYLE=new TextStyle(24);UserPreferences.prototype.initSupportedLanguages=function(a){this.supportedLanguages=a;if(!this.language||this.supportedLanguages.indexOf(this.language)===-1){var d=Locale.getDefault();if(d===null){d="en"}this.defaultCountry="";var e=d;if(d.indexOf("_")>0){this.defaultCountry=d.substring(d.indexOf("_")+1,d.length);e=this.language?this.language.substring(0,this.language.indexOf("_")):d.substring(0,d.indexOf("_"))}for(var b=0;b<this.supportedLanguages.length;b++){var c=this.supportedLanguages[b];if(this.defaultCountry!=""&&c==e+"_"+this.defaultCountry||this.defaultCountry==""&&c==e){this.language=c;break}else{if(this.language===undefined&&c.indexOf(e)===0){this.language=c}}}if(this.language===undefined){this.language="en"}this.updateDefaultLocale()}};UserPreferences.prototype.updateDefaultLocale=function(){if(this.language.indexOf("_")!==-1||this.defaultCountry==""){Locale.setDefault(this.language)}else{Locale.setDefault(this.language+"_"+this.defaultCountry)}};UserPreferences.prototype.write=function(){};UserPreferences.prototype.addPropertyChangeListener=function(a){this.propertyChangeSupport.addPropertyChangeListener(a)};UserPreferences.prototype.removePropertyChangeListener=function(a){this.propertyChangeSupport.removePropertyChangeListener(a)};UserPreferences.prototype.addPropertyChangeListener=function(b,a){this.propertyChangeSupport.addPropertyChangeListener(b,a)};UserPreferences.prototype.removePropertyChangeListener=function(b,a){this.propertyChangeSupport.removePropertyChangeListener(b,a)};UserPreferences.prototype.getFurnitureCatalog=function(){return this.furnitureCatalog};UserPreferences.prototype.setFurnitureCatalog=function(a){this.furnitureCatalog=a};UserPreferences.prototype.getTexturesCatalog=function(){return this.texturesCatalog};UserPreferences.prototype.setTexturesCatalog=function(a){this.texturesCatalog=a};UserPreferences.prototype.getPatternsCatalog=function(){return this.patternsCatalog};UserPreferences.prototype.setPatternsCatalog=function(a){this.patternsCatalog=a};UserPreferences.prototype.getLengthUnit=function(){return this.unit};UserPreferences.prototype.setUnit=function(a){if(this.unit!==a){var b=this.unit;this.unit=a;this.propertyChangeSupport.firePropertyChange("UNIT",b,a)}};UserPreferences.prototype.getLanguage=function(){return this.language};UserPreferences.prototype.setLanguage=function(b){if(b!=this.language&&this.isLanguageEditable()){var a=this.language;this.language=b;this.updateDefaultLocale();this.resourceBundles=[];this.furnitureCatalogResourceBundles=[];this.texturesCatalogResourceBundles=[];this.propertyChangeSupport.firePropertyChange("LANGUAGE",a,b)}};UserPreferences.prototype.isLanguageEditable=function(){return true};UserPreferences.prototype.getDefaultSupportedLanguages=function(){return UserPreferences.DEFAULT_SUPPORTED_LANGUAGES.slice(0)};UserPreferences.prototype.getSupportedLanguages=function(){return this.supportedLanguages.slice(0)};UserPreferences.prototype.setSupportedLanguages=function(a){if(this.supportedLanguages!=a){var c=this.supportedLanguages;var b=this.language;this.initSupportedLanguages(a.slice(0));this.propertyChangeSupport.firePropertyChange("SUPPORTED_LANGUAGES",c,a);if(b!=this.language){this.propertyChangeSupport.firePropertyChange("LANGUAGE",b,language)}}};UserPreferences.prototype.getLocalizedString=function(a,c,e){this.getResourceBundles(a);if(a=="DefaultFurnitureCatalog"){return CoreTools.getStringFromKey.apply(null,[this.furnitureCatalogResourceBundles,c].concat(Array.prototype.slice.call(arguments,2)))}else{if(a=="DefaultTexturesCatalog"){return CoreTools.getStringFromKey.apply(null,[this.texturesCatalogResourceBundles,c].concat(Array.prototype.slice.call(arguments,2)))}else{if(a.__class){var d=a.__class.split(".");a=d[d.length-1]}var b=a+"."+c;return CoreTools.getStringFromKey.apply(null,[this.resourceBundles,b].concat(Array.prototype.slice.call(arguments,2)))}}};UserPreferences.prototype.getLocalizedStringKeys=function(c){if(resourceClass=="DefaultFurnitureCatalog"){var b={};for(var a=0;a<resourceBundles.length;a++){if(resourceBundles[a]!=null){CoreTools.merge(b,resourceBundles[a])}}return Object.getOwnPropertyNames(b)}else{throw new IllegalArgumentException("unsupported family")}};UserPreferences.prototype.getResourceBundles=function(a){if(a=="DefaultFurnitureCatalog"){if(this.furnitureCatalogResourceBundles.length==0){this.furnitureCatalogResourceBundles=CoreTools.loadResourceBundles("resources/DefaultFurnitureCatalog",Locale.getDefault())}return this.furnitureCatalogResourceBundles}else{if(a=="DefaultTexturesCatalog"){if(this.texturesCatalogResourceBundles.length==0){this.texturesCatalogResourceBundles=CoreTools.loadResourceBundles("resources/DefaultTexturesCatalog",Locale.getDefault())}return this.texturesCatalogResourceBundles}else{if(this.resourceBundles.length==0){this.resourceBundles=CoreTools.loadResourceBundles("resources/localization",Locale.getDefault())}return this.resourceBundles}}};UserPreferences.prototype.getCurrency=function(){return this.currency};UserPreferences.prototype.setCurrency=function(a){if(a!=this.currency){var b=this.currency;this.currency=a;this.propertyChangeSupport.firePropertyChange("CURRENCY",b,a)}};UserPreferences.prototype.isValueAddedTaxEnabled=function(){return this.valueAddedTaxEnabled};UserPreferences.prototype.setValueAddedTaxEnabled=function(a){if(this.valueAddedTaxEnabled!==a){this.valueAddedTaxEnabled=a;this.propertyChangeSupport.firePropertyChange("VALUE_ADDED_TAX_ENABLED",!a,a)}};UserPreferences.prototype.getDefaultValueAddedTaxPercentage=function(){return this.defaultValueAddedTaxPercentage};UserPreferences.prototype.setDefaultValueAddedTaxPercentage=function(b){if(b!==this.defaultValueAddedTaxPercentage&&(b==null||this.defaultValueAddedTaxPercentage==null||!b.eq(this.defaultValueAddedTaxPercentage))){var a=this.defaultValueAddedTaxPercentage;this.defaultValueAddedTaxPercentage=b;this.propertyChangeSupport.firePropertyChange("DEFAULT_VALUE_ADDED_TAX_PERCENTAGE",a,b)}};UserPreferences.prototype.isFurnitureCatalogViewedInTree=function(){return this.furnitureCatalogViewedInTree};UserPreferences.prototype.setFurnitureCatalogViewedInTree=function(a){if(this.furnitureCatalogViewedInTree!==a){this.furnitureCatalogViewedInTree=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_CATALOG_VIEWED_IN_TREE",!a,a)}};UserPreferences.prototype.isNavigationPanelVisible=function(){return this.navigationPanelVisible};UserPreferences.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelVisible!==a){this.navigationPanelVisible=a;this.propertyChangeSupport.firePropertyChange("NAVIGATION_PANEL_VISIBLE",!a,a)}};UserPreferences.prototype.isEditingIn3DViewEnabled=function(){return this.editingIn3DViewEnabled};UserPreferences.prototype.setEditingIn3DViewEnabled=function(a){if(a!=this.editingIn3DViewEnabled){this.editingIn3DViewEnabled=a;this.propertyChangeSupport.firePropertyChange("EDITING_IN_3D_VIEW_ENABLED",!a,a)}};UserPreferences.prototype.isAerialViewCenteredOnSelectionEnabled=function(){return this.aerialViewCenteredOnSelectionEnabled};UserPreferences.prototype.setAerialViewCenteredOnSelectionEnabled=function(a){if(a!==this.aerialViewCenteredOnSelectionEnabled){this.aerialViewCenteredOnSelectionEnabled=a;this.propertyChangeSupport.firePropertyChange("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",!a,a)}};UserPreferences.prototype.isObserverCameraSelectedAtChange=function(){return this.observerCameraSelectedAtChange};UserPreferences.prototype.setObserverCameraSelectedAtChange=function(a){if(a!==this.observerCameraSelectedAtChange){this.observerCameraSelectedAtChange=a;this.propertyChangeSupport.firePropertyChange("OBSERVER_CAMERA_SELECTED_AT_CHANGE",!a,a)}};UserPreferences.prototype.isMagnetismEnabled=function(){return this.magnetismEnabled};UserPreferences.prototype.setMagnetismEnabled=function(a){if(this.magnetismEnabled!==a){this.magnetismEnabled=a;this.propertyChangeSupport.firePropertyChange("MAGNETISM_ENABLED",!a,a)}};UserPreferences.prototype.isRulersVisible=function(){return this.rulersVisible};UserPreferences.prototype.setRulersVisible=function(a){if(this.rulersVisible!==a){this.rulersVisible=a;this.propertyChangeSupport.firePropertyChange("RULERS_VISIBLE",!a,a)}};UserPreferences.prototype.isGridVisible=function(){return this.gridVisible};UserPreferences.prototype.setGridVisible=function(a){if(this.gridVisible!==a){this.gridVisible=a;this.propertyChangeSupport.firePropertyChange("GRID_VISIBLE",!a,a)}};UserPreferences.prototype.getDefaultFontName=function(){return this.defaultFontName};UserPreferences.prototype.setDefaultFontName=function(b){if(b!=this.defaultFontName){var a=this.defaultFontName;this.defaultFontName=b;this.propertyChangeSupport.firePropertyChange("DEFAULT_FONT_NAME",a,b)}};UserPreferences.prototype.isFurnitureViewedFromTop=function(){return this.furnitureViewedFromTop};UserPreferences.prototype.setFurnitureViewedFromTop=function(a){if(this.furnitureViewedFromTop!==a){this.furnitureViewedFromTop=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_VIEWED_FROM_TOP",!a,a)}};UserPreferences.prototype.getFurnitureModelIconSize=function(){return this.furnitureModelIconSize};UserPreferences.prototype.setFurnitureModelIconSize=function(a){if(a!==this.furnitureModelIconSize){var b=this.furnitureModelIconSize;this.furnitureModelIconSize=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_MODEL_ICON_SIZE",b,a)}};UserPreferences.prototype.isRoomFloorColoredOrTextured=function(){return this.roomFloorColoredOrTextured};UserPreferences.prototype.setFloorColoredOrTextured=function(a){if(this.roomFloorColoredOrTextured!==a){this.roomFloorColoredOrTextured=a;this.propertyChangeSupport.firePropertyChange("ROOM_FLOOR_COLORED_OR_TEXTURED",!a,a)}};UserPreferences.prototype.getWallPattern=function(){return this.wallPattern};UserPreferences.prototype.setWallPattern=function(a){if(this.wallPattern!==a){var b=this.wallPattern;this.wallPattern=a;this.propertyChangeSupport.firePropertyChange("WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallPattern=function(){return this.newWallPattern};UserPreferences.prototype.setNewWallPattern=function(a){if(this.newWallPattern!==a){var b=this.newWallPattern;this.newWallPattern=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallThickness=function(){return this.newWallThickness};UserPreferences.prototype.setNewWallThickness=function(b){if(this.newWallThickness!==b){var a=this.newWallThickness;this.newWallThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallHeight=function(){return this.newWallHeight};UserPreferences.prototype.setNewWallHeight=function(a){if(this.newWallHeight!==a){var b=this.newWallHeight;this.newWallHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_HEIGHT",b,a)}};UserPreferences.prototype.getNewWallBaseboardThickness=function(){return this.newWallBaseboardThickness};UserPreferences.prototype.setNewWallBaseboardThickness=function(b){if(this.newWallBaseboardThickness!==b){var a=this.newWallBaseboardThickness;this.newWallBaseboardThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallBaseboardHeight=function(){return this.newWallBaseboardHeight};UserPreferences.prototype.setNewWallBaseboardHeight=function(a){if(this.newWallBaseboardHeight!==a){var b=this.newWallBaseboardHeight;this.newWallBaseboardHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_HEIGHT",b,a)}};UserPreferences.prototype.getNewRoomFloorColor=function(){return this.newRoomFloorColor};UserPreferences.prototype.setNewRoomFloorColor=function(b){if(this.newRoomFloorColor!==b){var a=this.newRoomFloorColor;this.newRoomFloorColor=b;this.propertyChangeSupport.firePropertyChange("NEW_ROOM_FLOOR_COLOR",a,b)}};UserPreferences.prototype.getNewFloorThickness=function(){return this.newFloorThickness};UserPreferences.prototype.setNewFloorThickness=function(a){if(this.newFloorThickness!==a){var b=this.newFloorThickness;this.newFloorThickness=a;this.propertyChangeSupport.firePropertyChange("NEW_FLOOR_THICKNESS",b,a)}};UserPreferences.prototype.getAutoSaveDelayForRecovery=function(){return this.autoSaveDelayForRecovery};UserPreferences.prototype.setAutoSaveDelayForRecovery=function(b){if(this.autoSaveDelayForRecovery!==b){var a=this.autoSaveDelayForRecovery;this.autoSaveDelayForRecovery=b;this.propertyChangeSupport.firePropertyChange("AUTO_SAVE_DELAY_FOR_RECOVERY",a,b)}};UserPreferences.prototype.getRecentHomes=function(){return this.recentHomes.slice(0)};UserPreferences.prototype.setRecentHomes=function(b){if(b!=this.recentHomes){var a=this.recentHomes;this.recentHomes=b.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_HOMES",a,this.getRecentHomes())}};UserPreferences.prototype.getRecentHomesMaxCount=function(){return 10};UserPreferences.prototype.getStoredCamerasMaxCount=function(){return 50};UserPreferences.prototype.setActionTipIgnored=function(a){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,a)};UserPreferences.prototype.isActionTipIgnored=function(a){return true};UserPreferences.prototype.resetIgnoredActionTips=function(){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,null)};UserPreferences.prototype.getDefaultTextStyle=function(a){if(a.name=="Room"){return UserPreferences.DEFAULT_ROOM_TEXT_STYLE}else{return UserPreferences.DEFAULT_TEXT_STYLE}};UserPreferences.prototype.getAutoCompletionStrings=function(b){var a=this.autoCompletionStrings.get(b);if(a!==undefined){return a.slice(0)}else{return[]}};UserPreferences.prototype.addAutoCompletionString=function(c,b){if(b!==null&&b.length>0){var a=this.autoCompletionStrings[c];if(a===undefined){a=[]}else{if(a.indexOf(b)<0){a=a.slice(0)}else{return}}a.splice(0,0,b);this.setAutoCompletionStrings(c,a)}};UserPreferences.prototype.setAutoCompletionStrings=function(b,c){var a=this.autoCompletionStrings[b];if(c!=a){this.autoCompletionStrings[b]=c.slice(0);this.propertyChangeSupport.firePropertyChange("AUTO_COMPLETION_STRINGS",null,b)}};UserPreferences.prototype.getAutoCompletedProperties=function(){if(this.autoCompletionStrings!==null){return Object.keys(this.autoCompletionStrings)}else{return[]}};UserPreferences.prototype.getRecentColors=function(){return this.recentColors};UserPreferences.prototype.setRecentColors=function(a){if(a!=this.recentColors){var b=this.recentColors;this.recentColors=a.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_COLORS",b,this.getRecentColors())}};UserPreferences.prototype.getRecentTextures=function(){return this.recentTextures};UserPreferences.prototype.setRecentTextures=function(b){if(b!=this.recentTextures){var a=this.recentTextures;this.recentTextures=b.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_TEXTURES",a,this.getRecentTextures())}};UserPreferences.prototype.setHomeExamples=function(a){if(a!=this.homeExamples){var b=this.homeExamples;this.homeExamples=a.slice(0);this.propertyChangeSupport.firePropertyChange("HOME_EXAMPLES",b,this.getHomeExamples())}};UserPreferences.prototype.getHomeExamples=function(){return this.homeExamples};UserPreferences.prototype.isCheckUpdatesEnabled=function(){};UserPreferences.prototype.setCheckUpdatesEnabled=function(a){};UserPreferences.prototype.isImportedImageResizedWithoutPrompting=function(){return true};function DefaultUserPreferences(b,a,f,d){UserPreferences.call(this);var g;var h;if(b!==undefined&&(typeof b==="boolean")){g=b;h=a;this.furnitureCatalogUrls=undefined;this.furnitureResourcesUrlBase=undefined;this.texturesCatalogUrls=undefined;this.texturesResourcesUrlBase=undefined}else{g=true;h=Locale.getDefault();this.furnitureCatalogUrls=b;this.furnitureResourcesUrlBase=a;this.texturesCatalogUrls=f;this.texturesResourcesUrlBase=d}var c=[];c.push(new DefaultPatternTexture("foreground"));c.push(new DefaultPatternTexture("reversedHatchUp"));c.push(new DefaultPatternTexture("reversedHatchDown"));c.push(new DefaultPatternTexture("reversedCrossHatch"));c.push(new DefaultPatternTexture("background"));c.push(new DefaultPatternTexture("hatchUp"));c.push(new DefaultPatternTexture("hatchDown"));c.push(new DefaultPatternTexture("crossHatch"));var e=new PatternsCatalog(c);this.setPatternsCatalog(e);this.setFurnitureCatalog(g&&(typeof DefaultFurnitureCatalog==="function")?(Array.isArray(b)?new DefaultFurnitureCatalog(b,a):new DefaultFurnitureCatalog(this)):new FurnitureCatalog());this.setTexturesCatalog(g&&(typeof DefaultTexturesCatalog==="function")?(Array.isArray(f)?new DefaultTexturesCatalog(f,d):new DefaultTexturesCatalog(this)):new TexturesCatalog());if(h=="en_US"){this.setUnit(LengthUnit.INCH);this.setNewWallThickness(7.62);this.setNewWallHeight(243.84);this.setNewWallBaseboardThickness(0.9525);this.setNewWallBaseboardHeight(6.35)}else{this.setUnit(LengthUnit.CENTIMETER);this.setNewWallThickness(7.5);this.setNewWallHeight(250);this.setNewWallBaseboardThickness(1);this.setNewWallBaseboardHeight(7)}this.setNewFloorThickness(12);this.setNavigationPanelVisible(false);this.setWallPattern(e.getPattern("hatchUp"));this.setNewWallPattern(this.getWallPattern());this.setAerialViewCenteredOnSelectionEnabled(true);this.setAutoSaveDelayForRecovery(60000)}DefaultUserPreferences.prototype=Object.create(UserPreferences.prototype);DefaultUserPreferences.prototype.constructor=DefaultUserPreferences;DefaultUserPreferences.prototype.write=function(){UserPreferences.prototype.write.call(this)};function DefaultPatternTexture(a){this.name=a;this.image=new URLContent(ZIPTools.getScriptFolder()+"resources/patterns/"+this.name+".png")}DefaultPatternTexture.__class="com.eteks.sweethome3d.io.DefaultPatternTexture";DefaultPatternTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage"];DefaultPatternTexture.__transients=["image"];DefaultPatternTexture.prototype.getName=function(){return this.name};DefaultPatternTexture.prototype.getCreator=function(){return null};DefaultPatternTexture.prototype.getImage=function(){return this.image};DefaultPatternTexture.prototype.getWidth=function(){return 10};DefaultPatternTexture.prototype.getHeight=function(){return 10};DefaultPatternTexture.prototype.equals=function(b){if(b===this){return true}else{if(b instanceof DefaultPatternTexture){var a=b;return a.name==this.name}else{return false}}};function RecordedUserPreferences(b){UserPreferences.call(this);if(b!==undefined){this.furnitureCatalogUrls=b.furnitureCatalogURLs;this.furnitureResourcesUrlBase=b.furnitureResourcesURLBase;this.texturesCatalogUrls=b.texturesCatalogURLs;this.texturesResourcesUrlBase=b.texturesResourcesURLBase;this.writePreferencesUrl=b.writePreferencesURL;this.readPreferencesUrl=b.readPreferencesURL;this.writeResourceUrl=b.writePreferencesResourceURL!==undefined?b.writePreferencesResourceURL:b.writeResourceURL;this.readResourceUrl=b.readPreferencesResourceURL!==undefined?b.readPreferencesResourceURL:b.readResourceURL;this.writingObserver=b.writingObserver}var a;if(b!==undefined&&b.defaultUserLanguage!==undefined){a=b.defaultUserLanguage}else{a=this.getLanguage()}this.uploadingBlobs={};this.properties={};this.setFurnitureCatalog(new FurnitureCatalog());this.setTexturesCatalog(new TexturesCatalog());if(this.readPreferencesUrl){this.updatePreferencesFromProperties(this.properties,a,false);this.readPreferences(this.properties,a)}else{this.updatePreferencesFromProperties(this.properties,a,true);this.addListeners()}}RecordedUserPreferences.prototype=Object.create(UserPreferences.prototype);RecordedUserPreferences.prototype.constructor=RecordedUserPreferences;RecordedUserPreferences.LANGUAGE="language";RecordedUserPreferences.UNIT="unit";RecordedUserPreferences.CURRENCY="currency";RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED="valueAddedTaxEnabled";RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE="defaultValueAddedTaxPercentage";RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE="furnitureCatalogViewedInTree";RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE="navigationPanelVisible";RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED="editingIn3DViewEnabled";RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED="aerialViewCenteredOnSelectionEnabled";RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE="observerCameraSelectedAtChange";RecordedUserPreferences.MAGNETISM_ENABLED="magnetismEnabled";RecordedUserPreferences.RULERS_VISIBLE="rulersVisible";RecordedUserPreferences.GRID_VISIBLE="gridVisible";RecordedUserPreferences.DEFAULT_FONT_NAME="defaultFontName";RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP="furnitureViewedFromTop";RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE="furnitureModelIconSize";RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED="roomFloorColoredOrTextured";RecordedUserPreferences.WALL_PATTERN="wallPattern";RecordedUserPreferences.NEW_WALL_PATTERN="newWallPattern";RecordedUserPreferences.NEW_WALL_THICKNESS="newWallThickness";RecordedUserPreferences.NEW_WALL_HEIGHT="newHomeWallHeight";RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS="newWallBaseboardThickness";RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT="newWallBaseboardHeight";RecordedUserPreferences.NEW_FLOOR_THICKNESS="newFloorThickness";RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY="autoSaveDelayForRecovery";RecordedUserPreferences.RECENT_HOMES="recentHomes#";RecordedUserPreferences.IGNORED_ACTION_TIP="ignoredActionTip#";RecordedUserPreferences.TEXTURE_NAME="textureName#";RecordedUserPreferences.TEXTURE_CREATOR="textureCreator#";RecordedUserPreferences.TEXTURE_CATEGORY="textureCategory#";RecordedUserPreferences.TEXTURE_IMAGE="textureImage#";RecordedUserPreferences.TEXTURE_WIDTH="textureWidth#";RecordedUserPreferences.TEXTURE_HEIGHT="textureHeight#";RecordedUserPreferences.prototype.getProperty=function(b,c,a){if(b[c]===undefined||b[c]===null){return a}return b[c]};RecordedUserPreferences.prototype.getProperties=function(){return this.properties};RecordedUserPreferences.prototype.setProperty=function(b,c,a){b[c]=a};RecordedUserPreferences.prototype.removeProperty=function(a,b){delete a[b]};RecordedUserPreferences.prototype.updatePreferencesFromProperties=function(j,k,e){this.setLanguage(this.getProperty(j,RecordedUserPreferences.LANGUAGE,k));if(e){this.updateDefaultCatalogs()}this.readModifiableTexturesCatalog(j);var g=new DefaultUserPreferences(false,k);g.setLanguage(this.getLanguage());var c=g.getPatternsCatalog();this.setPatternsCatalog(c);var l=LengthUnit[this.getProperty(j,RecordedUserPreferences.UNIT)];if(!l){l=g.getLengthUnit()}this.setUnit(l);this.setCurrency(this.getProperty(j,RecordedUserPreferences.CURRENCY,g.getCurrency()));this.setValueAddedTaxEnabled(this.getProperty(j,RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED,""+g.isValueAddedTaxEnabled())=="true");var m=this.getProperty(j,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE);var d=g.getDefaultValueAddedTaxPercentage();if(m!==null){try{d=new Big(m)}catch(h){}}this.setDefaultValueAddedTaxPercentage(d);this.setFurnitureCatalogViewedInTree(this.getProperty(j,RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE,""+g.isFurnitureCatalogViewedInTree())=="true");this.setNavigationPanelVisible(this.getProperty(j,RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE,""+g.isNavigationPanelVisible())=="true");this.setEditingIn3DViewEnabled(this.getProperty(j,RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED,""+g.isEditingIn3DViewEnabled())=="true");this.setAerialViewCenteredOnSelectionEnabled(this.getProperty(j,RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED,""+g.isAerialViewCenteredOnSelectionEnabled())=="true");this.setObserverCameraSelectedAtChange(this.getProperty(j,RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE,""+g.isObserverCameraSelectedAtChange())=="true");this.setMagnetismEnabled(this.getProperty(j,RecordedUserPreferences.MAGNETISM_ENABLED,"true")=="true");this.setRulersVisible(this.getProperty(j,RecordedUserPreferences.RULERS_VISIBLE,""+g.isMagnetismEnabled())=="true");this.setGridVisible(this.getProperty(j,RecordedUserPreferences.GRID_VISIBLE,""+g.isGridVisible())=="true");this.setDefaultFontName(this.getProperty(j,RecordedUserPreferences.DEFAULT_FONT_NAME,g.getDefaultFontName()));this.setFurnitureViewedFromTop(this.getProperty(j,RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP,""+g.isFurnitureViewedFromTop())=="true");this.setFurnitureModelIconSize(parseInt(this.getProperty(j,RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE,""+g.getFurnitureModelIconSize())));this.setFloorColoredOrTextured(this.getProperty(j,RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED,""+g.isRoomFloorColoredOrTextured())=="true");try{this.setWallPattern(c.getPattern(this.getProperty(j,RecordedUserPreferences.WALL_PATTERN,g.getWallPattern().getName())))}catch(h){this.setWallPattern(g.getWallPattern())}try{if(g.getNewWallPattern()!=null){this.setNewWallPattern(c.getPattern(this.getProperty(j,RecordedUserPreferences.NEW_WALL_PATTERN,g.getNewWallPattern().getName())))}}catch(h){}this.setNewWallThickness(parseFloat(this.getProperty(j,RecordedUserPreferences.NEW_WALL_THICKNESS,""+g.getNewWallThickness())));this.setNewWallHeight(parseFloat(this.getProperty(j,RecordedUserPreferences.NEW_WALL_HEIGHT,""+g.getNewWallHeight())));this.setNewWallBaseboardThickness(g.getNewWallBaseboardThickness());this.setNewWallBaseboardHeight(g.getNewWallBaseboardHeight());this.setNewWallBaseboardThickness(parseFloat(this.getProperty(j,RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS,""+g.getNewWallBaseboardThickness())));this.setNewWallBaseboardHeight(parseFloat(this.getProperty(j,RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT,""+g.getNewWallBaseboardHeight())));this.setNewFloorThickness(parseFloat(this.getProperty(j,RecordedUserPreferences.NEW_FLOOR_THICKNESS,""+g.getNewFloorThickness())));this.setAutoSaveDelayForRecovery(parseInt(this.getProperty(j,RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY,""+g.getAutoSaveDelayForRecovery())));var a=[];for(var f=1;f<=this.getRecentHomesMaxCount();f++){var b=this.getProperty(j,RecordedUserPreferences.RECENT_HOMES+f);if(b!=null){a.push(b)}}this.setRecentHomes(a);for(var f=1;;f++){var n=this.getProperty(j,RecordedUserPreferences.IGNORED_ACTION_TIP+f,"");if(n.length==0){break}else{this.ignoredActionTips[n]=true}}};RecordedUserPreferences.prototype.addListeners=function(){var a=this;this.addPropertyChangeListener("LANGUAGE",function(){a.updateDefaultCatalogs()});var e=function(){a.writtenPropertiesUpdated=true};var d=["LANGUAGE","UNIT","CURRENCY","VALUE_ADDED_TAX_ENABLED","DEFAULT_VALUE_ADDED_TAX_PERCENTAGE","FURNITURE_CATALOG_VIEWED_IN_TREE","NAVIGATION_PANEL_VISIBLE","EDITING_IN_3D_VIEW_ENABLED","AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED","OBSERVER_CAMERA_SELECTED_AT_CHANGE","MAGNETISM_ENABLED","GRID_VISIBLE","DEFAULT_FONT_NAME","FURNITURE_VIEWED_FROM_TOP","FURNITURE_MODEL_ICON_SIZE","ROOM_FLOOR_COLORED_OR_TEXTURED","NEW_WALL_PATTERN","NEW_WALL_THICKNESS","NEW_WALL_HEIGHT","NEW_WALL_BASEBOARD_THICKNESS","NEW_WALL_BASEBOARD_HEIGHT","NEW_FLOOR_THICKNESS"];for(var b=0;b<d.length;b++){var c=d[b];this.addPropertyChangeListener(c,e)}this.getTexturesCatalog().addTexturesListener(e)};RecordedUserPreferences.prototype.readPreferences=function(e,g){try{var c=this;var f=function(j){if(j!=null){var l=JSON.parse(j);for(var k in l){e[k]=l[k]}}c.updatePreferencesFromProperties(e,g,true);c.addListeners()};if(this.readPreferencesUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)===0){var i=this.readPreferencesUrl.substring(LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length);f(localStorage.getItem(i))}else{if(this.readPreferencesUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)===0){new IndexedDBURLContent(this.readPreferencesUrl).getBlob({blobReady:function(k){var j=new FileReader();j.onload=function(){f(j.result)};j.readAsText(k)},blobError:function(j,k){c.updateDefaultCatalogs();c.addListeners();if(j!=-1){console.log("Can't read preferences from indexedDB "+j+" "+k)}}})}else{var b=new XMLHttpRequest();var a=this.readPreferencesUrl.indexOf("?")!=-1?"&":"?";b.open("GET",this.readPreferencesUrl+a+"requestId="+UUID.randomUUID(),true);b.addEventListener("load",function(){if(b.readyState===XMLHttpRequest.DONE&&b.status===200){f(b.responseText)}else{c.updateDefaultCatalogs();c.addListeners()}});var h=function(j){console.log("Can't read preferences from server");c.updateDefaultCatalogs();c.addListeners()};b.addEventListener("error",h);b.addEventListener("timeout",h);b.timeout=10000;b.send()}}}catch(d){console.log(d);c.updateDefaultCatalogs();c.addListeners()}};RecordedUserPreferences.prototype.updateDefaultCatalogs=function(){var g=this.getFurnitureCatalog();for(var e=g.getCategories().length-1;e>=0;e--){var b=g.getCategory(e);for(var d=b.getFurniture().length-1;d>=0;d--){var k=b.getPieceOfFurniture(d);if(!k.isModifiable()){g["delete"](k)}}}var c=typeof DefaultFurnitureCatalog==="function"?(Array.isArray(this.furnitureCatalogUrls)?this.readFurnitureCatalogFromResource(this.furnitureCatalogUrls,this.furnitureResourcesUrlBase):new DefaultFurnitureCatalog(this)):new FurnitureCatalog();for(var e=0;e<c.getCategories().length;e++){var b=c.getCategory(e);for(var d=0;d<b.getFurniture().length;d++){var k=b.getPieceOfFurniture(d);g.add(b,k)}}var f=this.getTexturesCatalog();for(var e=f.getCategories().length-1;e>=0;e--){var b=f.getCategory(e);for(var d=b.getTextures().length-1;d>=0;d--){var h=b.getTexture(d);if(!h.isModifiable()){f["delete"](h)}}}var a=typeof DefaultTexturesCatalog==="function"?(Array.isArray(this.texturesCatalogUrls)?this.readTexturesCatalogFromResource(this.texturesCatalogUrls,this.texturesResourcesUrlBase):new DefaultTexturesCatalog(this)):new TexturesCatalog();for(var e=0;e<a.getCategories().length;e++){var b=a.getCategory(e);for(var d=0;d<b.getTextures().length;d++){var h=b.getTexture(d);f.add(b,h)}}};RecordedUserPreferences.prototype.readFurnitureCatalogFromResource=function(b,a){return new DefaultFurnitureCatalog(b,a)};RecordedUserPreferences.prototype.readTexturesCatalogFromResource=function(b,a){return new DefaultTexturesCatalog(b,a)};RecordedUserPreferences.prototype.readModifiableTexturesCatalog=function(b){var c;for(var a=1;(c=this.readModifiableTexture(b,a))!=null;a++){if(c.getImage().getURL()!=""){var d=this.readModifiableTextureCategory(b,a);this.getTexturesCatalog().add(d,c)}}};RecordedUserPreferences.prototype.readModifiableTexture=function(d,c){var b=this.getProperty(d,RecordedUserPreferences.TEXTURE_NAME+c,null);if(b==null){return null}var g=URLContent.fromURL(this.getProperty(d,RecordedUserPreferences.TEXTURE_IMAGE+c,""));var f=parseFloat(this.getProperty(d,RecordedUserPreferences.TEXTURE_WIDTH+c,"0.1"));var a=parseFloat(this.getProperty(d,RecordedUserPreferences.TEXTURE_HEIGHT+c,"0.1"));var e=this.getProperty(d,RecordedUserPreferences.TEXTURE_CREATOR+c,null);return new CatalogTexture(null,b,g,f,a,e,true)};RecordedUserPreferences.prototype.readModifiableTextureCategory=function(b,a){var c=this.getProperty(b,RecordedUserPreferences.TEXTURE_CATEGORY+a,"");return new TexturesCategory(c)};RecordedUserPreferences.prototype.write=function(){UserPreferences.prototype.write.call(this);if(this.writtenPropertiesUpdated){var g=this.getProperties();this.writeModifiableTexturesCatalog(g);this.setProperty(g,RecordedUserPreferences.LANGUAGE,this.getLanguage());this.setProperty(g,RecordedUserPreferences.UNIT,this.getLengthUnit().name());var h=this.getCurrency();if(h===null){this.removeProperty(g,RecordedUserPreferences.CURRENCY)}else{this.setProperty(g,RecordedUserPreferences.CURRENCY,h)}this.setProperty(g,RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED,""+this.isValueAddedTaxEnabled());var c=this.getDefaultValueAddedTaxPercentage();if(c===null){this.removeProperty(g,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE)}else{this.setProperty(g,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE,c.toString())}this.setProperty(g,RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE,""+this.isFurnitureCatalogViewedInTree());this.setProperty(g,RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE,""+this.isNavigationPanelVisible());this.setProperty(g,RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED,""+this.isEditingIn3DViewEnabled());this.setProperty(g,RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED,""+this.isAerialViewCenteredOnSelectionEnabled());this.setProperty(g,RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE,""+this.isObserverCameraSelectedAtChange());this.setProperty(g,RecordedUserPreferences.MAGNETISM_ENABLED,""+this.isMagnetismEnabled());this.setProperty(g,RecordedUserPreferences.RULERS_VISIBLE,""+this.isRulersVisible());this.setProperty(g,RecordedUserPreferences.GRID_VISIBLE,""+this.isGridVisible());var b=this.getDefaultFontName();if(b==null){this.removeProperty(g,RecordedUserPreferences.DEFAULT_FONT_NAME)}else{this.setProperty(g,RecordedUserPreferences.DEFAULT_FONT_NAME,b)}this.setProperty(g,RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP,""+this.isFurnitureViewedFromTop());this.setProperty(g,RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE,""+this.getFurnitureModelIconSize());this.setProperty(g,RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED,""+this.isRoomFloorColoredOrTextured());this.setProperty(g,RecordedUserPreferences.WALL_PATTERN,this.getWallPattern().getName());var k=this.getNewWallPattern();if(k!=null){this.setProperty(g,RecordedUserPreferences.NEW_WALL_PATTERN,k.getName())}this.setProperty(g,RecordedUserPreferences.NEW_WALL_THICKNESS,""+this.getNewWallThickness());this.setProperty(g,RecordedUserPreferences.NEW_WALL_HEIGHT,""+this.getNewWallHeight());this.setProperty(g,RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS,""+this.getNewWallBaseboardThickness());this.setProperty(g,RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT,""+this.getNewWallBaseboardHeight());this.setProperty(g,RecordedUserPreferences.NEW_FLOOR_THICKNESS,""+this.getNewFloorThickness());this.setProperty(g,RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY,""+this.getAutoSaveDelayForRecovery());var a=this.getRecentHomes();for(var d=0;d<a.length&&d<this.getRecentHomesMaxCount();d++){this.setProperty(g,RecordedUserPreferences.RECENT_HOMES+(d+1),a[d])}var f=Object.keys(this.ignoredActionTips);for(var d=0;d<f.length;d++){var j=f[d];if(this.ignoredActionTips[j]){this.setProperty(g,RecordedUserPreferences.IGNORED_ACTION_TIP+(d+1),j)}}if(Object.keys(this.uploadingBlobs).length>0){var e=this;setTimeout(function(){e.write()},1000)}else{this.writtenPropertiesUpdated=false;this.writePreferences(g)}}};RecordedUserPreferences.prototype.writePreferences=function(g){if(this.writePreferencesUrl){var d=this;if(this.writingPreferences){setTimeout(function(){d.writePreferences(g)},100)}else{this.writingPreferences=true;var b=JSON.stringify(g);var f=function(){if(d.writingObserver!==undefined&&d.writingObserver.writeSucceeded){d.writingObserver.writeSucceeded(g)}setTimeout(function(){delete d.writingPreferences},500)};var e=function(l,m){if(d.writingObserver!==undefined&&d.writingObserver.writeFailed){d.writingObserver.writeFailed(g,l,m)}setTimeout(function(){delete d.writingPreferences;d.writePreferences(g)},10000)};if(this.writePreferencesUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)===0){try{var k=this.writePreferencesUrl.substring(LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length);localStorage.setItem(k,b);f();delete d.writingPreferences}catch(h){e(h,h.message)}}else{if(this.writePreferencesUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)===0){var j=new BlobURLContent(new Blob([b],{type:"application/json"}));j.writeBlob(this.writePreferencesUrl,"",{blobSaved:function(m,l){URL.revokeObjectURL(j.getURL());f()},blobError:function(l,m){URL.revokeObjectURL(j.getURL());e(l,m)}})}else{var c=new XMLHttpRequest();var a=this.writePreferencesUrl.indexOf("?")!=-1?"&":"?";c.open("POST",this.writePreferencesUrl+a+"updateId="+UUID.randomUUID(),true);c.addEventListener("load",function(l){if(c.readyState===XMLHttpRequest.DONE){if(c.status===200){f()}else{e(c.status,c.responseText)}}});var i=function(l){e(0,"Can't post "+d.writePreferencesUrl)};c.addEventListener("error",i);c.addEventListener("timeout",i);c.send(b)}}}}};RecordedUserPreferences.prototype.setActionTipIgnored=function(a){this.ignoredActionTips[a]=true;UserPreferences.prototype.setActionTipIgnored.call(this,a)};RecordedUserPreferences.prototype.isActionTipIgnored=function(a){var b=this.ignoredActionTips[a];return b===true};RecordedUserPreferences.prototype.resetIgnoredActionTips=function(){var b=Object.keys(this.ignoredActionTips);for(var a=0;a<b.length;a++){this.ignoredActionTips[b[a]]=false}UserPreferences.prototype.resetIgnoredActionTips.call(this)};RecordedUserPreferences.prototype.addLanguageLibrary=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.languageLibraryExists=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.furnitureLibraryExists=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.addFurnitureLibrary=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.texturesLibraryExists=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.addTexturesLibrary=function(a){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.getLibraries=function(){throw new UnsupportedOperationException()};RecordedUserPreferences.prototype.writeModifiableTexturesCatalog=function(g){if(this.writeResourceUrl&&this.readResourceUrl){var e=1;var d=this.getTexturesCatalog();var c=this;for(var b=0;b<d.getCategoriesCount();b++){var f=d.getCategory(b);for(var a=0;a<f.getTexturesCount();a++){var k=f.getTexture(a);var h=k.getImage();if(k.isModifiable()&&h instanceof URLContent){this.setProperty(g,RecordedUserPreferences.TEXTURE_NAME+e,k.getName());this.setProperty(g,RecordedUserPreferences.TEXTURE_CATEGORY+e,f.getName());this.setProperty(g,RecordedUserPreferences.TEXTURE_WIDTH+e,k.getWidth());this.setProperty(g,RecordedUserPreferences.TEXTURE_HEIGHT+e,k.getHeight());if(k.getCreator()!=null){this.setProperty(g,RecordedUserPreferences.TEXTURE_CREATOR+e,k.getCreator())}else{this.removeProperty(g,RecordedUserPreferences.TEXTURE_CREATOR+e)}if(h instanceof LocalURLContent&&(!(h instanceof LocalStorageURLContent)||this.writeResourceUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)<0)&&(!(h instanceof IndexedDBURLContent)||this.writeResourceUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0)){if(!this.isSavedContentInResourceScope(h)){var l=this.uploadingBlobs[h.getURL()];if(l===undefined){h.getBlob({textureImage:h,blobReady:function(j){l=UUID.randomUUID();c.uploadingBlobs[this.textureImage.getURL()]=l;var i=j.type=="image/png"?".png":".jpg";var m=function(n,q,p){if(!c.isSavedContentInResourceScope(n)){var o=URLContent.fromURL(CoreTools.format(c.readResourceUrl.replace(/(%[^s])/g,"%$1"),encodeURIComponent(q)));n.setSavedContent(o)}delete c.uploadingBlobs[n.getURL()];c.setProperty(g,RecordedUserPreferences.TEXTURE_IMAGE+p,n.getSavedContent().getURL())};c.writeResource(h,l+i,e,m)},blobError:function(i,j){contentsObserver.resourcesError(i,j)}})}}else{delete c.uploadingBlobs[h.getURL()];this.setProperty(g,RecordedUserPreferences.TEXTURE_IMAGE+e,h.getSavedContent().getURL())}}else{if(h instanceof URLContent){this.setProperty(g,RecordedUserPreferences.TEXTURE_IMAGE+e,h.getURL())}}e++}}}for(;this.getProperty(g,RecordedUserPreferences.TEXTURE_NAME+e,null)!=null;e++){this.removeProperty(g,RecordedUserPreferences.TEXTURE_NAME+e);this.removeProperty(g,RecordedUserPreferences.TEXTURE_IMAGE+e);this.removeProperty(g,RecordedUserPreferences.TEXTURE_CATEGORY+e);this.removeProperty(g,RecordedUserPreferences.TEXTURE_WIDTH+e);this.removeProperty(g,RecordedUserPreferences.TEXTURE_HEIGHT+e);this.removeProperty(g,RecordedUserPreferences.TEXTURE_CREATOR+e)}}};RecordedUserPreferences.prototype.isSavedContentInResourceScope=function(a){var b=a.getSavedContent();return b!==null&&(!(b instanceof IndexedDBURLContent)||this.writeResourceUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0||b.getURL().indexOf(this.writeResourceUrl.substring(0,this.writeResourceUrl.indexOf("?")))===0)};RecordedUserPreferences.prototype.writeResource=function(c,d,b,e){var a=this;c.writeBlob(this.writeResourceUrl,d,{blobSaved:function(g,f){if(a.writingObserver!==undefined&&a.writingObserver.writeSucceeded){a.writingObserver.writeSucceeded(g.getBlob())}e(g,d,b)},blobError:function(f,g){if(a.writingObserver!==undefined&&a.writingObserver.writeFailed){a.writingObserver.writeFailed(c.getBlob(),f,g)}setTimeout(function(){if(c.getSavedContent()===null){a.writeResource(c,d,b,e)}else{e(c,b)}},10000)}})};function viewHome(e,c,a,b,d){return new HomePreviewComponent(e,c,a,b,d)}function viewHomeInOverlay(f,s){var g=4/3;if(s&&s.widthByHeightRatio){g=s.widthByHeightRatio}hideHomeOverlay();var o=document.createElement("div");o.setAttribute("id","viewerOverlay");o.style.position="absolute";o.style.left="0";o.style.top="0";o.style.zIndex="100";o.style.background="rgba(127, 127, 127, .5)";var m=document.getElementsByTagName("body").item(0);m.insertBefore(o,m.firstChild);var v=document.createElement("div");var l='<canvas id="viewerCanvas" class="viewerComponent"  style="background-color: #CCCCCC; border: 1px solid gray; position: absolute; outline: none; touch-action: none" tabIndex="1"></canvas><div id="viewerProgressDiv" style="position:absolute; width: 300px; background-color: rgba(128, 128, 128, 0.7); padding: 20px; border-radius: 25px">  <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 300px;"></progress>  <label id="viewerProgressLabel" class="viewerComponent" style="margin-top: 2px; margin-left: 10px; margin-right: 0px; display: block;"></label></div>';if(s&&(s.aerialViewButtonText&&s.virtualVisitButtonText||s.viewerControlsAdditionalHTML)){l+='<div id="viewerControls" style="position: absolute; padding: 10px; padding-top: 5px">';if(s.aerialViewButtonText&&s.virtualVisitButtonText){l+='   <input  id="aerialView" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>      <label class="viewerComponent" for="aerialView" style="visibility: hidden;">'+s.aerialViewButtonText+'</label>   <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;">      <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">'+s.virtualVisitButtonText+'</label>   <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>'}if(s.viewerControlsAdditionalHTML){l+=s.viewerControlsAdditionalHTML}l+="</div>"}v.innerHTML=l;o.appendChild(v);var i=new Image();i.src=ZIPTools.getScriptFolder()+"close.png";i.style.position="absolute";o.appendChild(i);o.escKeyListener=function(x){if(x.keyCode===27){hideHomeOverlay()}};document.addEventListener("keydown",o.escKeyListener);i.addEventListener("click",hideHomeOverlay);var t={mousePressed:function(x){t.mousePressedInOverlay=true},mouseClicked:function(x){if(t.mousePressedInOverlay){delete t.mousePressedInOverlay;hideHomeOverlay()}}};o.addEventListener("mousedown",t.mousePressed);o.addEventListener("click",t.mouseClicked);o.addEventListener("touchmove",function(x){x.preventDefault()});var w=self.innerWidth;var k=self.innerHeight;var u=document.documentElement.clientWidth;var j=document.documentElement.clientHeight;if(m&&m.scrollWidth){if(m.scrollWidth>u){u=m.scrollWidth}if(m.scrollHeight>j){j=m.scrollHeight}}var d=self.pageXOffset?self.pageXOffset:0;var b=self.pageYOffset?self.pageYOffset:0;o.style.height=Math.max(j,k)+"px";o.style.width=u<=w?"100%":u+"px";o.style.display="block";var e=document.getElementById("viewerCanvas");if(w<k*g){e.width=0.9*w;e.height=0.9*w/g}else{e.height=0.9*k;e.width=0.9*k*g}e.style.width=e.width+"px";e.style.height=e.height+"px";var q=d+(w-e.width-10)/2;e.style.left=q+"px";var r=b+(k-e.height-10)/2;e.style.top=r+"px";i.style.left=(q+e.width-5)+"px";i.style.top=(r-10)+"px";var p=document.getElementById("viewerControls");if(p){p.style.left=(q-10)+"px";p.style.top=(r+e.height)+"px";p.addEventListener("mousedown",function(x){x.stopPropagation()})}var h=document.getElementById("viewerProgressDiv");h.style.left=(q+(e.width-300)/2)+"px";h.style.top=(r+(e.height-50)/2)+"px";h.style.visibility="visible";var a=function(y){hideHomeOverlay();if(y=="No WebGL"){var x="Sorry, your browser doesn't support WebGL.";if(s.noWebGLSupportError){x=s.noWebGLSupportError}alert(x)}else{if(typeof y==="string"&&y.indexOf("No Home.xml entry")==0){var x="Ensure your home file was saved with Sweet Home 3D 5.3 or a newer version.";if(s.missingHomeXmlEntryError){x=s.missingHomeXmlEntryError}alert(x)}else{console.log(y.stack);alert("Error: "+(y.message?y.constructor.name+" "+y.message:y))}}};var n=function(z,A,x){var y=document.getElementById("viewerProgress");if(y){var B=null;if(z===HomeRecorder.READING_HOME){y.value=x*100;A=A.substring(A.lastIndexOf("/")+1);B=s&&s.readingHomeText?s.readingHomeText:z}else{if(z===ModelLoader.READING_MODEL){y.value=100+x*100;if(x===1){document.getElementById("viewerProgressDiv").style.visibility="hidden"}B=s&&s.readingModelText?s.readingModelText:z}}if(B!==null){document.getElementById("viewerProgressLabel").innerHTML=(x?Math.floor(x*100)+"% ":"")+B+" "+A}}};var c=HomePreviewComponent;if(s){if(s.homePreviewComponentContructor){c=s.homePreviewComponentContructor}if(s.aerialViewButtonText&&s.virtualVisitButtonText){e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel,aerialViewButtonId:"aerialView",virtualVisitButtonId:"virtualVisit",levelsAndCamerasListId:"levelsAndCameras",level:s.level,selectableLevels:s.selectableLevels,camera:s.camera,selectableCameras:s.selectableCameras,activateCameraSwitchKey:s.activateCameraSwitchKey})}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel})}}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n)}}function hideHomeOverlay(){var b=document.getElementById("viewerOverlay");if(b){var a=document.getElementById("viewerCanvas");if(a.homePreviewComponent){a.homePreviewComponent.dispose()}ModelManager.getInstance().clear();TextureManager.getInstance().clear();ZIPTools.clear();window.removeEventListener("keydown",b.escKeyListener);document.getElementsByTagName("body").item(0).removeChild(b)}}function HomePreviewComponent(f,d,a,c,e){if(document.getElementById(f)){var b=this;this.createHomeRecorder().readHome(d,{homeLoaded:function(j){try{var g=document.getElementById(f);if(g){if(e&&e.navigationPanel!="none"&&e.navigationPanel!="default"){function i(k){DefaultUserPreferences.call(this);this.navigationPanel=k}i.prototype=Object.create(DefaultUserPreferences.prototype);i.prototype.constructor=i;i.prototype.getLocalizedString=function(k,l,m){if(k===HomeComponent3D&&l=="navigationPanel.innerHTML"){return this.navigationPanel}else{return UserPreferences.prototype.getLocalizedString.call(this,k,l,m)}};b.preferences=new i(e.navigationPanel)}else{b.preferences=new DefaultUserPreferences()}b.home=j;b.controller=new HomeController3D(j,b.preferences);b.component3D=b.createComponent3D(f,j,b.preferences,b.controller);b.prepareComponent(f,c,e?{roundsPerMinute:e.roundsPerMinute,navigationPanelVisible:e.navigationPanel&&e.navigationPanel!="none",aerialViewButtonId:e.aerialViewButtonId,virtualVisitButtonId:e.virtualVisitButtonId,levelsAndCamerasListId:e.levelsAndCamerasListId,level:e.level,selectableLevels:e.selectableLevels,camera:e.camera,selectableCameras:e.selectableCameras,activateCameraSwitchKey:e.activateCameraSwitchKey}:undefined)}}catch(h){a(h)}},homeError:function(g){a(g)},progression:c})}else{a("No canvas with id equal to "+f)}}HomePreviewComponent.prototype.createHomeRecorder=function(){return new HomeRecorder()};HomePreviewComponent.prototype.createComponent3D=function(a){return new HomeComponent3D(a,this.getHome(),this.getUserPreferences(),null,this.getController())};HomePreviewComponent.prototype.prepareComponent=function(q,m,v){var g=v&&v.roundsPerMinute?v.roundsPerMinute:0;this.startRotationAnimationAfterLoading=g!=0;if(v&&typeof v.navigationPanelVisible){this.getUserPreferences().setNavigationPanelVisible(v.navigationPanelVisible)}var s=this.getHome();if(s.structure){s.getEnvironment().setAllLevelsVisible(true)}else{var h=function(){s.getEnvironment().setAllLevelsVisible(s.getCamera() instanceof ObserverCamera)};h();s.addPropertyChangeListener("CAMERA",h)}s.getEnvironment().setObserverCameraElevationAdjusted(true);this.trackFurnitureModels(m,g);var t=this;var e=function(){t.stopRotationAnimation();if(v&&v.aerialViewButtonId&&v.virtualVisitButtonId){if(s.getCamera()===s.getTopCamera()){document.getElementById(v.aerialViewButtonId).checked=true}else{document.getElementById(v.virtualVisitButtonId).checked=true}}};var y=function(){t.startRotationAnimationAfterLoading=false;s.setCamera(s.getCamera()===s.getTopCamera()?s.getObserverCamera():s.getTopCamera());e()};var b=document.getElementById(q);if(v===undefined||v.activateCameraSwitchKey===undefined||v.activateCameraSwitchKey){b.addEventListener("keydown",function(i){if(i.keyCode===32){y()}})}if(v&&v.aerialViewButtonId&&v.virtualVisitButtonId){var n=document.getElementById(v.aerialViewButtonId);n.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;s.setCamera(n.checked?s.getTopCamera():s.getObserverCamera())});var w=document.getElementById(v.virtualVisitButtonId);w.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;s.setCamera(w.checked?s.getObserverCamera():s.getTopCamera())});e();n.style.visibility="visible";w.style.visibility="visible";var f=function(A){var B=document.getElementsByTagName("label");for(var z=0;z<B.length;z++){if(B[z].getAttribute("for")==A){B[z].style.visibility="visible"}}};f(v.aerialViewButtonId);f(v.virtualVisitButtonId);s.addPropertyChangeListener("CAMERA",function(){e();if(s.structure&&v&&v.levelsAndCamerasListId){document.getElementById(v.levelsAndCamerasListId).disabled=s.getCamera()===s.getTopCamera()}})}if(v&&v.level){var d=s.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&a.getName()==v.level){s.setSelectedLevel(a);break}}}}if(v&&v.camera){var u=s.getStoredCameras();if(u.length>0){for(var o=0;o<u.length;o++){var p=u[o];if(p.getName()==v.camera){this.getController().goToCamera(p);break}}}}if(v&&v.levelsAndCamerasListId){var x=document.getElementById(v.levelsAndCamerasListId);x.disabled=s.structure!==undefined&&s.getCamera()===s.getTopCamera();var d=s.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&(!v.selectableLevels||v.selectableLevels.indexOf(a.getName())>=0)){var k=document.createElement("option");k.text=a.getName();k.level=a;x.add(k);if(a===s.getSelectedLevel()){x.selectedIndex=x.options.length-1}}}}if(v.selectableCameras!==undefined){var u=s.getStoredCameras();if(u.length>0){var c=x.options.length>0;for(var o=0;o<u.length;o++){var p=u[o];if(v.selectableCameras.indexOf(p.getName())>=0){if(c){x.add(document.createElement("option"));c=false}var k=document.createElement("option");k.text=p.getName();k.camera=p;x.add(k)}}}}if(x.options.length>1){var l=this.getController();x.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;var i=x.options[x.selectedIndex];if(i.level!==undefined){s.setSelectedLevel(i.level)}else{if(i.camera!==undefined){l.goToCamera(i.camera)}}});x.style.visibility="visible"}}if(g){var l=this.getController();l.goToCamera(s.getTopCamera());l.rotateCameraPitch(Math.PI/6-s.getCamera().getPitch());l.moveCamera(10000);l.moveCamera(-50);this.clickListener=function(i){t.startRotationAnimationAfterLoading=false;t.stopRotationAnimation()};b.addEventListener("keydown",this.clickListener);if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){b.addEventListener("pointerdown",this.clickListener);b.addEventListener("pointermove",this.clickListener)}else{b.addEventListener("mousedown",this.clickListener);b.addEventListener("touchstart",this.clickListener);b.addEventListener("touchmove",this.clickListener)}var j=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var o=0;o<j.length;o++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){j[o].addEventListener("pointerdown",this.clickListener)}else{j[o].addEventListener("mousedown",this.clickListener)}}this.visibilityChanged=function(i){if(document.visibilityState=="hidden"){t.stopRotationAnimation()}};document.addEventListener("visibilitychange",this.visibilityChanged);var r=b.getBoundingClientRect();if(r.top>=0&&r.bottom<=self.innerHeight){b.focus()}}};HomePreviewComponent.prototype.getHome=function(){return this.home};HomePreviewComponent.prototype.getComponent3D=function(){return this.component3D};HomePreviewComponent.prototype.getController=function(){return this.controller};HomePreviewComponent.prototype.getUserPreferences=function(){return this.preferences};HomePreviewComponent.prototype.trackFurnitureModels=function(o,h){var u=[];var b={};var k={};var s=this.getHome();var m=s.getFurniture();for(var q=0;q<m.length;q++){var c=m[q];var f=[];if(c instanceof HomeFurnitureGroup){var g=c.getAllFurniture();for(var p=0;p<g.length;p++){var n=g[p];if(!(n instanceof HomeFurnitureGroup)){f.push(n)}}}else{f.push(c)}u.push.apply(u,f);for(var p=0;p<f.length;p++){var d=f[p].getModel();if(d.isJAREntry()){var e=d.getJAREntryURL();if(e in b){b[e]++}else{b[e]=1}}var t=d.getURL();if(t in k){k[t]++}else{k[t]=1}}}if(u.length===0){o(ModelLoader.READING_MODEL,undefined,1)}else{var a=0;var r=this;for(var q=0;q<u.length;q++){var l=function(i){ModelManager.getInstance().loadModel(i.getModel(),false,{modelUpdated:function(x){var j=i.getModel();if(j.isJAREntry()){var w=j.getJAREntryURL();if(--b[w]===0){ZIPTools.disposeZIP(w);delete b[w]}}var v=j.getURL();if(--k[v]===0){ModelManager.getInstance().unloadModel(j);delete k[v]}o(ModelLoader.READING_MODEL,i.getName(),++a/u.length);if(a===u.length){r.component3D.disposeGeometries();u=[];if(r.startRotationAnimationAfterLoading){delete r.startRotationAnimationAfterLoading;r.startRotationAnimation(h)}}},modelError:function(j){this.modelUpdated()}})};l(u[q])}}};HomePreviewComponent.prototype.dispose=function(){this.stopRotationAnimation();if(this.component3D){if(this.clickListener){document.removeEventListener("visibilitychange",this.visibilityChanged);var b=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var a=0;a<b.length;a++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){b[a].removeEventListener("pointerdown",this.clickListener)}else{b[a].removeEventListener("mousedown",this.clickListener)}}}this.component3D.dispose()}};HomePreviewComponent.prototype.startRotationAnimation=function(a){this.roundsPerMinute=a!==undefined?a:1;if(!this.rotationAnimationStarted){this.rotationAnimationStarted=true;this.animate()}};HomePreviewComponent.prototype.animate=function(){if(this.rotationAnimationStarted){var b=Date.now();if(this.lastRotationAnimationTime!==undefined){var a=this.roundsPerMinute*2*Math.PI/60000;var d=((b-this.lastRotationAnimationTime)*a)%(2*Math.PI);d-=this.home.getCamera().getYaw()-this.lastRotationAnimationYaw;if(d>0){this.controller.rotateCameraYaw(d)}}this.lastRotationAnimationTime=b;this.lastRotationAnimationYaw=this.home.getCamera().getYaw();var c=this;requestAnimationFrame(function(){c.animate()})}};HomePreviewComponent.prototype.stopRotationAnimation=function(){delete this.lastRotationAnimationTime;delete this.lastRotationAnimationYaw;delete this.rotationAnimationStarted};